{
    "items": [{
        "tags": ["iot", "thingsboard", "thingsboard-gateway"],
        "is_answered": false,
        "view_count": 21,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1630441940,
        "creation_date": 1630441940,
        "question_id": 69005004,
        "link": "https://stackoverflow.com/questions/69005004/how-to-update-software-of-an-rpc-device-using-ota-updates-and-campaigns",
        "title": "How to update software of an RPC device using OTA updates and campaigns",
        "body": "<p>I am having an issue when trying to update an application (Ruby 2.7 to Ruby 3.0.2) from the OTA updates in the Thingsboard CE. The remote device is a NUC with the Thingsboard Gateway installed and configured properly (I set up a remote shell in dashboards and the connection was successful).\nAfter attaching an OTA update to a device group and the device group to the remote device, I went to Dashboards/Software and the update status was &quot;initialized&quot; as shown in the picture but the progress bar gets stuck</p>\n<p>Any thoughts on the issue will be appreciated</p>\n<p><a href=\"https://i.stack.imgur.com/E5Qok.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E5Qok.png\" alt=\"enter image description here\" /></a></p>\n"
    }, {
        "tags": ["node.js", "iot", "adafruit"],
        "is_answered": false,
        "view_count": 8,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1629892309,
        "creation_date": 1629892309,
        "question_id": 68922423,
        "link": "https://stackoverflow.com/questions/68922423/how-to-i-publish-and-subscribe-feeds-to-adafruit-mqtt-from-nodejs",
        "title": "How to I publish and subscribe feeds to Adafruit MQTT from NodeJS?",
        "body": "<p>I need to publish and subscribe feeds to Adafruit MQTT from nodeJs. I don't know how to do. please provide me some examples of it.</p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "certificate", "boto3", "iot"],
        "is_answered": false,
        "view_count": 18,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1628951993,
        "creation_date": 1628951993,
        "question_id": 68784300,
        "link": "https://stackoverflow.com/questions/68784300/aws-boto3-iot-how-to-get-the-content-of-a-certificate-of-a-thing",
        "title": "AWS Boto3 IoT - How to get the content of a certificate of a thing",
        "body": "<p>I am trying to bulk register devices using boto3. Although I successfully create things, I can not access the contents of the certificates using the SDK in python. AWS documentation doesn't have a method to get the string content of a certificate. Any idea how to do this action?</p>\n<p>Basically, I am trying to <strong>download</strong> a certificate using boto3,\n<a href=\"https://i.stack.imgur.com/3aG09.png\" rel=\"nofollow noreferrer\">like in the console here</a></p>\n"
    }, {
        "tags": ["amazon-web-services", "rest", "http", "iot", "shadow"],
        "is_answered": false,
        "view_count": 13,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1628841923,
        "creation_date": 1628841923,
        "question_id": 68768814,
        "link": "https://stackoverflow.com/questions/68768814/get-iot-device-shadow-from-http-rest",
        "title": "get iot device shadow from http rest",
        "body": "<p>Everyone!</p>\n<p>I'm interesting to get shadows of my IOT device from HTTP rest. I've follow aws instruction\n<a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-rest-api.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-rest-api.html</a></p>\n<p>Then I've got example code in aws to call rest request with authentication signature 4.</p>\n<pre><code>    # Copyright 2010-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n# This file is licensed under the Apache License, Version 2.0 (the &quot;License&quot;).\n# You may not use this file except in compliance with the License. A copy of the\n# License is located at\n#\n# http://aws.amazon.com/apache2.0/\n#\n# This file is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS\n# OF ANY KIND, either express or implied. See the License for the specific\n# language governing permissions and limitations under the License.\n#\n# ABOUT THIS PYTHON SAMPLE: This sample is part of the AWS General Reference \n# Signing AWS API Requests top available at\n# https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html\n#\n\n# AWS Version 4 signing example\n\n# EC2 API (DescribeRegions)\n\n# See: http://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n# This version makes a GET request and passes the signature\n# in the Authorization header.\nimport sys, os, base64, datetime, hashlib, hmac \nimport requests # pip install requests\n\n# ************* REQUEST VALUES *************\nmethod = 'GET'\nservice = 'iot'\nhost = 'a1tr2o248zti42-ats.iot.us-east-2.amazonaws.com'\nregion = 'us-east-2'\nendpoint = 'https://a1tr2o248zti42-ats.iot.us-east-2.amazonaws.com/things/&quot;my device&quot;/shadow'\nrequest_parameters = 'Action=DescribeRegions&amp;Version=2013-10-15'\nrequest_parameters = ''\n\n# Key derivation functions. See:\n# http://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-python\ndef sign(key, msg):\n    return hmac.new(key, msg.encode('utf-8'), hashlib.sha256).digest()\n\ndef getSignatureKey(key, dateStamp, regionName, serviceName):\n    kDate = sign(('AWS4' + key).encode('utf-8'), dateStamp)\n    kRegion = sign(kDate, regionName)\n    kService = sign(kRegion, serviceName)\n    kSigning = sign(kService, 'aws4_request')\n    return kSigning\n\n# Read AWS access key from env. variables or configuration file. Best practice is NOT\n# to embed credentials in code.\naccess_key = 'my key from IAM'\nsecret_key = 'my secret key from IAM'\nif access_key is None or secret_key is None:\n    print('No access key is available.')\n    sys.exit()\n\n# Create a date for headers and the credential string\nt = datetime.datetime.utcnow()\namzdate = t.strftime('%Y%m%dT%H%M%SZ')\ndatestamp = t.strftime('%Y%m%d') # Date w/o time, used in credential scope\n\n\n# ************* TASK 1: CREATE A CANONICAL REQUEST *************\n# http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n\n# Step 1 is to define the verb (GET, POST, etc.)--already done.\n\n# Step 2: Create canonical URI--the part of the URI from domain to query \n# string (use '/' if no path)\ncanonical_uri = '/' \n\n# Step 3: Create the canonical query string. In this example (a GET request),\n# request parameters are in the query string. Query string values must\n# be URL-encoded (space=%20). The parameters must be sorted by name.\n# For this example, the query string is pre-formatted in the request_parameters variable.\ncanonical_querystring = request_parameters\n\n# Step 4: Create the canonical headers and signed headers. Header names\n# must be trimmed and lowercase, and sorted in code point order from\n# low to high. Note that there is a trailing \\n.\ncanonical_headers = 'host:' + host + '\\n' + 'x-amz-date:' + amzdate + '\\n'\n\n# Step 5: Create the list of signed headers. This lists the headers\n# in the canonical_headers list, delimited with &quot;;&quot; and in alpha order.\n# Note: The request can include any headers; canonical_headers and\n# signed_headers lists those that you want to be included in the \n# hash of the request. &quot;Host&quot; and &quot;x-amz-date&quot; are always required.\nsigned_headers = 'host;x-amz-date'\n\n# Step 6: Create payload hash (hash of the request body content). For GET\n# requests, the payload is an empty string (&quot;&quot;).\npayload_hash = hashlib.sha256(('').encode('utf-8')).hexdigest()\n\n# Step 7: Combine elements to create canonical request\ncanonical_request = method + '\\n' + canonical_uri + '\\n' + canonical_querystring + '\\n' + canonical_headers + '\\n' + signed_headers + '\\n' + payload_hash\n\n\n# ************* TASK 2: CREATE THE STRING TO SIGN*************\n# Match the algorithm to the hashing algorithm you use, either SHA-1 or\n# SHA-256 (recommended)\nalgorithm = 'AWS4-HMAC-SHA256'\ncredential_scope = datestamp + '/' + region + '/' + service + '/' + 'aws4_request'\nstring_to_sign = algorithm + '\\n' +  amzdate + '\\n' +  credential_scope + '\\n' +  hashlib.sha256(canonical_request.encode('utf-8')).hexdigest()\n\n# ************* TASK 3: CALCULATE THE SIGNATURE *************\n# Create the signing key using the function defined above.\nsigning_key = getSignatureKey(secret_key, datestamp, region, service)\n\n# Sign the string_to_sign using the signing_key\nsignature = hmac.new(signing_key, (string_to_sign).encode('utf-8'), hashlib.sha256).hexdigest()\n\n\n# ************* TASK 4: ADD SIGNING INFORMATION TO THE REQUEST *************\n# The signing information can be either in a query string value or in \n# a header named Authorization. This code shows how to use a header.\n# Create authorization header and add to request headers\nauthorization_header = algorithm + ' ' + 'Credential=' + access_key + '/' + credential_scope + ', ' +  'SignedHeaders=' + signed_headers + ', ' + 'Signature=' + signature\n\n# The request can include any headers, but MUST include &quot;host&quot;, &quot;x-amz-date&quot;, \n# and (for this scenario) &quot;Authorization&quot;. &quot;host&quot; and &quot;x-amz-date&quot; must\n# be included in the canonical_headers and signed_headers, as noted\n# earlier. Order here is not significant.\n# Python note: The 'host' header is added automatically by the Python 'requests' library.\nheaders = {'x-amz-date':amzdate, 'Authorization':authorization_header}\n\n\n# ************* SEND THE REQUEST *************\nrequest_url = endpoint + '?' + canonical_querystring\n\nprint('\\nBEGIN REQUEST++++++++++++++++++++++++++++++++++++')\nprint('Request URL = ' + request_url)\nr = requests.get(request_url, headers=headers)\n\nprint('\\nRESPONSE++++++++++++++++++++++++++++++++++++')\nprint('Response code: %d\\n' % r.status_code)\nprint(r.text)\n</code></pre>\n<p>I've tried with this code on Lambda and I've got same results:</p>\n<p>START RequestId: 6ae186ca-0ebb-4ce8-be09-154dedb6b3d4 Version: $LATEST\nBEGIN REQUEST++++++++++++++++++++++++++++++++++++\nRequest URL = <a href=\"https://a1tr2o248zti42-ats.iot.us-east-2.amazonaws.com/things/BibaIot1/shadow\" rel=\"nofollow noreferrer\">https://a1tr2o248zti42-ats.iot.us-east-2.amazonaws.com/things/BibaIot1/shadow</a>\nRESPONSE++++++++++++++++++++++++++++++++++++\nResponse code: 403\n{&quot;message&quot;:&quot;Forbidden&quot;,&quot;traceId&quot;:&quot;3bc444f1-b186-2f0f-e72d-eeebd5f1802f&quot;}</p>\n<p>I've tried with postman but with the same error.</p>\n<p>Any ideas?</p>\n"
    }, {
        "tags": ["android", "ios", "objective-c", "bluetooth-lowenergy", "iot"],
        "is_answered": false,
        "view_count": 33,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1628679533,
        "creation_date": 1628679232,
        "last_edit_date": 1628679533,
        "question_id": 68740645,
        "link": "https://stackoverflow.com/questions/68740645/how-to-interact-with-iot-devices-using-ble-that-does-request-response-with-che",
        "title": "How to interact with IOT Devices using BLE that does Request &amp; Response with CheckSUM Logics in iOS",
        "body": "<p>I am using BLE with IOT Device. I need to send query request &amp; response to IOT Device as below</p>\n<p>The following is the typical query command syntax sent to device from the iOS</p>\n<pre><code>&lt;STT&gt;&lt;NOO&gt;&lt;TAG BLOCK&gt;&lt;INFO BLOCK &gt;&lt;CHKSUM&gt;&lt;ETO&gt;\n</code></pre>\n<p>Here, the TAG Block contains four bytes as described below</p>\n<pre><code>&lt;ID&gt;&lt;WID&gt;&lt;SC&gt;&lt;SO&gt;\n</code></pre>\n<p>Can you suggest any tutorial or docs for sending request to IOT Devices.</p>\n<p>Thanks IN Advance</p>\n"
    }, {
        "tags": ["iot", "esp32", "micropython"],
        "is_answered": false,
        "view_count": 35,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1626955215,
        "creation_date": 1626943103,
        "last_edit_date": 1626955215,
        "question_id": 68481716,
        "link": "https://stackoverflow.com/questions/68481716/micropython-https-request-blocks-further-requests",
        "title": "Micropython: https request blocks further requests",
        "body": "<p>I'm on a M5Stack atom lite running micropython, making <code>POST</code> requests to a given endpoint with json payload. The following code leads to suspicious behaviour:</p>\n<pre><code>  if (pin1.value()) == True:\n    if uart1.any():\n      try:\n        req = urequests.request(method='POST', url='https://my-server.com/my-endpoint', json={'requestCode':'yadayada'})\n\n        if req.status_code == 200:\n            rgb.setColorAll(0x00ff00)\n            rgb.setBrightness(100)\n            wait_ms(1500)\n            rgb.setBrightness(0)\n        else:\n          rgb.setColorAll(0xff0000)\n          rgb.setBrightness(100)\n          wait_ms(1500)\n          rgb.setBrightness(0)\n\n      except:\n        pass\n  wait_ms(2)\n</code></pre>\n<p>The first request succeeds and the correct payload is sent to the endpoint. Yet, all subsequent requests fail.</p>\n<ul>\n<li>The same holds true for <code>GET</code> requests to https endpoints.</li>\n<li>If I change to http, both <code>GET</code> and <code>POST</code> requests work fine, one after another.</li>\n<li>Defining the content type in the headers has no effect.</li>\n<li>Neither does closing the session right after the request (using headers).</li>\n</ul>\n<p>As of request 2, to a https endpoint, I get the exception:\n<code>OSError(-17040, 'MBEDTLS_ERR_RSA_PUBLIC_FAILED+MBEDTLS_ERR_MPI_ALLOC_FAILED')</code></p>\n<p>Does anyone see what I'm doing wrong with these https-requests? Thanks in advance for any hints!</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-sdk", "iot", "aws-iot", "aws-iot-core"],
        "is_answered": false,
        "view_count": 49,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1625723531,
        "creation_date": 1625580673,
        "last_edit_date": 1625723531,
        "question_id": 68272153,
        "link": "https://stackoverflow.com/questions/68272153/how-to-automate-the-process-of-certifying-the-devices-connecting-to-aws-iot-core",
        "title": "How to Automate the process of certifying the devices connecting to AWS IOT Core - JITR",
        "body": "<p>My goal is to build an IoT solution, Where I have <code>device -&gt; AWS IOT Core(mqtt) -&gt; AWS IOT Analytics -&gt; WebApplication (Dashboard)</code></p>\n<p>My question is related to this stage <code>device -&gt; AWS IOT Core(mqtt)</code>, is there a way to automate the process of authenticating a device to have access to AWS IoT Core?</p>\n<p>With some search I found that there's something called Just In Time Registration (JITR) for activating the device certificate. I had a look at the blog (<a href=\"https://aws.amazon.com/blogs/iot/just-in-time-registration-of-device-certificates-on-aws-iot/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/iot/just-in-time-registration-of-device-certificates-on-aws-iot/</a>).</p>\n<p>I'm wondering how JITR would help me to automate the process? Would I use the SDK for creating the certificates and signing them? The article is too vague to me and I'm a beginner at AWS.</p>\n"
    }, {
        "tags": ["javascript", "iot", "lorawan"],
        "is_answered": false,
        "view_count": 82,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1624991614,
        "creation_date": 1624984944,
        "question_id": 68182670,
        "link": "https://stackoverflow.com/questions/68182670/decoding-a-device-payload-sent-to-the-helium-console",
        "title": "Decoding a device payload sent to the Helium Console",
        "body": "<p>So I have defined an integration in the Helium Console (i.e. - an IoT LoRaWAN networking service). When I test out sending data from my IoT device to my Helium Console integration endpoint, I can see the payload. And I can manually decode it back to the JSON request body that's correct. But am having trouble defining a custom function in the Helium Console that will automate this for the integration. My IoT device is serializing a MsgPack payload of environmental data that's then sent to the Helium Console integration endpoint. And the Helium Console custom function allows Javascript, although just bare-bones without any requires, imports, etc.</p>\n<p>Below is the Python script that can manually decode the payload. If anyone is familiar with this area I'd be interested as to suggestions. There are pre-defined decoders available for Helium, although none that match exactly my hardware.</p>\n<p>If anyone has created custom decoding functions for Helium Console integrations I'd be curious as to how I could knock this out. Here is some info about this --&gt; <a href=\"https://docs.helium.com/use-the-network/console/functions/\" rel=\"nofollow noreferrer\">https://docs.helium.com/use-the-network/console/functions/</a>.</p>\n<pre><code>import ssl, sys, json, base64\nimport msgpack\n\npayload = &quot;haJiVspAozMzo3RfQxilZWNfbVMWonBoB6NvcnAC&quot;\n\n# decode the payload from base64 and unpack\nb64 = base64.b64decode(payload)\nmp_dict = msgpack.unpackb(b64)\n\nprint(mp_dict) # output is {'bV': 5.099999904632568, 't_C': 24, 'orp': 2, 'ph': 7, 'ec_mS': 22}\n</code></pre>\n"
    }, {
        "tags": ["firebase", "https", "arduino", "iot", "micropython"],
        "is_answered": true,
        "view_count": 70,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1624890902,
        "creation_date": 1624538442,
        "last_edit_date": 1624813347,
        "question_id": 68115972,
        "link": "https://stackoverflow.com/questions/68115972/can-i-use-https-and-sse-client-libraries-on-arduino-portenta-machine-control-boa",
        "title": "Can I use HTTPS and SSE client libraries on Arduino PORTENTA Machine Control board?",
        "body": "<p><em>I am looking for simple board for IoT professional projects. I bumped into the <a href=\"https://www.arduino.cc/pro/hardware/product/portenta-machine-control\" rel=\"nofollow noreferrer\">Arduino PORTENTA Machine Control board</a> a while back, but I cannot get some things sorted out:</em></p>\n<ul>\n<li><strong>What libraries can I use on this board (mainly <code>SSE</code> and <code>HTTPS</code> libraries)?</strong></li>\n<li>Does it have enough computational power to do <code>HTTPS</code> requests (not <code>HTTP</code> but <code>HTTPS</code>)?</li>\n</ul>\n<p><strong>What am I trying to achieve:</strong></p>\n<ul>\n<li><p>I am trying to build a project around Google\u2019s Firestore / Firebase.</p>\n</li>\n<li><p>I need to communicate to it via <code>REST API</code>.</p>\n</li>\n<li><p>Google enables only <code>HTTPS</code> communication with their databases \u2013 and<br />\nnormal Arduino boards can\u2019t do <code>HTTPS</code> requests because they do not<br />\nhave enough power.</p>\n</li>\n<li><p>So, I need either <code>SSE client</code> + <code>HTTPS requests</code> library to run on the<br />\nPORTENTA board <strong>OR</strong> Firebase Realtimedatabase library (I know the<br />\nlibrary is built on <code>HTTPS requests</code> \u2013 but if it\u2019s not compatible I can\nrecreate it with <code>SSE client</code> and <code>HTTPS requests</code>).</p>\n</li>\n</ul>\n<hr />\n<p><strong>Other info:</strong></p>\n<ul>\n<li>By <code>SSE</code> I mean <code>Server Send Events</code> for Realtime communication and\nupdates to the board :)</li>\n<li>I have no problem programming it in native Arduino language or in Micropython.</li>\n<li>The answer below states that I can use those libraries if the board is supported - but I don't know how to know if the board is supported :/</li>\n</ul>\n"
    }, {
        "tags": ["amazon-web-services", "lucene", "iot"],
        "is_answered": false,
        "view_count": 12,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1623440877,
        "creation_date": 1623440877,
        "question_id": 67942785,
        "link": "https://stackoverflow.com/questions/67942785/aws-fleet-indexing-attributes-not-equal-query",
        "title": "AWS Fleet Indexing attributes NOT EQUAL query",
        "body": "<p>Hey just wondering if it's possible to do a logical NOT EQUALS on two attributes within a document in AWS IoT Fleet Indexing?</p>\n<p>An example query would be the following:</p>\n<pre><code>shadow.reported.sw_version != shadow.desired.target_sw_version\n</code></pre>\n<p>Where a single document might look like:</p>\n<pre><code>{\n  &quot;shadow&quot;: {\n    &quot;desired&quot;: {\n      &quot;target_sw_version&quot;: 5\n    },\n    &quot;reported&quot;: {\n      &quot;sw_version&quot;: 2\n    }\n  }\n}\n</code></pre>\n<p>When I try this query I get:</p>\n<pre><code>Error\nThe action failed because the input is not valid. Unable to parse query, invalid syntax, query string: shadow.reported.sw_version != shadow.desired.target_sw_version\n</code></pre>\n<p>According to there docs the search engine is based off of the Lucene query syntax.<br />\nThe <a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/query-syntax.html\" rel=\"nofollow noreferrer\">docs</a> don't seem to have anything for this type of query. Does it mean it's not possible?</p>\n<p>If it's not possible what other alternatives are there to aggregate the number of IoT &quot;Things&quot; with these set of attributes using AWS IoT Core?</p>\n"
    }, {
        "tags": ["google-cloud-platform", "mqtt", "iot", "x509certificate", "at-command"],
        "is_answered": false,
        "view_count": 513,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1622816429,
        "creation_date": 1567186387,
        "question_id": 57731026,
        "link": "https://stackoverflow.com/questions/57731026/mqtt-certificates-for-at-commands-on-simcom-device",
        "title": "MQTT certificates for AT commands on Simcom device",
        "body": "<p>I'm figuring out how to use MQTT for google cloud. I've mentioned That that there ar no concrete documentation for this I found for AT commands and Google Cloud MQTT</p>\n\n<p>I'm using the Simcom 7600 module</p>\n\n<p><a href=\"https://simcom.ee/documents/SIM7X00/SIM7500_SIM7600_SIM7800%20Series_MQTT_AT%20Command%20Manual_V1.00.pdf\" rel=\"nofollow noreferrer\">AT documentation</a></p>\n\n<p>The documentation says it requests this:</p>\n\n<pre><code>+CSSLCFG: \"sslversion\",(0-9),(0-4)\n+CSSLCFG: \"authmode\",(0-9),(0-3)\n+CSSLCFG: \"ignorelocaltime\",(0-9),(0,1)\n+CSSLCFG: \"negotiatetime\",(0-9),(10-300)\n+CSSLCFG: \"cacert\",(0-9),(5-128)\n+CSSLCFG: \"clientcert\",(0-9),(5-128)\n+CSSLCFG: \"clientkey\",(0-9),(5-128)\n</code></pre>\n\n<p><a href=\"https://cloud.google.com/iot/docs/how-tos/credentials/keys?hl=it#generating_an_es256_key\" rel=\"nofollow noreferrer\">ca certs generation Google cloud</a></p>\n\n<p>So I generated the RSA keys:</p>\n\n<pre><code>openssl genpkey -algorithm RSA -out rsa_private.pem -pkeyopt rsa_keygen_bits:2048\nopenssl rsa -in rsa_private.pem -pubout -out rsa_public.pem\n#X.509 certificate for iot device in Google Cloud\nopenssl req -x509 -nodes -newkey rsa:2048 -keyout rsa_private.pem \\\n-out rsa_cert.pem -subj \"/CN=unused\"\n</code></pre>\n\n<p>After that I wanted to upload the certs using the following commands based on musquito settings and this python example <a href=\"https://github.com/tmcadam/sim7000-tools/blob/master/sim7000.py\" rel=\"nofollow noreferrer\">MQTT SIMCOM 7000 example</a> :</p>\n\n<pre><code>MQTT_URL = \"mqtt.googleapis.com\"\nCERTS_FOLDER = 'certs'\nCA_NAME = 'rsa_cert.pem'  # cacert 'mosquitto-ca.crt'\nCERT_NAME = 'rsa_private.pem'  # clientcert \"mosquitto.crt\"\nKEY_NAME = 'client.key'  # client key \"mosquitto.key\"\n</code></pre>\n\n<p>I modified the example to the baud rate for my module and the correct port. I'm already using it for calling and SMS, so I know it works. </p>\n\n<pre><code>    AT('+CFSINIT')\n    with open(os.path.join(CERTS_FOLDER, CA_NAME),'rb') as f:\n        data = f.read()\n        AT('+CFSWFILE=3,\"{}\",0,{},5000'.format(CA_NAME, len(data)), success=\"DOWNLOAD\")\n        send(data)\n    with open(os.path.join(CERTS_FOLDER, CERT_NAME),'rb') as f:\n        data = f.read()\n        AT('+CFSWFILE=3,\"{}\",0,{},5000'.format(CERT_NAME, len(data)), success=\"DOWNLOAD\")\n        send(data)\n    with open(os.path.join(CERTS_FOLDER, KEY_NAME),'rb') as f:\n        data = f.read()\n        AT('+CFSWFILE=3,\"{}\",0,{},5000'.format(KEY_NAME, len(data)), success=\"DOWNLOAD\")\n        send(data)\n    AT('+CFSTERM')\n</code></pre>\n\n<p>As an response I get: <code>ERROR</code> for all certs sadly enough. Help would be great on this part :) Thanks in advance.</p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "ibm-watson", "watson-iot"],
        "is_answered": false,
        "view_count": 79,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1622806852,
        "creation_date": 1606923300,
        "question_id": 65111230,
        "link": "https://stackoverflow.com/questions/65111230/ibm-watson-iot-platform-how-to-get-last-event-state-of-a-device",
        "title": "IBM Watson IoT Platform - How to get last event / state of a device",
        "body": "<p>I've created a device on Watson IoT Plattform online dashboard.\nThis device published data using Basic authentication with use-token-auth and its password:</p>\n<pre><code>URL: https://noz238.messaging.internetofthings.ibmcloud.com:8883/api/v0002/device/types/Light/devices/TestLight/events/status\nMethod: POST    \nBody: {&quot;isOn&quot;:false}\n</code></pre>\n<p>This send body is visible on the latest events view on <a href=\"https://noz238.internetofthings.ibmcloud.com/dashboard/devices/browse\" rel=\"nofollow noreferrer\">https://noz238.internetofthings.ibmcloud.com/dashboard/devices/browse</a></p>\n<p><strong>I have problems to get the latest state / event of this device using this REST API (and with an API key for visualizations). I did got unexpected responses trying different api's</strong></p>\n<p>I tried this endpoint: <a href=\"https://noz238.internetofthings.ibmcloud.com/api/v0002/device/types/Light/devices/TestLight/events\" rel=\"nofollow noreferrer\">https://noz238.internetofthings.ibmcloud.com/api/v0002/device/types/Light/devices/TestLight/events</a> (<a href=\"https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/info-mgmt.html#/Last%20Event%20Cache/get_device_types__deviceType__devices__deviceId__events\" rel=\"nofollow noreferrer\">https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/info-mgmt.html#/Last%20Event%20Cache/get_device_types__deviceType__devices__deviceId__events</a>)</p>\n<p>Answer:\nRC: 403</p>\n<pre><code>{\n    &quot;message&quot;: &quot;CUDCS0106E: &lt;missing messageId in bundle com.ibm.wiotp.util.httpservice.nls.servicemessages&gt;&quot;,\n    &quot;exception&quot;: {\n        &quot;id&quot;: &quot;CUDCS0106E&quot;,\n        &quot;properties&quot;: [\n            &quot;noz238&quot;\n        ]\n    }\n}\n</code></pre>\n<p>And I tried this endpoint: <a href=\"https://noz238.internetofthings.ibmcloud.com/api/v0002/device/types/Light/devices/TestLight/state/test\" rel=\"nofollow noreferrer\">https://noz238.internetofthings.ibmcloud.com/api/v0002/device/types/Light/devices/TestLight/state/test</a> (<a href=\"https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/state-mgmt.html#/Devices/get_device_types__typeId__devices__deviceId__state__logicalInterfaceId_\" rel=\"nofollow noreferrer\">https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/state-mgmt.html#/Devices/get_device_types__typeId__devices__deviceId__state__logicalInterfaceId_</a>)</p>\n<p>Answer:\nRC: 404</p>\n<pre><code>{\n    &quot;message&quot;: &quot;CUDIM0001E: No 'Device Type' with id 'Light' could be found in org 'noz238'&quot;,\n    &quot;exception&quot;: {\n        &quot;id&quot;: &quot;CUDIM0001E&quot;,\n        &quot;properties&quot;: [\n            &quot;noz238&quot;,\n            &quot;Light&quot;,\n            &quot;Device Type&quot;\n        ]\n    }\n}\n</code></pre>\n<p>How can I get the latest event / state of a device?</p>\n"
    }, {
        "tags": ["iot", "fiware"],
        "is_answered": false,
        "view_count": 27,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1621959477,
        "creation_date": 1621959477,
        "question_id": 67691885,
        "link": "https://stackoverflow.com/questions/67691885/iot-agent-checks-default-attributes-that-are-not-in-the-iot-payload",
        "title": "IoT-Agent checks default attributes that are not in the iot payload",
        "body": "<p>I have a test environment where I have configured a service group for the JSON IoT Agent with a legacy expression in it:</p>\n<pre><code>{\n            &quot;_id&quot;: &quot;60acc2d549e4721ae5087356&quot;,\n            &quot;__v&quot;: 0,\n            &quot;iotagent&quot;: &quot;http://10.0.0.2:4062&quot;,\n            &quot;apikey&quot;: &quot;apikeyTest2&quot;,\n            &quot;entity_type&quot;: &quot;WasteContainer&quot;,\n            &quot;service_path&quot;: &quot;/subservice&quot;,\n            &quot;service&quot;: &quot;service&quot;,\n            &quot;resource&quot;: &quot;/iot/json&quot;,\n            &quot;description&quot;: &quot;IoTAgent JSON - Node.js&quot;,\n            &quot;protocol&quot;: &quot;IoTA-JSON&quot;,\n            &quot;internal_attributes&quot;: [],\n            &quot;attributes&quot;: [\n                {\n                    &quot;name&quot;: &quot;temperature&quot;,\n                    &quot;object_id&quot;: &quot;t&quot;,\n                    &quot;type&quot;: &quot;Number&quot;\n                },\n                {\n                    &quot;name&quot;: &quot;fillingLevel&quot;,\n                    &quot;expression&quot;: &quot;${@level/100}&quot;,\n                    &quot;type&quot;: &quot;Number&quot;\n                }\n            ],\n            &quot;lazy&quot;: [],\n            &quot;static_attributes&quot;: [],\n            &quot;commands&quot;: []\n        }\n</code></pre>\n<p>Apart from that I register manually a device with a &quot;jexl&quot; as expression language:</p>\n<pre><code>curl --location --request POST 'https://host/iot/devices' \\\n--header 'Fiware-Service: service' \\\n--header 'Fiware-ServicePath: /subservice' \\\n--header 'X-Auth-Token: gAAAAABgrQm..._R8r98aeNWQ' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  &quot;devices&quot;: [\n    {\n      &quot;device_id&quot;: &quot;deviceJSON1&quot;,\n      &quot;entity_name&quot;: &quot;device:entity01&quot;,\n      &quot;entity_type&quot;: &quot;device&quot;,\n      &quot;expressionLanguage&quot;: &quot;jexl&quot;,\n      &quot;attributes&quot;: [\n        { \n          &quot;object_id&quot;: &quot;b&quot;,\n          &quot;name&quot;: &quot;position&quot;, \n          &quot;type&quot;: &quot;Number&quot;,\n          &quot;expression&quot;: &quot;(a+b)&quot;\n        }\n      ],\n      &quot;protocol&quot;: &quot;IoTA-JSON&quot;,\n      &quot;transport&quot;: &quot;HTTP&quot;\n    }\n  ]\n}\n'\n</code></pre>\n<p>Then I send data from the device using the apikey of the previous service group, but without using any attribute configured there:</p>\n<pre><code>curl --location --request POST 'http://host/iot/json?k=apikeyTest2&amp;i=deviceJSON1&amp;getCmd=0' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    &quot;a&quot;: 4,\n    &quot;b&quot;: 5\n}'\n\n</code></pre>\n<p>The response is 400 Bad Request:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;INVALID_EXPRESSION&quot;,\n    &quot;message&quot;: &quot;Invalid expression in evaluation [${@level/100}]&quot;\n}\n</code></pre>\n<p>Is this the expected result or should the agent try to use the &quot;jexl&quot; to transform the payload as there is not <code>level</code> attribute in the iot data?</p>\n<p>To solve this I can create another service group with a different apikey and without default attributes, but just wanted to know if the result was the expected.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "clientid"],
        "is_answered": false,
        "view_count": 24,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1621417300,
        "creation_date": 1621417300,
        "question_id": 67600752,
        "link": "https://stackoverflow.com/questions/67600752/aws-iot-mqtt-client-id-of-things-created-via-console",
        "title": "aws iot mqtt client id of &quot;things&quot; created via console",
        "body": "<p>I'm using the javascript aws-iot-device-sdk to connect my things to AWS IoT.</p>\n<p>I had one thing &quot;thing1&quot; created using aws iot cli (create-thing, create-keys-and-certificate, attach-policy, attach-thing-principal).</p>\n<p>And another thing &quot;thing2&quot; created in the AWS IoT console using the &quot;Things Create&quot; wizard.</p>\n<p>For both &quot;thing1&quot; and &quot;thing2&quot;, the command &quot;aws iot describe-thing&quot; returned defaultClientId  &quot;thing1&quot; and &quot;thing2&quot; respectively, which are the same strings as the device names.</p>\n<p>When I tested the device mqtt client (aws-iot-device-sdk/device), &quot;thing1&quot; could be initialized with clientId &quot;thing1&quot;:</p>\n<pre><code>const awsIoT = require('aws-iot-device-sdk');\nconst device = awsIoT.device({\n    keyPath: keyPath,\n    certPath: certPath,\n    caPath: caPath,\n    clientId: &quot;thing1&quot;,\n    host: endpointFile.endpointAddress\n});\n</code></pre>\n<p>But &quot;thing2&quot; did not work when the clientId was &quot;thing2&quot;. In this case, device.on(&quot;connect&quot;...) and device.on(&quot;error&quot; ...) did not happen, I could see only device.on('offline'...) and device.on('close'...)</p>\n<p>Finally, the working clientId for &quot;thing2&quot; was found inside start.sh in the connection kit which I downloaded from AWS IoT console: &quot;sdk-nodejs-e3f36aec-91f6-4e57-830c-abcdefqrstuvxyz&quot;:</p>\n<pre><code>const device = awsIoT.device({\n    keyPath: keyPath,\n    certPath: certPath,\n    caPath: caPath,\n    clientId: &quot;sdk-nodejs-e3f36aec-91f6-4e57-830c-abcdefqrstuvxyz&quot;,\n    host: endpointFile.endpointAddress\n});\n</code></pre>\n<p>Which aws iot cli command displays this clientId (the &quot;sdk-nodejs-e3f36aec-91f6-4e57-830c-abcdefqrstuvxyz&quot; which was mysteriously created by the AWS Iot console Things Create wizard)? Or where in the console can I find it? How can I change a client id?</p>\n"
    }, {
        "tags": ["ssl", "ssl-certificate", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 94,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1620961969,
        "creation_date": 1620953223,
        "question_id": 67527793,
        "link": "https://stackoverflow.com/questions/67527793/methods-for-updating-sha-1-fingerprint-on-iot-devices",
        "title": "Methods for updating SHA-1 fingerprint on IOT devices",
        "body": "<p>Disclaimer: Complete newbie trying to wrap my head around SSL.</p>\n<p>I am developing a device using an ESP8266 which needs to connect securely to a known server for IOT purposes, we will develop and control the server endpoint as well as the ESP8266 based client (BearSSL etc), we will not control the SSL certificate updates on the hosted server and need to manage the changing certificate keys.</p>\n<p>Using the SHA-1 fingerprint for the certificate installed on the server appears to be the most straightforward approach and will provide the basic security we need. The data we will be exchanging is not sensitive or mission critical, we just need to keep the web server happy going into the future.</p>\n<p>I understand the need to update the SHA-1 fingerprint on the client when the server certificate updates and this would typically be done with a firmware update over a secure connection. Our use case will make this very difficult for various reasons, so I am trying to establish the best method for updating the fingerprint as it changes without requiring re-flashing/OTA updates.</p>\n<p>What I don't understand is why there is a need to protect/hide/embed the fingerprint when any public user or hacker can visit our SSL server site and obtain the fingerprint through a browser or OpenSSL query. Can I simply not retrieve the current fingerprint (maybe encode it with our own basic encryption) from a known HTTP non SSL server perhaps running PHP which will obtain and calculate the current fingerprint of our SSL server for use by our IOT device ? Our device would query the HTTP server first, retrieve the fingerprint and store it in EEPROM until it expires, then simply re-obtain the new fingerprint as required. Then it goes off and talks to the SSL server.</p>\n<p>So the crux of the question is, if a hacker can get the fingerprint straight from our SSL server, why would this be an unsafe approach, which I'm sure it is ?</p>\n<p>I don't want to go down the trusted root CA with long expiry approach as our devices may need to run for 20-30 years and we'll need a device certificate update procedure regardless, and would prefer not to use ClientInsecure() if possible.</p>\n<p>Assuming the non-SSL HTTP approach is no good, can anybody suggest an alternate automated method for retrieving the current fingerprint securely ? I have to assume our devices may get left in a cupboard or disconnected from Wifi for years at a time and need to automatically re-connect in the future without a firmware update.</p>\n<p>Many thanks, and be gentle *8)</p>\n"
    }, {
        "tags": ["node.js", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 52,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1620504974,
        "creation_date": 1620504227,
        "last_edit_date": 1620504974,
        "question_id": 67451677,
        "link": "https://stackoverflow.com/questions/67451677/getting-started-with-aws-iot-publication-from-device",
        "title": "Getting started with AWS IoT publication from device",
        "body": "<p>I'm new to AWS IoT, so it's easily possible that I've simply missed the documentation I need. For the life of me, though, I can't find anything that helps.</p>\n<p>The problem I'm trying to solve is about as simple as it gets: from a Raspberry pi, already registered as a Thing in AWS-IoT, publish some data in a nodejs function. That's it. For now, I'm just trying to do this using certs that I've already generated for that particular Thing; eventually I want to use the API calls to actually create the corresponding Thing object and create and download its certs. That's for later, though. I figure if I can get the plain-vanilla publish scenario to work, I can do the other parts next.</p>\n<p>There is a new api for nodejs, <a href=\"https://github.com/aws/aws-iot-device-sdk-js-v2\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-iot-device-sdk-js-v2</a>. Most of the tutorials etc. that I've found pertain to the old api, which is completely different from the new one. Is there anything that explains, step by step, how to accomplish this simple task using the new api?</p>\n"
    }, {
        "tags": ["iot", "at-command", "modem"],
        "is_answered": true,
        "view_count": 138,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620374172,
        "creation_date": 1620131990,
        "last_edit_date": 1620374010,
        "question_id": 67384959,
        "link": "https://stackoverflow.com/questions/67384959/modem-at-commands-unable-to-get-into-data-mode-ppp",
        "title": "Modem AT commands, unable to get into data mode (PPP)",
        "body": "<p>I have a simcom7600 modem which I am trying out via AT commands.</p>\n<p>I was able to use AT commands to setup the modem, and connect to an MQTT broker and exchange messages. Now I am trying to figure out how I can do something similar, but then with my own TCP/IP stack. Before diving into the deep there, I would like to confirm that I can get into data mode (PPP) which I am not able to, it seems.</p>\n<p>I attached my modem (<code>AT+CGATT=1</code>), and activated it (<code>AT+ACACT=1,1</code>). I verified that I have a carrier/provider (<code>AT+COPS?</code>).</p>\n<p>So I thought I was all set to send the <code>ATO</code> (online) commands. But it returns <code>NO_CARRIER</code> every time I try. I have no idea what I am doing wrong.</p>\n<p>The logging that confirms above statements:</p>\n<pre><code>AT+COPS?\nSending command: AT+COPS?\nAT+COPS?[CR][CR][LF]+COPS: 0,0,&quot;NL KPN simyo&quot;,7[CR][LF][CR][LF]OK[CR][LF]\nAT+cgatt?\nSending command: AT+cgatt?\nAT+cgatt?[CR][CR][LF]+CGATT: 1[CR][LF][CR][LF]OK[CR][LF]\nAT+cgact?\nSending command: AT+cgact?\nAT+cgact?[CR][CR][LF]+CGACT: 1,1[CR][LF]+CGACT: 2,0[CR][LF]+CGACT: 3,0[CR][LF][CR][LF]OK[CR][LF]\nATO\nSending command: ATO\nATO[CR][CR][LF]NO CARRIER[CR][LF]\n</code></pre>\n<p>PS: the [CR][LF] stand for resp. <code>\\r</code> and <code>\\n</code>, I replace them before I log for ease of reading.</p>\n<p>I obviously have to supply more info to the modem, but from <a href=\"https://www.waveshare.com/wiki/File:SIM7500_SIM7600_Series_AT_Command_Manual_V1.08.pdf\" rel=\"nofollow noreferrer\">this manual</a> I can't seem to figure out which commands I miss, and how I could validate step by step that I am on the right track.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 23,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620261384,
        "creation_date": 1620261384,
        "question_id": 67410432,
        "link": "https://stackoverflow.com/questions/67410432/connecting-to-aws-iot-core-through-a-vpc",
        "title": "Connecting to AWS IOT Core through a VPC",
        "body": "<p>I have a device that needs to connect to AWS Iot MQTT broker but cannot use the standard url endpoint. Instead I must use a VPC with a static IP address.  How can I route the request to the IOT MQTT broker from the VPC?</p>\n"
    }, {
        "tags": ["eclipse", "iot", "eclipse-ditto", "ditto"],
        "is_answered": true,
        "view_count": 49,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1619955375,
        "creation_date": 1618756495,
        "question_id": 67149755,
        "link": "https://stackoverflow.com/questions/67149755/bulk-crud-with-ditto",
        "title": "Bulk CRUD with Ditto",
        "body": "<p>we want to handle a large amount of Things in Ditto. So my question: Is there a way to bulk create/read/update/delete? I wrote a test updating 10.000 features of Things in Ditto and this took &gt;2min. I think this mainly is a result of issuing 10.000 HTTP Requests rather than the MongoDB performance - bulk operations would fix this.</p>\n<p>Thanks in advance</p>\n<pre><code>   Thomas\n</code></pre>\n"
    }, {
        "tags": ["python", "flask", "web-applications", "automation", "iot"],
        "is_answered": false,
        "view_count": 17,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1619353813,
        "creation_date": 1619353813,
        "question_id": 67253420,
        "link": "https://stackoverflow.com/questions/67253420/controlling-my-nodemcu-through-google-assistant-using-micropython",
        "title": "Controlling my NodeMCU through Google Assistant using Micropython",
        "body": "<p>I want to create a voice command based home automation system. So I have initially tried create it using Arduino which was pretty common and easy using Blynk app and IFTTT where I could trigger the IO pins on NodeMCU using voice commands.</p>\n<p>But now I want to create a similar approach using Micropython coding on the NodeMCU. Hence I have setup a Flash web application on &quot;pythonanywhere.com&quot; and I used to send a POST request of an LedON string to the flash url route and then after that I would retrieve the information using GET on my NodeMCU using Micropython. But this approach seems very lame to me.</p>\n<p>So can anyone please tell me better approach on how I can do this?</p>\n<p>My basic objective is to use voice commands on Google Assistant(&quot;Lights ON&quot;) which would trigger the led on my NodeMCU using Micropython and Cloud Flash server or something else.</p>\n<p>Kindly help me out.</p>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-cloudformation", "iot"],
        "is_answered": true,
        "view_count": 509,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1619104978,
        "creation_date": 1598460267,
        "last_edit_date": 1619104978,
        "question_id": 63602133,
        "link": "https://stackoverflow.com/questions/63602133/how-to-add-aws-iot-provisioning-template-in-cloudformation-template-cdk",
        "title": "How to add AWS IoT provisioning template in Cloudformation template / CDK",
        "body": "<p>I am using Cloudformation template to create a stack including IoT fleet provisioning template and according to <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iot-provisioningtemplate.html\" rel=\"nofollow noreferrer\">the document</a> the IoT provisioning template body should be string type.</p>\n<p>I have the IoT fleet provisioning template like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>{\n  &quot;Parameters&quot;: {\n    &quot;SerialNumber&quot;: {\n      &quot;Type&quot;: &quot;String&quot;\n    },  \n    &quot;AWS::IoT::Certificate::Id&quot;: {\n      &quot;Type&quot;: &quot;String&quot;\n    }\n  },\n  &quot;Resources&quot;: {\n    &quot;certificate&quot;: {\n      &quot;Properties&quot;: {\n        &quot;CertificateId&quot;: {\n          &quot;Ref&quot;: &quot;AWS::IoT::Certificate::Id&quot;\n        },\n        &quot;Status&quot;: &quot;Active&quot;\n      },\n      &quot;Type&quot;: &quot;AWS::IoT::Certificate&quot;\n    },\n    &quot;policy&quot;: {\n      &quot;Properties&quot;: {\n        &quot;PolicyName&quot;: &quot;mypolicy&quot;\n      },\n      &quot;Type&quot;: &quot;AWS::IoT::Policy&quot;\n    },\n    &quot;thing&quot;: {\n      &quot;OverrideSettings&quot;: {\n        &quot;AttributePayload&quot;: &quot;MERGE&quot;,\n        &quot;ThingGroups&quot;: &quot;REPLACE&quot;,\n        &quot;ThingTypeName&quot;: &quot;REPLACE&quot;\n      },\n      &quot;Properties&quot;: {\n        &quot;AttributePayload&quot;: {       \n          &quot;SerialNumber&quot;: {\n            &quot;Ref&quot;: &quot;SerialNumber&quot;\n          }          \n        },             \n        &quot;ThingName&quot;: {\n          &quot;Ref&quot;: &quot;SerialNumber&quot;\n        }\n      },\n      &quot;Type&quot;: &quot;AWS::IoT::Thing&quot;\n    }\n  }\n}\n</code></pre>\n<p>The Cloudformation template is like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>AWSTemplateFormatVersion: '2010-09-09'\nDescription: &quot;Template to create iot&quot;\n\nResources: \n  FleetProvisioningTemplate:\n    Type: AWS::IoT::ProvisioningTemplate\n    Properties: \n      Description: Fleet provisioning template\n      Enabled: true      \n      ProvisioningRoleArn: &quot;arn:aws:iam::1234567890:role/IoT-role&quot;      \n      TemplateBody: String\n      TemplateName: mytemplate\n\n</code></pre>\n<p>I tried to use the JSON string of the IoT provisioning template for the template body but it didn't work. My question is how I can create an IoT provisioning template using Cloudformation template?</p>\n<p><strong>update</strong>\nIt turned out I can add the IoT provisioning template as a 'literal block'</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>AWSTemplateFormatVersion: '2010-09-09'\nDescription: &quot;Template to create iot&quot;\n\nResources: \n  FleetProvisioningTemplate:\n    Type: AWS::IoT::ProvisioningTemplate\n    Properties: \n      Description: Fleet provisioning template\n      Enabled: true      \n      ProvisioningRoleArn: &quot;arn:aws:iam::1234567890:role/IoT-role&quot;      \n      TemplateBody: |\n        {\n          &quot;Parameters&quot;: {\n            &quot;SerialNumber&quot;: {\n              &quot;Type&quot;: &quot;String&quot;\n            },\n            &quot;AWS::IoT::Certificate::Id&quot;: {\n              &quot;Type&quot;: &quot;String&quot;\n            }\n          },\n          &quot;Resources&quot;: {            \n            &quot;certificate&quot;: {\n              &quot;Properties&quot;: {\n                &quot;CertificateId&quot;: {\n                  &quot;Ref&quot;: &quot;AWS::IoT::Certificate::Id&quot;\n                },\n                &quot;Status&quot;: &quot;Active&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Certificate&quot;\n            },\n            &quot;policy&quot;: {\n              &quot;Properties&quot;: {\n                &quot;PolicyName&quot;: &quot;cto-full-function-dev&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Policy&quot;\n            },\n            &quot;thing&quot;: {\n              &quot;OverrideSettings&quot;: {\n                &quot;AttributePayload&quot;: &quot;MERGE&quot;,\n                &quot;ThingGroups&quot;: &quot;DO_NOTHING&quot;,\n                &quot;ThingTypeName&quot;: &quot;REPLACE&quot;\n              },\n              &quot;Properties&quot;: {\n                &quot;AttributePayload&quot;: {},\n                &quot;ThingGroups&quot;: [],\n                &quot;ThingName&quot;: {\n                  &quot;Ref&quot;: &quot;SerialNumber&quot;                  \n                },\n                &quot;ThingTypeName&quot;: &quot;cto&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Thing&quot;\n            }\n          }\n        }\n\n      TemplateName: mytemplate\n\n</code></pre>\n<p>But as soon as I added the PreProvisioningHook as <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iot-provisioningtemplate-provisioninghook.html\" rel=\"nofollow noreferrer\">the cloudformation document</a> says, the template fails with invalid request error.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>AWSTemplateFormatVersion: '2010-09-09'\nDescription: &quot;Template to create iot&quot;\n\nResources: \n  LambdaHook:\n    Type: AWS::Lambda::Function\n    ....\n  FleetProvisioningTemplate:\n    Type: AWS::IoT::ProvisioningTemplate\n    Properties: \n      Description: Fleet provisioning template\n      Enabled: true      \n      ProvisioningRoleArn: &quot;arn:aws:iam::1234567890:role/IoT-role&quot;  \n      PreProvisioningHook:               \n        TargetArn: {\n          &quot;Fn::GetAtt&quot;: [\n            &quot;LambdaHook&quot;,\n            &quot;Arn&quot;\n          ]\n        }\n        PayloadVersion: &quot;1.0&quot;    \n      TemplateBody: |\n        {\n          &quot;Parameters&quot;: {\n            &quot;SerialNumber&quot;: {\n              &quot;Type&quot;: &quot;String&quot;\n            },\n            &quot;AWS::IoT::Certificate::Id&quot;: {\n              &quot;Type&quot;: &quot;String&quot;\n            }\n          },\n          &quot;Resources&quot;: {            \n            &quot;certificate&quot;: {\n              &quot;Properties&quot;: {\n                &quot;CertificateId&quot;: {\n                  &quot;Ref&quot;: &quot;AWS::IoT::Certificate::Id&quot;\n                },\n                &quot;Status&quot;: &quot;Active&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Certificate&quot;\n            },\n            &quot;policy&quot;: {\n              &quot;Properties&quot;: {\n                &quot;PolicyName&quot;: &quot;cto-full-function-dev&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Policy&quot;\n            },\n            &quot;thing&quot;: {\n              &quot;OverrideSettings&quot;: {\n                &quot;AttributePayload&quot;: &quot;MERGE&quot;,\n                &quot;ThingGroups&quot;: &quot;DO_NOTHING&quot;,\n                &quot;ThingTypeName&quot;: &quot;REPLACE&quot;\n              },\n              &quot;Properties&quot;: {\n                &quot;AttributePayload&quot;: {},\n                &quot;ThingGroups&quot;: [],\n                &quot;ThingName&quot;: {\n                  &quot;Ref&quot;: &quot;SerialNumber&quot;                  \n                },\n                &quot;ThingTypeName&quot;: &quot;cto&quot;\n              },\n              &quot;Type&quot;: &quot;AWS::IoT::Thing&quot;\n            }\n          }\n        }\n\n      TemplateName: mytemplate\n\n</code></pre>\n<p>I also asked question on <a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=323595\" rel=\"nofollow noreferrer\">here</a> but no luck. Did any one have the same issue and fix it?</p>\n"
    }, {
        "tags": ["curl", "iot", "esp32", "arduino-esp8266", "ota"],
        "is_answered": false,
        "view_count": 226,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1618857198,
        "creation_date": 1618829636,
        "question_id": 67160638,
        "link": "https://stackoverflow.com/questions/67160638/how-to-post-bin-file-for-ota-in-esp32-without-manually-opening-the-page-in-the-b",
        "title": "How to post bin file for OTA in ESP32 without manually opening the page in the browser hosted in the webserver",
        "body": "<p>I am trying to trigger OTA update on a webserver hosted on ESP32 externally and <strong>without</strong> opening the browser address of the webserver.</p>\n<p>I have seen some examples where the OTA update action can be achieved if the ESP is connected as client, but I am looking for solutions where we can keep the ESP as the webserver only.\nSince, this action is assumed to be triggered over network so for that reasons, I will happily accept if any method curl, python/JavaScript http method, node red etc.</p>\n<p>This is the server part of  code running in ESP32:</p>\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;WebServer.h&gt; \n#include &lt;ESPmDNS.h&gt; \n#include &lt;Update.h&gt; \n#include &lt;WiFiManager.h&gt;  \nWebServer server(80);\n\n\nconst char* serverIndex = \n&quot;&lt;script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'&gt;&lt;/script&gt;&quot;\n&quot;&lt;form method='POST' action='#' enctype='multipart/form-data' id='upload_form'&gt;&quot;\n   &quot;&lt;input type='file' name='update'&gt;&quot;\n        &quot;&lt;input type='submit' value='Update'&gt;&quot;\n    &quot;&lt;/form&gt;&quot;\n &quot;&lt;div id='prg'&gt;progress: 0%&lt;/div&gt;&quot;\n &quot;&lt;script&gt;&quot;\n  &quot;$('form').submit(function(e){&quot;\n  &quot;e.preventDefault();&quot;\n  &quot;var form = $('#upload_form')[0];&quot;\n  &quot;var data = new FormData(form);&quot;\n  &quot; $.ajax({&quot;\n  &quot;url: '/update',&quot;\n  &quot;type: 'POST',&quot;\n  &quot;data: data,&quot;\n  &quot;contentType: false,&quot;\n  &quot;processData:false,&quot;\n  &quot;xhr: function() {&quot;\n  &quot;var xhr = new window.XMLHttpRequest();&quot;\n  &quot;xhr.upload.addEventListener('progress', function(evt) {&quot;\n  &quot;if (evt.lengthComputable) {&quot;\n  &quot;var per = evt.loaded / evt.total;&quot;\n  &quot;$('#prg').html('progress: ' + Math.round(per*100) + '%');&quot;\n  &quot;}&quot;\n  &quot;}, false);&quot;\n  &quot;window.location.href ='/login';&quot;\n  &quot;return xhr;&quot;\n  &quot;},&quot;\n  &quot;success:function(d, s) {&quot;\n  &quot;console.log('successok !')&quot; \n &quot;},&quot;\n &quot;error: function (a, b, c) {&quot;\n &quot;}&quot;\n &quot;});&quot;\n &quot;});&quot;\n &quot;&lt;/script&gt;&quot;;\n\nvoid setup()\n{\n//redundant parts have been removed intentionally\nWiFi.begin(ssid, pass);\nint  ct =0;\n\n\nwhile (!MDNS.begin(host)) { //http://esp32.local //http://shariq-room.local\n    Serial.println(&quot;Error setting up MDNS responder!&quot;);\n    delay(1000);\n    ct= ct+1000;\n\n    if (ct&gt;5000) {\n      Serial.println(&quot;MDNS cannot be set&quot;);\n      break;\n      \n    }\n  }\n  MDNS.addService(&quot;http&quot;, &quot;tcp&quot;, 80);\n\nserver.on(&quot;/serverIndex&quot;, HTTP_GET, []() {\n    server.sendHeader(&quot;Connection&quot;, &quot;close&quot;);\n    server.send(200, &quot;text/html&quot;, serverIndex);\n  });\n    \n        server.on(&quot;/update&quot;, HTTP_POST, []() {\n        server.sendHeader(&quot;Connection&quot;, &quot;close&quot;);\n        server.send(200, &quot;text/plain&quot;, (Update.hasError()) ? &quot;FAIL&quot; : &quot;OK&quot;);\n        ESP.restart();\n      }, []() {\n        Serial.println(&quot;OTA started &quot;);\n        HTTPUpload&amp; upload = server.upload();\n        if (upload.status == UPLOAD_FILE_START) {\n          Serial.printf(&quot;Update: %s\\n&quot;, upload.filename.c_str());\n          if (!Update.begin(UPDATE_SIZE_UNKNOWN)) { //start with max available size\n            Update.printError(Serial);\n          }\n        } else if (upload.status == UPLOAD_FILE_WRITE) {\n          /* flashing firmware to ESP*/\n          if (Update.write(upload.buf, upload.currentSize) != upload.currentSize) {\n            Update.printError(Serial);\n          }\n        } else if (upload.status == UPLOAD_FILE_END) {\n          if (Update.end(true)) { //true to set the size to the current progress\n            Serial.printf(&quot;Update Success: %u\\nRebooting...\\n&quot;, upload.totalSize);\n          } else {\n            Update.printError(Serial);\n          }\n        }\n      });\n      server.begin();\n}\nvoid loop()\n{\n  server.handleClient(); \n\n   delay(400); \n}\n</code></pre>\n<ul>\n<li>Now, this will allow me to select and chose a bin file , if I open\nthe localIP and process the OTA if &quot;update&quot; button is clicked.</li>\n<li>But the same &quot;act&quot; will fail to trigger it when using either of python\nscript of curl command. The curl command being copied from network section of chrome developer tools.</li>\n</ul>\n<p><strong>Python</strong> script is here.</p>\n<pre><code>##python\nimport requests\ndata = open(&quot;home_automate_inc_ota_v.0.2a.ino.esp32.bin&quot;, 'rb').read()\nfiles = {'file': open(&quot;home_automate_inc_ota_v.0.2a.ino.esp32.bin&quot;, 'rb')}\n#headers = {    &quot;Content-Type&quot;:&quot;application/binary&quot;,}\nheaders= { 'Accept': 'text/plain'}\nprint(&quot;started&quot;)\n upload = requests.post(&quot;http://192.168.0.7/update&quot;, data=data,headers=headers)\n#tried below method too\n# final_resp = requests.post(&quot;http://192.168.0.7/update&quot;, files=files, headers=headers)\nprint(&quot;done&quot;);\n</code></pre>\n<p>But I will get error on either of the post method like\n<strong>raise ConnectionError(err, request=request)\nrequests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))</strong></p>\n<p>The same when tried in <strong>curl</strong></p>\n<pre><code>curl &quot;http://192.168.0.50/update&quot; ^\n  -H &quot;Connection: keep-alive&quot; ^\n  -H &quot;Accept: */*&quot; ^\n  -H &quot;X-Requested-With: XMLHttpRequest&quot; ^\n  -H &quot;User-Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36&quot; ^\n  -H &quot;Content-Type: multipart/form-data; boundary=----#some hidden webkit data#&quot; ^\n  -H &quot;Origin: http://192.168.0.50&quot; ^\n  -H &quot;Referer: http://192.168.0.50/backup&quot; ^\n  -H &quot;Accept-Language: en-US,en;q=0.9&quot; ^\n  -H &quot;Cookie: ext_name=#some hidden cookie data#&quot; ^\n  --data-raw ^&quot;------#some hidden webkit data#^\n\nContent-Disposition: form-data; name=^\\^&quot;update^\\^&quot;; filename=^\\^&quot;home_automate_inc_ota_v.0.2a.ino.esp32.bin^\\^&quot;^\n\nContent-Type: application/octet-stream^\n\n^\n\n^\n\n------WebKitFormBoundaryPtpk4VGDdfwqS932--^\n\n^&quot; ^\n  --compressed ^\n  --insecure\n</code></pre>\n<p>Gives error as\n<strong>curl: (52) Empty reply from server</strong></p>\n<p>Hope I have explained the question well. Please let me know if you need any more clarifications.</p>\n<p>Regards,\nShariq</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 18,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1618655871,
        "creation_date": 1618645139,
        "question_id": 67135839,
        "link": "https://stackoverflow.com/questions/67135839/error-receiving-long-shadow-documents-in-aws-iot-core-mqtt",
        "title": "Error receiving Long Shadow documents in AWS IOT core (MQTT)",
        "body": "<p>I am using AWS-IOT embedded C sdk for MQTT communication.</p>\n<p>I am able to receive small messages from a named shadow, but when the shadow document is big and lots of fields, my application fails.? Mqtt has a limit of 128KB but shadow document is 1KB (Shadow has a limit of 8 KB).\nI am using shadowprefix/get/accepted to receive the document.</p>\n"
    }, {
        "tags": ["blockchain", "iot"],
        "is_answered": true,
        "view_count": 43,
        "favorite_count": 0,
        "closed_date": 1618214546,
        "score": 1,
        "last_activity_date": 1618213833,
        "creation_date": 1618212598,
        "question_id": 67054214,
        "link": "https://stackoverflow.com/questions/67054214/what-is-the-internet-of-mathematical-things",
        "title": "What is the internet of mathematical things?",
        "body": "<p>What is the internet of mathematical things? Is it different from the internet of things? What is the relationship between Blockchain and the internet of mathematical things?</p>\n<p>Note: I'm new in the IoT area. I have to write a report about the internet of mathematical things. Besides your answer, Please provide some resources or articles to read.</p>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub", "azure-iot-hub-device-management"],
        "is_answered": true,
        "view_count": 190,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1617805491,
        "creation_date": 1617262478,
        "last_edit_date": 1617805491,
        "question_id": 66900226,
        "link": "https://stackoverflow.com/questions/66900226/can%c2%b4t-create-a-iot-hub-device-group-no-supported-device-update-tags-found",
        "title": "Can&#180;t create a IoT Hub device group. No supported Device Update tags found",
        "body": "<p>I am currently following <a href=\"https://docs.microsoft.com/en-us/azure/iot-hub-device-update/create-update-group\" rel=\"nofollow noreferrer\">this</a> How-to-guide to create a device group to deploy an update to.</p>\n<p>All Prerequisites are met and worked flawlessly.\nIn short. I created a IoT-Hub and created a device update account following <a href=\"https://docs.microsoft.com/en-us/azure/iot-hub-device-update/create-device-update-account\" rel=\"nofollow noreferrer\">this guide</a> , and i Imported a new update described in <a href=\"https://docs.microsoft.com/en-us/azure/iot-hub-device-update/import-update\" rel=\"nofollow noreferrer\">this guide</a></p>\n<p>But now at <a href=\"https://docs.microsoft.com/en-us/azure/iot-hub-device-update/create-update-group#create-a-device-group-by-selecting-an-existing-iot-hub-tag\" rel=\"nofollow noreferrer\">this Point</a> I can't proceed, because there are no ungrouped devices detected. I added the tag in the device twin, but still. To give a better inside I listed my current stat below.</p>\n<p><strong>Devices:</strong>\n<a href=\"https://i.stack.imgur.com/JwRyL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JwRyL.png\" alt=\"Devices in the Hub\" /></a></p>\n<p><strong>partial device twin:</strong></p>\n<pre><code>    {\n    &quot;deviceId&quot;: &quot;1337&quot;,\n    &quot;status&quot;: &quot;enabled&quot;,\n    &quot;connectionState&quot;: &quot;Disconnected&quot;,\n    &quot;cloudToDeviceMessageCount&quot;: 0,\n    &quot;authenticationType&quot;: &quot;sas&quot;,\n    &quot;modelId&quot;: &quot;&quot;,\n    &quot;version&quot;: 9,\n    &quot;tags&quot;: {\n        &quot;ADUGroup&quot;: &quot;MyGroup123&quot;,\n        &quot;myNewTag&quot;: &quot;testing&quot;\n    },\n</code></pre>\n<p><strong>The image that should be deployed</strong></p>\n<p><a href=\"https://i.stack.imgur.com/xQK99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xQK99.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>The part where no groups are shown</strong></p>\n<p><a href=\"https://i.stack.imgur.com/FBvfU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FBvfU.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>The message I am getting when trying to create a new group</strong>\n<a href=\"https://i.stack.imgur.com/Bt6bS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bt6bS.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Message routing</strong>\n<a href=\"https://i.stack.imgur.com/u0suM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u0suM.png\" alt=\"enter image description here\" /></a></p>\n<p>My predictions are:</p>\n<ol>\n<li>that I can't do what I want with my 30-day free trial</li>\n<li>That something went wrong when creating an update instance of my Hub</li>\n<li>I'm adding the devices wrong</li>\n</ol>\n<p>Spoiler they are wrong.</p>\n<p>The device update client was missing.</p>\n"
    }, {
        "tags": ["sms", "iot", "messagebird"],
        "is_answered": false,
        "view_count": 145,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1617465244,
        "creation_date": 1593165703,
        "question_id": 62592388,
        "link": "https://stackoverflow.com/questions/62592388/messagebird-sms-webhook-confusing",
        "title": "Messagebird SMS webhook - confusing?",
        "body": "<p>I am evaluating MB I am not impressed with the support - who have not yet replied - so I am going to ask the question here.</p>\n<p>My issues is logically very simple.  I have a simple IOT device that uses SMS to receive commands and replies with a ststus.  The backend is oracle based so using APEX / ORDS.</p>\n<p>The send is ok.</p>\n<p>For the reply part, I have followed the doc exactly and created an endpoint that expects a POST as defined in the API SMS doc &quot;Receive and handle Inbound SMS&quot;:</p>\n<p><a href=\"https://developers.messagebird.com/api/sms-messaging/#receive-and-handle-inbound-sms\" rel=\"nofollow noreferrer\">https://developers.messagebird.com/api/sms-messaging/#receive-and-handle-inbound-sms</a></p>\n<p>I have tested the service with Google ARC and it seems fine.  Returns 200 and creates the record on the DB.</p>\n<p>However, it is not at all clear where in my account on messagebird I need to place this webhook.  The only option seems to be the &quot;Flow Builder&quot; and when I use the recommended template - Call HTTP endpoint with SMS, it is not possible to pass the parameters as defined in the API. (You cannot add you own parameters) and when I try other templates I canot get it to work.</p>\n<p>So the question is please, can someone tell be ow to get this webhook working?  It seems so trivial but I just cannot seem to get it to work</p>\n<p>I will be looking at other provider over the weekend because of the confusing layout and lack of support at MB.</p>\n<p>Thank you\nPJ</p>\n"
    }, {
        "tags": ["python-3.x", "amazon-web-services", "iot", "alexa"],
        "is_answered": false,
        "view_count": 144,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1617157413,
        "creation_date": 1608682089,
        "last_edit_date": 1609351247,
        "question_id": 65417443,
        "link": "https://stackoverflow.com/questions/65417443/why-are-my-lambda-alexa-hosted-skill-permissions-being-denied",
        "title": "Why are my lambda/alexa-hosted skill permissions being denied?",
        "body": "<p>My goal is to integrate an Alexa-hosted skill with AWS IoT. I'm getting an access denied exception runinng the following python code from <a href=\"https://stackoverflow.com/questions/54074440/data-acquisition-of-aws-iot-analytics\">this thread</a>:</p>\n<pre><code>iota = boto3.client('iotanalytics')  \nresponse = iota.get_dataset_content(datasetName='my_dataset_name',versionId='$LATEST',roleArn = &quot;arn:aws:iam::123456789876:role/iotTest&quot;)\ncontentState = response['status']['state']\n        \nif (contentState == 'SUCCEEDED') :\n    url = response['entries'][0]['dataURI']\n    stream = urllib.request.urlopen(url)\n    reader = csv.DictReader(codecs.iterdecode(stream, 'utf-8'))        \n</code></pre>\n<p>What's weird is that the get_dataset_content() method described <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/iotanalytics.html#IoTAnalytics.Client.get_dataset_content\" rel=\"nofollow noreferrer\">here</a> has no mention of needing permissions or credentials. Despite this, I have also gone through the steps to <a href=\"https://developer.amazon.com/en-US/docs/alexa/hosted-skills/alexa-hosted-skills-personal-aws.html\" rel=\"nofollow noreferrer\">use personal AWS resources with my alexa-hosted skill</a> with no luck. As far as I can tell there is no place for me to specify the ARN of the role with the correct permissions. What am I missing?</p>\n<p>Oh, and here's the error message the code above throws:</p>\n<pre><code>botocore.exceptions.ClientError: An error occurred (AccessDeniedException) when calling the GetDatasetContent operation: User: arn:aws:sts::123456789876:assumed-role/AlexaHostedSkillLambdaRole/a224ab4e-8192-4469-b56c-87ac9a34a3e8 is not authorized to perform: iotanalytics:GetDatasetContent on resource: arn:aws:iotanalytics:us-east-1:123456789876:dataset/my_project_name\n</code></pre>\n<p>I have created a role called demo, which has complete admin access. I have also given it the following trust relationship:</p>\n<pre><code>  &quot;Version&quot;: &quot;2012-10-17&quot;,\n  &quot;Statement&quot;: [\n    {\n      &quot;Sid&quot;: &quot;&quot;,\n      &quot;Effect&quot;: &quot;Allow&quot;,\n      &quot;Principal&quot;: {\n        &quot;Service&quot;: &quot;iotanalytics.amazonaws.com&quot;\n      },\n      &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n    },\n    {\n      &quot;Effect&quot;: &quot;Allow&quot;,\n      &quot;Principal&quot;: {\n        &quot;AWS&quot;: &quot;arn:aws:iam::123456789876:role/AlexaHostedSkillLambdaRole&quot;\n      },\n      &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n    }\n  ]\n} \n\n--- The trust relationships tab displays this as well: ---\nTrusted entities\nThe identity provider(s) iotanalytics.amazonaws.com\narn:aws:iam::858273942573:role/AlexaHostedSkillLambdaRole\n</code></pre>\n"
    }, {
        "tags": ["emulation", "iot", "device", "ota"],
        "is_answered": false,
        "view_count": 20,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1615473570,
        "creation_date": 1615473570,
        "question_id": 66584734,
        "link": "https://stackoverflow.com/questions/66584734/device-emulation-for-ota-update-iot",
        "title": "Device emulation for OTA update (IOT)",
        "body": "<p>I am trying to emulate device with OTA (over-the-air) possibility for IOT.</p>\n<p>What do i want to get as a result?</p>\n<ol>\n<li>Device should answer on some http request.\nexample:\nrequest: localhost:8080/colour\nresponse: green.</li>\n<li>Device should have ota endpoint.\nexample:\nrequest: localhost:8080/colour/ota?firmwareurl=http://storage.com/firmware0-0-2.elf\\bin\nresponse: firmware received</li>\n<li>After update, device should answer another color:\nexample:\nrequest: localhost:8080/colour\nresponse: blue</li>\n</ol>\n<p>At some moment i decided that emulating microcontrollers esp8266, esp32, ect thats good idea, i mistake.\nBut i don't really need some specific microcontroller, i need any with OTA function and possibility to run it a little easier then esp8266 or esp32.\nAll what i have tried didn't work on mac OS or didn't have enough examples to do this without pain.\nI've tried: Renode, Qemu (some variations esp32 or 8266).</p>\n"
    }, {
        "tags": ["api", "connection", "iot", "alexa", "alexa-app"],
        "is_answered": false,
        "view_count": 33,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1614893591,
        "creation_date": 1583027754,
        "question_id": 60471330,
        "link": "https://stackoverflow.com/questions/60471330/integrating-iot-device-with-amazon-alexa",
        "title": "Integrating IoT device with Amazon Alexa",
        "body": "<p>I am currently working on a IoT device (Air Quality Monitor)\nI am little confused how to provide Amazon Alexa integration with this device, could someone shed some light on this.?</p>\n\n<p>I did make a Google Smart Home connection based on <a href=\"https://stackoverflow.com/questions/47684403/integrating-iot-device-with-google-home\">this</a> ask. Now i have a success connection with google home and i'm interesting to make a similar connection for Amazon Alexa and Apple Siri (if possible).</p>\n\n<p><strong>Note: I not use Amazon Web Services!!</strong></p>\n\n<p>Thanks in advance</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot"],
        "is_answered": true,
        "view_count": 768,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1612838997,
        "creation_date": 1508967375,
        "question_id": 46942444,
        "link": "https://stackoverflow.com/questions/46942444/how-to-search-by-nested-property-in-aws-iot-rules-using-aws-iot-query-language",
        "title": "How to search by nested property in AWS IoT Rules using AWS IoT query language",
        "body": "<p>I'm trying to get AWS IoT rules trigger my actions. But the documentation is pretty poor. For some reason documentation think i'll have json payloads with nesting level=1 top. \nExample of my JSON payload:</p>\n\n<p><code>\"state\": {\n    \"reported\": {\n      \"movement\": \"yes\"\n    }\n  }\n}</code></p>\n\n<p>Query i'm using inside a rule \n<code>SELECT * FROM '$aws/things/thing-name/shadow/update/accepted' WHERE state.reported.movement=\"yes\"</code></p>\n\n<p>Documentation, i'm using: <a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/iot-sql-where.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/developerguide/iot-sql-where.html</a></p>\n\n<p>has information just about flat JSON object, i did try to use state.reported.movement, reported.movement, just movement and looks like none of them works</p>\n"
    }, {
        "tags": ["reverse-engineering", "iot", "qemu"],
        "is_answered": true,
        "view_count": 37,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1611241825,
        "creation_date": 1611015366,
        "question_id": 65783857,
        "link": "https://stackoverflow.com/questions/65783857/how-to-map-a-binary-to-a-an-architecture-libc-version",
        "title": "How to &quot;map&quot; a binary to a an architecture + libc version?",
        "body": "<p>I am wondering if there is a simple way in Linux, or maybe an existing open source project that will allow me to provide it a binary or firmware image and it will return both the architecture (aarch64, armv7-eabihf, armv7m, etc.) and the libc type (glibc, musl, uclibc) used?</p>\n<p>My hope is to be able to script a way to automatically grab the correct qemu-system-* image (e.g. <a href=\"https://azeria-labs.com/emulate-raspberry-pi-with-qemu/\" rel=\"nofollow noreferrer\">https://azeria-labs.com/emulate-raspberry-pi-with-qemu/</a>) for device emulation as well as the correct cross-compile toolchain (<a href=\"https://toolchains.bootlin.com/\" rel=\"nofollow noreferrer\">https://toolchains.bootlin.com/</a>) based on either a single binary to emulate (ideal), or a full firmware image (less ideal).</p>\n<p>Current understanding - Full architecture may be able to be &quot;mapped&quot; to toolchains.bootlin.com and qemu-system-* architectures based on output of the <code>file</code> command, maybe? Also, I know there are lots of answers here on SO that show similar answers for this question, but assume you have some kind of system access and can run commands like &quot;ldd&quot;. I'm looking for a solution that is based purely on static analysis of either a binary or if necessary a firmware image of an unknown device.</p>\n"
    }, {
        "tags": ["notifications", "iot", "m2m", "onem2m"],
        "is_answered": true,
        "view_count": 40,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1610490014,
        "creation_date": 1610482669,
        "question_id": 65691451,
        "link": "https://stackoverflow.com/questions/65691451/onem2m-changing-mn-cse-configurations-from-in-cse",
        "title": "OneM2M: Changing MN-CSE configurations from IN-CSE",
        "body": "<p>In oneM2M, I want to update the MN-CSE configurations by sending the command from IN-CSE to MN-CSE. How can I achieve this?</p>\n<p>My Approach: I am thinking of creating an AE on MN-CSE say CONFIG-AE. Every time I want to change anything, I will create a new Content Instance inside the container of CONFIG-AE. The container will have a subscription with the CONFIG-AE resource as the notificationURL. Now when we add new content instance, the request will be redirected to the POA (point of access) of CONFIG-AE. The POA will be basically an IPE implementation which will further process the action. Is the approach correct?</p>\n<pre><code>CONFIG-AE (POA=an IPE implementation)\n        |\n        |   \n        --------Container\n                    |\n                    |\n                    --------Subscription (notificationURL=path of CONFIG-AE)\n</code></pre>\n<p>Thanks in advance.</p>\n"
    }, {
        "tags": ["notifications", "iot", "m2m", "onem2m"],
        "is_answered": true,
        "view_count": 39,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1610488584,
        "creation_date": 1610475680,
        "question_id": 65689758,
        "link": "https://stackoverflow.com/questions/65689758/onem2m-notify-in-cse-of-the-new-resources-created-on-mn-cse",
        "title": "OneM2M: Notify IN-CSE of the new resources created on MN-CSE",
        "body": "<p>In oneM2M, all the resources created on MN-CSE node are stored in the database on the node itself. I also want to notify IN-CSE of the new resources that are created on the MN-CSE and save them in the datatbase there. How can I achieve this?</p>\n<p>My approach - currently, I am thinking of creating a subscription for each resource with IN-CSE address as the notificationURL. So that as soon as a new child resource is created for a resource, IN-CSE will be notified and IN-CSE will parse the notification and save the information in the database. Is the approach correct?</p>\n<p>Thanks in advance :)</p>\n"
    }, {
        "tags": ["api", "triggers", "real-time", "iot", "ifttt"],
        "is_answered": false,
        "view_count": 64,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1608694070,
        "creation_date": 1607494456,
        "last_edit_date": 1608694070,
        "question_id": 65211552,
        "link": "https://stackoverflow.com/questions/65211552/how-to-stop-polling-mode-for-trigger-in-ifttt",
        "title": "How to stop polling mode for trigger in IFTTT?",
        "body": "<p>We have created a real time trigger for IFTTT for our smart switches and it triggers based on switch status (whether switch is ON/OFF) and give notification, (<a href=\"https://platform.ifttt.com/docs/api_reference#realtime-api\" rel=\"nofollow noreferrer\">https://platform.ifttt.com/docs/api_reference#realtime-api</a>), now with the real time request IFTTT checks my endpoint, but the polling mode of IFTTT also continues. The IFTTT document says &quot;If you notify IFTTT that you are utilizing the Realtime API, we can limit the load on your service by polling less frequently.&quot;. My doubt is how can we notify IFTTT that we are using Realtime API, is there any setting in IFTTT for that.I want to completely remove the polling in ifttt and make it poll only when real time request is send.</p>\n<p>Here my point is when my switch is On/Off only at that time it should give a real-time trigger notification, and should not poll contineously checking the state. Now with the polling every 1 minute when my switch is On it gives trigger and action is called, but it needs to give trigger and generate action only once when the switch is ON.</p>\n<p>If someone knows please reply. Thanks in advance ..</p>\n"
    }, {
        "tags": ["php", "http", "post", "get", "iot"],
        "is_answered": false,
        "view_count": 105,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1608571575,
        "creation_date": 1549762062,
        "last_edit_date": 1549792415,
        "question_id": 54612525,
        "link": "https://stackoverflow.com/questions/54612525/trying-to-pass-login-credentials-through-http-need-workaround",
        "title": "Trying to pass login credentials through HTTP, need workaround",
        "body": "<p>To My Web Developing Friends:</p>\n\n<p>I just recently bought a GoGoGate2 Garage Door Opener, and I am attempting to set up a local workaround via HTTP request for firing the open event of the Garage Door Opener. (This is for use with an IoT hub). I tapped into my GoGoGate2 via IP and it brought me to a browser based UI. I used WireShark to sniff out HTTP requests that were firing on the open event. I came to the conclusion that the door could be open and closed via the following HTTP request.</p>\n\n<p><strong>OPENS DOOR:</strong>\n<a href=\"http://device-ip/isg/opendoor.php?numdoor=1&amp;status=2\" rel=\"nofollow noreferrer\">http://device-ip/isg/opendoor.php?numdoor=1&amp;status=2</a></p>\n\n<p><strong>CLOSES DOOR:</strong>\n<a href=\"http://device-ip/isg/opendoor.php?numdoor=1&amp;status=0\" rel=\"nofollow noreferrer\">http://device-ip/isg/opendoor.php?numdoor=1&amp;status=0</a></p>\n\n<p>Okay that was simple enough. When I fire the HTTP request from a computer or phone on my network, the request works and the door opens and closes perfectly. However, when I attempt to fire the HTTP request from my Hubitat, the event is not firing. I attempted to use my HTTP exactly as written from an incognito window in chrome and I received a message \"Restricted Access\". So apparently the Hubitat needs some sort of authentication to speak to the GoGoGate2 device.</p>\n\n<p>Is there some way I can tap into my Hubitat and use it to connect to my GoGoGate2 and have it save the login credentials? That's how I did it from my phone/computer. Is there no way to do this exact same thing from the Hubitat itself?</p>\n\n<p>Sorry if this is a noob question.</p>\n\n<p>Please note I have also tried using the format <code>login:password@device-ip/isg/opendoor.php?numdoor=1&amp;status=2</code>with no success</p>\n\n<p>Also, not sure if this is of assistance, but during the authentication process on the Garage Door Opener, the login is performed by performing a post method. From what I have sniffed out, this is the relevant information.</p>\n\n<pre><code>Request Method: POST\nRequest URI : /index.php/index.php\nConnection: keep-alive\\r\\n\nUpgrade-Insecure-Requests: 1\\r\\n\nContent-Type: application/x-www-form-urlencoded\\r\\n\n\nForm Item: \"login\" = \"mylogin\"\nKey: login\nValue: mylogin\n\nForm Item: \"pass\" = \"mypass\"\nKey: pass\nValue: mypass\n\nForm Item: \"sesion-abierta\" = \"1\"\nKey: sesion-abierta\nValue: 1\n\nForm Item: \"send-login\" = \"Sign In\"\nKey: send-login\nValue: Sign In\n</code></pre>\n\n<p>I am unsure how to pass post information in via HTTP request, if anyone has some insight on how to do this, or a work around?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Andy</p>\n"
    }, {
        "tags": ["wordpress", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 43,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1607872415,
        "creation_date": 1607872415,
        "question_id": 65277151,
        "link": "https://stackoverflow.com/questions/65277151/is-it-possible-to-display-data-from-aws-iot-on-wordpress",
        "title": "Is it possible to display data from AWS IoT on wordpress",
        "body": "<p>I want to display data from AWS Iot on my website which is running on wordpress. I read this post on AWS - <a href=\"https://aws.amazon.com/blogs/iot/route-data-directly-from-iot-core-to-your-web-services/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/iot/route-data-directly-from-iot-core-to-your-web-services/</a></p>\n<p>It says that we will need three things:</p>\n<ol>\n<li><p>You have access to AWS IoT console or have AWS CLI installed;</p>\n</li>\n<li><p>You have an existing HTTPS endpoint with a valid certificate signed by a public certificate authority (CA); and,</p>\n</li>\n<li><p>You can access that HTTPS endpoint\u2019s logs or can read messages sent to that endpoint.</p>\n</li>\n</ol>\n<p>While I have the first one, I am not sure of the second and the third. I have SSL certificate for my website.</p>\n<p><strong>Question 1</strong>: Does SSL certificate on website satisfy the second requirement?</p>\n<p><strong>Question 2</strong>: How do I create an endpoint on wordpress to receive this data from AWS?</p>\n<p><strong>Question 3</strong>: How do I access the endpoint logs?</p>\n<p><strong>Question 4</strong>: Once AWS sends the data to the wordpress endpoint, how do I display the data?</p>\n<p>It will be really helpful and a great learning for me if someone can answer these questions and guide me here</p>\n<p>Thanks</p>\n"
    }, {
        "tags": ["amazon-web-services", "elasticsearch", "iot"],
        "is_answered": false,
        "view_count": 36,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1606394848,
        "creation_date": 1606393078,
        "last_edit_date": 1606394848,
        "question_id": 65021929,
        "link": "https://stackoverflow.com/questions/65021929/unable-to-connect-aws-iot-with-aws-elasticsearch",
        "title": "Unable to connect AWS IOT with AWS Elasticsearch",
        "body": "<p>I am new to AWS and IOT. I am trying to connect my raspberry pi with AWS IOT and from there I am trying to push the data to Elasticsearch.</p>\n<p>I have managed to to connect raspberry pi with AWS IOT and able to see the data I have sent from Raspberry pi through &quot;Test&quot; in IOT console.</p>\n<p>I have created topic rule and configured elasticsearch endpoint, added IAM role.</p>\n<p>In rule destination i've entered the elasticsearch endpoint and created it but it shows the following message.</p>\n<p>&quot;Awaiting confirmation. Confirmation message sent on 2020-11-26T11:22:55.602Z. The destination responded with HTTP status code - 405.&quot;</p>\n<p>I am unable see any message in cloudwatch logs to get the token and confirm the destination.</p>\n<p>My elastic search access policy is set to open access to domain and the iot policy is as follows</p>\n<p>{\n&quot;Version&quot;: &quot;2012-10-17&quot;,\n&quot;Statement&quot;: [\n{\n&quot;Effect&quot;: &quot;Allow&quot;,\n&quot;Action&quot;: &quot;iot:<em>&quot;,\n&quot;Resource&quot;: &quot;</em>&quot;\n}\n]\n}</p>\n<p>I dont know whether I am doing it correct. Please help me to confirm the destination and stream data to elastic search.</p>\n<p>Thanks in advance,</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "ifttt"],
        "is_answered": true,
        "view_count": 6115,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1606299543,
        "creation_date": 1537453414,
        "question_id": 52427385,
        "link": "https://stackoverflow.com/questions/52427385/how-to-get-ifttt-maker-applet-api-key-for-aws-iot-button",
        "title": "How to get IFTTT Maker Applet API Key for AWS IoT Button",
        "body": "<p>I'm trying to connect my AWS IoT Button to do an IFTTT Maker Trigger, and it's asking for the API Key. I've looked in the settings of the IFTTT Maker Applet I created, and I don't see anything about an API Key. Any ideas of where else to look inside of IFTTT? They don't have a way to contact IFTTT Tech Support that I could find. Thanks!</p>\n"
    }, {
        "tags": ["iot", "coap", "lwm2m"],
        "is_answered": true,
        "view_count": 1562,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1605797386,
        "creation_date": 1447976808,
        "last_edit_date": 1605797386,
        "question_id": 33816497,
        "link": "https://stackoverflow.com/questions/33816497/how-to-send-firmware-package-from-lwm2m-leshan-server-to-lwm2m-wakaama-client",
        "title": "How to send firmware package from LWM2M Leshan server to LWM2M Wakaama client?",
        "body": "<p>I have a LwM2M Wakaama client working with a Leshan server. When I try to send a huge hexbinary string via the write option on Package resource for Firmware update object 5, I get the following error message on the client side:</p>\n<blockquote>\n<p>&quot;Block1 NOT IMPLEMENTED&quot;.</p>\n</blockquote>\n<p>I understand that block1 was not implemented on the wakaama client and only block2 was implemented, does anyone know why?</p>\n<p>Also, How can I make firmware update with package resource work with the Leshan Server and Wakaama Client?</p>\n<p>I believe I can either change the Leshan Server to send a request of type BLOCK2 (which I dont know how to do from the limited UI?) or add support for BLOCK1 on Wakaama LWM2M client.</p>\n<p>Has anyone tried this?</p>\n"
    }, {
        "tags": ["iot", "thingsboard"],
        "is_answered": false,
        "view_count": 85,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1605649034,
        "creation_date": 1603438358,
        "question_id": 64495780,
        "link": "https://stackoverflow.com/questions/64495780/user-cant-make-realation-with-rest-api-thingsboard",
        "title": "user cant make realation with rest api thingsboard",
        "body": "<p>I have a problem with thingsBoard, I can make a relation in the website with a user account and I tried to relate a device to an asset but when it comes to rest API it gives me a 403 error code.\nI used swagger UI and I used entity-relation API and I used save relation API for this.</p>\n<p><a href=\"https://i.stack.imgur.com/yYhkC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yYhkC.png\" alt=\"image\" /></a></p>\n"
    }, {
        "tags": ["debugging", "gunicorn", "iot", "network-protocols"],
        "is_answered": false,
        "view_count": 43,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1605088350,
        "creation_date": 1605007721,
        "question_id": 64768063,
        "link": "https://stackoverflow.com/questions/64768063/is-there-a-way-to-determine-protocol-that-was-attempted-to-connect-to-your-http",
        "title": "Is there a way to determine protocol that was attempted to connect to your &quot;HTTP server&quot;?",
        "body": "<p>I have a following scenario: my client only knows, that they have a device where you are allowed to list HTTP addresses (or at least addresses that look like HTTP addresses), which will send a request to that address when they &quot;press a button&quot; (basicly they have a way of triggering the process based on their physical operations).</p>\n<p>I have built a <code>gunicorn</code> server to listen for their requests, but I only get <code>[WARNING] Invalid HTTP request received</code>. This doesn't tell much, but after doing some research, it seems that this warning comes up quite often when wrong protocol was used. Also, by using <code>curl</code> I am unable to replicate the problem, no matter how I try to make the request malformed.</p>\n<p>I would like to add something in front of the server that would be able to detect if the request received would be HTTP 2.0, 1.1, 1.0, UDP, WebSocket... whatever; I just want to know what they are sending me. I am especially interested in HTTP versions (even though curl with 1.0 vs 1.1 doesn't fail with me) and UDP as those are the most probable candidates for the problem.</p>\n<p>Is there a nice tool for this?</p>\n"
    }, {
        "tags": ["api", "schema", "iot", "tuya"],
        "is_answered": false,
        "view_count": 738,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1604432293,
        "creation_date": 1559670277,
        "last_edit_date": 1604432293,
        "question_id": 56448949,
        "link": "https://stackoverflow.com/questions/56448949/what-is-the-tuya-api-referring-to-when-they-ask-for-the-schema-in-some-of-thei",
        "title": "What is the Tuya API referring to when they ask for the &quot;schema&quot; in some of their Open API calls?",
        "body": "<p>I have accessed the Tuya cloud using their API.  I can't use any of the API calls that uses the \"schema\".  I assume this is the name of my iOS app?  Does anyone have an example of a working call that uses \"schema\"?</p>\n\n<p>For example I have tried \"sensorstat\" and \"com.status.sensor\" while calling API \"get user list\".  I expected the API to give me a list of users registered through the application.</p>\n\n<p>I get a permission denied response.:\n{\n    \"code\": 1106,\n    \"msg\": \"permission deny\",\n    \"success\": false,\n    \"t\": 1559669799846\n}</p>\n"
    }, {
        "tags": ["android", "amazon-web-services", "iot", "aws-iot", "aws-iot-core"],
        "is_answered": false,
        "view_count": 123,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1604056311,
        "creation_date": 1603968971,
        "last_edit_date": 1604056311,
        "question_id": 64589702,
        "link": "https://stackoverflow.com/questions/64589702/awsiotclient-createkeysandcertificate-stopped-working-in-production-application",
        "title": "AWSIotClient createKeysAndCertificate stopped working in production Application",
        "body": "<blockquote>\n<p>createKeysAndCertificate stopped working in the production application, it was working perfectly but suddenly started giving UnknownOperationException with status code 400. Please help me for the same. Here is the code which is used to create keys and certificate. TIA</p>\n</blockquote>\n<pre><code>   Thread(Runnable {\n\n            try {\n             \n\n                val createKeysAndCertificateRequest = CreateKeysAndCertificateRequest()\n            \n\n\n                createKeysAndCertificateRequest.setAsActive = true\n         \n\n                val createKeysAndCertificateResult: CreateKeysAndCertificateResult\n\n                createKeysAndCertificateResult=mIotAndroidClient.createKeysAndCertificate(createKeysAndCertificateRequest)\n\n          \n\n\n                // store in keystore for use in MQTT client\n                // saved as alias &quot;default&quot; so a new certificate isn't\n                // generated each run of this application\n                AWSIotKeystoreHelper.saveCertificateAndPrivateKey(certificateId,\n                        createKeysAndCertificateResult.certificatePem,\n                        createKeysAndCertificateResult.keyPair.privateKey,\n                        keystorePath, keystoreName, keystorePassword)\n\n\n                // loadad keystore from file into memory to pass on\n                // connection\n                clientKeyStore = AWSIotKeystoreHelper.getIotKeystore(certificateId,\n                        keystorePath, keystoreName, keystorePassword)\n            \n\n\n                // Attach a policy to the newly created certificate.\n                // This flow assumes the policy was already created in\n                // AWS IoT and we are now just attaching it to the\n                // certificate.\n                val policyAttachRequest = AttachPrincipalPolicyRequest()\n              \n\n                policyAttachRequest.policyName = AwsManager.AWS_IOT_POLICY_NAME\n                policyAttachRequest.principal = createKeysAndCertificateResult\n                        .certificateArn\n                mIotAndroidClient.attachPrincipalPolicy(policyAttachRequest)\n                Log.i(TAG, &quot;onCreate: attachPrincipalPolicy&quot;)\n\n                runOnUiThread {\n                    // if(!this.isFinishing &amp;&amp; progressDialog.isShowing)\n                    //   progressDialog.dismiss()\n                }\n            }catch ( e:java.lang.Exception){\n               Log.e(TAG,\n                     &quot;Exception occurred when generating new private key and certificate.&quot;+\n                       e.message);\n            }\n        }).start()\n</code></pre>\n<blockquote>\n<p>Here is the exact log</p>\n</blockquote>\n<pre><code>com.amazonaws.AmazonServiceException:  (Service: AWSIot; Status Code: 400; Error Code: UnknownOperationException; Request ID: 8bc52f99-850a-4d3d-9a50-ad03833)\n    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:731)\n    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:405)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:212)\n    at com.amazonaws.services.iot.AWSIotClient.invoke(AWSIotClient.java:11411)\n    at com.amazonaws.services.iot.AWSIotClient.createKeysAndCertificate(AWSIotClient.java:1697)\n    at com.proj.login.LoginActivity$generateKey$1.run(LoginActivity.kt:496)\n    at java.lang.Thread.run(Thread.java:919)\n</code></pre>\n"
    }, {
        "tags": ["javascript", "node.js", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 32,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1603461861,
        "creation_date": 1603461861,
        "question_id": 64501515,
        "link": "https://stackoverflow.com/questions/64501515/connect-nodejs-client-toaws-iot-through-mqtt",
        "title": "Connect NodeJS client toAWS IoT through MQTT",
        "body": "<p>I'm trying to use NodeJS to connect my Raspberry Pi to AWS IoT and send some MQTT message. I am using the <code>aws-iot-device-sdk</code> library and this is actually my test code</p>\n<pre><code>var awsIot = require('aws-iot-device-sdk');\n\nvar device = awsIot.device({\n    keyPath: '../certs/*******-private.pem.key',\n    certPath: '../certs/*******-certificate.pem.crt',\n    caPath: '../certs/root-ca-certification.pem',\n    clientId: 'provola',\n    host: '*******-ats.iot.us-east-1.amazonaws.com',\n});\n\ndevice.on('connect', function () {\n    console.log('connect');\n    device.subscribe('topic_1');\n    device.publish('topic_2', JSON.stringify({ test_data: 1 }));\n});\n\ndevice.on('message', function (topic, payload) {\n    console.log('message', topic, payload.toString());\n});\n</code></pre>\n<p>But when I run it, the only thing I get is the message <code>connect</code> printed continuously.<br />\nI tried to run the same code even on my laptop but I get the same result.</p>\n<p>Moreover I would like to know where to get the CA certificate for the <code>caPath</code> parameter, because actually I don't know if it is correct.</p>\n"
    }, {
        "tags": ["mysql", "c", "arduino", "iot", "esp8266wifi"],
        "is_answered": true,
        "view_count": 53,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1603292819,
        "creation_date": 1603291505,
        "question_id": 64466096,
        "link": "https://stackoverflow.com/questions/64466096/connecting-to-a-mysql-database-with-an-esp8266wifi-chip",
        "title": "Connecting to a MySQL database with an ESP8266WiFi chip",
        "body": "<p>I'm trying to connect to a remote MySQL database directly from my arduino to do some telemetry on some hardware. However the code gets stuck while connecting to the db, and gives always the answer &quot;no db found&quot;. Where am I wrong?</p>\n<p>I'm sure that I'm correct with the user/pass thing, however I really can't figure out why it won't connect to the db to execute the query.</p>\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;MySQL_Connection.h&gt;\n#include &lt;MySQL_Cursor.h&gt;\n\nchar ssid[] = &quot;mywifissid&quot;;\nchar pass[] = &quot;mywifipass&quot;;\nchar mysqlUser[] = &quot;mysqluser&quot;;\nchar mysqlPass[] = &quot;mysqlpassword&quot;;\nchar id[] = &quot;someidforthearduino&quot;;\nWiFiClient wifiClient;\nMySQL_Connection mysqlConnection ((Client *)&amp;wifiClient);\nIPAddress mysqlServer (/*some kind of address for the mySQL server*/);\nbool is_Sending = false;\nchar queryToExecute[128];\nchar queryUpdate[] = &quot;somequery&quot;;\nint nPresses = 0;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println(&quot;Inizializzazione pin in corso...&quot;);\n  pinMode(D4, INPUT_PULLUP);\n  Serial.println(&quot;Connessione alla rete in corso...&quot;);\n  WiFi.disconnect();\n  WiFi.begin(ssid,pass);\n  while(WiFi.status() != WL_CONNECTED) {\n    delay(200);\n    Serial.print(&quot;.&quot;);\n  }\n  Serial.println(&quot;&quot;);\n  Serial.print(&quot;Connesso con ip &quot;);\n  Serial.println(WiFi.localIP());\n  Serial.println(&quot;Inizializzazione completata&quot;);\n}\n\nvoid loop() {\n if (!digitalRead(D4) &amp;&amp; !is_Sending) {\n    is_Sending = true;\n    nPresses++;\n    Serial.println(&quot;Rilevata pressione tasto. Connessione in corso...&quot;);\n    if (mysqlConnection.connect(mysqlServer,3306,mysqlUser,mysqlPass)) {\n      Serial.println(&quot;&quot;);\n      Serial.println(&quot;Connesso. Inserimento dato...&quot;);\n      sprintf(queryToExecute, queryUpdate, nPresses, id);\n      MySQL_Cursor *c = new MySQL_Cursor(&amp;mysqlConnection);\n      c-&gt;execute(queryToExecute);\n      delete c;\n      Serial.println(&quot;Aggiornamento effettuato!&quot;);  \n    } else {\n      Serial.println(&quot;No db found.&quot;);\n    }\n    mysqlConnection.close();\n    is_Sending = false;\n    \n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["javascript", "amazon-web-services", "react-native", "iot", "publish-subscribe"],
        "is_answered": false,
        "view_count": 481,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1603172769,
        "creation_date": 1554673457,
        "question_id": 55563934,
        "link": "https://stackoverflow.com/questions/55563934/why-is-my-subscribe-function-not-running",
        "title": "Why is my Subscribe Function not Running?",
        "body": "<p>I have followed the example on the AWS website to a tee\n<a href=\"https://aws-amplify.github.io/docs/js/pubsub\" rel=\"nofollow noreferrer\">https://aws-amplify.github.io/docs/js/pubsub</a></p>\n\n<p>and no matter what happens every time I run \nawait PubSub.publish\nI get no response from AWS. Any Help would be appreciated. \nI am getting time outs for the code.</p>\n\n<p>Triend diffrent ways of interacting with AWS over MQTT react-native. Searched everywhere. No examples of this being used. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import Amplify, { PubSub, Auth } from 'aws-amplify';\r\n\r\nimport { AWSIoTProvider } from '@aws-amplify/pubsub/lib/Providers';\r\n\r\nimport aws_exports from './src/aws-exports';\r\n\r\n// aythentication import\r\nimport { withAuthenticator } from 'aws-amplify-react-native';\r\nAmplify.configure(aws_exports);\r\n\r\n\r\nAmplify.addPluggable(new AWSIoTProvider({\r\n     aws_pubsub_region: 'us-east-1',\r\n     aws_pubsub_endpoint:  'wss://azk3aah4ivg82-ats.iot.us-east-1.amazonaws.com/mqtt',\r\n}));\r\n\r\nPubSub.subscribe(['$aws/things/B_Bone_1/shadow/get/accepted', '$aws/things/B_Bone_1/shadow/get/rejected']).subscribe({\r\n    next: data =&gt; console.log('Message received get accepted', data),\r\n    error: error =&gt; console.error(error),\r\n    close: () =&gt; console.log('Done'),\r\n});\r\n\r\n\r\n//\r\nexport default class Main extends React.Component {\r\n//...... sign in stuff This just makes a cognito accound and lets me log in. Its working\r\n}\r\n\r\n\r\nclass App extends Component {\r\n//constuct props \r\n///...\r\nupdate = async () =&gt; {\r\n\r\n    await PubSub.publish('$aws/things/B_Bone_1/shadow/update', {msg: '{\"state\":{\"reported\":{\"temp\": -1}}}' });\r\n\r\n    Alert.alert('Update all local values from Device Shadow');\r\n  }\r\n\r\n\r\nrender() {\r\n    return (\r\n    //A page with a button that runs update function\r\n    );\r\n    }}\r\n    \r\n//Stylesheet stuff\r\n    </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When calling update the program should run the subscribe function. But i get a timeout error as nothing is returned.\nAny help would be amazing.</p>\n"
    }, {
        "tags": ["php", "curl", "iot", "healthkit", "garmin"],
        "is_answered": true,
        "view_count": 961,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1602300957,
        "creation_date": 1515683842,
        "question_id": 48210353,
        "link": "https://stackoverflow.com/questions/48210353/dont-give-daily-summaries-from-garmin-api",
        "title": "Don`t give Daily Summaries from Garmin Api",
        "body": "<p>I wanna  get \"Daily Summaries\" for my devices through garmin API.</p>\n\n<p>I can get data form <a href=\"https://healthapi.garmin.com/\" rel=\"nofollow noreferrer\">https://healthapi.garmin.com/</a> , but can`t through api request.</p>\n\n<p>For obtain \"Daily Summaries\", I do the following steps: </p>\n\n<p>I create curl command:</p>\n\n<p><code>curl -v -X POST -H \"Content-Type: application/json;charset=utf-8\" -d '{\"dailies\":[{\"userAccessToken\":\"userAccessToken\",\"uploadStartTimeInSeconds\":1514847600,\"uploadEndTimeInSeconds\":1515597660,\"callbackURL\":\" https://healthapi.garmin.com/wellnessapi/rest/dailies\"}]}' http://mysite/testping.php</code></p>\n\n<p>Where userAccessToken - is tocken which i use to login in <a href=\"https://healthapi.garmin.com/\" rel=\"nofollow noreferrer\">https://healthapi.garmin.com/</a>  . in response i get request without any data. </p>\n\n<p>i use manual \"Health REST API Specification\" as example. </p>\n\n<p>Please answer, why i don`t give any data from request?</p>\n"
    }, {
        "tags": ["node.js", "function", "aws-lambda", "callback", "iot"],
        "is_answered": true,
        "view_count": 148,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1601861240,
        "creation_date": 1591242982,
        "last_edit_date": 1601861240,
        "question_id": 62186642,
        "link": "https://stackoverflow.com/questions/62186642/how-do-i-return-a-value-from-a-node-js-function-using-a-callback",
        "title": "How do i return a value from a node.js function using a callback?",
        "body": "<p>I'm totally new to nodejs coming from a vb.net background.  I've looked at so many examples of using callbacks but I just don't get it. So sorry if this is very basic.</p>\n\n<p>I'm writing a AWS Lambda function and trying to get a value from a AWS IOT Thing Shadow and assign it to a variable.  But I can't get it to work, however the log does show that the value was returned.  I know it has to do with sync/async, but just lost the plot to how to get it.  Here is the code so far:</p>\n\n<pre><code>//determine doorstate\nfunction getdoorstate() { \n    //ask the thing\n    var currentstate;\n        var paramsGet = {\n        \"thingName\": \"garagedoor1\",\n        };\n    iotData.getThingShadow(paramsGet, function (err, data) {\n        if (err) {\n        console.log(\"Error : \" + err, err.stack);\n          } else {\n    console.log(data.payload);\n    var obj = JSON.parse(data.payload);\n    currentstate=obj[\"state\"][\"reported\"][\"doorstate\"];\n    console.log(\"The function doorstate is: \"+currentstate);\n            }\n       });\n    }\n\nvar doorstate = getdoorstate();\n</code></pre>\n\n<p>The log shows the console writes fine (presume they happen after the data has been retrieved):</p>\n\n<pre><code>INFO    {\"state\":{\"desired\":{\"doorstate\":0,\"transitstate\":0},\"reported\":{\"doorstate\":0,\"transitstate\":0}},\"metadata\":{\"desired\":{\"doorstate\":{\"timestamp\":1591241517},\"transitstate\":{\"timestamp\":1591241517}},\"reported\":{\"doorstate\":{\"timestamp\":1591241517},\"transitstate\":{\"timestamp\":1591241517}}},\"version\":444,\"timestamp\":1591241860}\nThe function doorstate is: 0\n</code></pre>\n\n<p>However the value returned is: undefined</p>\n\n<p>Can anyone suggest how to change my code to use callback properly.  Make it simple - I'm new!\nThanks!</p>\n\n<hr>\n\n<p>UPDATED CODE AS SUGGESTED BY <em>Sagar</em> - STILL ISSUE</p>\n\n<pre><code>//determine doorstate\nfunction getdoorstate() { \n    //ask the thing\n        var paramsGet = {\n        \"thingName\": \"garagedoor1\",\n        };\n    iotData.getThingShadow(paramsGet, function (err, data) {\n        if (err) {\n        console.log(\"Error : \" + err, err.stack);\n          } else {\n            callback(data)\n            }\n       });\n    }\n getdoorstate(function (value){\n     console.log(value);\n });\nvar doorstate = getdoorstate();\n</code></pre>\n\n<p>What am I doing wrong again?</p>\n"
    }, {
        "tags": ["javascript", "api", "https", "iot", "buildroot"],
        "is_answered": false,
        "view_count": 39,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1601453638,
        "creation_date": 1601013503,
        "last_edit_date": 1601453638,
        "question_id": 64058627,
        "link": "https://stackoverflow.com/questions/64058627/https-handshake-failure-on-iot-device",
        "title": "HTTPS handshake failure on IoT device",
        "body": "<p>I am running buildroot and iotjs on an iot device and I'm trying to make a post request to login and get an auth token. But I'm unable to call the API at all because I run into an error that says</p>\n<p>&quot;API Failed, problem with request: handshake failed: domian&quot;</p>\n<p>The same API works given I use the http version. The server I'm trying to call is hosted on an AWS EC2 instance behind cloudflare.</p>\n<p>The code (not exactly the same but similar) used to call the API:</p>\n<pre><code>var https = require('https');\n\nvar options = {\n  host: 'www.google.com',\n  port: 443,\n  path: '/upload',\n  method: 'POST'\n};\n\nvar req = https.request(options, function(res) {\n  console.log('STATUS: ' + res.statusCode);\n  console.log('HEADERS: ' + JSON.stringify(res.headers));\n  res.setEncoding('utf8');\n  res.on('data', function (chunk) {\n    console.log('BODY: ' + chunk);\n  });\n});\n\nreq.on('error', function(e) {\n  console.log('problem with request: ' + e.message);\n});\n\n// write data to request body\nreq.write('data\\n');\nreq.write('data\\n');\nreq.end();\n</code></pre>\n<p>Any help is appreciated thanks!</p>\n"
    }, {
        "tags": ["c#", "uwp", "windows-10", "iot", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 737,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1601348809,
        "creation_date": 1529319693,
        "last_edit_date": 1601348809,
        "question_id": 50907993,
        "link": "https://stackoverflow.com/questions/50907993/uwp-appserviceconnection-sendresponseasync-returns-appserviceresponsestatus-fa",
        "title": "UWP AppServiceConnection - SendResponseAsync returns AppServiceResponseStatus.Failure",
        "body": "<p>I'm trying to create a UWP service app on the Raspberry Pi3 which provides the access to the on board UART. I'm facing an issue about the AppConnection Request/response.</p>\n\n<p>this is the service method that handles the incoming requests from client apps</p>\n\n<pre><code>internal class Inbound\n{\n    public static async void OnRequestReceived(AppServiceConnection sender, AppServiceRequestReceivedEventArgs args)\n    {\n        var messageDeferral = args.GetDeferral();\n        var response = new ValueSet();\n\n        bool success = false;\n        var msg = args.Request.Message.Keys;\n        if (args.Request.Message.TryGetValue(ServiceApiRequests.Keys.Command, out object command))\n        {\n            try\n            {\n                switch (command)\n                {\n\n                    case ServiceApiRequests.CommandValues.UartWrite:\n                        if (args.Request.Message.TryGetValue(ServiceApiRequests.Keys.UartTxBuffer, out object txBuffer))\n                        {\n                            string rxBuff = \"\";\n                            success = await Pi3.Peripherals.Uart.GerInstance(57600).Write((string)txBuffer);\n\n                            if (success)\n                            {\n                                Debug.WriteLine(\"Tx: \" + (string)txBuffer);\n                                if (args.Request.Message.TryGetValue(ServiceApiRequests.Keys.ReadUartResponse, out object getResponse))\n                                {\n                                    if ((string)getResponse == ServiceApiRequests.ReadUartResponse.Yes)\n                                    {\n                                        rxBuff = await Pi3.Peripherals.Uart.GerInstance(57600).Read();\n                                        Debug.WriteLine(\"Rx: \" + rxBuff);\n                                    }\n                                }\n                            }\n                            response.Add(ServiceApiRequests.Keys.UartRxBuffer, rxBuff);\n\n                        }\n                        break;\n                }\n            }\n            catch (Exception ex)\n            {\n                success = false;\n            }\n        }\n\n        response.Add(new KeyValuePair&lt;string, object&gt;(ServiceApiRequests.Keys.Result, success ? ServiceApiRequests.ResultValues.Ok : ServiceApiRequests.ResultValues.Ko));\n        var result = await args.Request.SendResponseAsync(response);\n        if (result == AppServiceResponseStatus.Failure)\n        {\n            Debug.WriteLine(\"Failed to send the response\");\n        }\n        messageDeferral.Complete();\n    }\n}\n</code></pre>\n\n<p>As you can figure out, the Uart class is get using the Singleton pattern using the method <code>Pi3.Peripherals.Uart.GerInstance(57600)</code>.</p>\n\n<p>Following the code i using for send the request from the client app.</p>\n\n<pre><code>    public static class Uart\n{\n    public static IAsyncOperation&lt;string&gt; SendCommand(this AppServiceConnection DriverControllerConnection, string txBuffer, string awaitResponse = ServiceApiRequests.ReadUartResponse.Yes)\n    {\n        return _SendCommand(DriverControllerConnection, txBuffer, awaitResponse).AsAsyncOperation();\n    }\n    private static async Task&lt;string&gt; _SendCommand(AppServiceConnection DriverControllerConnection, string txBuffer, string awaitResponse)\n    {\n        AppServiceResponse response = null;\n        string response_str = \"\";\n        try\n        {\n            if (DriverControllerConnection != null)\n            {\n                response = await DriverControllerConnection.SendMessageAsync(new ServiceApiRequests.UartWrite().GetCommand(txBuffer, awaitResponse));\n                if (response.Status == AppServiceResponseStatus.Success)\n                {\n                    if (response.Message.TryGetValue(ServiceApiRequests.Keys.Result, out object result))\n                    {\n                        if ((string)result == ServiceApiRequests.ResultValues.Ok &amp;&amp; awaitResponse == ServiceApiRequests.ReadUartResponse.Yes)\n                        {\n                            response_str = response.Message[ServiceApiRequests.Keys.UartRxBuffer] as string;\n                        }\n                    }\n                }\n            }\n        }\n        catch (Exception ex)\n        {\n            // TODO: log\n        }\n        return response_str;\n    }\n}\n</code></pre>\n\n<p>The system works well just for a while, until i have <code>response.Status == AppServiceResponseStatus.Success</code> , then the result of the request changes and it becomes <code>AppServiceResponseStatus.Failure</code>. This way the program counter never steps into the condition <code>if (response.Status == AppServiceResponseStatus.Success)</code>.</p>\n\n<p>Any idea about the cause?\nThank you so much for the help.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Follow the suggestions, i added an handler for the <code>ServiceClosed</code> event. This is the main class.</p>\n\n<pre><code>public sealed class DriverListener : IBackgroundTask\n{\n    private BackgroundTaskDeferral backgroundTaskDeferral;\n    private AppServiceConnection appServiceConnection;\n    public void Run(IBackgroundTaskInstance taskInstance)\n    {\n        backgroundTaskDeferral = taskInstance.GetDeferral();\n        // taskInstance.Canceled += OnTaskCanceled;\n\n        var triggerDetails = taskInstance.TriggerDetails as AppServiceTriggerDetails;\n        appServiceConnection = triggerDetails.AppServiceConnection;\n        appServiceConnection.RequestReceived += Inbound.OnRequestReceived;\n        appServiceConnection.ServiceClosed += OnTaskCanceled;\n    }\n\n    private void OnTaskCanceled(AppServiceConnection sender, AppServiceClosedEventArgs reason)\n    {\n        if (this.backgroundTaskDeferral != null)\n        {\n            Debug.WriteLine(\"ServiceClosed\");\n            // Complete the service deferral.\n            this.backgroundTaskDeferral.Complete();\n        }\n    }\n}\n</code></pre>\n\n<p>Placing a breakpoint in this function, i see that it was never triggered.\nThe app connection is opened using the singleton pattern, and putted in a dll that i use in the client app</p>\n\n<pre><code>    public static AppServiceConnection GetDriverConnectionInstance()\n    {\n        if (_DriverConnectionInstance == null)\n        {\n            try\n            {\n                _DriverConnectionInstance = OpenDriverConnection().AsTask().GetAwaiter().GetResult();\n            }\n            catch\n            {\n\n            }\n        }\n        return _DriverConnectionInstance;   \n    }\n</code></pre>\n\n<p>I also add a Request to the service that toggles a led, and i noticed that the led status changes but the response from the app service is still \"Failure\" and the message is null.</p>\n"
    }, {
        "tags": ["node.js", "amazon-web-services", "aws-lambda", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 122,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1599524423,
        "creation_date": 1599511948,
        "question_id": 63784095,
        "link": "https://stackoverflow.com/questions/63784095/get-aws-iot-shadow-state-from-aws-lambda",
        "title": "Get AWS IoT shadow state from AWS Lambda",
        "body": "<p>I'm trying to get the a IoT shadow state from inside a Lamda function. This is what I have so far in my Lambda function:</p>\n<pre><code>var AWS = require('aws-sdk');\n\nvar iotdata = new AWS.IotData({\n  endpoint: process.env.endpoint\n});\n\nexports.handler = async (event) =&gt; {\n  const params = {\n  thingName: 'MyThing',\n};\n\niotdata.getThingShadow(params, function(err, data) {\n  if (err) console.log(err, err.stack); \n  else     console.log('ok', data);        \n});\n</code></pre>\n<p>But it never logs the data. What am I missing?</p>\n"
    }, {
        "tags": ["iot", "aws-iot"],
        "is_answered": false,
        "view_count": 25,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1598245472,
        "creation_date": 1598076020,
        "question_id": 63533054,
        "link": "https://stackoverflow.com/questions/63533054/aws-iot-no-activity-logged",
        "title": "AWS Iot no activity logged",
        "body": "<p>I am trying to find the connected devices and according to the forums and was advised to subscribe to &quot;$aws/events/presence/+&quot;.</p>\n<p>I have created two clients where one subscribes to the &quot;$aws/events/presence/+&quot; topic and the other one sends the connect command.</p>\n<p>I could not see any activity under the tab.</p>\n<p>Could you please help me to resolve this?</p>\n"
    }, {
        "tags": ["c#", "asp.net-mvc", "iot"],
        "is_answered": false,
        "view_count": 36,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1597740976,
        "creation_date": 1597740976,
        "question_id": 63465171,
        "link": "https://stackoverflow.com/questions/63465171/is-it-possible-to-catch-and-error-on-a-response-in-mvc",
        "title": "Is it possible to catch and error on a response in MVC?",
        "body": "<p>Is it possible to catch an error on a response in MVC? Let's say if the calling unit no longer has a connection.</p>\n<p>We have IOT devices that call our API where the call is processed for a few seconds before responding. We want to log if the requesting unit has not received the response. Is this possible in MVC?</p>\n<pre><code>private async Task&lt;IActionResult&gt; RespondAsync(CommunicationPackage response, Request request)\n{\n    var responseBytes = response.ToBytes();\n    try \n    {\n        return new FileContentResult(responseBytes, &quot;application/octet-stream&quot;);\n    }\n    catch \n    {\n        //Log error on unit no longer connected and response unable to be sent.\n    }\n}\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 316,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1597290915,
        "creation_date": 1595504957,
        "last_edit_date": 1597290915,
        "question_id": 63053560,
        "link": "https://stackoverflow.com/questions/63053560/multi-account-registration-of-aws-iot-device-certificates",
        "title": "Multi Account Registration of AWS IoT Device certificates",
        "body": "<p>I have followed the links :\n<a href=\"https://aws.amazon.com/about-aws/whats-new/2020/04/simplify-iot-device-registration-and-easily-move-devices-between-aws-accounts-with-aws-iot-core-multi-account-registration/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/about-aws/whats-new/2020/04/simplify-iot-device-registration-and-easily-move-devices-between-aws-accounts-with-aws-iot-core-multi-account-registration/</a></p>\n<p><a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/x509-client-certs.html#multiple-account-cert\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/developerguide/x509-client-certs.html#multiple-account-cert</a>\nand I have registered a device or client certificate (signed by a different CA) with out registering CA.\nWhen I tried connecting and publishing data to AWS IoT core with this device certificate ,it showing success on device side but the data is not reflecting at AWS IOT core.\nI have set proper a)policy b)endpoint</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 81,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1597178906,
        "creation_date": 1596522651,
        "question_id": 63241324,
        "link": "https://stackoverflow.com/questions/63241324/how-to-avoid-retrieving-outdated-data-from-aws-iot-shadow",
        "title": "How to avoid retrieving outdated data from AWS IoT shadow?",
        "body": "<p>AWS IoT documentation says.</p>\n<blockquote>\n<p>When a device goes offline, an app can still communicate with AWS IoT\nand the device's shadows. When the device reconnects, it receives the\ncurrent state of its shadows so that it can update its state to match\nthat of its shadows, and then publish a message with its updated\nstate.</p>\n</blockquote>\n<p>How not to retrieve data from the shadow if the device of offline?</p>\n<p>or how to ignore outdated data from AWS IoT shadow?</p>\n"
    }, {
        "tags": ["authorization", "iot", "microcontroller", "gsm", "sim800"],
        "is_answered": false,
        "view_count": 69,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1596392076,
        "creation_date": 1596288868,
        "question_id": 63205778,
        "link": "https://stackoverflow.com/questions/63205778/how-to-set-user-data-parameter-for-authorization-bearer-in-sim800c",
        "title": "How to set user data parameter for Authorization Bearer in sim800c",
        "body": "<p>I am trying to send data to a server using sim800c with bearer token authentication. Using Postman the config is like picture below :\n<a href=\"https://i.stack.imgur.com/IOAev.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IOAev.png\" alt=\"Postman Config\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/PcDHS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PcDHS.png\" alt=\"Postman Config\" /></a></p>\n<p>to add this header to my post request I'm using:</p>\n<pre><code>AT+HTTPPARA=&quot;USERDATA&quot;,&quot;Authorization: \\&quot;Bearer [My Token]\\&quot;&quot;\\r\\n\n</code></pre>\n<p>but in debug console I get :</p>\n<pre><code>+CME ERROR: invalid index\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3ym9j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ym9j.png\" alt=\"Sim800c Error\" /></a></p>\n<p>how can I use this command properly?</p>\n"
    }, {
        "tags": ["ssl", "arduino", "iot", "esp8266", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 872,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1596342179,
        "creation_date": 1596280613,
        "question_id": 63204580,
        "link": "https://stackoverflow.com/questions/63204580/esp-ota-updating-over-https-web-server",
        "title": "ESP OTA updating over https web server",
        "body": "<p>I have an old code which works great and has no problem but I have been asked to change the OTA configuration so that this code can update itself from a SSL server. I have the certificate and the fingerprint needed for this (downloaded it from google chrome). I have googled and tried most of the advised method for OTA over HTTPS. but none of them worked for me. the results which I get from 'ESPhttpUpdate.update' is always &quot;-1&quot; which means &quot;connection failed&quot;.</p>\n<p>can anybody propose a method which works all right? as I don't have any correct code I don't post any. I just want a suggestion or a sample code.</p>\n<p>thank you all in advance</p>\n"
    }, {
        "tags": ["iot", "onem2m", "mobius"],
        "is_answered": true,
        "view_count": 179,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1596018209,
        "creation_date": 1589103661,
        "last_edit_date": 1589200448,
        "question_id": 61709911,
        "link": "https://stackoverflow.com/questions/61709911/onem2m-iotketi-mobius-retrieve-group-member-contentinstances",
        "title": "OneM2M, IOTKETI Mobius RETRIEVE Group Member ContentInstances",
        "body": "<p>In my example architecture; I have an IN-Mobius and a ADN-AE-Thyme (nCube Thyme).</p>\n\n<p>First of all; i created a AE which is called \"ae_test_02\", i can GET this resource via Postman.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LMW6R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LMW6R.png\" alt=\"ae_test_02\"></a></p>\n\n<p>After this step; i run ADN-AE-Thyme, thyme.js, and it created a container which is called \"thyme_01\", and also i can GET this resource via Postman.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZJeJb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJeJb.png\" alt=\"thyme_01\"></a></p>\n\n<p>Also in that step, thyme.js add containerInstances into the \"thyme_01\" container. Then, i can get that latest containerInstance with \"/la\" parameter via Postman</p>\n\n<p><a href=\"https://i.stack.imgur.com/KhPeN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KhPeN.png\" alt=\"la\"></a></p>\n\n<p>In this point, the problem has began. I create a group resource, while creating i tried couple solutions, always fail. I tried in \"mid\" attribute;</p>\n\n<pre><code>{ \"m2m:grp\": {\n    \"rn\": \"grp_test_100520_08\",\n    \"mt\": 3,\n    \"mid\": [\"3-20200505012920476/la\", \n            \"Mobius/3-20200505012920476/la\",\n            \"Mobius/thyme_01/la\",\n            \"Mobius/ae_test_02/3-20200505012920476/la\",\n            \"Mobius/ae_test_02/thyme_01/la\",\n            \"ae_test_02/thyme_01/la\",\n            \"ae_test_02/3-20200505012920476/la\"],\n    \"mnm\": 10\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/tDwnz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tDwnz.png\" alt=\"group create\"></a></p>\n\n<p>The problem is that, i tried these mid paths one by one, but never works. When i try to get latest containerInstances via Postman, i use this URL and the results is \"resource does not exist (get_target_url)\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/wqDUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wqDUF.png\" alt=\"group retrive\"></a></p>\n\n<p>The containers and contentInstances in the IN-Mobius, and i requested to the IN-Mobius. By using these informations how should i implement group \"mid\" attribute; for the get containerInstances via group resources ?</p>\n\n<hr>\n\n<p>First Edit.</p>\n\n<p>Hi Andreas.</p>\n\n<p>For the first issue, i can get  resource correctly. In this point my aim is GET containerInstance in the container, which is a member (mid) in that .</p>\n\n<p>Second; now I understand, there is not existing  resource in  resource, okay. As you mentined, i want to pass a request to all member (containers) of a  resource. For this purpose, i will use <a href=\"https://localhost:7579/Mobius/grp_test_100520_08/fopt\" rel=\"nofollow noreferrer\">https://localhost:7579/Mobius/grp_test_100520_08/fopt</a>, but it gives an error \"ERR_INVALID_ARG_TYPE\". I know that, at least one mid structure is correct, but which one is the correct ?</p>\n\n<p>For the smaller issue, i already know that resouce multiple times in the mid attribute, because i did not know which one is the correct adressing scheme ?</p>\n\n<p>Also, while creating a  resource, the resource should be in the ae resource (/Mobius/ae_test_02/grp_name) or in the Mobius (/Mobius/grp_name)</p>\n\n<p> resources can be in directly in IN-Mobius or should in MN-Rosemary? Is fanOutPoint only using by external resource like MN or even IN, fopt using ?</p>\n\n<hr>\n\n<p>Second Edit.</p>\n\n<p>The \"thyme\" comes from nCube Thyme (<a href=\"https://github.com/IoTKETI/nCube-Thyme-Nodejs\" rel=\"nofollow noreferrer\">https://github.com/IoTKETI/nCube-Thyme-Nodejs</a>), it creates a container and then randomly create ContainerInstances. </p>\n\n<p>The resource tree looks like;</p>\n\n<p>Mobius >> ae_test_02 (AE resource) >> thyme_01 (Container It created from nCube Thyme <a href=\"https://github.com/IoTKETI/nCube-Thyme-Nodejs\" rel=\"nofollow noreferrer\">https://github.com/IoTKETI/nCube-Thyme-Nodejs</a>) >> ContainerInstances</p>\n\n<p>I have also a  resource in >> Mobius >> grp_test_100520_08 (GROUP resource which is uses)</p>\n\n<p>I tried;</p>\n\n<p>{ \"m2m:grp\": {\n        \"mid\": [\"Mobius/ae_test_02/thyme_01\"],\n        \"mnm\": 5\n    }\n}</p>\n\n<p>In this request, fopt.js gives an error \"callback is not a function\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/RnBQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RnBQN.png\" alt=\"err1\"></a></p>\n\n<p>{ \"m2m:grp\": {\n        \"mid\": [\"ae_test_02/thyme_01\"],\n        \"mnm\": 5\n    }\n}</p>\n\n<p>In this request, fopt.js gives same \"callback is not a function\", but in different line.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7MlDy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7MlDy.png\" alt=\"err2\"></a></p>\n\n<p>I guess my fopt.js file is old, then i checked mobius github page and get that file, however it not solve this.</p>\n\n<p>Also my  resource look like this;</p>\n\n<p><a href=\"https://i.stack.imgur.com/GNgQx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNgQx.png\" alt=\"grp\"></a></p>\n\n<p>Also my fopt.js file is same as this;</p>\n\n<p><a href=\"https://github.com/IoTKETI/Mobius/blob/master/mobius/fopt.js\" rel=\"nofollow noreferrer\">https://github.com/IoTKETI/Mobius/blob/master/mobius/fopt.js</a></p>\n\n<hr>\n\n<p>UPDATE 3.</p>\n\n<p>The \"cnm\" attribute problem is this; while creating a  resouce, CSE will automaticly assign \"cnm\" attribute according to member size. However, CSE will not this process in UPDATE (PUT) request. From this point, i will create  resources, not UPDATE them.</p>\n\n<p>As you mentioned, i send requests to the group's  resource, but it gives the \"callback is not a function\" error. To solve this problem, i downloaded and installed the whole distribution. (<a href=\"https://github.com/IoTKETI/Mobius\" rel=\"nofollow noreferrer\">https://github.com/IoTKETI/Mobius</a>) After that, i will do same processes again for understand the fopt.js file behaviour. The result wasn't changed, it gives the same error.</p>\n\n<p>I planning to explain whole situation and create an issue, in Mobius github page. I hope they will response soon.</p>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 369,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1595182706,
        "creation_date": 1595006447,
        "question_id": 62958893,
        "link": "https://stackoverflow.com/questions/62958893/azure-iot-hub-how-to-get-whats-newer-of-desired-vs-reported-property-in-devic",
        "title": "Azure IoT Hub - How to get what&#39;s newer of desired vs reported property in device twins?",
        "body": "<p>I'm using .NET Core 3 to read from device twins in an Azure IoT hub. I want to get property X and that property is, as always, both stored in the desired and reported properties. I want to get the one that's newer. This information is written in the metadata.</p>\n<p>My question is, is this possible via just the IoT Hub Query Language or do I have to fetch from both desired and reported and check this out myself?</p>\n"
    }, {
        "tags": ["javascript", "html", "widget", "iot"],
        "is_answered": true,
        "view_count": 192,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1590669091,
        "creation_date": 1590399084,
        "last_edit_date": 1590412394,
        "question_id": 61999596,
        "link": "https://stackoverflow.com/questions/61999596/using-value-in-the-javascript-block-of-the-thinger-io-html-widget",
        "title": "Using {{value}} in the JavaScript block of the thinger.io HTML widget",
        "body": "<p>I try to write <strong>HTML widget</strong> with JavaScript code in the <em>thinger.io</em> Dashboard. The data from the <code>\"thing\"</code> can be used in the <strong>HTML</strong> by inserting the next code <code>{{value}}</code> into some HTML tag body.</p>\n\n<p>But, I cannot use it in the <strong>JavaScript block</strong>.</p>\n\n<h2>Pure HTML widget:</h2>\n\n<p>For example use in the <strong>HTML</strong> widget:</p>\n\n<pre><code>&lt;h1&gt;Millis data&lt;/h1&gt;\n&lt;p&gt;Millis value is &lt;/p&gt;&lt;b&gt;{{value}}&lt;/b&gt;\n</code></pre>\n\n<p><strong>The result of this</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/FSPaV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FSPaV.png\" alt=\"Simple HTML widget\"></a></p>\n\n<h2>Widget with JavaScript block (<em>don't work as needed</em>):</h2>\n\n<p>I tried to use the same data for plotting (Plotly example).\nI can use in the <strong>HTML</strong> tag <code>id=data</code>, but, I don't know how to use this data in the <strong>JavaScript</strong> block.</p>\n\n<p><strong>My try:</strong></p>\n\n<pre><code>&lt;script src=\"https://cdn.plot.ly/plotly-latest.min.js\"&gt;&lt;/script&gt;\n\n&lt;div id=\"data\" value={{value}}&gt;Data - {{value}}&lt;/div&gt;\n&lt;div id=\"tester\" style=\"width:900px;height:300px;\"&gt;&lt;/div&gt;\n\n\n&lt;script&gt;\n    TESTER = document.getElementById('tester');\n    Plotly.newPlot( TESTER, [{\n    x: [1, 2, 3, 4, 5],\n    y: [1, 2, 4, 8, 16] }], {\n    margin: { t: 0 } } );\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>And resulting widget:</strong>\n- The data on the plot are <strong>hard coded</strong> <em>for example only</em>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mNxt2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mNxt2.png\" alt=\"HTML widget with JavaScript block\"></a></p>\n\n<h3>I need help with integrating the ```{{value}}`` data into a JavaScript code in the <em>thinger.io</em> HTML widget.</h3>\n"
    }, {
        "tags": ["iot", "m2m", "onem2m"],
        "is_answered": false,
        "view_count": 148,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1590666823,
        "creation_date": 1590581911,
        "last_edit_date": 1590666823,
        "question_id": 62042969,
        "link": "https://stackoverflow.com/questions/62042969/graph-iri-in-a-sparql-query-and-sparql-update-operation-in-onem2m-iot-standard",
        "title": "Graph IRI in a SPARQL Query and SPARQL UPDATE operation in oneM2M IoT Standard?",
        "body": "<p>In oneM2M, the &lt;<strong><em>semanticDescriptor</em></strong>> can be updated with SPARQL UPDATE operation with <code>INSERT/DELETE</code> and a Semantic Query (<code>SELECT, CONSTRUCT, ASK, DESCRIBE</code>) can be targeted towards a resource to derive semantic information. </p>\n\n<p>For Update of &lt;<strong><em>semanticDescriptor</em></strong>> resource in <code>TR-0007-Study of Abstraction and Semantics Enablements</code> example is given:</p>\n\n<blockquote>\n  <p>INSERT DATA { GRAPH <code>graph_uri</code> { .. RDF payload .. } }</p>\n  \n  <p>EXAMPLE 1: Add semantic instance to a  resource\n  using INSERT DATA statement:</p>\n  \n  <p>INSERT DATA {</p>\n  \n  <p>GRAPH <code>&lt;http://&lt;Hosting CSE address&gt;/&lt;CSEBase&gt;/&lt;AE&gt;/&lt;semanticDescriptor&gt;&gt;</code>\n  {   </p>\n  \n  <p>saref:WASH_LG_123\n  msm:hasOperation saref:WashingOperation_123 </p>\n  \n  <p>}</p>\n</blockquote>\n\n<p><strong>EDITED:</strong></p>\n\n<p>So SPARQL Query and UPDATE operations can have <code>graph_uri</code> which can be specified in queries, in technical terms <a href=\"https://www.w3.org/TR/sparql11-query/#namedGraphs\" rel=\"nofollow noreferrer\">Named Graphs</a>.</p>\n\n<p><strong>First Question:</strong> </p>\n\n<p>My question is in context of Semantics, as a Semantics Repository (RDF Database) is collection of GRAPHS, so in our case probably each Semantic Descriptor would be represented as a single Graph. </p>\n\n<p>In this context, does oneM2M recommend using structured resource id: <code>&lt;http://&lt;Hosting CSE address&gt;/&lt;CSEBase&gt;/&lt;AE&gt;/&lt;semanticDescriptor&gt;&gt;</code> to be the IRI for that GRAPH in the Semantics Repository. </p>\n\n<p>As I am not able to find any reference regarding same in TS-0034-Semantics-Support, TS-0001/0004 documents.</p>\n\n<p><strong>Follow-up Question:</strong></p>\n\n<p>If oneM2M doesn't recommend anything for <code>graph_uri</code> in Semantic Repository, How is an <strong>Originator</strong> bound to use the IRI/URI in its Semantic Query (<code>SELECT, CONSTRUCT, ASK, DESCRIBE</code>) or SPARQL UPDATE (<code>INSERT/DELETE</code>) ??</p>\n\n<p>As every CSE then can have it's own way of giving a <code>graph_uri</code> to its GRAPHs in Semantic Repository, if it's not standardized. </p>\n"
    }, {
        "tags": ["amazon-web-services", "tcp", "server", "iot"],
        "is_answered": false,
        "view_count": 50,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1588850132,
        "creation_date": 1588850132,
        "question_id": 61656423,
        "link": "https://stackoverflow.com/questions/61656423/aws-with-existing-tcp-server-implementation",
        "title": "AWS with existing TCP Server implementation",
        "body": "<p>I have an existing AWS solution which includes the following.  It uses a legacy application (written in C#) running on an EC2 instance. This legacy application implements a TCP server and listens on a specific TCP port.  It contains custom code to decode the data and dump it into a database.  The choice of the database is less important for now.</p>\n\n<p>I'm after a more contemporary solution based on AWS which can potentially deprecate the existing legacy application.  Most options with Amazon IoT involve HTTP and MQTT. I can't change the protocol.  It must still be a TCP.  </p>\n\n<p>The closest thing I can find is  Amazon IoT Greengrass (<a href=\"https://aws.amazon.com/blogs/iot/converting-industrial-protocols-with-aws-iot-greengrass/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/iot/converting-industrial-protocols-with-aws-iot-greengrass/</a>) which appears to involve running a TCP client in an AWS lambda function, and then forwarding it to MQTT / AWS IoT Core.   </p>\n\n<p>I'm curious what other approaches may be possible.</p>\n"
    }, {
        "tags": ["iot", "developer-tools", "thingworx"],
        "is_answered": false,
        "view_count": 31,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1587750978,
        "creation_date": 1587472295,
        "question_id": 61343630,
        "link": "https://stackoverflow.com/questions/61343630/how-can-i-create-a-create-account-details-database-for-a-user",
        "title": "How can I create a create account details database for a user?",
        "body": "<p>I have created a 'Login' mashup and a 'User Creation' mashup. What can I do to allow the user to save the details that they enter on the 'User Creation' mashup to some sort of back-end database, and then when they type in username and password on 'Login' mashup, it should verify and let them navigate to the next mashup. Basically, a basic login system on any website. </p>\n"
    }, {
        "tags": ["azure", "google-cloud-platform", "cloud", "iot", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 56,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1587750124,
        "creation_date": 1587742653,
        "question_id": 61412085,
        "link": "https://stackoverflow.com/questions/61412085/api-rest-mainly-accesed-by-iot-cloud-edge-platforms-azure-mozilla-iot-google",
        "title": "API REST mainly accesed by IoT Cloud/Edge platforms (Azure, Mozilla IoT, Google Cloud...)",
        "body": "<p>I'm creating an app that have an API REST that is going to be mainly accessed by devices and other apps hosted in IoT Cloud/Edge Platforms. My question is: Do I need to prepare something special or different to a regular API REST? </p>\n"
    }, {
        "tags": ["node.js", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 64,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1587402897,
        "creation_date": 1587402897,
        "question_id": 61328202,
        "link": "https://stackoverflow.com/questions/61328202/how-to-set-multiple-policies-as-policy-name-in-aws-iot-provisioning-template",
        "title": "How to set multiple policies as policy name in aws iot provisioning template",
        "body": "<p>I am trying to create a just in time provisioning template and want to assign multiple policy names, is there some way to include it. Below is the template</p>\n\n<pre><code>{\n  \"Parameters\": {\n    \"AWS::IoT::Certificate::Country\": {\n      \"Type\": \"String\"\n    },\n    \"AWS::IoT::Certificate::Id\": {\n      \"Type\": \"String\"\n    },\n    \"AWS::IoT::Certificate::CommonName\": {\n      \"Type\": \"String\"\n    }\n  },\n  \"Resources\": {\n    \"thing\": {\n      \"Type\": \"AWS::IoT::Thing\",\n      \"Properties\": {\n        \"ThingName\": {\n          \"Ref\": \"AWS::IoT::Certificate::CommonName\"\n        },\n        \"AttributePayload\": {\n          \"version\": \"v1\",\n          \"country\": {\n            \"Ref\": \"AWS::IoT::Certificate::Country\"\n          }\n        }\n      }\n    },\n    \"certificate\": {\n      \"Type\": \"AWS::IoT::Certificate\",\n      \"Properties\": {\n        \"CertificateId\": {\n          \"Ref\": \"AWS::IoT::Certificate::Id\"\n        },\n        \"Status\": \"ACTIVE\"\n      }\n    },\n    \"policy\": {\n      \"Type\": \"AWS::IoT::Policy\",\n      \"Properties\": {\n        \"PolicyName\": \"PolicyOne\"\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>I want to include PolicyTwo is there any way I could achieve this, I have already tried something like below but looks like a template error</p>\n\n<pre><code>{\n  \"Parameters\": {\n    \"AWS::IoT::Certificate::Country\": {\n      \"Type\": \"String\"\n    },\n    \"AWS::IoT::Certificate::Id\": {\n      \"Type\": \"String\"\n    },\n    \"AWS::IoT::Certificate::CommonName\": {\n      \"Type\": \"String\"\n    }\n  },\n  \"Resources\": {\n    \"thing\": {\n      \"Type\": \"AWS::IoT::Thing\",\n      \"Properties\": {\n        \"ThingName\": {\n          \"Ref\": \"AWS::IoT::Certificate::CommonName\"\n        },\n        \"AttributePayload\": {\n          \"version\": \"v1\",\n          \"country\": {\n            \"Ref\": \"AWS::IoT::Certificate::Country\"\n          }\n        }\n      }\n    },\n    \"certificate\": {\n      \"Type\": \"AWS::IoT::Certificate\",\n      \"Properties\": {\n        \"CertificateId\": {\n          \"Ref\": \"AWS::IoT::Certificate::Id\"\n        },\n        \"Status\": \"ACTIVE\"\n      }\n    },\n    \"policy\": {\n      \"Type\": \"AWS::IoT::Policy\",\n      \"Properties\": [\n        {\n            \"PolicyName\": \"PolicyOne\"\n        },\n        {\n            \"PolicyName\": \"PolicyTwo\"\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot", "connectivity"],
        "is_answered": true,
        "view_count": 116,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1586876214,
        "creation_date": 1585916258,
        "question_id": 61011761,
        "link": "https://stackoverflow.com/questions/61011761/aws-read-iot-thing-connectivity-state-of-greengrass-devices",
        "title": "AWS read IoT Thing connectivity state of greengrass devices",
        "body": "<p>I'm new to AWS IoT and want to know how to get my things connectivity status.</p>\n\n<p>I've read about <a href=\"https://docs.aws.amazon.com/en_us/iot/latest/developerguide/managing-index.html\" rel=\"nofollow noreferrer\">managing indexes</a> and believe that this is what i'm looking for.</p>\n\n<p>However in my architecture, i've IoT Greengrass core which is an Edge device that is physically linked to AWS Cloud, and Greengrass devices that are connected to this edge device with bluetooth and that i'm creating in AWS IoT as IoT Things too. (IoT Thing for both Greengrass core and Greengrass devices)</p>\n\n<p>I believe that once the Edge device is connected to AWS, its connectivity status in the <strong><em>AWS_Things</em></strong> index will be updated to \"<strong>true</strong>\". But how about the IoT Devices that are not directly connected to AWS but through the edge device ? are their connectivity states is going to be updated too ? how does it work ?</p>\n\n<p>Or should i make use of shadow attributes for connectivity states when it comes to these IoT Things that don't connect directly to AWS IoT Cloud Platform ?</p>\n"
    }, {
        "tags": ["iot", "coap", "libcoap"],
        "is_answered": false,
        "view_count": 104,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1585652282,
        "creation_date": 1453272943,
        "last_edit_date": 1514491090,
        "question_id": 34893380,
        "link": "https://stackoverflow.com/questions/34893380/coap-group-similar-resources-under-one",
        "title": "CoAP: Group similar resources under one",
        "body": "<p>I am using libcoap implementation of CoAP for one of my IOT application.</p>\n\n<p>Query:\nI want to group more than one resource under one topic. For example, I want to group 'current time' resource and 'date' resource under 'TIME' resource.</p>\n\n<p>On GET request to '/TIME' resource, server should provide date and current time to client.\nOn GET request to '/TIME/current time' resource, server should provide current time to client.\nOn GET request to '/TIME/date' resource, server should provide today's date to client.</p>\n\n<p>Also, I am using Firefox Copper plugin to test my iot server application.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 60,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1583155029,
        "creation_date": 1583155029,
        "question_id": 60489672,
        "link": "https://stackoverflow.com/questions/60489672/is-there-any-application-about-aws-iot-device-shadow",
        "title": "Is there any application about aws-iot device shadow?",
        "body": "<p>I have read the document of aws-iot, and successfully run the sample code.\nI would like to know some applications using device shadow.  Real-world application is better.</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "iot", "aws-iot", "greengrass"],
        "is_answered": false,
        "view_count": 501,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1582252306,
        "creation_date": 1572913704,
        "question_id": 58702856,
        "link": "https://stackoverflow.com/questions/58702856/aws-greengrass-cant-trigger-cores-lambda-function-from-device-mqtt-client-in",
        "title": "AWS Greengrass. Can&#39;t trigger core&#39;s lambda function from device mqtt client in local network",
        "body": "<p>What I want to have is to send some metrics from <code>greengrass device</code> to <code>greengrass lambda function</code> in the <code>local network</code>.</p>\n\n<p>I'm using the subscribe mode of <a href=\"https://github.com/aws/aws-iot-device-sdk-python/blob/master/samples/greengrass/basicDiscovery.py\" rel=\"nofollow noreferrer\">basicDiscovery.py</a> to send some device metrics to the amazon greengrass core device and invoke the lambda function deployed on the core. The lambda function simply prints the event.\nMy confusion is when I use a subscription from <code>IoT Cloud -&gt; lambda function</code> it work's fine but It's not working when I configure a subscription from <code>device -&gt; lambda function</code>.<br>\nAlso when I disconnect the device the device from the internet (in case 1), it buffers the messages and sends them when it gets connected to the internet again. \nI know that I'm passing <code>xxxxxxx.iot.us-west-2.amazonaws.com</code> as the endpoint and it's accessible over the internet, but not sure how to have an endpoint for the core.</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "iot", "aws-iot", "greengrass"],
        "is_answered": false,
        "view_count": 100,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1580842124,
        "creation_date": 1579521293,
        "question_id": 59822756,
        "link": "https://stackoverflow.com/questions/59822756/how-can-i-upload-aws-lambda-function-with-greengrass-env",
        "title": "how can I upload aws lambda function with greengrass env?",
        "body": "<p>I'm tryng to learn aws greengrass and stuck in creating lambda function which requires greengrass sdk env. for running helloworld code in python. As I have no device So I used one EC2 instance acting as an edge device.</p>\n\n<p>While uploading the code in aws lambda getting this error ( \"Lambda can't find the file greengrassHelloWorld.py. Make sure that your handler upholds the format: file-name.method.\") and referring this document <a href=\"https://docs.aws.amazon.com/greengrass/latest/developerguide/create-lambda.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/greengrass/latest/developerguide/create-lambda.html</a>. Also, function is not visible in Edit Code Inline.\n<a href=\"https://i.stack.imgur.com/Txk4u.png\" rel=\"nofollow noreferrer\">Image showing uploaded function and handler as mentioned in the docs</a></p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 183,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1580757890,
        "creation_date": 1578680815,
        "question_id": 59687138,
        "link": "https://stackoverflow.com/questions/59687138/aws-iot-search-for-dynamic-thing-group",
        "title": "AWS IoT search for dynamic Thing Group",
        "body": "<p>I would like to find a list of dynamic thing groups. I can see the type of field when I go to one of the thing groups in AWS IoT Core. How do I search and find a list of thing groups which has a <code>Type</code> as <code>Dynamic</code>?</p>\n\n<p>e.g.</p>\n\n<p>When I visit one of the Thing Group present in IoT Core.</p>\n\n<pre><code>You do not have a description for the thing group yet.\n\nCreated\nJul 26, 2019 11:21:44 AM -0700\n\nType\nStatic\n\n0 Attributes\n</code></pre>\n\n<p>I tried a few variants, but they did not work.</p>\n\n<pre><code>Type: Dynamic\nattributes.Type: Dynamic\nType == Dynamic\n</code></pre>\n\n<p>Thanks in advance for any suggestions.</p>\n"
    }, {
        "tags": ["php", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 255,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1580757581,
        "creation_date": 1578935009,
        "last_edit_date": 1579535730,
        "question_id": 59720964,
        "link": "https://stackoverflow.com/questions/59720964/aws-iot-get-thing-connection-status",
        "title": "AWS IOT: Get Thing connection status",
        "body": "<p>I currently have a bunch or things registered in the AWS IOT console. i am building a web-page that will list things and display attributes from each things shadow. i am struggling to understand how do i know if a thing is currently online in (near) real time. I am retrieving the things using the <strong>PHP SDK</strong></p>\n\n<pre><code>IotClient-&gt;listThings()\n</code></pre>\n\n<hr>\n\n<p>I am displaying their attributes using</p>\n\n<pre><code>IotDataPlaneClient-&gt;getThingShadow()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>IotDataPlaneClient-&gt;updateThingShadow()\n</code></pre>\n\n<p>to update the shadow and this is all working fine.</p>\n\n<p>But i have no way of knowing Whether or not a thing is online at a the moment.</p>\n"
    }, {
        "tags": ["iot", "gateway", "thingsboard"],
        "is_answered": false,
        "view_count": 689,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1580470305,
        "creation_date": 1521193134,
        "question_id": 49317382,
        "link": "https://stackoverflow.com/questions/49317382/how-to-update-device-attributes-with-thingsboard-iot-gateway",
        "title": "How to update device attributes with thingsboard Iot gateway",
        "body": "<p>I'd like to update attributes from the device using Thingsboard IoT Gateway, but it will not work.</p>\n\n<p>Thingsboard 1.4.0\nThingsboard IoT Gateway 1.2\nMosqquito(Broker)\nNode.js(Client)</p>\n\n<p>It all starts up and calls the attribute update API of the device, but the Gateway log does not appear and it does not seem to have arrived.</p>\n\n<hr>\n\n<p>Client ->(OK) Mosqquito ->(??? no log) Gateway -> Thingsboard</p>\n\n<hr>\n\n<p>mqtt-config.json uses this as it is.\n<a href=\"https://github.com/thingsboard/thingsboard-gateway/blob/master/src/main/resources/mqtt-config.json\" rel=\"nofollow noreferrer\">https://github.com/thingsboard/thingsboard-gateway/blob/master/src/main/resources/mqtt-config.json</a></p>\n\n<p>teremetoryAPI is working (value has been updated as seen in Console)\nPlease tell me what settings should be made to update the attributes of the device.</p>\n\n<pre><code>var mqtt = require('mqtt');\nvar os = require(\"os\");\nrequire('date-utils');\nvar device = 'T-001';\n\nconst thingsboardHost = \"mqtt://127.0.0.1:1883\";\n\nconsole.log('Connecting to: %s', thingsboardHost);\nvar client  = mqtt.connect(thingsboardHost, {\n    will: {topic: device + '/disconnect', payload: '', qos: 1}\n});\n\nvar appState;\n\nclient.on('connect', function () {\n    publish(device + '/connect', \"\");\n    console.log('Client connected!');\n\n    // teremetory OK\n    publish('sensor/' + device + '/temperature', JSON.stringify({\"firmware_version\":\"1.0.2\", \"value\":\"37.7\"}));\n\n    // attribute NG ?????\n    publish(\"sensor/\" + device + \"/appState\", JSON.stringify({\"appState\":\"123\"}));\n});\n\nclient.on('message', function (topic, message) {\n    console.log('Received attribute topic: %s, message: %s', topic, message.toString());\n})\n\nfunction publish (topic, json) {\n    client.publish(topic, json);\n    console.log('Client publish. topic[' + topic + \"] [\" + json + \"]\");\n}\n</code></pre>\n"
    }, {
        "tags": ["node.js", "azure", "iot", "x509certificate", "azure-iot-hub"],
        "is_answered": false,
        "view_count": 182,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1580370708,
        "creation_date": 1580370708,
        "last_edit_date": 1592644375,
        "question_id": 59981274,
        "link": "https://stackoverflow.com/questions/59981274/how-to-get-activate-device-in-x509-self-assigned-device-type-in-azure-iot-hub",
        "title": "How to get activate device in X509 self assigned Device type in Azure IOT hub?",
        "body": "<p>I am new to IOT and X509 Authentication provisioning.</p>\n<p>I am able to register device using node.js in Azure IOT hub (Self Assigned X509 Device type).</p>\n<p>The pipeline is,</p>\n<pre><code>1. Download certificate of the registered device type.\n2. convert into key and cert pem files\n3. pass register id as device id\n</code></pre>\n<p>register_X509.js</p>\n<pre><code>'use strict';\n\nvar fs = require('fs');\n\nvar Client = require('azure-iot-device').Client;\nvar Message = require('azure-iot-device').Message;\n\nvar X509AuthenticationProvider = require('azure-iot-device').X509AuthenticationProvider;\nvar Protocol = require('azure-iot-device-mqtt').Mqtt;\n\n\nvar Transport = require('azure-iot-provisioning-device-mqtt').Mqtt;\n\nvar X509Security = require('azure-iot-security-x509').X509Security;\nvar ProvisioningDeviceClient = require('azure-iot-provisioning-device').ProvisioningDeviceClient;\n\nvar provisioningHost = 'my-provisioning-host';\nvar idScope = 'id-scope';\n\nvar registrationId = 'registration-id';\nvar deviceCert = {\n  cert: fs.readFileSync('cert.pem').toString(),\n  key: fs.readFileSync('key.pem').toString()\n};\n\n\nvar transport = new Transport();\nvar securityClient = new X509Security(registrationId, deviceCert);\nvar deviceClient = ProvisioningDeviceClient.create(provisioningHost, idScope, transport, securityClient);\n\n// Register the device.  Do not force a re-registration.\ndeviceClient.register(function(err, result) {\n  if (err) {\n    console.log(&quot;error registering device: &quot; + err);\n  } else {\n    console.log('registration succeeded');\n    console.log('assigned hub=' + result.assignedHub);\n    console.log('deviceId=' + result.deviceId);\n\n    var client = Client.fromAuthenticationProvider(X509AuthenticationProvider.fromX509Options(\n      result.deviceId, result.assignedHub, deviceCert\n    ), Protocol);\n    var connectCallback = function (err) {\n      if (err) {\n        console.error('Could not connect: ' + err.message);\n      } else {\n        console.log('Client connected');\n        // Create device Twin\n        client.getTwin(function (err, twin) {\n          if (err) {\n            console.error('could not get twin');\n          } else {\n            console.log('twin created');\n\n            console.log('twin contents:');\n            console.log(twin.properties);\n\n            // Send Event message\n            setTimeout(function () {\n              var data = JSON.stringify({\n                'did':  result.deviceId,\n                'dts':  new Date().toISOString(),\n                'desiredStatus':  'Activated',\n                'reportedStatus':  'Activating',\n                'msg': []\n              });\n              var message = new Message(data);\n              console.log('Sending message: ' + message.getData());\n              client.sendEvent(message, printResultFor('send'));\n            }, 1000);\n\n          }\n        });\n\n        client.on('error', function (err) {\n          console.error(err.message);\n        });\n\n        client.on('message', function (msg) {\n          console.log('Id: ' + msg.messageId + ' Body: ' + msg.data);\n          // When using MQTT the following line is a no-op.\n          client.complete(msg, printResultFor('completed'));\n          // The AMQP and HTTP transports also have the notion of completing, rejecting or abandoning the message.\n          // When completing a message, the service that sent the C2D message is notified that the message has been processed.\n          // When rejecting a message, the service that sent the C2D message is notified that the message won't be processed by the device. the method to use is client.reject(msg, callback).\n          // When abandoning the message, IoT Hub will immediately try to resend it. The method to use is client.abandon(msg, callback).\n          // MQTT is simpler: it accepts the message by default, and doesn't support rejecting or abandoning a message.\n        });\n      }\n    };\n    client.open(connectCallback);\n  }\n});\n\n// Helper function to print results in the console\nfunction printResultFor(op) {\n  return function printResult(err, res) {\n    if (err) console.log(op + ' error: ' + err.toString());\n    if (res) console.log(op + ' status: ' + res.constructor.name);\n  };\n}\n</code></pre>\n<p>At the end of this output, my device is registed under IOT hub and I am able to make connection as well using following code.</p>\n<p>The output of the above script is,</p>\n<blockquote>\n<p>registration succeeded</p>\n<p>assigned hub=my-end-point.net</p>\n<p>deviceId=my-device-id</p>\n<p>Client connected</p>\n<p>twin created</p>\n<p>twin contents:null: Object {reported: Object, desired: Object}</p>\n<p>Sending message: {&quot;did&quot;:&quot;my-device-id&quot;,&quot;dts&quot;:&quot;2020-01-30T07:18:38.471Z&quot;,&quot;desiredStatus&quot;:&quot;Activated&quot;,&quot;reportedStatus&quot;:&quot;Activating&quot;,&quot;msg&quot;:[]}</p>\n<p>send status: MessageEnqueued</p>\n</blockquote>\n<p>it says messages is in queue but I am unable to activate the device.</p>\n<p>I'm stuck at this stage, Can anyone help me to get rid of this?</p>\n<p>any idea why it's not working or Am I going in the right approach would be welcome.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "greengrass"],
        "is_answered": true,
        "view_count": 586,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1580115576,
        "creation_date": 1578840261,
        "question_id": 59704928,
        "link": "https://stackoverflow.com/questions/59704928/how-to-connect-device-to-aws-greengrass",
        "title": "how to connect device to AWS greengrass",
        "body": "<p>I am using <a href=\"https://www.mokosmart.com/mokosmart-mkgw1-gateway-iot-cloud-platform/\" rel=\"nofollow noreferrer\">MOKOSMART_mkgw1</a> to collect data and send it to AWS IoT Core.\nfor that, I need to set the following configurations,</p>\n\n<ol>\n<li>endpoint (aws iot endpoint)</li>\n<li>topic (any)</li>\n<li>device certificate and private key</li>\n<li>root ca.  </li>\n</ol>\n\n<p>I was able to connect and send data to aws iot core.</p>\n\n<h2>now I want to connect it to aws greengrass device instead of iot core directly.</h2>\n\n<p>i have greengrass running, on ip 192.196.1.12 on port 8883 (windows machine).\ni download Group CA using <a href=\"https://docs.aws.amazon.com/greengrass/latest/developerguide/gg-discover-api.html\" rel=\"nofollow noreferrer\">basic discovery api</a>. so i used this mqtt settings for device:</p>\n\n<ol>\n<li>broker endpoint (192.168.1.12:8883)</li>\n<li>topic (same as registered in subscription in aws iot GG) </li>\n<li>device certificate and private key (the device is registered in aws iot GG)</li>\n<li>Group CA (downloaded by basic discovery sample application)</li>\n</ol>\n\n<p>but i am still not able to connect to aws gg?</p>\n\n<p>my understanding is aws GG also has a MQTT broker. so by providing a proper authentication and topic, i should be able to connect to it, whether or not I have aws device SDKs or not. am i wrong? what does \"<a href=\"https://github.com/aws/aws-iot-device-sdk-python\" rel=\"nofollow noreferrer\">basic discovery example</a>\" do extra to be able to connect to aws gg ??</p>\n\n<hr>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "publish", "rate-limiting"],
        "is_answered": true,
        "view_count": 425,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1579874632,
        "creation_date": 1566354975,
        "question_id": 57583745,
        "link": "https://stackoverflow.com/questions/57583745/limit-block-mqtt-publish-limit-from-thing-in-aws-iot",
        "title": "Limit/Block MQTT publish limit from thing in AWS IoT",
        "body": "<p>In AWS IoT Core, we created few things and allow policy for thing to publish certain topic.</p>\n\n<p>Question here is that possible to limit the thing publish such as only 1000 publish per day on each things. This is not the AWS publish limit per second but our customized limit on things.</p>\n\n<p>Any possibility to do in AWS IoT security policy on thing certificate? Or topic? This should be first level of limit to reject over-publish before it goes to rule engine.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot"],
        "is_answered": true,
        "view_count": 365,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1579702137,
        "creation_date": 1457026863,
        "last_edit_date": 1513678088,
        "question_id": 35779232,
        "link": "https://stackoverflow.com/questions/35779232/cant-create-and-attach-an-aws-iot-policy-to-my-certificate",
        "title": "Can&#39;t create and attach an AWS IoT Policy to my certificate",
        "body": "<p>I'm following seemingly simple <a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/secure-communication.html\" rel=\"nofollow noreferrer\">instructions</a> on setting up Amazon IOT, and came to halt when trying to create policy. </p>\n\n<p>Documentation says to create a policy with a sample JSON provided. I am following the instructions exactly:</p>\n\n<p>I created a txt file called myTestPolicy.txt like this:</p>\n\n<pre><code>{\n\n    \"Version\": \"2016-3-3\", \n    \"Statement\": [{\n        \"Effect\": \"Allow\",\n        \"Action\":[\"iot:*\"],\n        \"Resource\": [\"*\"]\n    }]\n}\n</code></pre>\n\n<p>placed in the local folder, but when I run the command:</p>\n\n<p><strong>aws iot create-policy --policy-name \"PubSubToAnyTopic\" --policy-document file://myTestPolicy.txt</strong></p>\n\n<p>I get an error:</p>\n\n<blockquote>\n  <p><em>A client error (MalformedPolicyException) occurred when calling the CreatePolicy operation: Policy document is Malformed</em></p>\n</blockquote>\n\n<p>Totally stuck, googling yields no answers, can anyone help?</p>\n"
    }, {
        "tags": ["json", "iot", "fiware"],
        "is_answered": true,
        "view_count": 64,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1578939614,
        "creation_date": 1571299930,
        "question_id": 58427850,
        "link": "https://stackoverflow.com/questions/58427850/iot-agent-for-a-json-sensor-sends-measures-already-in-ngsi",
        "title": "IoT Agent for a JSON - Sensor sends measures already in NGSI",
        "body": "<p>We have a FIWARE based architecture that uses the <a href=\"https://github.com/telefonicaid/iotagent-json\" rel=\"nofollow noreferrer\">IoT Agent for a JSON based protocol</a>.</p>\n\n<p>We have a sensor that sends measures, whose format is already NGSI.</p>\n\n<p>I thought the behavior of the agent was to recognize the NGSI format and manipulate the data so that the final result is correct.</p>\n\n<p>Instead, the current result is that the value on Orion becomes the full NGSI.</p>\n\n<p>e.g.</p>\n\n<p>Attribute on Orion Entity:</p>\n\n<pre><code>\"altitude\": {\n    \"type\": \"number\",\n    \"value\": \"12\",\n    \"metadata\": {\n        \"TimeInstant\": {\n            \"type\": \"ISO8601\",\n            \"value\": \"2019-10-16T09:01:40.460Z\"\n        }\n    }\n}\n</code></pre>\n\n<p>Send: </p>\n\n<pre><code>{\n    \"altitude\": {\n        \"value\": \"22\"\n      }\n  }\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>  \"altitude\": {\n        \"type\": \"number\",\n        \"value\": {\n            \"value\": \"22\"\n        },\n        \"metadata\": {\n            \"TimeInstant\": {\n                \"type\": \"ISO8601\",\n                \"value\": \"2019-10-16T09:08:50.307Z\"\n            }\n        }\n    }\n</code></pre>\n\n<p>Is it correct ?</p>\n"
    }, {
        "tags": ["mqtt", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 568,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1578121927,
        "creation_date": 1575477899,
        "question_id": 59180900,
        "link": "https://stackoverflow.com/questions/59180900/esp8266-subscribe-to-aws-iot-topic",
        "title": "ESP8266 Subscribe to AWS IOT topic",
        "body": "<p>Hi I need to create a lambda function which will access the AWS thing and publish MQTT message, I'd like to get the published message on the ESP8266 which was connected to the thing as well, and controlled turn on/off the LED on ESP8266. So far I have uploaded the private.der, cert.der and ca.der to the ESP8266 absolutely, but it couldn't subscribed AWS IOT, please point me in the right tips then please share.</p>\n\n<p>Code:</p>\n\n<pre><code>       #include &lt;ESP8266WiFi.h&gt;\n       #include &lt;PubSubClient.h&gt;\n       #include &lt;NTPClient.h&gt;\n       #include &lt;WiFiUdp.h&gt;\n       #include &lt;ArduinoJson.h&gt;\n       #define OUT_TOPIC \"$aws/things/devices/shadow/update\"\n       #define IN_TOPIC \"$aws/things/devices/shadow/update/delta\"\n        const char* ssid = \"sid\";\n        const char* password = \"password\";\n\n        WiFiUDP ntpUDP;\n        NTPClient timeClient(ntpUDP, \"pool.ntp.org\");\n\n        const char* AWS_endpoint = \"endpoint.amazonaws.com\";//MQTT broker ip\n\n        const char* json = \"{\\\"state\\\":{\\\"reported\\\":{\\\"led\\\":\\\"off\\\"}}}\";\n\n        StaticJsonDocument&lt;1024&gt; doc;\n\n        WiFiClientSecure espClient;\n        PubSubClient mqttClient(espClient);//set MQTT port number to 8883 as per standard\n        PubSubClient client(AWS_endpoint, 8883, espClient); \n        long lastMsg = 0;\n        char msg[50];\n        int value = 0;\n\n        void setup_wifi() {\n\n        delay(10);// We start by connecting to a WiFi network\n        espClient.setBufferSizes(512, 512);\n        Serial.println();\n        Serial.print(\"Connecting to \");\n        Serial.println(ssid);\n\n        WiFi.begin(ssid, password);\n\n        while (WiFi.status() != WL_CONNECTED) \n    {\n        delay(500);\n        Serial.print(\".\");\n        }\n        Serial.println(\"\");\n        Serial.println(\"WiFi connected\");\n        Serial.println(\"IP address: \");\n        Serial.println(WiFi.localIP());\n\n        timeClient.begin();\n        while(!timeClient.update()){\n        timeClient.forceUpdate();\n        }\n\n        espClient.setX509Time(timeClient.getEpochTime());\n\n        int qos = 0;//Maximum size of data that can be communicated\n        Serial.println(MQTT_MAX_PACKET_SIZE);\n        if(mqttClient.subscribe(IN_TOPIC, qos)){\n        Serial.println(\"Subscribed.\");\n        Serial.println(\"Success!!\");\n        }\n\n        deserializeJson(doc, json);\n        JsonObject obj = doc.as&lt;JsonObject&gt;();\n\n        if(mqttClient.publish(OUT_TOPIC, json)){\n        Serial.println(\"Published!!\");\n        }\n\n        }\n\n        void setup() {\n\n        Serial.begin(115200);\n        Serial.setDebugOutput(true);\n        // initialize digital pin LED_BUILTIN as an output.\n        pinMode(LED_BUILTIN, OUTPUT);\n        setup_wifi();\n        delay(1000);\n        if (!SPIFFS.begin()) {\n        Serial.println(\"Failed to mount file system\");\n        return;\n        }\n\n        Serial.print(\"Heap: \"); Serial.println(ESP.getFreeHeap());\n\n        //replace cert.crt eith your uploaded file name\n        File cert = SPIFFS.open(\"/cert.der\", \"r\"); \n        if (!cert) {\n        Serial.println(\"Failed to open cert file\");\n        }\n        else\n        Serial.println(\"Success to open cert file\");\n\n        delay(1000);\n        if (espClient.loadCertificate(cert))\n        Serial.println(\"cert loaded\");\n        else\n        Serial.println(\"cert not loaded\");\n\n        // Load private key file\n        File private_key = SPIFFS.open(\"/private.der\", \"r\");//replace private eith your uploaded file name\n        if (!private_key) {\n        Serial.println(\"Failed to open private cert file\");\n        }\n        else\n        Serial.println(\"Success to open private cert file\");\n\n        delay(1000);\n\n        if (espClient.loadPrivateKey(private_key))\n        Serial.println(\"private key loaded\");\n        else\n        Serial.println(\"private key not loaded\");\n        // Load CA file\n        File ca = SPIFFS.open(\"/ca.der\", \"r\"); \n        //replace ca eith your uploaded file name\n        if (!ca) {\n        Serial.println(\"Failed to open ca \");\n        }\n        else\n        Serial.println(\"Success to open ca\");\n\n        delay(1000);\n\n        if(espClient.loadCACert(ca))\n        Serial.println(\"ca loaded\");\n        else\n        Serial.println(\"ca failed\");\n        Serial.print(\"Heap: \"); \n        Serial.println(ESP.getFreeHeap());\n        }\n\n        void callback (char* topic, byte* payload, unsigned int length) {\n\n        Serial.println(\"Received. topic=\");\n        Serial.println(topic);\n        char subsc[length];\n        for(int i=0; i&lt;length; i++){\n        subsc [i]=(char)payload[i];\n        subsc [length]='\\0';\n        Serial.print(subsc);\n        }\n        Serial.print(\"\\n\");\n        digitalWrite(LED_BUILTIN, HIGH);\n        }\n\n        void mqttLoop() {\n        mqttClient.loop();\n        delay(100);\n        //digitalWrite(LED_pin, LOW);\n        digitalWrite(LED_BUILTIN, LOW); \n        Serial.print(\".\");\n        }\n        void loop() {\n</code></pre>\n"
    }, {
        "tags": ["android", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 1929,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1578106614,
        "creation_date": 1504509925,
        "last_edit_date": 1504689107,
        "question_id": 46032213,
        "link": "https://stackoverflow.com/questions/46032213/how-to-get-aws-iot-thing-shadow-on-android-app",
        "title": "How to get aws-iot thing shadow on android app",
        "body": "<p><strong><em>want to start development with AWS IOT using Android app</em></strong></p>\n\n<p>I am seeking for example for IOT in android. need to start basic configuration on AWS console and android app. i already tested temperature  demo but didn't get any clue from that! need a basic steps on shadow, policy , role. how to configure them step by step and use of cognito.</p>\n\n<p><em>below getshadow() method is called onCreate , need to update value on real time basis not ony onCreate.</em></p>\n\n<pre><code>  public void getShadows() {\n\n        GetShadowTask getControlShadowTask = new GetShadowTask(\"TemperatureControl\");\n       getControlShadowTask.execute();\n    }\n\n\n    private class GetShadowTask extends AsyncTask&lt;Void, Void, AsyncTaskResult&lt;String&gt;&gt; {\n\n        private final String thingName;\n\n        public GetShadowTask(String name) {\n            thingName = name;\n        }\n\n        @Override\n        protected AsyncTaskResult&lt;String&gt; doInBackground(Void... voids) {\n            try {\n                GetThingShadowRequest getThingShadowRequest = new GetThingShadowRequest()\n                        .withThingName(thingName);\n                GetThingShadowResult result = iotDataClient.getThingShadow(getThingShadowRequest);\n//                Toast.makeText(getApplication(),result.getPayload().remaining(),Toast.LENGTH_LONG).show();\n                byte[] bytes = new byte[result.getPayload().remaining()];\n                result.getPayload().get(bytes);\n                String resultString = new String(bytes);\n                return new AsyncTaskResult&lt;String&gt;(resultString);\n            } catch (Exception e) {\n\n                Log.e(\"E\", \"getShadowTask\", e);\n                return new AsyncTaskResult&lt;String&gt;(e);\n            }\n        }\n\n        @Override\n        protected void onPostExecute(AsyncTaskResult&lt;String&gt; result) {\n            if (result.getError() == null) {\n                JsonParser parser=new JsonParser();\n                JsonObject jsonObject= (JsonObject) parser.parse(result.getResult());\nresponse=result.getResult();\n         setPoint=jsonObject.getAsJsonObject(\"state\").getAsJsonObject(\"reported\")\n               .get(\"current_date\").getAsString();\ntextView.setText(setPoint);\n           //     Toast.makeText(getApplication(),setPoint,Toast.LENGTH_LONG).show();\n                Log.i(GetShadowTask.class.getCanonicalName(), result.getResult());\n\n            } else {\n                Log.e(GetShadowTask.class.getCanonicalName(), \"getShadowTask\", result.getError());\n                Toast.makeText(getApplication(),result.getError().toString(),Toast.LENGTH_LONG).show();\n            }\n        }\n    }\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Thing Shadow</p>\n\n<p>{\n  \"desired\": {\n    \"welcome\": \"aws-iot\"\n  },\n  \"reported\": {\n    \"welcome\": \"aws-iot\",\n    \"current_date\": \"06-Sep-2017 1:26:40 PM\"\n  }\n}</p>\n"
    }, {
        "tags": ["iot", "thingworx", "status-message"],
        "is_answered": false,
        "view_count": 320,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1577097583,
        "creation_date": 1493722768,
        "last_edit_date": 1493735461,
        "question_id": 43736193,
        "link": "https://stackoverflow.com/questions/43736193/status-message-thingworx",
        "title": "Status message thingworx",
        "body": "<p>I create a ThingWorx Project,i use a message box,When a status message appears, it waits 7 seconds and then disappears, if during this time a new message come, status box shows new message and old message together.i want that,it always shows only the new message. </p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-sdk", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 162,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1576913352,
        "creation_date": 1575279731,
        "last_edit_date": 1575289323,
        "question_id": 59136145,
        "link": "https://stackoverflow.com/questions/59136145/aws-iot-core-search-index-rest-api-call-failed-with-resource-not-found-error",
        "title": "AWS IOT Core - Search Index rest api call failed with resource not found error",
        "body": "<p>I am trying to access AWS IOT searchIndex feature as per below post.</p>\n\n<p><a href=\"https://docs.aws.amazon.com/iot/latest/apireference/API_SearchIndex.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/apireference/API_SearchIndex.html</a></p>\n\n<p>I am using URL as below.</p>\n\n<p><a href=\"https://a1bseglysxoew2-ats.iot.ap-south-1.amazonaws.com/indices/search\" rel=\"nofollow noreferrer\">https://a1bseglysxoew2-ats.iot.ap-south-1.amazonaws.com/indices/search</a> with aws V4 authentication. But every time I am getting resource not found Error.</p>\n\n<p>{\"message\":\"Not Found\",\"traceId\":\"bb84265c-07f3-66de-415e-9351d70870ec\"}</p>\n\n<p>I have quertion regarding base url. Which base url I have to user to make rest api call ?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "greengrass"],
        "is_answered": true,
        "view_count": 78,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1576696485,
        "creation_date": 1576646539,
        "question_id": 59385930,
        "link": "https://stackoverflow.com/questions/59385930/how-to-store-sensor-readings-in-aws-greengrass",
        "title": "How to store sensor readings in aws greengrass?",
        "body": "<p>I'm trying to build an aws greengrass setup with 100 sensors connected. Is it possible to store sensor readings in greengrass locally when the internet connection is lost ?</p>\n\n<p>Is there an inbuilt Dynamodb alternative in AWS greengrass ?</p>\n\n<p>What is the best approach to store sensor readings when the internet connectivity is lost in aws greengrass.</p>\n"
    }, {
        "tags": ["android", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 64,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1576264672,
        "creation_date": 1529911656,
        "question_id": 51018232,
        "link": "https://stackoverflow.com/questions/51018232/aws-iot-policyin-android-doesnt-work-with-custom-topic",
        "title": "AWS IoT Policyin Android doesnt work with custom topic",
        "body": "<p>I am using AWS android SDK to connect to AWS IoT.\nThe following policy allow my app to successfully connect to AWS IoT \nexcept when i make this change</p>\n\n<p>\"Resource\": \"arn:aws:iot:us-west-2:1234567890xxx:topic/topic1\"\nI have tried almost every possible custom option but the policy works only for \"*\" wild card that means \"any resource and/or any topics\".</p>\n\n<p><B> Working example successfully connects android app to AWS IoT </B></p>\n\n<pre>\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iot:Connect\",\n             \"Resource\": \"arn:aws:iot:us-west-2:1234567890xxx:client/mobile-client-master\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n            \"iot:Publish\",\n            \"iot:Subscribe\",\n            \"iot:Receive\"\n            ],\n            \"Resource\": \"*\" \n        }\n     ]\n}\n</pre>\n\n<p><B> This Json script fails to connect the android app to AWS IoT </B></p>\n\n<pre>\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iot:Connect\",\n             \"Resource\": \"arn:aws:iot:us-west-2:1234567890xxx:client/mobile-client-master\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n            \"iot:Publish\",\n            \"iot:Subscribe\",\n            \"iot:Receive\"\n            ],\n            \"Resource\": \"arn:aws:iot:us-west-2:1234567890xxx:topic/topic1\" \n        }\n     ]\n}\n</pre>\n\n<p>I have tried almost every possible custom option but the policy works only for \"*\" wild card that means \"any resource and/or any topics\".</p>\n"
    }, {
        "tags": ["javascript", "node.js", "reactjs", "iot"],
        "is_answered": false,
        "view_count": 279,
        "favorite_count": 0,
        "closed_date": 1576167212,
        "score": 2,
        "last_activity_date": 1576167051,
        "creation_date": 1576166757,
        "last_edit_date": 1576167009,
        "question_id": 59308590,
        "link": "https://stackoverflow.com/questions/59308590/react-setstate-of-an-object-returns-undefined",
        "title": "React setState of an object returns undefined",
        "body": "<p>So I have this react app made for a IoT project that as 3 charts with temperature and humity of soil and air, I make a fetch to my API witch returns a response JSON similar to this(But with 10 data values, I didn't include all to not make this post huge):</p>\n\n<pre><code>{\n  \"dados\":[\n{\n  \"T_air\":20,\n  \"H_air\":60,\n  \"soil\":70,\n  \"Time\":\"2019-12-12T16:09:35.719Z\"\n},\n{\n  \"T_air\":20,\n  \"H_air\":60,\n  \"soil\":70,\n  \"Time\":\"2019-12-12T16:09:35.719Z\"\n},\n{\n  \"T_air\":20,\n  \"H_air\":60,\n  \"soil\":70,\n  \"Time\":\"2019-12-12T16:09:35.719Z\"\n},\n{\n  \"T_air\":20,\n  \"H_air\":60,\n  \"soil\":70,\n  \"Time\":\"2019-12-12T16:09:35.719Z\"\n},\n{\n  \"T_air\":20,\n  \"H_air\":60,\n  \"soil\":70,\n  \"Time\":\"2019-12-12T16:09:35.719Z\"\n}\n],\n  \"LastTime\":\"12/12/2019, 15:43:53\"\n}\n</code></pre>\n\n<p>The point is I need to print the <code>LastTime</code> object in the render, for that I use the <code>setState</code> property but if console.log the ResData I can see my object, however if I console.log <code>results</code> It says undefined.\nYou can see in my code that if I use <code>ResData.dados[i].T_air</code> it gives no problem at all, so It's not the API fault.</p>\n\n<pre><code>import React, { Component } from 'react';\nimport '../App1.css'\nimport CanvasJSReact from '../assets/canvasjs.react';\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\n\nvar dataPoints =[];\nvar dataPoints_1 = [];\nvar dataPoints_2 = [];\n\n\nclass LineChart extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            results: []\n        };\n    }\n\n.\n.\n.\n.\ncomponentDidMount(){\n        var chart = this.chart;\n        var chart1 = this.chart1;\n        var chart2 = this.chart2;\n        fetch('http://localhost:4000/espdata/')\n        .then((response) =&gt; {\n            return response.json();\n        })\n        .then((ResData) =&gt; {\n            for (var i = 0; i &lt; 10; i++) {\n                var today = new Date(ResData.dados[i].Time);\n                dataPoints.push({\n                    x: today,\n                    y: ResData.dados[i].T_air\n                });\n                dataPoints_1.push({\n                    x: today,\n                    y: ResData.dados[i].H_air\n                });\n                dataPoints_2.push({\n                    x: today,\n                    y: ResData.dados[i].soil\n                });\n            }\n            chart.render();\n            chart1.render();\n            chart2.render();\n            this.setState({results: ResData.LastTime});\n            console.log(this.results);   //UNDEFINED\n            console.log(ResData.LastTime) // \"12/12/2019, 15:43:53\"\n        });\n    }\n.\n.\n.\n.\n</code></pre>\n"
    }, {
        "tags": ["iot", "bosch-iot-suite", "eclipse-vorto", "bosch-iot"],
        "is_answered": true,
        "view_count": 70,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1576071207,
        "creation_date": 1565174970,
        "last_edit_date": 1576071207,
        "question_id": 57392689,
        "link": "https://stackoverflow.com/questions/57392689/is-there-a-vorto-eclipse-model-importer-api",
        "title": "Is there a Vorto Eclipse Model Importer API",
        "body": "<p>I am setting up an automation, and wanted to ask if there is an API to import Vorto models. Right now, it looks like it is only possible via the website (<a href=\"https://vorto.eclipse.org/#/import\" rel=\"nofollow noreferrer\">https://vorto.eclipse.org/#/import</a>).</p>\n\n<p>At <a href=\"https://www.eclipse.org/vorto/swagger/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/vorto/swagger/</a> there is a 'Vorto Importer Plugin API'. I guess this API is only for importing plugins as the name suggests.</p>\n\n<p>If this is not available, are there any plans to implement such a function?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot", "greengrass"],
        "is_answered": true,
        "view_count": 107,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1573951870,
        "creation_date": 1573539829,
        "question_id": 58813121,
        "link": "https://stackoverflow.com/questions/58813121/how-to-connect-a-device-which-is-outside-the-greengrass-group-to-a-greengrass",
        "title": "How to connect a device (which is outside the greengrass group) to a greengrass group?",
        "body": "<p>How can one connect the java application running outside the greengrass group to a greengrass group ? Kindly help me with this. Any thoughts/suggestions are appreciated.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "amazon-sns", "aws-iot", "localstack"],
        "is_answered": false,
        "view_count": 1607,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1573095573,
        "creation_date": 1573095573,
        "question_id": 58741339,
        "link": "https://stackoverflow.com/questions/58741339/localstack-error-for-iot-connection-was-closed-before-we-received-a-valid-respo",
        "title": "localstack error for IoT: Connection was closed before we received a valid response",
        "body": "<p>I am trying to setup localstack for our AWS IoT stack testing. But I am getting connection timeout error for very basic API such as <code>list-thing-groups</code>, <code>list-thing</code>, etc. As IoT is not supported in the free tier, I am using the paid version of the localstack. I have enabled SQS, SNS and IoT services using localstack by setting up the variable <code>SERVICES</code></p>\n\n<pre><code>export SERVICES=sqs,sns,iot\n</code></pre>\n\n<p>Getting the following error message:</p>\n\n<pre><code>$ aws --endpoint-url=http://localhost:4589 iot list-thing-groups\nConnection was closed before we received a valid response from endpoint URL: \"http://localhost:4589/thing-groups\".\n</code></pre>\n\n<p>When I tried to use SNS, it worked fine without any issue. Not sure why it is not working for IoT. The message after starting the localstack container does not talk about IoT, not sure why.</p>\n\n<pre><code>Starting local dev environment. CTRL-C to quit.\n2019-11-07T01:37:24:INFO:localstack_ext.bootstrap.licensing: Successfully activated API key\nWaiting for all LocalStack services to be ready\nStarting mock SNS (http port 4575)...\n2019-11-07T01:37:25:INFO:localstack.multiserver: Starting multi API server process on port 51492\nStarting mock SQS (http port 4576)...\nReady.\n</code></pre>\n\n<p>Let me know if I am missing anything.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "greengrass"],
        "is_answered": true,
        "view_count": 577,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1573076314,
        "creation_date": 1547613192,
        "last_edit_date": 1592644375,
        "question_id": 54210468,
        "link": "https://stackoverflow.com/questions/54210468/can-not-start-greengrassd-aws-iot-greengrass-on-raspberrypi",
        "title": "can not start greengrassd (AWS IOT greengrass) on raspberrypi",
        "body": "<p>I have register AWS IoT Greengrass group.</p>\n<p>I also download Greengrass certificate from console and <a href=\"https://www.amazontrust.com/repository/AmazonRootCA1.pem\" rel=\"nofollow noreferrer\">AmazonRoot-CA1</a></p>\n<p>here is list my certificate files(store in /greengrass/certs/):</p>\n<pre><code>-rw-r--r-- 1 pi pi 1220 Jan 15 10:07 82ab16xxxx.cert.pem\n-rw-r--r-- 1 pi pi 1679 Jan 15 10:07 82ab16xxxx.private.key\n-rw-r--r-- 1 pi pi  451 Jan 15 10:07 82ab16xxxx.public.key\n-rw-r--r-- 1 pi pi 1188 Jan 15 10:07 root.ca.pem\n</code></pre>\n<p>When I start greengrassd by command:</p>\n<pre><code>sudo ./greengrassd start\n</code></pre>\n<p>I have error:</p>\n<pre><code>Setting up greengrass daemon\nValidating hardlink/softlink protection\nWaiting for up to 40s for Daemon to start\nError occured while generating TLS config: ErrUnknownURIScheme: no handlers matched for path: .../greengrass/certs/root.ca.pem\nThe Greengrass daemon process with [pid = 18029] died\n</code></pre>\n<p>I have try to re-install OS but still error.</p>\n<p>I also install mosquitto-clients and mosquitto on raspberrypi</p>\n<p>Thanks.</p>\n"
    }, {
        "tags": ["iot", "fiware"],
        "is_answered": true,
        "view_count": 260,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1573044122,
        "creation_date": 1530094903,
        "question_id": 51060332,
        "link": "https://stackoverflow.com/questions/51060332/what-is-the-ngsi-v2-endpoint-for-mimicking-iot-agent-commands",
        "title": "What is the NGSI v2 endpoint for mimicking IoT Agent commands?",
        "body": "<p>When testing commands Southbound, I am currently using the NGSI v1 endpoint as shown:</p>\n\n<pre><code>curl -X POST \\\n  'http://{{iot-agent}}/v1/updateContext' \\\n  -H 'Content-Type: application/json' \\\n  -H 'fiware-service: openiot' \\\n  -H 'fiware-servicepath: /' \\\n  -d '{\n    \"contextElements\": [\n        {\n            \"type\": \"Bell\",\n            \"isPattern\": \"false\",\n            \"id\": \"urn:ngsi-ld:Bell:001\",\n            \"attributes\": [\n                {\n                    \"name\": \"ring\",\n                    \"type\": \"command\",\n                    \"value\": \"\"\n                }\n            ]\n        }\n    ],\n    \"updateAction\": \"UPDATE\"\n}'\n</code></pre>\n\n<p>As you can see this is an NGSI v1 request. According to <a href=\"https://www.slideshare.net/fermingalan/orioncontextbroker20180615\" rel=\"nofollow noreferrer\">this presentation</a> on Slideshare (slide 16) use of NGSI v1 is <strong>discouraged</strong> - I would like to replace this with an NGSI v2 request. I believe that all IoT Agents are now NGSI v2 capable, however I have been unable to find the details of the replacement NGSI v2 request within the documentation.</p>\n\n<p>So the question is what is the equivalent cUrl command to mimic a command from Orion using NGSI v2?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 3738,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1572943699,
        "creation_date": 1551918086,
        "question_id": 55034228,
        "link": "https://stackoverflow.com/questions/55034228/how-to-check-aws-iot-device-connection-status-on-the-web-console",
        "title": "How to check AWS IoT Device connection status on the web console?",
        "body": "<p>I just started playing with AWS IoT. I created a thing and use mqtt-spy to connect to AWS server. All is ok.</p>\n\n<p>Now I'd like to check the status of each thing in the web console, however I couldn't find such useful info near the device.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "espruino"],
        "is_answered": true,
        "view_count": 185,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1572517715,
        "creation_date": 1572484564,
        "question_id": 58635690,
        "link": "https://stackoverflow.com/questions/58635690/use-aws-iot-device-sdk-with-espruino-and-esp8266",
        "title": "Use AWS IoT Device SDK with Espruino and ESP8266",
        "body": "<p>I'm trying to use the NodeMCU with Espruino IDE and Javascript to send data to AWS IoT Core. However, there's a problem because the Espruino doesn't find the aws-iot-device-sdk module. How can I import it? Or what's an alternative for what I want to do?</p>\n\n<p>Below is the code:</p>\n\n<pre><code>var wifi = require(\"Wifi\");\nvar awsIot = require('aws-iot-device-sdk');\nvar WIFI_SSID = \"&lt;Wifi&gt;\";\nvar WIFI_OPTIONS = {\n  password : \"&lt;Password&gt;\"\n};\n\nvar device = awsIot.device({\n   keyPath: 'xxxxxxxxxx-private.pem.key',\n  certPath: 'xxxxxxxxxx-certificate.pem.crt',\n    caPath: 'rootCA.pem',\n  clientId: 'nodejs-thing',\n      host: 'xxxxxxxxxxxxxx-ats.iot.us-east-2.amazonaws.com'\n});\n\nwifi.stopAP(); // disable Wi-Fi AP\n\nwifi.connect(WIFI_SSID, WIFI_OPTIONS, function(err) {\n  if (err) {\n    console.log(\"ERROR: Connection failed, error: \" + err);\n  } else {\n    console.log(\"INFO: Successfully connected\");\n    console.log(wifi.getStatus());\n    console.log(wifi.getIP());\n\n    // set hostname and make the NodeMCU available\n    // through espruino.local (ping or for using the\n    // Espruino IDE over Wi-Fi\n    wifi.setHostname(\"espruino\");\n\n    // save the Wi-Fi settings and they'll be used\n    // automatically at power-up.\n    wifi.save();\n  }\n});\n\ndevice\n  .on('connect', function() {\n    console.log('connect');\n    //device.subscribe('topic_1');\n    device.publish('topic_1', JSON.stringify(\n      { \n        user: 'user',\n        device_id: '02',\n        timestamp: '00:00:00',\n        temp: 45\n      }));\n  });\n\ndevice\n  .on('message', function(topic, payload) {\n    console.log('message', topic, payload.toString());\n  });\n</code></pre>\n\n<p>Thank you so much in advance.</p>\n"
    }, {
        "tags": ["firebase", "google-cloud-platform", "google-cloud-firestore", "iot"],
        "is_answered": false,
        "view_count": 196,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1571869722,
        "creation_date": 1571808165,
        "question_id": 58515968,
        "link": "https://stackoverflow.com/questions/58515968/how-to-get-active-device-list-from-google-cloud-iot-core",
        "title": "How to get active device list from Google Cloud IoT core",
        "body": "<p>I'm using Google's cloud-iot-core in my project with Firebase/Firestore. I've devices in my iot core registry, I want to get active devices from iot core using command or using iot core liabrary(Java/Python). I want to show/update active device in android app and also on Firebase/Firestore. How can I do that?? </p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "freertos", "stm32ldiscovery"],
        "is_answered": true,
        "view_count": 266,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1571164890,
        "creation_date": 1569806533,
        "question_id": 58160496,
        "link": "https://stackoverflow.com/questions/58160496/aws-freertos-failed-to-provision-device-certificate-error48",
        "title": "AWS freeRtos &quot;failed to provision device certificate error:48&quot;",
        "body": "<p>I am new to AWS IoT and working with <strong>STM32L475</strong> Discovery kit board and trying to run the AWS freertos demo for the board based on the <a href=\"https://docs.aws.amazon.com/freertos/latest/userguide/getting_started_st.html\" rel=\"nofollow noreferrer\">AWS getting started guide</a>.I followed all the steps provided in the AWS documentation but encountering the following error.</p>\n\n<p>I had checked the AWS credentials and they are correct. I used the quick connect method to register my board and create the Iot Thing. I also Erased the flash memory before debugging the project thinking that might be causing the issue. </p>\n\n<p>I am using <strong>System workbench on windows 10 (64 bit)</strong> for the project and Teraterm serial terminal with speed setting 115200</p>\n\n<p>Could anyone please let me know how to resolve this issue? Thanks is advance.</p>\n\n<pre><code>1 532 [Tmr Svc] Write certificate...\n2 541 [Tmr Svc] ERROR: Failed to provision certificate 48\n3 547 [Tmr Svc] ERROR: Failed to provision private key 48\n4 8978 [Tmr Svc] WiFi connected to AP NETGEAR30.\n5 8982 [Tmr Svc] IP Address acquired 192.168.0.11\n6 8987 [Tmr Svc] WiFi firmware version is: C3.5.2.5\n7 8991 [Tmr Svc] WiFi firmware is up-to-date.```\n</code></pre>\n"
    }, {
        "tags": ["wpf", "azure", "iot", "azure-iot-hub"],
        "is_answered": false,
        "view_count": 99,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1570559623,
        "creation_date": 1570510051,
        "question_id": 58280337,
        "link": "https://stackoverflow.com/questions/58280337/automatic-update-of-iot-devices-status-in-to-the-wpf-c-application",
        "title": "automatic update of Iot Devices Status in to the WPF C# application",
        "body": "<p>I have IoT device with status(Idle, Recording, Editing, Saving, Offline) which is updated in the device twin by the device app.</p>\n\n<p>I need to get the device status and show in the WPF c# application automatically in real time.</p>\n\n<p>Current the wpf application is updating by using the IoT query string on button click. but i need to update the status without sending request.</p>\n\n<p>Please help me on this.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 641,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1567147935,
        "creation_date": 1539938072,
        "question_id": 52888669,
        "link": "https://stackoverflow.com/questions/52888669/error-iot-tls-connect-l232-failed-mbedtls-ssl-handshake-returned-0x2700",
        "title": "ERROR: iot_tls_connect L#232 failed ! mbedtls_ssl_handshake returned -0x2700",
        "body": "<p>At the moment my study group and I are working on a project. In an attempt to use AWS IoT Core we are trying to use aws-iot-device-sdk-embedded-c. We have created a Thing, created a certificate and downloaded the private key, public (for no reason) key, the certificate and downloaded a root Ca. We have placed these keys and certificates in the certs folder. \nThe thing also has a policy which allows everything currently. We just want a simple connection working before securing anything. </p>\n\n<p>We hope to simply connect using the subscribe_publish_sample in the SDK before proceeding to use the SDK for our own purposes. </p>\n\n<p>We have edited the aws_iot_config.h file to match the naming of the certificates, keys and hostname of our shadow. </p>\n\n<p>So far we haven't been able to find a specific post on any forums about the -0x2700 error code. </p>\n\n<p>The output:</p>\n\n<pre><code>AWS IoT SDK Version 3.0.1-\n\nDEBUG:   main L#159 rootCA /Users/Andy/Documents/Arduino/libraries/aws-iot-device-sdk-embedded-C/samples/linux/subscribe_publish_sample/../../../certs/rootCa.pem\nDEBUG:   main L#160 clientCRT /Users/Andy/Documents/Arduino/libraries/aws-iot-device-sdk-embedded-C/samples/linux/subscribe_publish_sample/../../../certs/2386622fde-certificate.pem.crt\nDEBUG:   main L#161 clientKey /Users/Andy/Documents/Arduino/libraries/aws-iot-device-sdk-embedded-C/samples/linux/subscribe_publish_sample/../../../certs/2386622fde-private.pem.key\nConnecting...\nDEBUG:   iot_tls_connect L#130 \n  . Seeding the random number generator...\nDEBUG:   iot_tls_connect L#138   . Loading the CA root certificate ...\nDEBUG:   iot_tls_connect L#144  ok (0 skipped)\n\nDEBUG:   iot_tls_connect L#146   . Loading the client cert. and key...\nDEBUG:   iot_tls_connect L#159  ok\n\nDEBUG:   iot_tls_connect L#161   . Connecting to xxxxxxxxx-xxx.iot.eu-west-1.amazonaws.com/8883...\nDEBUG:   iot_tls_connect L#180  ok\n\nDEBUG:   iot_tls_connect L#182   . Setting up the SSL/TLS structure...\nDEBUG:   iot_tls_connect L#223 \n\nSSL state connect : 0 \nDEBUG:   iot_tls_connect L#226  ok\n\nDEBUG:   iot_tls_connect L#228 \n\nSSL state connect : 0 \nDEBUG:   iot_tls_connect L#229   . Performing the SSL/TLS handshake...\nDEBUG:   _iot_tls_verify_cert L#49 \nVerify requested for (Depth 3):\n\nDEBUG:   _iot_tls_verify_cert L#51 cert. version     : 3\nserial number     : A7:0E:4A:4C:34:82:B7:7F\nissuer name       : C=US, O=Starfield Technologies, Inc., OU=Starfield Class 2 Certification Authority\nsubject name      : C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2\nissued  on        : 2009-09-02 00:00:00\nexpires on        : 2034-06-28 17:39:16\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\n\nDEBUG:   _iot_tls_verify_cert L#56 cert. version     : 3\nserial number     : A7:0E:4A:4C:34:82:B7:7F\nissuer name       : C=US, O=Starfield Technologies, Inc., OU=Starfield Class 2 Certification Authority\nsubject name      : C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2\nissued  on        : 2009-09-02 00:00:00\nexpires on        : 2034-06-28 17:39:16\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\n\nDEBUG:   _iot_tls_verify_cert L#57 cert. version     : 3\nserial number     : A7:0E:4A:4C:34:82:B7:7F\nissuer name       : C=US, O=Starfield Technologies, Inc., OU=Starfield Class 2 Certification Authority\nsubject name      : C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2\nissued  on        : 2009-09-02 00:00:00\nexpires on        : 2034-06-28 17:39:16\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\n\n\nDEBUG:   _iot_tls_verify_cert L#49 \nVerify requested for (Depth 2):\n\nDEBUG:   _iot_tls_verify_cert L#51 cert. version     : 3\nserial number     : 06:7F:94:4A:2A:27:CD:F3:FA:C2:AE:2B:01:F9:08:EE:B9:C4:C6\nissuer name       : C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2\nsubject name      : C=US, O=Amazon, CN=Amazon Root CA 1\nissued  on        : 2015-05-25 12:00:00\nexpires on        : 2037-12-31 01:00:00\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\n\nDEBUG:   _iot_tls_verify_cert L#54   This certificate has no flags\n\nDEBUG:   _iot_tls_verify_cert L#49 \nVerify requested for (Depth 1):\n\nDEBUG:   _iot_tls_verify_cert L#51 cert. version     : 3\nserial number     : 06:7F:94:57:85:87:E8:AC:77:DE:B2:53:32:5B:BC:99:8B:56:0D\nissuer name       : C=US, O=Amazon, CN=Amazon Root CA 1\nsubject name      : C=US, O=Amazon, OU=Server CA 1B, CN=Amazon\nissued  on        : 2015-10-22 00:00:00\nexpires on        : 2025-10-19 00:00:00\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true, max_pathlen=0\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\n\nDEBUG:   _iot_tls_verify_cert L#54   This certificate has no flags\n\nDEBUG:   _iot_tls_verify_cert L#49 \nVerify requested for (Depth 0):\n\nDEBUG:   _iot_tls_verify_cert L#51 cert. version     : 3\nserial number     : 06:C9:C7:B7:84:F0:8F:8B:34:87:5D:DD:81:FF:E4:F0\nissuer name       : C=US, O=Amazon, OU=Server CA 1B, CN=Amazon\nsubject name      : CN=*.iot.eu-west-1.amazonaws.com\nissued  on        : 2018-08-02 00:00:00\nexpires on        : 2019-08-02 12:00:00\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=false\nsubject alt name  : iot.eu-west-1.amazonaws.com, *.iot.eu-west-1.amazonaws.com\nkey usage         : Digital Signature, Key Encipherment\next key usage     : TLS Web Server Authentication, TLS Web Client Authentication\n\nDEBUG:   _iot_tls_verify_cert L#54   This certificate has no flags\n\nERROR: iot_tls_connect L#232  failed\n  ! mbedtls_ssl_handshake returned -0x2700\n\nERROR: iot_tls_connect L#239     Unable to verify the server's certificate. Either it is invalid,\n    or you didn't set ca_file or ca_path to an appropriate value.\n    Alternatively, you may want to use auth_mode=optional for testing purposes.\n\nERROR: main L#190 Error(-4) connecting to xxxxxxxxx-xxxx.iot.eu-west-1.amazonaws.com:8883\n</code></pre>\n\n<p>We have tried replacing all certificates, keys, things, policies etc. so we must be doing something wrong. </p>\n"
    }, {
        "tags": ["google-chrome", "serial-port", "iot"],
        "is_answered": true,
        "view_count": 1614,
        "favorite_count": 2,
        "score": 6,
        "last_activity_date": 1566500915,
        "creation_date": 1566401053,
        "last_edit_date": 1566407471,
        "question_id": 57594868,
        "link": "https://stackoverflow.com/questions/57594868/how-can-i-access-the-new-serial-api-on-google-chrome-beta-77",
        "title": "How can I access the new Serial API on Google Chrome Beta 77+?",
        "body": "<p>I would like to use the new <a href=\"https://www.chromestatus.com/feature/6577673212002304#\" rel=\"nofollow noreferrer\">Serial API</a> on Chrome Beta (version 77+).  However, it's unclear to me how to reference it.   </p>\n\n<p>I have built a Chrome App that can do serial communication, but apparently Google is <a href=\"https://blog.chromium.org/2016/08/from-chrome-apps-to-web.html\" rel=\"nofollow noreferrer\">discontinuing Chrome Apps</a>.  The <a href=\"https://www.chromestatus.com/features#milestone=77\" rel=\"nofollow noreferrer\">Platform Status</a> for Chrome suggests that the Serial API is available for Beta and Dev/Canary, but <code>chrome.serial</code> is undefined when I have typed it into the console.</p>\n\n<p>Here is some functioning code from my Chrome App - it would be great to be able to re-use it for the web app:</p>\n\n<pre><code>let serialSettings = {\n    bitrate: 115200,\n    dataBits: 'eight',\n    parityBit: 'no',\n    stopBits: 'one',\n    ctsFlowControl: false\n};\n\nfunction start() {\n  portSelect = document.getElementById('portSelect');\n  document.getElementById('disconnectButton').addEventListener(\"click\", disconnectButtonHandler);\n  chrome.serial.getDevices(function(devices) {\n    buildPortSelect(devices) \n    openSelectedPort();\n  });\n};\n\n//Leaving out buildPortSelect for brevity\n\nfunction openSelectedPort() {\n  let portSelect = document.getElementById('portSelect');\n  let selectedPort = portSelect.options[portSelect.selectedIndex].value;\n  let connectionInfoDisplay = document.getElementById('connectionInfoDisplay');\n  for (let i = 0; i &lt; state.eligiblePorts.length; i++) {\n    if (selectedPort == state.eligiblePorts[i].path) {\n      connectionInfoDisplay.innerText = \"Connected to: \" + selectedPort;\n      chrome.serial.connect(selectedPort, serialSettings, onConnect);\n      break;\n    }\n  }\n}\n\nlet onConnect = function(connectionInfo) {\n   // The serial port has been opened. Save its id to use later.\n  connectionId = connectionInfo.connectionId;\n}\n\nstart();\n</code></pre>\n\n<p>I would like to be able to use <code>chrome.serial.getDevices()</code> and <code>chrome.serial.connect()</code> as before, but these don't work.  Is there an alternative syntax?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "alexa"],
        "is_answered": true,
        "view_count": 290,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1566464333,
        "creation_date": 1539804548,
        "last_edit_date": 1539804854,
        "question_id": 52862297,
        "link": "https://stackoverflow.com/questions/52862297/create-custom-and-dynamic-slots-values-for-alexa-skill",
        "title": "Create custom and dynamic Slot&#39;s values for Alexa Skill",
        "body": "<p>I'm creating a skill that allows Alexa to first consult all the connected devices (air conditioning equipment for example) and it returns a list from a service (these names are customizable by the user). I need those device names to store them as values of a custom Slot, to be able to give orders to Alexa of the type: Alexa, tell me the temperature of {deviceName}.</p>\n\n<p>Any ideas or suggestions?</p>\n"
    }, {
        "tags": ["google-cloud-platform", "iot", "google-cloud-iot"],
        "is_answered": true,
        "view_count": 56,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1564669128,
        "creation_date": 1562827140,
        "last_edit_date": 1564669128,
        "question_id": 56983015,
        "link": "https://stackoverflow.com/questions/56983015/why-do-we-need-to-enable-an-api-for-adding-a-registry-in-iot-core",
        "title": "Why do we need to enable an API, for adding a registry in IoT core",
        "body": "<p>I am working on google cloud IoT core. I created a new project and associated a billing account to it. But when I wanted to add a registry to my project. In order to do that, it said, you need to enable the API first. I know what an API is in general sense. Is API in this context different? and why do i need to enable the API?</p>\n\n<p>any help in this aspect is highly appreciated... Thanks in advance</p>\n"
    }, {
        "tags": ["amazon-web-services", "lambda", "iot", "subscribe"],
        "is_answered": true,
        "view_count": 3107,
        "favorite_count": 2,
        "score": 4,
        "last_activity_date": 1563890280,
        "creation_date": 1514743927,
        "last_edit_date": 1514744606,
        "question_id": 48044761,
        "link": "https://stackoverflow.com/questions/48044761/possible-to-subscribe-to-aws-iot-topic-in-lambda",
        "title": "Possible to subscribe to aws IOT topic in lambda?",
        "body": "<p>Newbie question.   Can't find a previous answer.</p>\n\n<p>I want to build a simple pump controller with Alexa.  Would like Alexa to report pump state.</p>\n\n<p>Simplest approach is Alexa -> lambda -> publish_to_Iot.  And then, or perhaps just before the publish, subscribe to another topic to which the local controller would publish pump state that would be passed back thru Alexa.</p>\n\n<p>As near as I can tell its not possible to subscribe to a topic from Lambda... which actually makes sense in the context of a lambda function.</p>\n\n<p>Specific question is, can a lambda function subscribe to an IoT topic?</p>\n\n<p>Yes, I know about IoT shadows, was hoping to avoid some complexity.</p>\n"
    }, {
        "tags": ["android", "iot", "nodemcu"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1563867686,
        "creation_date": 1563835638,
        "last_edit_date": 1563867278,
        "question_id": 57154640,
        "link": "https://stackoverflow.com/questions/57154640/how-can-i-get-the-content-of-the-url-below-using-httpurlconnection-for-my-androi",
        "title": "how can i get the content of the url below using HttpURLConnection for my android application",
        "body": "<p>here is url ...\n<a href=\"https://api.thingspeak.com/update?api_key=R3LQP7IXIXEQ1OIV&amp;field1=0\" rel=\"nofollow noreferrer\">https://api.thingspeak.com/update?api_key=R3LQP7IXIXEQ1OIV&amp;field1=0</a></p>\n\n<p>Actually..I don't want to get the content of url.\nI just want to update the value of field1 to 1 and 0.\nIf I just type this url in any broswer,my thingspeak data will be update.All I need to do is to write code like typing in any broswer of this url.\nIn that way I think I can turn on and off my led through android application for my IOT project.I think all I need to do is to make connection between apk and thingspeak from this url.I am new to android studio.I have tried many ways.Help me please.\nThanks a lot.</p>\n"
    }, {
        "tags": ["iot", "fiware", "fiware-orion", "iota"],
        "is_answered": false,
        "view_count": 126,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1563470316,
        "creation_date": 1563272713,
        "last_edit_date": 1563470316,
        "question_id": 57055166,
        "link": "https://stackoverflow.com/questions/57055166/fiware-orion-error-couldnt-connect-to-server-forwarding-query-to-providing",
        "title": "FIWARE Orion error &#39;Couldn&#39;t connect to server&#39; forwarding &#39;Query&#39; to providing application",
        "body": "<p>I am trying to provision a device and send actuation commands back using 2 components Orion and LoRaWAN IoT Agent.</p>\n\n<p>I am running Orion and other components on docker-compose file, and the IoT Agent using <code>node bin/iotagent-lora</code></p>\n\n<p>I have successfully provisioned the device using :</p>\n\n<pre><code>curl -iX POST \\\n  'http://localhost:4061/iot/devices' \\\n  -H 'Content-Type: application/json' \\\n  -H 'fiware-service: agriculture' \\\n  -H 'fiware-servicepath: /irrigation' \\\n  -d '{\n  \"devices\": [\n    {\n      \"device_id\": \"pycom1\",\n      \"entity_name\": \"urn:ngsi-ld:tempHumid:001\",\n      \"entity_type\": \"tempHumid\",\n      \"transport\": \"MQTT\",\n\n      \"attributes\": [\n        {\n    \"object_id\": \"temperature\",\n\n          \"name\": \"deviceState\",\n          \"type\": \"Text\"\n        }],\n      \"commands\": [\n        {  \n\n          \"name\": \"on\",\n        \"type\": \"command\"\n      },\n        {       \n          \"name\": \"off\"\n        ,\"type\": \"command\"\n      }\n       ],\n        \"internal_attributes\": {\n        \"lorawan\": {\n          \"application_server\": {\n            \"host\": \"10.8.244.180\",\n            \"username\": \"admin\",\n            \"password\": \"admin\",\n            \"provider\": \"loraserver.io\"\n          },\n          \"dev_eui\": \"0097da62c6b67443\",\n          \"app_eui\": \"70B3D57ED000985F\",\n          \"application_id\": \"1\",\n          \"application_key\": \"2b043fb00af7c6ac4075a35b8a18fc9c\",\n          \"data_model\":\"application_server\"\n        }}}]}'\n</code></pre>\n\n<p>an automatic registrations is created in Orion after provisioning the device:</p>\n\n<pre><code>{\n    \"id\": \"5d2d9f4f795d881c2355ab7c\",\n    \"expires\": \"2020-07-16T09:56:31.00Z\",\n    \"dataProvided\": {\n        \"entities\": [{\n            \"id\": \"urn:ngsi-ld:tempHumid:001\",\n            \"type\": \"tempHumid\"\n        }],\n        \"attrs\": [\"on\", \"off\"]\n    },\n    \"provider\": {\n        \"http\": {\n            \"url\": \"http://localhost:4061\"\n        },\n        \"supportedForwardingMode\": \"all\",\n        \"legacyForwarding\": true\n    },\n    \"status\": \"active\"\n}\n</code></pre>\n\n<p>Following this <a href=\"https://fiware-tutorials.readthedocs.io/en/latest/iot-over-mqtt/index.html#enabling-context-broker-commands\" rel=\"nofollow noreferrer\">tutorial</a> I have created another registration for actuation commands like the following:</p>\n\n<pre><code>curl -iX POST \\\n  'http://localhost:1026/v2/registrations' \\\n  -H 'Content-Type: application/json' \\\n  -H 'fiware-service: agriculture' \\\n  -H 'fiware-servicepath: /irrigation' \\\n  -d '{\n  \"description\": \"Pump Commands\",\n  \"dataProvided\": {\n    \"entities\": [\n      {\n        \"id\": \"urn:ngsi-ld:tempHumid:001\", \n\n        \"type\": \"tempHumid\"\n      }\n    ],\n    \"attrs\": [ \"on\", \"off\" ]\n  },\n  \"provider\": {\n    \"http\": {\"url\": \"http://localhost:1026/v1\"},\n    \"legacyForwarding\": true\n  }\n}'\n</code></pre>\n\n<p>I have tried to use the proposed <a href=\"https://stackoverflow.com/questions/56427851/fiware-iot-agent-ul-send-command-value-via-mqtt-to-device\">solution</a> to an issue similar to the one I am facing, and after trying, I have obtained this error:</p>\n\n<pre><code>{\"error\":\"NotFound\",\"description\":\"The requested entity has not been found. Check type and id\"}\n</code></pre>\n\n<p>while Orion reported </p>\n\n<blockquote>\n  <p>fiware-orion Starting transaction to <a href=\"http://localhost:4061//updateContext\" rel=\"nofollow noreferrer\">http://localhost:4061//updateContext</a></p>\n</blockquote>\n\n<p>I don't know if it is linked to this issue but a similar bug (double slash in url) was already reported in <a href=\"https://github.com/telefonicaid/fiware-orion/issues/2141\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>fiware-orion   | INFO@10:16:34  logMsg.h[1844]: Starting transaction to http://localhost:4061//updateContext\nfiware-orion   | INFO@10:16:34  httpRequestSend.cpp[592]: Sending message 4 to HTTP server: sending message of 447 bytes to HTTP server\nfiware-orion   | ERROR@10:16:34  postUpdateContext.cpp[190]: Runtime Error (error 'Couldn't connect to server' forwarding 'Update' to providing application)\nfiware-orion   | INFO@10:16:34  logMsg.h[1874]: Transaction ended\n</code></pre>\n\n<p>Thank you in advance</p>\n"
    }, {
        "tags": ["architecture", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 458,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1562148766,
        "creation_date": 1544060459,
        "question_id": 53643381,
        "link": "https://stackoverflow.com/questions/53643381/iot-project-architecture",
        "title": "IOT Project Architecture",
        "body": "<p>I am building an IOT project with MQTT protocol and javascript </p>\n\n<p>It reads data from MQTT client and send the data to the broker, the api engine - dotted area in the image - built with javascript, has MQTT client within itself and listening to the broker. </p>\n\n<p>In the local environment, I can run the broker fine and can communicate with it from the api engine, but in production, I have no clue how and where to install the broker and the api engine. </p>\n\n<p>My guess is I install the broker on one of the MQTT broker cloud (i.e cloudmqtt.com) then deploy the api engine to Heroku or something and have the MQTT client in the api engine point to the MQTT broker cloud to listen to.  </p>\n\n<p>Hope that someone could give me a tip of advice. \n( I am not allowed to embed an image yet, so here is a link) \n<a href=\"https://i.stack.imgur.com/j8pDq.png\" rel=\"nofollow noreferrer\">architecture</a></p>\n"
    }, {
        "tags": ["java", "android", "azure", "iot"],
        "is_answered": true,
        "view_count": 4249,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1561709198,
        "creation_date": 1493867342,
        "last_edit_date": 1493993103,
        "question_id": 43773210,
        "link": "https://stackoverflow.com/questions/43773210/android-volley-post-request-returning-error-400-bad-request",
        "title": "Android Volley POST Request returning error 400 (Bad Request)",
        "body": "<p>I'm Trying to make a POST Request to Azure IoT Hub with a JAVA android application, using Volley Library, but I'm getting this error:\nBasicNetwork.performRequest: Unexpected response code 400 for <a href=\"https://elca-iot.azure-devices.net/devices/elca-main-device/messages/events?api-version=2016-02-03\" rel=\"nofollow noreferrer\">https://elca-iot.azure-devices.net/devices/elca-main-device/messages/events?api-version=2016-02-03</a>)</p>\n\n<p>To access the IoT Hub I need to use a SAS Key that I need to include in the header of the request. The android application Code is below:</p>\n\n<pre><code>RequestQueue queue = Volley.newRequestQueue(c);\n    String url = \"https://elca-iot.azure-devices.net/devices/\" + deviceId + \"/messages/events?api-version=2016-02-03)\";\n    // Request a string response from the provided URL.\n    StringRequest stringRequest = new StringRequest(Request.Method.POST,\n            url, new Response.Listener&lt;String&gt;() {\n        @Override\n        public void onResponse(String response) {\n            onPostResponse(response, c, true);\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Log.d(\"Error\", error.getMessage());\n            onPostResponse(error.getMessage(), c, false);\n        }\n    }) {\n        @Override\n        public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n            Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n            //params.put(\"Content-Type\", \"application/xml\");\n            params.put(\"Authorization\", \"[My SAS Key]\");\n            params.put(\"Cache-Control\", \"no-cache\");\n            return params;\n        }\n        /*\n        @Override\n        public Map&lt;String, String&gt; getParams() throws AuthFailureError {\n            Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n            params.put(\"api-version\",\"2016-02-03\");\n            return params;\n        }*/\n        @Override\n        public String getBodyContentType() {\n            return \"application/text; charset=UTF-8\";\n        }\n        @Override\n        public byte[] getBody(){\n            return \"On\".getBytes();\n        }\n    };\n    try {\n        Log.d(\"request\", String.valueOf(stringRequest.getMethod()==Request.Method.POST));\n    } catch (Exception authFailureError) {\n        authFailureError.printStackTrace();\n    }\n    // Add the request to the RequestQueue.\n    queue.add(stringRequest);\n</code></pre>\n\n<p>I've tried to do the same request using POSTMAN and it worked and I don't know why it isn't working with the Android Application. Here's the http code of the request made with POSTMAN:</p>\n\n<pre><code>    POST /devices/elca-main-device/messages/events?api-version=2016-02-03 HTTP/1.1\nHost: elca-iot.azure-devices.net\nAuthorization: [My SAS Key]\nContent-Type: application/x-www-form-urlencoded\nCache-Control: no-cache\nPostman-Token: d0aa354a-f79c-e574-893a-c259232aa5cb\n\non\n</code></pre>\n\n<p>EDIT:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QmF6N.png\" rel=\"nofollow noreferrer\">Screenshot of POSTMAN</a></p>\n"
    }, {
        "tags": ["php", "mysql", "ajax", "iot", "mysql-python"],
        "is_answered": false,
        "view_count": 325,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1561187389,
        "creation_date": 1561186635,
        "question_id": 56713322,
        "link": "https://stackoverflow.com/questions/56713322/show-and-auto-update-values-of-mysql-db-in-the-web-page-if-they-are-updated-in-t",
        "title": "Show and auto update values of MySQL DB in the web page if they are updated in the DB",
        "body": "<p>I am taking values from sensor at an interval of 1 second. These values are being stored in MySQL DB. This is an automatic process. </p>\n\n<p>Now I have made a website(free hosting) to show these values. The problem is, to see the updated values i have to refresh the browser. But I want the values to update automatically without refreshing the browser. </p>\n\n<p>I am using PHP and MySQL</p>\n\n<p>I have searched online and I saw some AJAX tutorials. But in those tutorials, you have to do something(Press a button) to update the values without refreshing the page. I want to update the values as soon as they are updated in the DB automatically. </p>\n\n<p>Any help would be appreciated.</p>\n"
    }, {
        "tags": ["api", "google-cloud-platform", "cloud", "iot"],
        "is_answered": true,
        "view_count": 333,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1560763514,
        "creation_date": 1560589372,
        "question_id": 56608938,
        "link": "https://stackoverflow.com/questions/56608938/where-is-the-button-create-registry-in-the-google-cloud-platform-console-for-g",
        "title": "Where is the button &quot;create registry&quot; in the google cloud platform console for google iot?",
        "body": "<p>In the documenation for the Google IoT Cloud <a href=\"https://cloud.google.com/iot/docs/how-tos/devices\" rel=\"nofollow noreferrer\">https://cloud.google.com/iot/docs/how-tos/devices</a> it claims i should go to the console: <a href=\"https://console.cloud.google.com/iot/registries\" rel=\"nofollow noreferrer\">https://console.cloud.google.com/iot/registries</a> and click create registry, but there is no button to do this. I can only do this in the console using the gcloud iot command. </p>\n\n<p>I've have tried clicking through the console, but find it very hard to navigate. Where can I see my registered devices?</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 1204,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1559332724,
        "creation_date": 1559296045,
        "question_id": 56392645,
        "link": "https://stackoverflow.com/questions/56392645/mqtt-topic-names-for-request-response",
        "title": "MQTT topic names for request/response",
        "body": "<p>I'm designing a system with many devices using MQTT to connect to a central broker.</p>\n\n<p>There are some masters that can send requests to certain devices that are slaves. The request from one master is usually directed to one slave.</p>\n\n<p>The topic for requests could be: <code>mysystem/slaveId/req</code>, so the slaves can subscribe to this topic and master publishes to the same topic. Only the addressed slave will receive the request, as it should be.</p>\n\n<p>My question is how to decide the topic for responses. I'm in doubt between: <code>mysystem/slaveId/res/masterId</code> or simply <code>mysystem/slaveId/res</code>.</p>\n\n<p>In the first case, I should send <code>masterId</code> to the slave in the payload of request, so the slave will be able to construct the response topic name. The answer will be received only by the master that send the request.</p>\n\n<p>In the second case, all the active masters will receive the response, because the topic doesn't contain the <code>masterId</code>. The master that send the request should detect its response by looking at a <code>requestId</code> in the payload (that was sent in the request payload too).</p>\n\n<p>I think the first choice is better, however the <a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-data-flow.html\" rel=\"nofollow noreferrer\">Device Shadow</a> service of AWS uses topic names similar to the second choice. For example the device that replies to a get request publishes a message to <code>$aws/things/myLightBulb/shadow/get/accepted</code>. So every devices will receive the message, not only the one that requested.</p>\n\n<p>I think AWS makes good choices, so I am tempted to follow it... however I'm not sure if I understood what they do.</p>\n"
    }, {
        "tags": ["google-cloud-functions", "iot", "publish-subscribe", "google-cloud-iot"],
        "is_answered": false,
        "view_count": 325,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1558109016,
        "creation_date": 1558102672,
        "last_edit_date": 1558109016,
        "question_id": 56188312,
        "link": "https://stackoverflow.com/questions/56188312/how-to-send-send-commands-to-iot-devices-from-google-cloud-functions",
        "title": "How to send send commands to Iot devices from google cloud functions",
        "body": "<p>I am trying to use google cloudiot api from a google cloud function written in python. When I make http requests to the Cloud IoT api, I get a 403 \"forbidden' error. I have authenticated using a service account with full permissions.</p>\n\n<p>import os\nfrom flask import json\nimport base64</p>\n\n<p>import firebase_admin\nfrom firebase_admin import db</p>\n\n<p>import googleapiclient\nfrom googleapiclient import discovery\nfrom google.oauth2 import service_account</p>\n\n<p>default_app = firebase_admin.initialize_app(options={'databaseURL': '<a href=\"https://lucid-v2-1.firebaseio.com/\" rel=\"nofollow noreferrer\">https://lucid-v2-1.firebaseio.com/</a>'})</p>\n\n<p>def get_client(service_account_json):\n    \"\"\"Returns an authorized API client by discovering the IoT API and creating\n    a service object using the service account credentials JSON.\"\"\"\n    api_scopes = ['<a href=\"https://www.googleapis.com/auth/cloud-platform\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/cloud-platform</a>', '<a href=\"https://www.googleapis.com/auth/cloudiot\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/cloudiot</a>']\n    api_version = 'v1'\n    discovery_api = '<a href=\"https://cloudiot.googleapis.com/\" rel=\"nofollow noreferrer\">https://cloudiot.googleapis.com/</a>$discovery/rest'\n    service_name = 'cloudiotcore'</p>\n\n<pre><code>#credentials = service_account.Credentials.from_service_account_file(service_account_json)\ncredentials = service_account.Credentials.from_service_account_file(service_account_json)\nscoped_credentials = credentials.with_scopes(api_scopes)\n\ndiscovery_url = '{}?version={}'.format(\n        discovery_api, api_version)\n\nprint(credentials.service_account_email)\n\nreturn discovery.build(\n        service_name,\n        api_version,\n        discoveryServiceUrl=discovery_url,\n        credentials=scoped_credentials,\n        cache_discovery=False)\n</code></pre>\n\n<p>def request_posted(event, context):</p>\n\n<pre><code>print(os.environ)\n#\nclient = get_client(os.environ.get('GOOGLE_APPLICATION_CREDENTIALS'))\n\"\"\"Triggered by a change to a Firebase RTDB reference.\nArgs:\n     event (dict): Event payload.\n     context (google.cloud.functions.Context): Metadata for the event.\n\n\"\"\"\n\nprint(client)\n\nresources = context.resource.split('/')\nrequest_id = resources[-1]\nrequest_values = event['delta']\n\nresponse_ref = db.reference(\"experience_channel/responses/\" + str(request_id))\nresponse_ref.update({\"ack\":True})\n\ndb.reference(\"experience_channel/experience_data\")\n\ndevice_id = \"2593786060198708\"\nproject_id = \"lucid-iOS-v2-1\"\ncloud_region = \"us-central1\"\nregistry_id = \"Lucid_IoT_Registry\"\ndevice_path = 'projects/{}/locations/{}/registries/{}/devices/{}'.format(project_id, cloud_region, registry_id, device_id)\n\nprint(device_path)\nepoch_length = 20\n\nmessage_contents = {\n\"experience_id\":request_id,\n\"epoch_length\":epoch_length,\n\"experience_length\":request_values['length']\n}\n\nmessage_json = json.dumps(message_contents)\n\ntest_body = \"test_body\"\n\ncommand_body = {\n    'binaryData': base64.urlsafe_b64encode(\n        message_json.encode('utf-8')).decode('ascii'),\n    'subfolder' : 'commands'\n}\n\n#client.projects().locations().registries().testIamPermissions(resource = )\n\n\nprint(client.projects(\n    ).locations().registries(\n    ).devices().list(parent = \"projects/lucid-iOS-v2-1/locations/us-central1/registries/Lucid_IoT_Registry\").execute())\n\nresp = client.projects(\n    ).locations().registries(\n    ).devices().sendCommandToDevice(\n    name = device_path, body = command_body).execute()\n\nprint(resp)\n\nreturn resp\n</code></pre>\n"
    }, {
        "tags": ["azure", "curl", "iot", "azure-iot-hub"],
        "is_answered": false,
        "view_count": 305,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1557297967,
        "creation_date": 1557241475,
        "last_edit_date": 1557296348,
        "question_id": 56025535,
        "link": "https://stackoverflow.com/questions/56025535/errorcodeservererrorinternalservererror-on-azure-iot-hub-connection",
        "title": "ErrorCode:ServerError;InternalServerError on Azure IoT Hub connection",
        "body": "<p>I try to send data to the Azure IoT Hub I created (better to the device in it) and get the following response (Postman):</p>\n\n<p>{\n    \"Message\": \"ErrorCode:ServerError;InternalServerError\",\n    \"ExceptionMessage\": \"Tracking ID:4c2417c4a2b14695bf869ba0902444c1-G:1-TimeStamp:05/07/2019 14:41:15\"\n}</p>\n\n<p>My request looks like this:</p>\n\n<p>curl -i 'https://$MYNAME.azure-devices.net/devices/testdev/messages/events?api-version=2018-06-30' -H 'authorization: SharedAccessSignature=SharedAccessSignature sr=$MYNAME.azure-devices.net%2Fdevices%2Ftestdev&amp;sig=$MYSIG' -H \"Content-Type: application/json\" -d '{\"deviceId\":\"testdev\",\"temperature\":70}'</p>\n\n<p>and this is the response:</p>\n\n<p>HTTP/1.1 500 Internal Server Error Content-Length: 155 Content-Type: application/json; charset=utf-8 Server: Microsoft-HTTPAPI/2.0 iothub-errorcode: ServerError Date: Tue, 07 May 2019 14:59:23 GMT {\"Message\":\"ErrorCode:ServerError;InternalServerError\",\"ExceptionMessage\":\"Tracking ID:b5936e5e08da45debfdba8a72f1c45dd-G:0-TimeStamp:05/07/2019 14:59:23\"}</p>\n\n<p>The SAS should be fine (recreated it several times and I also get authentication error when it is wrong).</p>\n\n<p>I also created I new IoT Hub with a new device to test it without success.</p>\n\n<p>Here are some details about my IoT Hub (sorry, it is German :)):</p>\n\n<p>Status\n:\nActive\nStandort\n:\nFrankreich, Mitte\nAbonnement(\u00c4ndern)\n:\nFree Trial\nAbonnement-ID\n:\n$XXXXXXXXX\nHostname\n:\n$MYNAME.azure-devices.net\nTarif und Skalierung\n:\nB1 - Standard\nAnzahl von IoT Hub-Einheiten\n:\n1</p>\n\n<p>Thanks in advance.</p>\n\n<hr>\n\n<h1>EDIT:</h1>\n\n<p>all the capitals with $ are substituted from me to cloack security stuff</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "terraform", "iot", "terraform-provider-aws"],
        "is_answered": true,
        "view_count": 678,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1554146552,
        "creation_date": 1554115473,
        "last_edit_date": 1554146552,
        "question_id": 55453260,
        "link": "https://stackoverflow.com/questions/55453260/creating-the-topic-rule-does-not-create-the-trigger-on-the-lambda",
        "title": "Creating the topic rule does not create the trigger on the lambda",
        "body": "<p>This issue looks very much like a bug but I believe there must be something wrong in my terraform file because I can't find anybody on the web having the same problem.</p>\n\n<p>Here is the part of my terraform file that creates a lambda and a topic rule for it:</p>\n\n<pre><code>resource \"aws_lambda_function\" \"rds_persist\" {\n  filename         = \"${local.rds_persist_file_path}\"\n  function_name    = \"RdsPersist-${var.env}\"\n  role             = \"${aws_iam_role.lambda_role.arn}\"\n  handler          = \"package.handler\"\n  source_code_hash = \"${local.rds_persist_package_hash}\"\n  runtime          = \"nodejs8.10\"\n  memory_size      = 128\n  timeout          = 10\n\n  vpc_config = {\n    subnet_ids         = [\"${var.private_subnet_ids}\"]\n    security_group_ids = [\"${aws_security_group.all_vpc_access.id}\"]\n  }\n\n  environment {\n    variables = {\n      DB             = \"${var.database_url}\"\n      IOT_DEVICE_ARN = \"${var.iot_device_v1_sns_arn}\"\n    }\n  }\n}\n\nresource \"aws_iot_topic_rule\" \"rds_push\" {\n  name        = \"${var.env}_RdsPush\"\n  description = \"Pushes events to a persistence lambda (rds store)\"\n  enabled     = true\n  sql         = \"SELECT * as payload, topic() as topic, timestamp() AS timestamp FROM '#' WHERE startswith(clientid(), '${var.env}-')\"\n  sql_version = \"2016-03-23\"\n\n  lambda {\n    function_arn = \"${aws_lambda_function.rds_persist.arn}\"\n  }\n}\n</code></pre>\n\n<p>Here is the result in AWS Console:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QNbCX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QNbCX.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/TTzc0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TTzc0.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I delete and re-add the rule in the console, then the trigger appears on the lambda.</p>\n\n<blockquote>\n  <p>It might be the case your lambda function that your topic uses is being created before the function.</p>\n</blockquote>\n\n<p>I tested this also by tainting the topic rule alone so it got recreated (see the logs below). Unfortunately it didn't solve the issue.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>An execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n-/+ destroy and then create replacement\n\nTerraform will perform the following actions:\n\n-/+ module.lambda.aws_iot_topic_rule.rds_push (tainted) (new resource required)\n      id:                             \"dev_RdsPush\" =&gt; &lt;computed&gt; (forces new resource)\n      arn:                            \"arn:aws:iot:eu-west-1:827689093226:rule/dev_RdsPush\" =&gt; &lt;computed&gt;\n      description:                    \"Pushes events to a persistence lambda (rds store)\" =&gt; \"Pushes events to a persistence lambda (rds store)\"\n      enabled:                        \"true\" =&gt; \"true\"\n      lambda.#:                       \"1\" =&gt; \"1\"\n      lambda.1860721139.function_arn: \"arn:aws:lambda:eu-west-1:827689093226:function:RdsPersist-dev\" =&gt; \"arn:aws:lambda:eu-west-1:827689093226:function:RdsPersist-dev\"\n      name:                           \"dev_RdsPush\" =&gt; \"dev_RdsPush\"\n      sql:                            \"SELECT * as payload, topic() as topic, timestamp() AS timestamp FROM '#' WHERE startswith(clientid(), 'dev-')\" =&gt; \"SELECT * as payload, topic() as topic, timestamp() AS timestamp FROM '#' WHERE startswith(clientid(), 'dev-')\"\n      sql_version:                    \"2016-03-23\" =&gt; \"2016-03-23\"\n\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n</code></pre>\n\n<p><strong>Update: I just found a very similar issue at a different place:</strong></p>\n\n<p>There's supposed to be an SNS subscription between this another lambda and a SNS. Here is the relevant code in the terraform:</p>\n\n<pre><code>resource \"aws_sns_topic_subscription\" \"conference_call\" {\n  topic_arn = \"${module.sns.conference_call_arn}\"\n  protocol  = \"lambda\"\n  endpoint  = \"${module.lambda.messaging_arn}\"\n}\n</code></pre>\n\n<p>(Obviously I checked the resources and they are correct)</p>\n\n<p>In the console I don't see the trigger in the lambda but I do see the subscription in SNS:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hD2xi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hD2xi.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/BEwoZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BEwoZ.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Update: exact same issue when creating the resources using AWS CLI</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code># For the first issue\n$ aws iot create-topic-rule --rule-name dev_RdsPush --topic-rule-payload '{\"sql\":\"SELECT * as payload, topic() as topic, timestamp() AS timestamp FROM \\'#\\' WHERE startswith(clientid(), \\'dev-\\')\",\"actions\":[{\"lambda\":{\"functionArn\":\"arn:aws:lambda:eu-west-1:xxxxxxxxx:function:RdsPersist-dev\"}}]}'\n\n# For the second issue\n$ aws sns subscribe --topic-arn arn:aws:sns:eu-west-1:xxxxxxxx:conference-call-v1-dev --protocol lambda --notification-endpoint arn:aws:lambda:eu-west-1:xxxxxxxxx:function:Messaging-dev\n</code></pre>\n\n<hr>\n\n<p><strong>Solution:</strong></p>\n\n<p>Add these:</p>\n\n<p>IoT:</p>\n\n<pre><code>resource \"aws_lambda_permission\" \"conference_call_sns\" {\n  statement_id  = \"AllowExecutionFromSNS\"\n  action        = \"lambda:InvokeFunction\"\n  function_name = \"${aws_lambda_function.conference_call.function_name}\"\n  principal     = \"sns.amazonaws.com\"\n  source_arn    = \"${var.conference_call_sns_arn}\"\n}\n</code></pre>\n\n<p>SNS:</p>\n\n<pre><code>resource \"aws_lambda_permission\" \"messaging_sns\" {\n  statement_id  = \"AllowExecutionFromSNS\"\n  action        = \"lambda:InvokeFunction\"\n  function_name = \"${aws_lambda_function.messaging.function_name}\"\n  principal     = \"sns.amazonaws.com\"\n  source_arn    = \"${var.conference_call_sns_arn}\"\n}\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-dynamodb", "mqtt", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 692,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1553320109,
        "creation_date": 1552387563,
        "last_edit_date": 1552417899,
        "question_id": 55119587,
        "link": "https://stackoverflow.com/questions/55119587/mqtt-data-not-writing-to-dynamodb-table-with-aws-iot",
        "title": "MQTT data not writing to DynamoDB table with AWS IoT",
        "body": "<p>I am new to AWS IoT and am trying to log data from an Arduino sensor to a DynamoDB table as shown here:</p>\n\n<p><a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/iot-ddb-rule.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/developerguide/iot-ddb-rule.html</a></p>\n\n<p>The shadow data is being updated on a Thing called Volume, but the data is not being written to the table. I am not sure if I have correctly defined my topic which I am calling my/Volume because of the thing name. Here is its ARN:</p>\n\n<p>arn:aws:iot:us-west-2:468820349153:thing/Volume</p>\n\n<p>A basic test insert using the IoT test MQTT client was able to insert data into the table.  I created a rule called VolumeRule with this query: SELECT * FROM 'my/Volume'.</p>\n\n<p>Thanks for your help,</p>\n\n<p>Steve</p>\n"
    }, {
        "tags": ["aws-lambda", "iot", "smartthings"],
        "is_answered": false,
        "view_count": 99,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1551935163,
        "creation_date": 1551161518,
        "last_edit_date": 1551171380,
        "question_id": 54879397,
        "link": "https://stackoverflow.com/questions/54879397/unable-to-discover-devices-in-smartthings",
        "title": "Unable to discover devices in smartThings",
        "body": "<p>I am developing an IOT device using smartThings.I am using aws lambda function for getting request and sending responses to the smartThings. I am getting request whenever smartThings app hitting lambda function and sending exact response to that request but still the discover devices are not showing in the smartThings app. Please help me</p>\n\n<p>Refrence link:\n<a href=\"https://smartthings.developer.samsung.com/docs/guides/smartthings-schema/smartthings-schema-reference.html#Interaction-types\" rel=\"nofollow noreferrer\">https://smartthings.developer.samsung.com/docs/guides/smartthings-schema/smartthings-schema-reference.html#Interaction-types</a></p>\n\n<p>the first image is the request that i am getting</p>\n\n<p><a href=\"https://i.stack.imgur.com/zuxPV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zuxPV.png\" alt=\"enter image description here\"></a></p>\n\n<p>2nd and 3rd images are the responses that i am getting according to the request</p>\n\n<p><a href=\"https://i.stack.imgur.com/EWeRt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EWeRt.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NNXIk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NNXIk.png\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["post", "iot"],
        "is_answered": true,
        "view_count": 1541,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1550838830,
        "creation_date": 1483700430,
        "question_id": 41504243,
        "link": "https://stackoverflow.com/questions/41504243/quectel-m95-http-post-timeout-error",
        "title": "Quectel M95 HTTP POST timeout error",
        "body": "<p>I'm trying to send a POST to a server but I always get the +CME ERROR: 3821. I know that this means \"HTTP to read timeout\". Then, I tried to change the server to another one, just to test, and then I get the same error 3821. My AT commands list is:</p>\n\n<pre><code>AT+CGATT=1\nAT+QIFGCNT=0\nAT+QICSGP=1,\"zap.vivo.com.br\"\nAT+QIACT\nAT+QILOCIP   (IP OK!)\n\nAT+QHTTPURL=38,30\n   CONNECT\n      http://www.posttestserver.com/post.php\n   OK\n\nAT+QHTTPPOST=10,50,80\n   CONNECT\n      helloworld\n   OK\n      +CME ERROR: 3821\n</code></pre>\n\n<p>Does anyone know what is wrong?</p>\n"
    }, {
        "tags": ["amazon-web-services", "arduino", "iot", "esp8266", "aws-iot"],
        "is_answered": true,
        "view_count": 1556,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1550650231,
        "creation_date": 1548719327,
        "last_edit_date": 1548720097,
        "question_id": 54411947,
        "link": "https://stackoverflow.com/questions/54411947/cant-setup-ssl-connection-trying-to-send-data-error-message-while-sending-dat",
        "title": "&quot;Can&#39;t setup SSL connection Trying to send Data&quot; error message while sending data ESP8266 to AWS IOT Shadows",
        "body": "<p>I am trying to send a testing value to AWS IOT Shadows but when I upload it to my device it keep saying \"Cant Setup SSL ConnectionTrying to send Data\". please help me to send this value to AWS IOT Shaodws! I have tried to change the ARN to HTTPS end point ARN.. and keep getting this error messages.</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;AmazonIOTClient.h&gt;\n#include &lt;ESP8266AWSImplementations.h&gt;\n\nEsp8266HttpClient httpClient;\nEsp8266DateTimeProvider dateTimeProvider;\n\nAmazonIOTClient iotClient;\nActionError actionError;\n\nconst char* ssid = \"xxx\";\nconst char* password = \"xxx\";\n\nvoid initWLAN()\n{\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED)\n  {\n    delay(500);\n  }\n}\n\nvoid initAWS()\n{\n  iotClient.setAWSRegion(\"ap-southeast-2\");\n  iotClient.setAWSEndpoint(\"amazonaws.com\");\n  iotClient.setAWSDomain(\"arn:aws:iot:ap-southeast-2:489747887701:thing/IoTTestDevice\");\n  iotClient.setAWSPath(\"/things/IoTTestDevice/shadow\");\n  iotClient.setAWSKeyID(\"the-id\");\n  iotClient.setAWSSecretKey(\"the-secret-key\");\n  iotClient.setHttpClient(&amp;httpClient);\n  iotClient.setDateTimeProvider(&amp;dateTimeProvider);\n}\n\nvoid setup() {\n  Serial.begin(115200);\n  delay(10);\n  Serial.println(\"begin\");\n  initWLAN();\n  Serial.println(\"wlan initialized\");\n  initAWS();\n  Serial.println(\"iot initialized\");\n}\n\nvoid loop()\n{\n  char shadow[100];\n  strcpy(shadow, \"{\\\"state\\\":{\\\"reported\\\":{\\\"test_value1\\\":123, \\\"test_value2\\\":234}}}\");\n\n  Serial.println(\"Trying to send data\");\n  Serial.print(shadow);\n\n  char* result = iotClient.update_shadow(shadow, actionError);\n  Serial.print(result);\n\n  delay(10000);\n}\n</code></pre>\n\n<p>keep getting this error messages..</p>\n\n<pre><code>12:31:04.295 -&gt; can't setup SSL connectionTrying to send data\n12:31:14.262 -&gt; {\"state\":{\"reported\":{\"test_value1\":123, \"test_value2\":234}}}did not connect to timeserver\n12:31:14.564 -&gt; \n12:31:14.564 -&gt; \n12:31:14.564 -&gt; Exception (3):\n12:31:14.564 -&gt; epc1=0x4010011d epc2=0x00000000 epc3=0x00000000 excvaddr=0x40008550 depc=0x00000000\n12:31:14.564 -&gt; \n12:31:14.564 -&gt; ctx: cont \n12:31:14.564 -&gt; sp: 3ffefd60 end: 3fff0630 offset: 01a0\n</code></pre>\n\n<p>please help me !\nThanks</p>\n"
    }, {
        "tags": ["azure", "time-series", "iot", "azure-iot-hub", "azure-timeseries-insights"],
        "is_answered": false,
        "view_count": 165,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1550646836,
        "creation_date": 1550563188,
        "last_edit_date": 1550646836,
        "question_id": 54761275,
        "link": "https://stackoverflow.com/questions/54761275/time-series-insight-api-returning-could-not-cast-or-convert-from-system-string-t",
        "title": "Time series insight API returning Could not cast or convert from System.String to Microsoft.Rdx.Client.Events.Property",
        "body": "<p>Hi we have just started using time series insight .We need to list specified  list of values of properties under particular Time series id    .As per the documentation in azure we were  using the following API   in post method to achieve  this .</p>\n\n<blockquote>\n  <p><a href=\"https://XXXXX_EnvironmentFqdn_XXXXX.env.timeseries.azure.com/timeseries/query?api-version=2018-11-01-preview\" rel=\"nofollow noreferrer\">https://XXXXX_EnvironmentFqdn_XXXXX.env.timeseries.azure.com/timeseries/query?api-version=2018-11-01-preview</a></p>\n</blockquote>\n\n<p>When posting the following request body to the API </p>\n\n<pre><code>        {\n          \"getEvents\":{\n             \"timeSeriesId\": [\"UniqueId\"],\n            \"searchSpan\": {\n               \"from\": \"2019-02-17T00:00:00Z\",\n              \"to\": \"2019-02-18T00:16:50Z\"\n              },\n             \"projectedProperties\": [\"DesiredProp\"]\n          }\n        }\n</code></pre>\n\n<p>it returns  a 400 Bad Request with  following error message.</p>\n\n<pre><code>   {\n    \"error\": {\n    \"code\": \"InvalidInput\",\n    \"message\": \"Error converting value \\\"DesiredProp\\\" to type\n    'Microsoft.Rdx.Client.Events.Property'. Path \n   'getEvents.projectedProperties[0]', line 9, position 45.\\r\\n---&gt; Could \n    not        cast or convert from System.String to \n    Microsoft.Rdx.Client.Events.Property.\\r\\n\"\n      }\n     }\n</code></pre>\n\n<p>on removing the projectedProperties property from  response body  API works fine,but it will return all the properties of the time series .</p>\n\n<p>any help will me much appreciated and thanks in advance .</p>\n"
    }, {
        "tags": ["c#", "azure", "iot"],
        "is_answered": true,
        "view_count": 2876,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1550266320,
        "creation_date": 1547487660,
        "question_id": 54186589,
        "link": "https://stackoverflow.com/questions/54186589/c-how-to-update-desired-twin-property-of-an-azure-iot-hub-device",
        "title": "C# How to update desired twin property of an Azure IoT Hub device",
        "body": "<p>I have registered the devices in IoT and the client application (device) can update reported twin properties. Now, I have to update desired twin properties from back end application (in C#). Need help.</p>\n"
    }, {
        "tags": ["iot", "onem2m"],
        "is_answered": true,
        "view_count": 214,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1549018078,
        "creation_date": 1548917801,
        "last_edit_date": 1549018078,
        "question_id": 54454960,
        "link": "https://stackoverflow.com/questions/54454960/communication-with-resources-on-a-remote-cse-onem2m",
        "title": "Communication with resources on a remote CSE - OneM2M",
        "body": "<p>We are trying to implement the oneM2M standard and have a question regarding the communication process between Remote CSE and IN-CSE. I wrote what I understood from the documentation step by step in below. Some of the issues are not so clear for us so before doing any implementation, I need to make sure everything is crystal clear.</p>\n\n<p>I going to ask the question before telling everything we understand from the documentation. Then I am going to write step by step what is the solution we think. The question is, the request which is sent by an IN-AE, is for MN-CSE which the IN-CSE should going to redirect the request to MN-CSE or it should handle it itself.</p>\n\n<p>Before anything else, we have two absolutely separated CSEs. One is IN-CSE, the other one is MN-CSE almost like below.</p>\n\n<p><strong>IN-CSE has a resource tree</strong></p>\n\n<pre><code>/in-cse61\n   /in-cse61/csr-34\n      /in-cse61/ae-1234\n</code></pre>\n\n<p><strong>MN-CSE has a resource tree</strong></p>\n\n<pre><code>/mn-cse34\n   /mn-cse34/csr-61\n   /mn-cse34/ae-123456\n      /mn-cse34/cnt-1\n         /mn-cse34/cin-01\n         /mn-cse34/cin-02\n         /mn-cse34/cin-03\n      /mn-cse34/cnt-2\n</code></pre>\n\n<p>We skipped any security concern for now. Let\u2019s say IN-AE wants to communicate with MN-CSE as we told in question above.</p>\n\n<p><strong>1-</strong>    IN-AE should send a discovery or retrieve request to IN-CSE saying that get me all the child resources Remote CSE.</p>\n\n<p><strong>2-</strong>    What is the exact difference between sending discovery or sending retrieve request? We thought that discovery request returns just resource uri but retrieve request returns whole data of exact resource. Is this approach correct?</p>\n\n<p><strong>3-</strong>    After getting all the remoteCSEs, now I know ids of the remoteCSEs'. Then I can send a discovery request to the MN-CSE to get AEs in it. We think two options:    </p>\n\n<blockquote>\n  <p>a.    ~/in-cse61/csr-34?fu=1&amp;rty=2<br>\n  b.    ~/mn-cse34?fu=1&amp;rty=2</p>\n</blockquote>\n\n<p><strong>Option a :</strong> If IN-AE only wants to make a discovery request for IN-CSE\u2019s resource tree, IN-CSE should take care of it without redirecting it to the MN-CSE. Because IN-CSE already knows that /in-cse61/csr-34 is kind of a valid RemoteCSE for it but the request path starts with ~/in-cse61 then it should be handled by IN-CSE.</p>\n\n<p><strong>Option b:</strong> If IN-AE wants to make a discovery request for MN-CSE\u2019s resource tree then IN-CSE can understand it is related a RemoteCSE by looking at the /mn-cse34 part of the Request path because it doesn\u2019t startwith IN-CSE\u2019s resourceid.</p>\n\n<p>So IN-AE(ex. Smartphone) somehow should decide which CSE should handle the request ? Is there anything we think wrong ?</p>\n\n<p>---------------------EDITED--------------------------------------</p>\n\n<p><a href=\"https://i.stack.imgur.com/mHrKa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mHrKa.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have inspected architecture of Application Developer Guide TR-0025 <a href=\"http://www.onem2m.org/application-developer-guide/architecture\" rel=\"nofollow noreferrer\">http://www.onem2m.org/application-developer-guide/architecture</a></p>\n\n<p>According to this sample, a smartphone (IN-AE) can control Light#1(ADN-AE-1) through IN-CSE.</p>\n\n<p>After Registration and Initial Resource Creation processes are completed, system is ready to discover and then control the lights.</p>\n\n<pre><code>GET /~/mn-cse/home_gateway?fu=1&amp;rty=3&amp;drt=2 HTTP/1.1\nHost: in.provider.com:8080\n</code></pre>\n\n<p>Although Middle Node CSE-ID and Middle Node CSEBase name is used at HTTP Request url, host is addressed to IN-CSE. It means, the discovery request sent from IN-AE, handled by IN-CSE first then it redirects it to mn-cse. However you told me the opposite by saying \u201c<em>The retrieval or discovery normally is only limited to the resources of the hosting CSE, and does not traverse to the remote CSEs automatically.</em>\u201d. </p>\n\n<p>At TR-0025 the given example is shown as common scenario.\nAnd also at TR-0034, Actually it is traversing the request as you see on the diagram.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OvDqX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OvDqX.png\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 606,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1549001307,
        "creation_date": 1540302403,
        "last_edit_date": 1540303054,
        "question_id": 52950701,
        "link": "https://stackoverflow.com/questions/52950701/aws-running-lambda-read-from-iot-topic",
        "title": "AWS running Lambda read from IOT topic",
        "body": "<p>I have a AWS Lambda which publishes data to a AWS IOT topic A and waits for the result, which will be published to a different topic B.</p>\n\n<p>I was wondering how to get this data from topic B when the thing publishes it to the already running lambda.</p>\n\n<p>I was not able to find any equivalent to get_thing_shadow for a particular topic <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/iot-data.html#id4\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/iot-data.html#id4</a></p>\n\n<p><strong>Eg:</strong></p>\n\n<p>Lambda1 -> IOT Topic A -> Thing</p>\n\n<p>Lambda1 waiting</p>\n\n<p>Thing -> IOT Topic B</p>\n\n<p>Lambda1 reads from Topic B and updates say DB and dies.</p>\n\n<p>I was wondering how this can be done.</p>\n\n<p>For some reasons we are unable to use IOT Shadow anymore.</p>\n\n<p><strong>Current architecture:</strong></p>\n\n<p>Lambda1 -> IOT Shadow Desired -> Thing</p>\n\n<p>Lambda1 -> waits for 5 sec </p>\n\n<p>Lambda1 -> reads IOT Shadow Reported -> success or failure</p>\n\n<p>If failure Lambda1 -> resets IOT Desired to old state -> exists</p>\n"
    }, {
        "tags": ["java", "iot", "thingworx"],
        "is_answered": false,
        "view_count": 305,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1548763828,
        "creation_date": 1548419337,
        "last_edit_date": 1548664564,
        "question_id": 54365370,
        "link": "https://stackoverflow.com/questions/54365370/read-a-property-value-of-a-thing-from-java-extension",
        "title": "Read a property value of a thing from java extension",
        "body": "<p>I'm trying to read a property value of a thing in java extension, I'm always getting the Exception  \"Not authorized for PropertyRead on ss in PSIM_AlarmManagementServices_Thing\"</p>\n\n<p>my code is </p>\n\n<pre><code>Thing AlarmManagementServices_Thing = (Thing) EntityUtilities.findEntityDirect(\"PSIM_AlarmManagementServices_Thing\",\n                ThingworxRelationshipTypes.Thing);\n        String ss = AlarmManagementServices_Thing.GetStringPropertyValue(\"ss\");\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FHz7z.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 108,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1547660722,
        "creation_date": 1547660722,
        "question_id": 54222615,
        "link": "https://stackoverflow.com/questions/54222615/how-to-allow-aws-iot-python-sdk-to-talk-to-multiple-things",
        "title": "how to allow AWS IOT python SDK to talk to multiple `Things`",
        "body": "<p>I am able to communicate with single <code>Thing</code> via Python SDK by downloading <code>AWS connection kit</code>. following below steps;</p>\n\n<p>from AWS account > Services > AWS IOT > onboard > Get started > click <code>get started</code>, Select Linux VM and Python SDK, click NEXT;</p>\n\n<p>The first steps after this is <code>Choose a thing</code>, where I can only select single thing. Which means that the connection kit that I will get will only be able to talk to that single thing. Is there any way I could get single certificate that allows my python script to publish and subscribe to multiple things by providing things ARN end-points ?  </p>\n\n<pre><code>myAWSIoTMQTTClient.publish(\"arn:aws:iot:us-east-2:xxxxxxxxxxxx:thing/Thing1\", \"topic_1\", \"Hello thing 1\")\nmyAWSIoTMQTTClient.publish(\"arn:aws:iot:us-east-2:xxxxxxxxxxxx:thing/Thing2\", \"topic_1\", \"Hello thing 2\")\nmyAWSIoTMQTTClient.publish(\"arn:aws:iot:us-east-2:xxxxxxxxxxxx:thing/Thing3\", \"topic_1\", \"Hello thing 3\")\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "registry", "iot"],
        "is_answered": true,
        "view_count": 4549,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1546169475,
        "creation_date": 1476094950,
        "question_id": 39956118,
        "link": "https://stackoverflow.com/questions/39956118/aws-iot-create-things-automatically",
        "title": "AWS IoT create things automatically",
        "body": "<p>I am wondering how one creates many \"things\" in the AWS IoT solution via API without using the AWS web interface since this is not realistic in case I want thousands or millions of things. I guess you could write some script utilizing the \"aws\" client described here \"<a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/thing-registry.html\" rel=\"nofollow\">http://docs.aws.amazon.com/iot/latest/developerguide/thing-registry.html</a>\" but thats not optimal if I want to control it from another service.</p>\n\n<p>I assumed there would be a RESTish API to do this but it doesn't seem like it if I read the docs: <em>\"You use the AWS IoT console or the AWS CLI to interact with the registry.\"</em></p>\n\n<p>Anyone who created thousands/millions of things - how did you interact with AWS IoT?</p>\n"
    }, {
        "tags": ["wso2", "iot"],
        "is_answered": false,
        "view_count": 82,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1545420278,
        "creation_date": 1545374184,
        "last_edit_date": 1545420278,
        "question_id": 53880228,
        "link": "https://stackoverflow.com/questions/53880228/access-the-api-with-http-request",
        "title": "Access the API with HTTP request",
        "body": "<p>I am using WSO2 IOT server, RaspberryPi 3 device with LED and DTH11 sensor. I can manage LED with console. </p>\n\n<p>What I am trying to do is turn it <strong>On</strong> and <strong>Off</strong> with my mobile application. So, I want to know how can I send the HTTP request to the API and the request also. The server is running in localhost. Can anyone help me? </p>\n\n<p>This is the command I used:</p>\n\n<pre><code>curl -k -X POST https://172.16.13.86:8243/api/device-mgt/v1.0/devices/raspberrypi/operations \n-H 'accept: application/json' -H 'authorization: Bearer a7a156d7-0393-3350-8b9b-0ac956723440' \n-H 'content-type: application/json' -d '{\"deviceIdentifiers\":[r1lovwmwg113],\n\"operation\":{\"code\":\"bulb\",\"type\":\"CONFIG\", \"payLoad\":\"state:ON\"}}'```\n</code></pre>\n\n<p>And this is the reply:</p>\n\n<blockquote>\n  <p>{\"activityId\":\"ACTIVITY_36492\",\"code\":\"bulb\",\"type\":\"CONFIG\",\"createdTimeStamp\":\"Fri\n  Dec 21 11:38:20 IST\n  2018\",\"activityStatus\":[{\"deviceIdentifier\":{\"id\":\"r1lovwmwg113\",\"type\":\"raspberrypi\"},\"status\":\"PENDING\"}]}</p>\n</blockquote>\n"
    }, {
        "tags": ["amazon-web-services", "security", "certificate", "x509certificate", "iot"],
        "is_answered": false,
        "view_count": 48,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1543577399,
        "creation_date": 1543577399,
        "question_id": 53556688,
        "link": "https://stackoverflow.com/questions/53556688/why-aws-iot-allows-us-to-communicate-with-a-thing-without-a-certificate",
        "title": "Why AWS IoT allows us to communicate with a &quot;thing&quot; without a certificate",
        "body": "<p>AWS IoT states that communication between a device and AWS IoT is protected through the use of X.509 certificates.</p>\n\n<p>Why is it that I can simply create a \"thing\" (via the Amazon CLI or SDK for example) and update its shadow etc. without attaching a certificate for security? </p>\n\n<p>How to configure AWS IoT to only allow things / devices to be available with certificates?</p>\n"
    }, {
        "tags": ["iot", "cumulocity"],
        "is_answered": false,
        "view_count": 114,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1542373261,
        "creation_date": 1542364979,
        "question_id": 53336224,
        "link": "https://stackoverflow.com/questions/53336224/using-cumulocity-add-user-to-a-group",
        "title": "Using Cumulocity add user to a group",
        "body": "<p>I've a usecase where I want to add users and devices to one group and assign roles to that group\nso that a user can only deal with the devices mentioned in the group only and not other devices present in other groups.</p>\n\n<p>While trying to achieve this scenario I tried making a user group (Let's say :<strong>User_Group</strong>) with the help of the following API </p>\n\n<p><strong>URL</strong>- {{url}}/user/{{tenant}}/groups(POST)<br>\n<strong>Request Body</strong>: {\n  \"name\" : \"User_Group\"\n}</p>\n\n<p>After this my Group is created. Now I need to add my user(say : <strong>Test_User</strong>) and devices to this group.</p>\n\n<p>I tried to do this using the following API:</p>\n\n<p><strong>URL</strong>-{{url}}/user/{{tenant}}/groups/{groupId}/users but was unable to do this as the API was give Internal Server Error.</p>\n\n<p>Can anyone help me what I\u2019m doing wrong or is there any other way I can achieve this use case?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot", "greengrass"],
        "is_answered": true,
        "view_count": 472,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1542139349,
        "creation_date": 1536823188,
        "last_edit_date": 1536828417,
        "question_id": 52308494,
        "link": "https://stackoverflow.com/questions/52308494/bulk-provisioning-of-greengrass-groups-cores-certificates",
        "title": "Bulk provisioning of Greengrass Groups, Cores, Certificates",
        "body": "<p>I'm looking for some guidance with regards to the bulk provisioning of Greengrass \nGroups, Cores, Certificates.</p>\n\n<p>In the pricing documentation for Greengrass <a href=\"https://aws.amazon.com/greengrass/pricing/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/greengrass/pricing/</a> it says:</p>\n\n<blockquote>\n  <p><strong>Device B</strong> - An AWS Greengrass Core device sits inactive on a warehouse\n  shelf in January, but is sold and powered on in February.....</p>\n</blockquote>\n\n<p>In a similar scenario - thousands of Core devices sitting on a shelf in a shop waiting to be purchased - would one need to create Greengrass Group and Core in the AWS control panel for each device prior to purchase - or is it possible to do some sort of Just In Time provisioning of Greengrass Core devices as they come on-board?</p>\n\n<p>Also, is there a Service Limit on AWS Greengrass Groups / Cores.  I've not found anything that mentions a limit, so I'm assuming not.</p>\n"
    }, {
        "tags": ["java", "java-8", "java-stream", "inputstream", "iot"],
        "is_answered": true,
        "view_count": 114,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1542058311,
        "creation_date": 1542055195,
        "last_edit_date": 1542058311,
        "question_id": 53269762,
        "link": "https://stackoverflow.com/questions/53269762/mapping-strings-from-inputstream-to-executorservice",
        "title": "Mapping strings from InputStream to ExecutorService",
        "body": "<p>I'm implementing my <code>DIY</code> <code>IoT</code>. I have a central node (server) which receives the commands from different sources and executes them.</p>\n\n<p>Input format:</p>\n\n<pre><code>&lt;DEVICE_NAME&gt;_&lt;COMMAND&gt; &lt;DEVICE_NAME&gt;_&lt;COMMAND&gt;  &lt;DEVICE_NAME&gt;_&lt;COMMAND&gt;\n&lt;DEVICE_NAME&gt;_&lt;COMMAND&gt;  &lt;DEVICE_NAME&gt;_&lt;COMMAND&gt; \n&lt;DEVICE_NAME&gt;_&lt;COMMAND&gt;  &lt;DEVICE_NAME&gt;_&lt;COMMAND&gt;  &lt;DEVICE_NAME&gt;_&lt;COMMAND&gt; \n</code></pre>\n\n<p>Each line may contain multiple commands.</p>\n\n<p>I have implemented a command executor server which takes the commands from the session as an <code>InputStream</code>. Then I split the data and process it:</p>\n\n<pre><code>private Device c0 = // Device constructor\nprivate Device c1 = // Device constructor\nprivate Device c2 = // Device constructor\nprivate Device c3 = // Device constructor\n\nprivate ExecutorService executor = Executors.newFixedThreadPool(3);\n\npublic void onConnection(InputStream in)     \n    InputStreamReader isr = new InputStreamReader(in);\n    LineNumberReader reader = new LineNumberReader(isr);\n\n    String line = null;\n    while ((line = reader.readLine()) != null) {\n        String[] strings = line.split(\",\");\n        for (String raw : strings) {\n            String command = raw.substring(0, 3);\n            if (raw.startsWith(\"C0_\")) {\n                executor.submit(() -&gt; c0.execute(command));\n            } else if (raw.startsWith(\"C1_\")) {\n                executor.submit(() -&gt; c1.execute(command));\n            } else if (raw.startsWith(\"C2_\")) {\n                executor.submit(() -&gt; c2.execute(command));\n            } else if (raw.startsWith(\"C3_\")) {\n                executor.submit(() -&gt; c3.execute(command));\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I understand the code looks ugly. Do you have any improvement ideas? Maybe I could use <code>Steam API</code>?\nAny hints/advices are appreciated.</p>\n\n<p>UPDATE</p>\n\n<p>I've tried to clean the code a bit by submitting the task only once, but the compailer sais the <code>device</code> must be <code>final</code> or <code>effectively final</code> so this does not work:</p>\n\n<pre><code>String command = raw.substring(0, 3);\nDevice device;\nif (raw.startsWith(\"C0_\")) {\n    device = c0;\n} else if (raw.startsWith(\"C1_\")) {\n    device = c1;\n} else if (raw.startsWith(\"C2_\")) {\n    device = c2;\n} else if (raw.startsWith(\"C3_\")) {\n    device = c3;\n}\nexecutor.submit(() -&gt; device.execute(command));\n</code></pre>\n"
    }, {
        "tags": ["udp", "iot", "at-command", "gprs", "sim800"],
        "is_answered": false,
        "view_count": 212,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1541688465,
        "creation_date": 1540663966,
        "last_edit_date": 1541688465,
        "question_id": 53024909,
        "link": "https://stackoverflow.com/questions/53024909/proper-at-command-sequence-for-an-udp-datagram-sending",
        "title": "Proper AT-command sequence for an UDP datagram sending",
        "body": "<p>Could you please help to eliminate my confusion?</p>\n\n<p>I am reading AT commands manual for my SIM800L module, everything is clear in scope of a single command. But it is not clear which sequence is best when sending a UDP packet.</p>\n\n<p>So, I know the order of commands is following:</p>\n\n<pre><code>AT+CIICR        Brings up wireless connection\nAT+CIFSR        Get local IP address\nAT+CIPSTART     Establishes a connection with a server.\nAT+CIPSEND      Sends data when the a connection is established.\nAT+CIPCLOSE\n</code></pre>\n\n<p>OK but I need to send datagrams time-to-time. Say, the period is from minutes to hour.</p>\n\n<p>I see that AT+CIICR can return ALREADY CONNECTED for subsequent calls, and I guess I should not call it more than once.\nSo the question is: which sequence should be used for the next datagrams?:</p>\n\n<p>1)</p>\n\n<pre><code>AT+CIPSTART\nAT+CIPSEND\nAT+CIPCLOSE\n</code></pre>\n\n<p>or just:</p>\n\n<p>2)</p>\n\n<pre><code>AT+CIPSEND\n</code></pre>\n\n<p>and AT+CIPCLOSE somewhere before a modem shutdown.</p>\n\n<p>Is there any time-to-live of AT+CIPSTART state?\nWhat is the best practice?</p>\n"
    }, {
        "tags": ["python", "websocket", "iot", "x509", "aws-iot"],
        "is_answered": true,
        "view_count": 795,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1541346599,
        "creation_date": 1541163863,
        "last_edit_date": 1541346599,
        "question_id": 53119129,
        "link": "https://stackoverflow.com/questions/53119129/aws-iot-mqtt-using-websocket-certificate-verify-failed",
        "title": "AWS IoT MQTT using WebSocket : CERTIFICATE_VERIFY_FAILED",
        "body": "<p>I am trying to setup AWS IoT using a Python script as mentioned in this <a href=\"https://www.hackster.io/awshome/awshome-home-automation-using-rpi-alexa-iot-a3d3dc#toc-installing-dependencies-4\" rel=\"nofollow noreferrer\">link</a>:</p>\n\n<p>I am able to connect on AWS IoT MQTT without WebSocket (used x.509 certificate).</p>\n\n<pre><code># creates the AWS IoT \ndef createIoT(): \n   iot = AWSIoTMQTTShadowClient('AWSHome') \n   # update this with your own endpoint from the IOT dashboard \n   iot.configureEndpoint('allj.iot.reg.amazonaws.com', 443) \n   iot.configureCredentials('rootCA','private.key','certificate.crt') \n   iot.configureConnectDisconnectTimeout(10)  # 10 sec \n   iot.configureMQTTOperationTimeout(5)  # 5 sec \n   iot.connect() \n   return \n</code></pre>\n\n<p>But When I try to connect on AWS IoT MQTT with WebSocket, I get the following error:</p>\n\n<p>Using the certificate generated by running this command: <a href=\"https://www.symantec.com/content/en/us/enterprise/verisign/roots/VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem\" rel=\"nofollow noreferrer\">wget</a></p>\n\n<pre><code># creates the AWS IoT \ndef createIoT(): \n   iot = AWSIoTMQTTShadowClient('AWSHome') \n   # update this with your own endpoint from the IOT dashboard \n   iot.configureEndpoint('asdasd.reg.amazonaws.com', 443) \n   iot.configureCredentials('VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem') \n   iot.configureConnectDisconnectTimeout(10)  # 10 sec \n   iot.configureMQTTOperationTimeout(5)  # 5 sec \n   iot.connect() \n   return \n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>    Traceback (most recent call last): \n    File \"./awshome.py\", line 60, in &lt;module&gt; iot = createIoT() \n    File \"./awshome.py\", line 50, in createIoT iot.connect() File \"/home/pi/.local/lib/python2.7/site-packages/AWSIoTPythonSDK/MQTTLib.py\", line 1216, in connect return         \n    self._AWSIoTMQTTClient.connect(keepAliveIntervalSecond) \n    File \"/home/pi/.local/lib/python2.7/site-packages/AWSIoTPythonSDK/MQTTLib.py\", line 485, in connect return self._mqtt_core.connect(keepAliveIntervalSecond) \n    File \"/home/pi/.local/lib/python2.7/site-packages/AWSIoTPythonSDK/core/protocol/mqtt_core.py\", line 192, in connect self.connect_async(keep_alive_sec, self._create_blocking_ack_callback(event)) \n    File \"/home/pi/.local/lib/python2.7/site-packages/AWSIoTPythonSDK/core/protocol/mqtt_core.py\", line 219, in connect_async \n    raise e \n    ssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:661)ssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:661)\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 462,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1540482978,
        "creation_date": 1529075451,
        "last_edit_date": 1529106722,
        "question_id": 50878333,
        "link": "https://stackoverflow.com/questions/50878333/aws-iot-multiple-environments-dev-qa-uat-prod",
        "title": "AWS IoT +multiple environments (dev/qa/uat/prod)",
        "body": "<h1>Background:</h1>\n\n<p>Our team only has one AWS root account (several IAM users);</p>\n\n<p>We have multiple environments (dev/qa/uat/prod) in AWS with S3 (different buckets) &amp; EC2 (different EC2)...;</p>\n\n<p>Everything is going well until we have a new requirement which requires IoT feature;</p>\n\n<h1>Question:</h1>\n\n<p><strong>How to setup multiple environments for AWS IoT?</strong></p>\n\n<p>I would like to isolate the IoT stuff (such as Thing, Certificates...) for different environments; </p>\n\n<p>If we use a separated root account to setup IoT, we have to move other existing environments (EC2/S3) to the new root account to integrate with the corresponding IoT environment, that is not what we want;</p>\n\n<p>Is it possible for one AWS root account? (and we want in one region);</p>\n"
    }, {
        "tags": ["mobile", "sms", "twilio", "iot", "sim-card"],
        "is_answered": true,
        "view_count": 93,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1540432389,
        "creation_date": 1540330162,
        "question_id": 52958104,
        "link": "https://stackoverflow.com/questions/52958104/register-twilio-sim-via-api",
        "title": "Register Twilio SIM via API",
        "body": "<p>I have an unregistered Twilio SIM. I know I can go <a href=\"https://www.twilio.com/console/wireless/sims/register\" rel=\"nofollow noreferrer\">here</a> to register it, but is there any way I can do this programatically via the API? </p>\n\n<p><a href=\"https://www.twilio.com/docs/wireless/api/sim\" rel=\"nofollow noreferrer\">These</a> are the docs I found on the SIM API and it doesn't make any mention of being able to do the actual registration via the API. </p>\n\n<p>Please tell me I'm wrong. </p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "amazon-rds", "iot"],
        "is_answered": true,
        "view_count": 371,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1539850005,
        "creation_date": 1539828635,
        "last_edit_date": 1539830802,
        "question_id": 52865956,
        "link": "https://stackoverflow.com/questions/52865956/aws-lambda-capture-iot-registry-event",
        "title": "AWS lambda capture IoT registry event",
        "body": "<p>I'm plan to generate new thing in AWS IoT Registry and once the thing is generated successfully, write the thing arn, thing name, cert information into AWS RDS database.</p>\n\n<p>Is this possible to use lambda capture IoT registry event and trigger lambda to write into database? </p>\n\n<p>Any suggestion?</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 412,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1539609872,
        "creation_date": 1539606002,
        "last_edit_date": 1539607223,
        "question_id": 52816670,
        "link": "https://stackoverflow.com/questions/52816670/aws-iot-how-to-trigger-an-act-rule-lambda-only-when-the-message-has-a-differe",
        "title": "aws iot: how to trigger an act rule / lambda only when the message has a different payload than before?",
        "body": "<p>I'm having a lot of inbound messages via mqtt on aws iot. Most of the messages have the same payload, and only change the timestamp. </p>\n\n<p>I need to run a lambda function that stores the data, but I only want to store data points when actually something changed. How can check for this inside the lambda function? Does the lambda function configured under <code>act</code>, triggered by <code>$aws/things/THING-NAME/shadow/update/documents</code>  runs before the shadow gets updated or after? </p>\n\n<p>this is the configuration of my rule:\n<a href=\"https://i.stack.imgur.com/j8q8a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j8q8a.png\" alt=\"enter image description here\"></a></p>\n\n<p>thanks</p>\n"
    }, {
        "tags": ["rest", "heroku", "server", "port", "iot"],
        "is_answered": true,
        "view_count": 579,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1539603641,
        "creation_date": 1539597733,
        "question_id": 52814219,
        "link": "https://stackoverflow.com/questions/52814219/how-to-find-process-env-port-port-number-in-heroku",
        "title": "how to find process.env.PORT port number in heroku?",
        "body": "<p>I need to post json data from a IOT device to the server api endpoint. But it requires the port number. How can i find a port number for <strong>process.env.PORT</strong> in <strong>heroku</strong>?</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 317,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1539265553,
        "creation_date": 1539265553,
        "question_id": 52761691,
        "link": "https://stackoverflow.com/questions/52761691/aws-iot-device-sdk-js-thingshadow-callback-on-status-not-being-fired",
        "title": "aws-iot-device-sdk-js: thingShadow callback &quot;on status&quot; not being fired",
        "body": "<p>i'm trying to solve a simple task using <code>aws-iot-device-sdk-js</code> and node.js. I want to subscribe to all updates made to the shadow and so something with them. I could do it using the <code>device</code> class using the certificates, but this is not available for the purpose of this demo. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>var AWS = require('aws-sdk');\nvar AWSIoTData = require('aws-iot-device-sdk');\nvar thingName = 'MyThing';\nvar shadowsRegistered = false;\n\nvar AWSConfiguration = {\n   poolId: 'us-east-2:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX', // 'YourCognitoIdentityPoolId'\n   host: 'XXXXXXXXXXXXXX-ats.iot.us-east-2.amazonaws.com', // 'YourAWSIoTEndpoint', e.g. 'prefix.iot.us-east-1.amazonaws.com'\n   region: 'us-east-2' // 'YourAwsRegion', e.g. 'us-east-1'\n};\n\n//\n// Initialize our configuration.\n//\nAWS.config.region = AWSConfiguration.region;\n\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n   IdentityPoolId: AWSConfiguration.poolId\n});\n\nvar shadowsRegistered = false;\n\niniShadows = function(credentials){\n    const shadows = AWSIoTData.thingShadow({\n       region: AWS.config.region,  // Set the AWS region we will operate in.\n       host:AWSConfiguration.host, //Set the AWS IoT Host Endpoint\n       clientId: 'some random string', // Use a random client ID.\n       protocol: 'wss', // Connect via secure WebSocket\n       //\n       // Set the maximum reconnect time to 8 seconds; this is a browser application\n       // so we don't want to leave the user waiting too long for reconnection after\n       // re-connecting to the network/re-opening their laptop/etc...\n       //\n       maximumReconnectTimeMs: 8000,\n       debug: true, // Enable console debugging information (optional)\n       //\n       // IMPORTANT: the AWS access key ID, secret key, and sesion token must be\n       // initialized with empty strings.\n       //\n       accessKeyId: credentials.AccessKeyId,\n       secretKey: credentials.SecretKey,\n       sessionToken: credentials.SessionToken\n    });\n    shadows.on('connect', function(){\n      console.log('connect');\n      //\n      // We only register our shadows once.\n      //\n      if (!shadowsRegistered) {\n        console.log('=== registering shadows ');\n         shadows.register(thingName,{\n           persistentSubscribe:true\n         },function(){\n           console.log('after registerging. ');\n           shadowsRegistered = true;\n\n         });\n\n      }\n    });\n    shadows.on('reconnect', function(){\n      console.log('reconnect');\n    });\n\n    shadows.on('status', function(thingName, statusType, clientToken, stateObject) {\n      console.log(thingName);\n      console.log('----&gt; got status ' + statusType);\n      console.log(JSON.stringify(stateObject));\n    });\n    shadows.on('delta', function(thingName, stateObject) {\n      console.log(thingName);\n      console.log(JSON.stringify(stateObject));\n    });\n    shadows.on('timeout', function(thingName, clientToken) {\n       console.log('received timeout on '+thingName);\n    });    \n\n}\n\n\nvar cognitoIdentity = new AWS.CognitoIdentity();\nAWS.config.credentials.get(function(err, data) {\n   if (!err) {\n      console.log('retrieved identity: ' + AWS.config.credentials.identityId);\n      var params = {\n         IdentityId: AWS.config.credentials.identityId\n      };\n      cognitoIdentity.getCredentialsForIdentity(params, function(err, data) {\n         if (!err) {\n            //\n            // Update our latest AWS credentials; the MQTT client will use these\n            // during its next reconnect attempt.\n            //\n            //shadows.updateWebSocketCredentials(data.Credentials.AccessKeyId,\n            //   data.Credentials.SecretKey,\n            ///   data.Credentials.SessionToken);\n            iniShadows(data.Credentials);\n              console.log('updated credentials in shadows ');\n\n         } else {\n            console.log('error retrieving credentials: ' + err);\n            alert('error retrieving credentials: ' + err);\n         }\n      });\n   } else {\n      console.log('error retrieving identity:' + err);\n      alert('error retrieving identity: ' + err);\n   }\n});\n</code></pre>\n\n<p>The log on the console is just:\n    ... (some cognito output)\n    updated credentials in shadows\n    connect\n    === registering shadows\n    after registerging.</p>\n\n<p>so the cognito part is working, and I'm able to register the thing. </p>\n\n<p>The <code>shadows.on('status',...</code> and <code>shadows.on('delta',</code> are never called. Even if there is data flowing, because I can register to the shadow/updates/accepted in the AWS IoT mqtt client. </p>\n\n<p>I then tried to call <code>shadows.get(thingName)</code> from within the callback of the register function AND I got the callback for <code>status</code> working once. However, the callback does not work for every new message that gets accepted by the shadow. </p>\n\n<pre><code>if (!shadowsRegistered) {\n        console.log('=== registering shadows ');\n         shadows.register(thingName,{\n           persistentSubscribe:true\n         },function(){\n           console.log('after registerging. ');\n           shadowsRegistered = true;\n\n           opClientToken = shadows.get(thingName);\n         });\n\n      }\n</code></pre>\n\n<p>As you can see, I have no trouble authenticating or other stuff. It is probably just a misunderstanding of how the shadow class works. Any help highly appreciated. </p>\n"
    }, {
        "tags": ["amazon-web-services", "scheduled-tasks", "iot", "job-scheduling", "aws-iot"],
        "is_answered": true,
        "view_count": 346,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1539146689,
        "creation_date": 1534927891,
        "question_id": 51963104,
        "link": "https://stackoverflow.com/questions/51963104/how-to-schedule-an-iot-job-in-aws-to-run-at-specific-time",
        "title": "How to schedule an IOT job in AWS to run at specific time?",
        "body": "<p>I want to run the device update using aws iot jobs can I set startTime? \nI saw in their documentation <a href=\"https://www.npmjs.com/package/aws-iot-device-sdk#examples\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/aws-iot-device-sdk#examples</a> .<br>\n\"autoStart: If set to true then agent will execute launch command when agent starts up.\"\nbut they didn't mention anything regarding how to schedule the start at specific time</p>\n"
    }, {
        "tags": ["iot", "at-command", "lte", "m2m", "quectel"],
        "is_answered": false,
        "view_count": 732,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1538000944,
        "creation_date": 1538000944,
        "question_id": 52526858,
        "link": "https://stackoverflow.com/questions/52526858/why-is-quectel-bg96-stuck-at-trying-to-register-the-cs-service",
        "title": "Why is Quectel BG96 stuck at trying to register the CS service?",
        "body": "<p>I'm trying to get a BG96 up on to the Verizon network to do some MQTT communication. </p>\n\n<p>The Quectel docs say to follow the TCP/IP AT command state machine before doing the MQTT commands. Makes sense to me.</p>\n\n<p>I have an activated SIM card with an M2M data plan for this device, but it never seems to get past the second step, registering for CS service. It gives status of 2, \"Not registered, but MT is currently trying to attach or searching an operator to register to.\" I checked the antenna and moved to a location closer to windows, but no luck.</p>\n\n<pre><code>at\n\nOK\n\nat+cpin?\n\n+CPIN: READY\n\nOK\n\nat+creg?\n\n+CREG: 0,2\nOK\n</code></pre>\n\n<p>The same status is returned for the PS services, FWIW, but that's not surprising I think because the Quectel BG96 AT docs say you must register CS service first.</p>\n\n<p>Any idea why a BG96 would be stuck at status 2 for <code>at+creg?</code>?</p>\n"
    }, {
        "tags": ["java", "android", "android-volley", "iot"],
        "is_answered": false,
        "view_count": 538,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1536900621,
        "creation_date": 1536748634,
        "last_edit_date": 1536814613,
        "question_id": 52293171,
        "link": "https://stackoverflow.com/questions/52293171/clear-memory-occupied-by-volley-request-queue",
        "title": "Clear Memory occupied by volley request queue",
        "body": "<p>I have an android application in which I need multiple volley request queue's to be maintained for different iot devices. My app needs to communicate with each iot device on separate request queue for faster response.\nBut because I have new request queue being created for each new iot device object, my app is going out of memory.</p>\n\n<pre><code> pthread_create failed: couldn't allocate 1069056-bytes mapped space: Out of memory\n</code></pre>\n\n<p>I want to clear the memory occupied by previous request queue..\nIs it possible by any means??</p>\n\n<p>I also tried to clear the memory occupied by calling </p>\n\n<pre><code>requestqueue.stop()\n</code></pre>\n\n<p>but it did not help, I would still get the same error and app would crash.</p>\n"
    }, {
        "tags": ["python", "iot", "get-request"],
        "is_answered": true,
        "view_count": 418,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1536754007,
        "creation_date": 1516210861,
        "question_id": 48306968,
        "link": "https://stackoverflow.com/questions/48306968/why-two-get-requests-are-not-updating-fields-in-thingspeak",
        "title": "Why two get requests are not updating fields in thingspeak?",
        "body": "<p>A single run cannot update two or more get request to my thingspeak fields.\nMy code has a part which requires two fields to get updated in one python program.\nLike..,</p>\n\n<pre><code>urlopen(\"https://api.thingspeak.com/update?api_key=D------MQV&amp;field1=5\")\nurlopen(\"https://api.thingspeak.com/update?api_key=D------MQV&amp;field2=10\")\n</code></pre>\n\n<p>Only field1 gets updated with the above example.\nThanks!</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot", "ota"],
        "is_answered": true,
        "view_count": 1277,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1536624740,
        "creation_date": 1536503225,
        "last_edit_date": 1536624740,
        "question_id": 52245478,
        "link": "https://stackoverflow.com/questions/52245478/aws-iot-create-custom-ota-job-document",
        "title": "AWS IoT Create custom OTA job document",
        "body": "<p>I'm new to AWS IoT and currently exploring creating a job to update/install firmware via the AWS IoT Console custom job instead of Amazon FreeRTOS service. </p>\n\n<p>My questions are: </p>\n\n<ol>\n<li>What is the content in the job document(.json) in AWS IoT Console? i.e., to specify to install the firmware update for the software in AWS S3 bucket</li>\n<li>Where to find out the documentation for a custom job? I found some sample using AWS IoT SDK for python or JS. Is that the correct way to create a job for my firmware device via this SDK? </li>\n<li>Also, is that the alternative way to update the firmware by using device shadow instead of creating a custom job in AWS IoT Console.</li>\n</ol>\n\n<p>I appreciate if any IoT job creation documentation or related sample link could be provided.</p>\n"
    }, {
        "tags": ["amazon-cloudformation", "iot", "serverless-framework", "serverless", "aws-iot"],
        "is_answered": true,
        "view_count": 661,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1536134920,
        "creation_date": 1536027748,
        "question_id": 52157979,
        "link": "https://stackoverflow.com/questions/52157979/setting-up-aws-iot-using-serverless-framework-for-multiple-iot-devices",
        "title": "Setting up AWS IoT using Serverless Framework for Multiple IoT Devices",
        "body": "<p>My goal is to create a system on AWS using the <a href=\"http://serverless.com/\" rel=\"nofollow noreferrer\">serverless framework</a> for multiple IoT devices to send JSON payloads to AWS IoT, which in turn will be saved to DynamoDB.</p>\n\n<p>I am very new to using AWS outside of creating EC2 servers and this is my first project using the <a href=\"http://serverless.com/\" rel=\"nofollow noreferrer\">serverless framework</a>. </p>\n\n<p>After referring to <a href=\"https://serverless.zone/iot-with-the-serverless-framework-e228fae87be\" rel=\"nofollow noreferrer\">an example</a>, the modified version that I came up with is posted below.</p>\n\n<p><strong>Problem:</strong> It appears that the example is for just 1 device to connect to AWS IoT, which I concluded from the hardcoded IoT Thing certificate being used, such as</p>\n\n<pre><code>SensorPolicyPrincipalAttachmentCert:\n  Type: AWS::IoT::PolicyPrincipalAttachment\n  Properties:\n    PolicyName: { Ref: SensorThingPolicy }\n    Principal: ${{custom.iotCertificateArn}}\n\nSensorThingPrincipalAttachmentCert:\n  Type: \"AWS::IoT::ThingPrincipalAttachment\"\n  Properties:\n    ThingName: { Ref: SensorThing }\n    Principal: ${self:custom.iotCertificateArn}\n</code></pre>\n\n<p>If this conclusion is correct that <code>serverless.yml</code> is configured for only 1 Thing, then what modifications can we make such that more than 1 Thing can be used?</p>\n\n<p>Maybe setup all the Things outside of <code>serverless.yaml</code>? Which means removing just <code>SensorPolicyPrincipalAttachmentCert</code> and <code>SensorThingPrincipalAttachmentCert</code>?</p>\n\n<p>Also, how should we set the <code>Resource</code> property to in <code>SensorThingPolicy</code>? They are currently set to <code>\"*\"</code>, is this too broard? Or is there a way to limit to just Things.</p>\n\n<p><strong>serverless.yml</strong></p>\n\n<pre><code>service: garden-iot\n\nprovider:\nname: aws\nruntime: nodejs6.10\nregion: us-east-1\n\n# load custom variables from a file\ncustom: ${file(./vars-dev.yml)}\n\nresources:\nResources:\n    LocationData:\n    Type: AWS::DynamoDB::Table\n    Properties:\n        TableName: location-data-${opt:stage}\n        AttributeDefinitions:\n        - \n            AttributeName: ClientId\n            AttributeType: S\n        - \n            AttributeName: Timestamp\n            AttributeType: S\n        KeySchema:\n        - \n            AttributeName: ClientId\n            KeyType: HASH\n        - \n            AttributeName: Timestamp\n            KeyType: RANGE\n        ProvisionedThroughput:\n        ReadCapacityUnits: 1\n        WriteCapacityUnits: 1\n\n    SensorThing:\n    Type: AWS::IoT::Thing\n    Properties:\n        AttributePayload:\n        Attributes:\n            SensorType: soil\n\n    SensorThingPolicy:\n    Type: AWS::IoT::Policy\n    Properties:\n        PolicyDocument:\n        Version: \"2012-10-17\"\n        Statement:\n            - Effect: Allow\n            Action: [\"iot:Connect\"]\n            Resource: [\"${self:custom.sensorThingClientResource}\"]\n            - Effect: \"Allow\"\n            Action: [\"iot:Publish\"]\n            Resource: [\"${self:custom.sensorThingSoilTopicResource}\"]\n\n    SensorPolicyPrincipalAttachmentCert:\n    Type: AWS::IoT::PolicyPrincipalAttachment\n    Properties:\n        PolicyName: { Ref: SensorThingPolicy }\n        Principal: ${{custom.iotCertificateArn}}\n\n    SensorThingPrincipalAttachmentCert:\n    Type: \"AWS::IoT::ThingPrincipalAttachment\"\n    Properties:\n        ThingName: { Ref: SensorThing }\n        Principal: ${self:custom.iotCertificateArn}\n\nIoTRole:\nType: AWS::IAM::Role\nProperties:\n    AssumeRolePolicyDocument:\n    Version: \"2012-10-17\"\n    Statement:\n        -\n        Effect: Allow\n        Principal:\n            Service:\n            - iot.amazonaws.com\n        Action:\n            - sts:AssumeRole\n\nIoTRolePolicies:\nType: AWS::IAM::Policy\nProperties:\n    PolicyName: IoTRole_Policy\n    PolicyDocument:\n    Version: \"2012-10-17\"\n    Statement:\n        -\n        Effect: Allow\n        Action:\n            - dynamodb:PutItem\n        Resource: \"*\"\n        -\n        Effect: Allow\n        Action:\n            - lambda:InvokeFunction\n        Resource: \"*\"\n    Roles: [{ Ref: IoTRole }]\n</code></pre>\n"
    }, {
        "tags": ["updates", "iot", "firmware", "coap", "leshan"],
        "is_answered": true,
        "view_count": 553,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1535617020,
        "creation_date": 1533206961,
        "last_edit_date": 1533217403,
        "question_id": 51651750,
        "link": "https://stackoverflow.com/questions/51651750/oma-firmware-update-using-leshan-server-where-to-save-the-files",
        "title": "OMA firmware update using Leshan server: Where to save the files?",
        "body": "<p>I'm quite new to the world of the IOT (protocols). I want to update some devices remotely (they will be installed about 8000km away from my working place). I have found out that LWM2M would fit to my scope.</p>\n\n<p>Because the internet connection there is not stable and the bandwidth is low, I have decided to also install a Raspberry Pi to collect the data of the sensors and to install a Leshan server to trigger the updates.</p>\n\n<p>I have tested the devices and I can register them to the Leshan server on the Pi, read some data, and reboot the devices. The problem is, I don't know where to save my binary file for the update, so that the device can download them.</p>\n\n<p>I tried following steps:</p>\n\n<ol>\n<li>Save the file on [leshan-dir]/update.bin.</li>\n<li>Write the \"Package URI\": coap://[raspi-IP]:5683/update.bin<br>\nAfter that, the backgroud color of the button \"Write\" changes to green.</li>\n<li>Execute the update</li>\n</ol>\n\n<p>The response of the server is 404 [Not Found].</p>\n\n<p>I have looked for any API to find out where I can save the .bin file, but without success. And because nobody seems to have had a similar error, I start thinking I have missed some points.</p>\n\n<p>Where do I have to save the files on the Raspbery Pi, so that I can perform an update?</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "amazon-cognito", "aws-cognito", "aws-iot"],
        "is_answered": true,
        "view_count": 212,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1535450889,
        "creation_date": 1534844544,
        "last_edit_date": 1534858874,
        "question_id": 51945856,
        "link": "https://stackoverflow.com/questions/51945856/aws-iot-list-things-cognito-user-specific",
        "title": "AWS IOT - List Things Cognito user specific",
        "body": "<p>I want to list the IOT things on a UI logged in with AWS Cognito. A user can create an IOT thing and should be able to see the IOT thing created by that user only and not by other users.</p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "raspberry-pi", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 835,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1534224100,
        "creation_date": 1534184119,
        "question_id": 51828304,
        "link": "https://stackoverflow.com/questions/51828304/aws-iot-shadow-not-updating",
        "title": "AWS IoT: Shadow not updating",
        "body": "<p>I have the pubSub code example working, so I can publish to MQTT topics. And it is my understanding that I just need to change the topic to <code>\"mything/shadow/update\"</code>, and the shadow would be updated, but it doesn't.</p>\n\n<p>My current shadow state looks like:</p>\n\n<pre><code>{\n  \"desired\":{\n    \"welcome\": \"aws-iot\"\n  },\n  \"reported\":{\n    \"welcome\": \"aws-iot\"\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["authentication", "login", "wso2", "iot"],
        "is_answered": true,
        "view_count": 276,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1533882618,
        "creation_date": 1533870100,
        "question_id": 51778318,
        "link": "https://stackoverflow.com/questions/51778318/not-able-to-access-wso2-iots-device-management-console-in-wso2-iot-3-3-0-when-lo",
        "title": "Not able to access WSO2 IoTS Device Management Console in wso2-iot-3.3.0 when logged in &#39;admin&#39;",
        "body": "<p>I am studying IOT-server. I have a question and please help me. \nI use WSO2 IoT server and I am not able to access WSO2 IoT server device Management Console (<a href=\"https://localhost:9443/devicemgt\" rel=\"nofollow noreferrer\">https://localhost:9443/devicemgt</a>) when I input 'admin' both username and password or input this which created a new account.<br>\nAs a result, it showed me the Authentication failed. When I saw users list in <a href=\"https://localhost:9443/carbon\" rel=\"nofollow noreferrer\">https://localhost:9443/carbon</a>, it showed admin, new accounts .... etc. \nI don't know why it does not log in  WSO2 IoT server device Management Console.\nPlease give your advice and then thank you so much. </p>\n"
    }, {
        "tags": ["python", "ibm-cloud", "listener", "iot", "watson-iot"],
        "is_answered": true,
        "view_count": 100,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1532958197,
        "creation_date": 1532956354,
        "question_id": 51594788,
        "link": "https://stackoverflow.com/questions/51594788/watson-iot-event-listener-in-python",
        "title": "Watson-IoT event listener in python",
        "body": "<p>I'm trying to create a listener in python that automatically retrieve events from devices in Watson-IoT as they occur. When an event occurs I want to call a specific function.</p>\n\n<p>I have read through the documentation and the API-specifications but couldn't find anything.</p>\n\n<p>Is there a way to do this?</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "aws-sdk", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 77,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1532948420,
        "creation_date": 1532948420,
        "question_id": 51592497,
        "link": "https://stackoverflow.com/questions/51592497/aws-iot-issue-with-device-certificates",
        "title": "AWS IoT - Issue With Device Certificates",
        "body": "<p>I have a script created using the AWS PHP SDK to bulk upload buttons as things in IoT core whilst simultaneously adding it to the DB on my server.</p>\n\n<p>When using the RegisterThing method and sending a CSR in the parameters argument, the certificate gets created fine and attached to the thing fine and everything with the certificate looks good.</p>\n\n<p>When I go to press the button it's been attached to, I get red flash in the sequence of Long Short Short which, according to AWS is \"Cannot establish a secure connection with the server. This error is most likely due to an unknown or inactive certificate.\".</p>\n\n<p>If I attach the button to my Lambda function as a trigger, when it doesn't exist as a thing in IoT core, the button works as expected and doesn't give me an error.</p>\n\n<p>I have compared the certificate created when adding as a trigger in Lambda to my certificate created from CSR. There are almost no differences with the exception of the DN config attached to the CSR.</p>\n\n<p>Any help would be appreciated in understanding why my CSR created certificate gives an error.</p>\n"
    }, {
        "tags": ["android", "amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 885,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1532346984,
        "creation_date": 1532329627,
        "last_edit_date": 1532334319,
        "question_id": 51473260,
        "link": "https://stackoverflow.com/questions/51473260/aws-android-pubsub",
        "title": "AWS Android PubSub",
        "body": "<p>I cannot get <a href=\"https://github.com/awslabs/aws-sdk-android-samples/tree/master/AndroidPubSub\" rel=\"nofollow noreferrer\">the official aws-pubsub sdk</a> to run. I have replaced all the necessary credentials. How can I set publishing and subscribing using my Android device on Amazon IoT? I have seen every link available on the web but still cannot get it to work. Here is an idea of my project:</p>\n\n<p>The company is creating air filters that transmit data on regular basis through BLE module to the android app. Now I have to use this app to publish data to Amazon IoT as soon as it gets data from the BLE.</p>\n\n<pre><code> package com.example.parasrawat2124.amazonmqtt;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\nimport com.amazonaws.auth.CognitoCachingCredentialsProvider;\nimport com.amazonaws.mobileconnectors.iot.AWSIotKeystoreHelper;\nimport com.amazonaws.mobileconnectors.iot.AWSIotMqttClientStatusCallback;\nimport com.amazonaws.mobileconnectors.iot.AWSIotMqttLastWillAndTestament;\nimport com.amazonaws.mobileconnectors.iot.AWSIotMqttManager;\nimport com.amazonaws.mobileconnectors.iot.AWSIotMqttNewMessageCallback;\nimport com.amazonaws.mobileconnectors.iot.AWSIotMqttQos;\nimport com.amazonaws.regions.Region;\nimport com.amazonaws.regions.Regions;\nimport com.amazonaws.services.iot.AWSIotClient;\nimport com.amazonaws.services.iot.model.AttachPrincipalPolicyRequest;\nimport com.amazonaws.services.iot.model.CreateKeysAndCertificateRequest;\nimport com.amazonaws.services.iot.model.CreateKeysAndCertificateResult;\n\nimport java.io.UnsupportedEncodingException;\nimport java.security.KeyStore;\nimport java.util.UUID;\n\npublic class MainActivity extends AppCompatActivity {\n\n    static final String LOG_TAG = MainActivity.class.getCanonicalName();\n\n    // --- Constants to modify per your configuration ---\n\n    // IoT endpoint\n    // AWS Iot CLI describe-endpoint call returns: XXXXXXXXXX.iot.&lt;region&gt;.amazonaws.com\n    private static final String CUSTOMER_SPECIFIC_ENDPOINT = \"a1j3ds5m9dpp07.iot.us-west-2.amazonaws.com\";\n    // Cognito pool ID. For this app, pool needs to be unauthenticated pool with\n    // AWS IoT permissions.\n    private static final String COGNITO_POOL_ID = \"us-west-2_iQ1FI8tfj\";\n    // Name of the AWS IoT policy to attach to a newly created certificate\n    private static final String AWS_IOT_POLICY_NAME = \"PMQTT\";\n\n    // Region of AWS IoT\n    private static final Regions MY_REGION = Regions.US_EAST_1;\n    // Filename of KeyStore file on the filesystem\n    private static final String KEYSTORE_NAME = \"iot_keystore\";\n    // Password for the private key in the KeyStore\n    private static final String KEYSTORE_PASSWORD = \"password\";\n    // Certificate and key aliases in the KeyStore\n    private static final String CERTIFICATE_ID = \"default\";\n\n    EditText txtSubcribe;\n    EditText txtTopic;\n    EditText txtMessage;\n\n    TextView tvLastMessage;\n    TextView tvClientId;\n    TextView tvStatus;\n\n    Button btnConnect;\n    Button btnSubscribe;\n    Button btnPublish;\n    Button btnDisconnect;\n\n    AWSIotClient mIotAndroidClient;\n    AWSIotMqttManager mqttManager;\n    String clientId;\n    String keystorePath;\n    String keystoreName;\n    String keystorePassword;\n\n    KeyStore clientKeyStore = null;\n    String certificateId;\n\n    CognitoCachingCredentialsProvider credentialsProvider;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        txtSubcribe = (EditText) findViewById(R.id.txtSubsribe);\n        txtTopic = (EditText) findViewById(R.id.txtTopic);\n        txtMessage = (EditText) findViewById(R.id.txtMessage);\n\n        tvLastMessage = (TextView) findViewById(R.id.tvLastMessage);\n        tvClientId = (TextView) findViewById(R.id.tvClientId);\n        tvStatus = (TextView) findViewById(R.id.tvStatus);\n\n        btnConnect = (Button) findViewById(R.id.btnConnect);\n        btnConnect.setOnClickListener(connectClick);\n        btnConnect.setEnabled(false);\n\n        btnSubscribe = (Button) findViewById(R.id.btnSubscribe);\n        btnSubscribe.setOnClickListener(subscribeClick);\n\n        btnPublish = (Button) findViewById(R.id.btnPublish);\n        btnPublish.setOnClickListener(publishClick);\n\n        btnDisconnect = (Button) findViewById(R.id.btnDisconnect);\n        btnDisconnect.setOnClickListener(disconnectClick);\n\n        // MQTT client IDs are required to be unique per AWS IoT account.\n        // This UUID is \"practically unique\" but does not _guarantee_\n        // uniqueness.\n        clientId = UUID.randomUUID().toString();\n        tvClientId.setText(clientId);\n\n        // Initialize the AWS Cognito credentials provider\n        credentialsProvider = new CognitoCachingCredentialsProvider(\n                getApplicationContext(), // context\n                COGNITO_POOL_ID, // Identity Pool ID\n                MY_REGION // Region\n        );\n\n        Region region = Region.getRegion(MY_REGION);\n\n        // MQTT Client\n        mqttManager = new AWSIotMqttManager(clientId, CUSTOMER_SPECIFIC_ENDPOINT);\n\n        // Set keepalive to 10 seconds.  Will recognize disconnects more quickly but will also send\n        // MQTT pings every 10 seconds.\n        mqttManager.setKeepAlive(10);\n\n        // Set Last Will and Testament for MQTT.  On an unclean disconnect (loss of connection)\n        // AWS IoT will publish this message to alert other clients.\n        AWSIotMqttLastWillAndTestament lwt = new AWSIotMqttLastWillAndTestament(\"my/lwt/topic\",\n                \"Android client lost connection\", AWSIotMqttQos.QOS0);\n        mqttManager.setMqttLastWillAndTestament(lwt);\n\n        // IoT Client (for creation of certificate if needed)\n        mIotAndroidClient = new AWSIotClient(credentialsProvider);\n        mIotAndroidClient.setRegion(region);\n\n        keystorePath = getFilesDir().getPath();\n        keystoreName = KEYSTORE_NAME;\n        keystorePassword = KEYSTORE_PASSWORD;\n        certificateId = CERTIFICATE_ID;\n\n        // To load cert/key from keystore on filesystem\n        try {\n            if (AWSIotKeystoreHelper.isKeystorePresent(keystorePath, keystoreName)) {\n                if (AWSIotKeystoreHelper.keystoreContainsAlias(certificateId, keystorePath,\n                        keystoreName, keystorePassword)) {\n                    Log.i(LOG_TAG, \"Certificate \" + certificateId\n                            + \" found in keystore - using for MQTT.\");\n                    // load keystore from file into memory to pass on connection\n                    clientKeyStore = AWSIotKeystoreHelper.getIotKeystore(certificateId,\n                            keystorePath, keystoreName, keystorePassword);\n                    btnConnect.setEnabled(true);\n                } else {\n                    Log.i(LOG_TAG, \"Key/cert \" + certificateId + \" not found in keystore.\");\n                }\n            } else {\n                Log.i(LOG_TAG, \"Keystore \" + keystorePath + \"/\" + keystoreName + \" not found.\");\n            }\n        } catch (Exception e) {\n            Log.e(LOG_TAG, \"An error occurred retrieving cert/key from keystore.\", e);\n        }\n\n        if (clientKeyStore == null) {\n            Log.i(LOG_TAG, \"Cert/key was not found in keystore - creating new key and certificate.\");\n\n            new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        // Create a new private key and certificate. This call\n                        // creates both on the server and returns them to the\n                        // device.\n                        CreateKeysAndCertificateRequest createKeysAndCertificateRequest =\n                                new CreateKeysAndCertificateRequest();\n                        createKeysAndCertificateRequest.setSetAsActive(true);\n                        final CreateKeysAndCertificateResult createKeysAndCertificateResult;\n                        createKeysAndCertificateResult =\n                                mIotAndroidClient.createKeysAndCertificate(createKeysAndCertificateRequest);\n                        Log.i(LOG_TAG,\n                                \"Cert ID: \" +\n                                        createKeysAndCertificateResult.getCertificateId() +\n                                        \" created.\");\n\n                        // store in keystore for use in MQTT client\n                        // saved as alias \"default\" so a new certificate isn't\n                        // generated each run of this application\n                        AWSIotKeystoreHelper.saveCertificateAndPrivateKey(certificateId,\n                                createKeysAndCertificateResult.getCertificatePem(),\n                                createKeysAndCertificateResult.getKeyPair().getPrivateKey(),\n                                keystorePath, keystoreName, keystorePassword);\n\n                        // load keystore from file into memory to pass on\n                        // connection\n                        clientKeyStore = AWSIotKeystoreHelper.getIotKeystore(certificateId,\n                                keystorePath, keystoreName, keystorePassword);\n\n                        // Attach a policy to the newly created certificate.\n                        // This flow assumes the policy was already created in\n                        // AWS IoT and we are now just attaching it to the\n                        // certificate.\n                        AttachPrincipalPolicyRequest policyAttachRequest =\n                                new AttachPrincipalPolicyRequest();\n                        policyAttachRequest.setPolicyName(AWS_IOT_POLICY_NAME);\n                        policyAttachRequest.setPrincipal(createKeysAndCertificateResult\n                                .getCertificateArn());\n                        mIotAndroidClient.attachPrincipalPolicy(policyAttachRequest);\n\n                        runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                btnConnect.setEnabled(true);\n                            }\n                        });\n                    } catch (Exception e) {\n                        Log.e(LOG_TAG,\n                                \"Exception occurred when generating new private key and certificate.\",\n                                e);\n                    }\n                }\n            }).start();\n        }\n    }\n\n    View.OnClickListener connectClick = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            Log.d(LOG_TAG, \"clientId = \" + clientId);\n\n            try {\n                mqttManager.connect(clientKeyStore, new AWSIotMqttClientStatusCallback() {\n                    @Override\n                    public void onStatusChanged(final AWSIotMqttClientStatus status,\n                                                final Throwable throwable) {\n                        Log.d(LOG_TAG, \"Status = \" + String.valueOf(status));\n\n                        runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                if (status == AWSIotMqttClientStatus.Connecting) {\n                                    tvStatus.setText(\"Connecting...\");\n\n                                } else if (status == AWSIotMqttClientStatus.Connected) {\n                                    tvStatus.setText(\"Connected\");\n\n                                } else if (status == AWSIotMqttClientStatus.Reconnecting) {\n                                    if (throwable != null) {\n                                        Log.e(LOG_TAG, \"Connection error.\", throwable);\n                                    }\n                                    tvStatus.setText(\"Reconnecting\");\n                                } else if (status == AWSIotMqttClientStatus.ConnectionLost) {\n                                    if (throwable != null) {\n                                        Log.e(LOG_TAG, \"Connection error.\", throwable);\n                                    }\n                                    tvStatus.setText(\"Disconnected\");\n                                } else {\n                                    tvStatus.setText(\"Disconnected\");\n\n                                }\n                            }\n                        });\n                    }\n                });\n            } catch (final Exception e) {\n                Log.e(LOG_TAG, \"Connection error.\", e);\n                tvStatus.setText(\"Error! \" + e.getMessage());\n            }\n        }\n    };\n\n    View.OnClickListener subscribeClick = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            final String topic = txtSubcribe.getText().toString();\n\n            Log.d(LOG_TAG, \"topic = \" + topic);\n\n            try {\n                mqttManager.subscribeToTopic(topic, AWSIotMqttQos.QOS0,\n                        new AWSIotMqttNewMessageCallback() {\n                            @Override\n                            public void onMessageArrived(final String topic, final byte[] data) {\n                                runOnUiThread(new Runnable() {\n                                    @Override\n                                    public void run() {\n                                        try {\n                                            String message = new String(data, \"UTF-8\");\n                                            Log.d(LOG_TAG, \"Message arrived:\");\n                                            Log.d(LOG_TAG, \"   Topic: \" + topic);\n                                            Log.d(LOG_TAG, \" Message: \" + message);\n\n                                            tvLastMessage.setText(message);\n\n                                        } catch (UnsupportedEncodingException e) {\n                                            Log.e(LOG_TAG, \"Message encoding error.\", e);\n                                        }\n                                    }\n                                });\n                            }\n                        });\n            } catch (Exception e) {\n                Log.e(LOG_TAG, \"Subscription error.\", e);\n            }\n        }\n    };\n\n    View.OnClickListener publishClick = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            final String topic = txtTopic.getText().toString();\n            final String msg = txtMessage.getText().toString();\n\n            try {\n                mqttManager.publishString(msg, topic, AWSIotMqttQos.QOS0);\n            } catch (Exception e) {\n                Log.e(LOG_TAG, \"Publish error.\", e);\n            }\n\n        }\n    };\n\n    View.OnClickListener disconnectClick = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            try {\n                mqttManager.disconnect();\n            } catch (Exception e) {\n                Log.e(LOG_TAG, \"Disconnect error.\", e);\n            }\n\n        }\n    };\n}\n</code></pre>\n\n<p>And my console message:</p>\n\n<pre><code>07-23 12:06:20.595 18136-18168/com.example.parasrawat2124.amazonmqtt D/CognitoCachingCredentialsProvider: Clearing credentials from SharedPreferences\n07-23 12:06:20.898 18136-18168/com.example.parasrawat2124.amazonmqtt E/com.example.parasrawat2124.amazonmqtt.MainActivity: Exception occurred when generating new private key and certificate.\n    com.amazonaws.AmazonServiceException: 1 validation error detected: Value 'us-west-2_iQ1FI8tfj' at 'identityPoolId' failed to satisfy constraint: Member must satisfy regular expression pattern: [\\w-]+:[0-9a-f-]+ (Service: AmazonCognitoIdentity; Status Code: 400; Error Code: ValidationException; Request ID: b696c58e-8e42-11e8-b181-f1f1e5db8378)\n        at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:730)\n        at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:405)\n        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:212)\n        at com.amazonaws.services.cognitoidentity.AmazonCognitoIdentityClient.invoke(AmazonCognitoIdentityClient.java:566)\n        at com.amazonaws.services.cognitoidentity.AmazonCognitoIdentityClient.getId(AmazonCognitoIdentityClient.java:448)\n        at com.amazonaws.auth.AWSAbstractCognitoIdentityProvider.getIdentityId(AWSAbstractCognitoIdentityProvider.java:172)\n        at com.amazonaws.auth.AWSEnhancedCognitoIdentityProvider.refresh(AWSEnhancedCognitoIdentityProvider.java:76)\n        at com.amazonaws.auth.CognitoCredentialsProvider.retryRefresh(CognitoCredentialsProvider.java:693)\n        at com.amazonaws.auth.CognitoCredentialsProvider.startSession(CognitoCredentialsProvider.java:665)\n        at com.amazonaws.auth.CognitoCredentialsProvider.getCredentials(CognitoCredentialsProvider.java:444)\n        at com.amazonaws.auth.CognitoCachingCredentialsProvider.getCredentials(CognitoCachingCredentialsProvider.java:485)\n        at com.amazonaws.auth.CognitoCachingCredentialsProvider.getCredentials(CognitoCachingCredentialsProvider.java:77)\n        at com.amazonaws.services.iot.AWSIotClient.invoke(AWSIotClient.java:7048)\n        at com.amazonaws.services.iot.AWSIotClient.createKeysAndCertificate(AWSIotClient.java:1119)\n        at com.example.parasrawat2124.amazonmqtt.MainActivity$1.run(MainActivity.java:177)\n        at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n"
    }, {
        "tags": ["rest", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 138,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1531398835,
        "creation_date": 1455599425,
        "last_edit_date": 1531398835,
        "question_id": 35424245,
        "link": "https://stackoverflow.com/questions/35424245/is-there-a-sample-for-using-the-rest-iot-foundation-api",
        "title": "Is there a sample for using the REST IoT Foundation API?",
        "body": "<p>The IBM IoT Foundation technology has an API that is REST based.  The low level docs for the API can be found here:</p>\n\n<p><a href=\"https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#/\" rel=\"nofollow\">https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#/</a></p>\n\n<p>with a higher level article here:</p>\n\n<p><a href=\"https://docs.internetofthings.ibmcloud.com/devices/api.html\" rel=\"nofollow\">https://docs.internetofthings.ibmcloud.com/devices/api.html</a></p>\n\n<p>Unfortunately, despite having tried a number of experiments, I am unable to get any REST requests working.  Is there a recipe, tutorial or sample available that illustrates the use of the IoT Foundation APIs using REST requests?</p>\n"
    }, {
        "tags": ["microsoft-edge", "iot", "azure-iot-edge"],
        "is_answered": false,
        "view_count": 155,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1530753333,
        "creation_date": 1530715307,
        "last_edit_date": 1530753333,
        "question_id": 51176217,
        "link": "https://stackoverflow.com/questions/51176217/post-request-to-iot-edge-port-15580",
        "title": "POST request to IoT edge port 15580",
        "body": "<p>How to connect to workload_uri in IoT edge using port 15580? How to form Http header?</p>\n\n<p>I want to connect to port 15580 and post request to edgeagent.</p>\n"
    }, {
        "tags": ["amazon-web-services", "http", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 59,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1530271319,
        "creation_date": 1530007680,
        "last_edit_date": 1530095379,
        "question_id": 51040229,
        "link": "https://stackoverflow.com/questions/51040229/create-things-api-using-http-in-aws-iot",
        "title": "create things api using http in AWS-IoT?",
        "body": "<p>I am new to this AWS IoT. I am having a problem with creating things. For this, I have gone through this document: </p>\n\n<blockquote>\n  <p><a href=\"https://docs.aws.amazon.com/iot/latest/apireference/API_CreateThing.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/apireference/API_CreateThing.html</a></p>\n</blockquote>\n\n<p>I am having a problem with authorization. I am getting this error: </p>\n\n<blockquote>\n  <p>Failed to open TCP connection to xxxxxx.iot.us-east.amazonaws.com:443\n  (getaddrinfo: Name or service not known)</p>\n</blockquote>\n"
    }, {
        "tags": ["iot", "alexa", "alexa-skills-kit", "alexa-skill"],
        "is_answered": true,
        "view_count": 384,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1528893446,
        "creation_date": 1523630075,
        "question_id": 49819419,
        "link": "https://stackoverflow.com/questions/49819419/alexa-smart-home-response-with-custom-message",
        "title": "Alexa Smart Home Response with Custom Message",
        "body": "<p>I have an Alexa Smart Home Skill and I would like to be able to return a custom response message with certain requests. I've tried using:</p>\n\n<pre><code>{\n    \"payload\": { \"message\": \"My custom message\" }\n}\n</code></pre>\n\n<p>as well as replacing <code>message</code> with <code>caption</code>, but neither seem to work. Each time, i get the default <code>ok</code> response. Does anybody know if this is possible for a Smart Home Skill? Thanks in advance for your help!</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "ping", "iot"],
        "is_answered": false,
        "view_count": 798,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1528385738,
        "creation_date": 1502030666,
        "last_edit_date": 1502031424,
        "question_id": 45533118,
        "link": "https://stackoverflow.com/questions/45533118/how-to-get-aws-iot-mqtt-ping-stats",
        "title": "how to get AWS IOT MQTT ping stats",
        "body": "<p><a href=\"https://i.stack.imgur.com/FASga.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FASga.png\" alt=\"Aws iot mqtt ping stats\"></a></p>\n\n<p>How do I get aws iot mqtt ping stats like life style events? AWS IOT Dashboard reports them in messages as a type. Similar to Connect, Ping, Publish, Subscribe. I\u2019d like to know each ping latency by clientid </p>\n\n<p>I can get lifecycle events by creating a IOT rule similar to</p>\n\n<p><a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/topics.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/developerguide/topics.html</a></p>\n\n<pre><code>SELECT *,  topic() as Topic,  clientid() as ClientID, accountid() as AccountID, principal() as Principal, traceid() as TraceID FROM '$aws/events/#'\n\n{\n    \"clientId\": \"mqtt-explorer-48606\",\n    \"timestamp\": 1501188384737,\n    \"eventType\": \"disconnected\",\n    \"clientInitiatedDisconnect\": false,\n    \"sessionIdentifier\": \"da3dd0f6-1c45-4dd-ae2d-ac0b01dd98c\",\n    \"principalIdentifier\": \"26dd6172d/AROd7C:CognitontityCredentials/ARdCOdVWSKdU7LdC:CognitoIdentityCredentials\",\n    \"Topic\": \"$aws/events/presence/disconnected/mqtt-explorer-48606\",\n    \"ClientID\": \"N/A\",\n    \"AccountID\": \"269986\",\n    \"Principal\": \"26dd6172d/AROd7C:CognitoIdentityCredentials/AROAJCO5QQVWSKLHU7L7C:CognitoIdentityCredentials\",\n    \"TraceID\": \"380c8dfc-cc79-9c58-7e27-61566788\"\n}\n</code></pre>\n"
    }, {
        "tags": ["iot", "fiware", "fiware-orion"],
        "is_answered": true,
        "view_count": 86,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1528302538,
        "creation_date": 1528199377,
        "question_id": 50699373,
        "link": "https://stackoverflow.com/questions/50699373/creating-two-identical-entities-on-fiware-orion",
        "title": "Creating two identical entities on Fiware Orion",
        "body": "<p>If I create two identical entities on Fiware Orion: same <em>name</em>, same <em>id</em> and same <em>attributes</em>, what is the behaviour of the system?. Does it do just an update?</p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "aws-lambda", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 565,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1527544092,
        "creation_date": 1524786335,
        "last_edit_date": 1527544092,
        "question_id": 50053347,
        "link": "https://stackoverflow.com/questions/50053347/aws-lambda-update-thing-shadow-issue-with-rule",
        "title": "AWS lambda update_thing_shadow issue with rule",
        "body": "<p>I will preface by saying I am new to AWS but am required to use it to set up a MQTT broker for class. The problem may stem that I am just unfamiliar with how it should be used but whenever I update the shadow of my thing \"TestMichael\" using a lambda function the rule should send an sms notification if the temperature is out of range but it doesn't. When I publish it under the test the notification works but not when the lambda function changes it. Does anybody know why that is?</p>\n\n<p><strong>TLDR: Updating the thing's shadow with a lambda function won't activate the rule I created. Why is this?</strong></p>\n\n<p>Heres the relevant lambda function and rule query:</p>\n\n<pre><code>def lambda_handler(event, context):\ntemp = 74 #text should be sent if &gt; 70\nclient = boto3.client('iot-data', region_name='us-east-1')\n\n#Code portion for changing the state\ndata = {\"state\" : { \"reported\" : { \"Temperature\" : temp , \"Moisture\" : moist, \"Light\" : light, \"Conductivity\" : conduct}}}\nmypayload = json.dumps(data)\nresponse = client.update_thing_shadow(\n    thingName = 'TestMichael', \n    payload = mypayload\n)\n</code></pre>\n\n<p>Here is the SQL query used in my rule:</p>\n\n<pre><code>SELECT * FROM '$aws/things/TestMichael/shadow/update' WHERE Temperature &gt; 70\n</code></pre>\n"
    }, {
        "tags": ["https", "cloud", "microcontroller", "gsm", "iot"],
        "is_answered": false,
        "view_count": 2469,
        "favorite_count": 2,
        "score": 1,
        "last_activity_date": 1526636159,
        "creation_date": 1463143275,
        "question_id": 37210349,
        "link": "https://stackoverflow.com/questions/37210349/how-to-upload-data-on-cloud-with-sim900",
        "title": "How to upload data on cloud with SIM900",
        "body": "<p>I want to make a college project in which I want to track location of anything and update the data on cloud and read it afterwards. I have the data of GPS module, but I am confused about how to upload the data on cloud. I have a little idea that I can do this with GSM module by sending one https request.\nBut I have a doubt that when I am doing the HTTPS GET request then I am getting the html code of the website. Which is not of my use. \nIs there any other module to do so. Or I am doing something wrong with GET request. Please help me with this.\nEvery help is welcomed.</p>\n"
    }, {
        "tags": ["android", "amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 1529,
        "favorite_count": 2,
        "score": 1,
        "last_activity_date": 1526455361,
        "creation_date": 1461853483,
        "question_id": 36917581,
        "link": "https://stackoverflow.com/questions/36917581/android-aws-iot-example-not-updating-shadow",
        "title": "Android AWS IoT example not updating shadow",
        "body": "<p>I have downloaded AWS IoT Android samples from <a href=\"https://github.com/awslabs/aws-sdk-android-samples\" rel=\"nofollow\">here</a>. I successfully run AndroidPubSub example given in above list. I can connect and subscribe. But message which I am publishing is not updating device shadow I have on AWS. Even when I update shadow on AWS console message not came on android device. I am missing something very small somewhere or am doing completely wrong? </p>\n"
    }, {
        "tags": ["embedded", "updates", "firmware", "iot"],
        "is_answered": true,
        "view_count": 805,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1526394518,
        "creation_date": 1438628181,
        "last_edit_date": 1526394518,
        "question_id": 31794733,
        "link": "https://stackoverflow.com/questions/31794733/designing-an-embedded-system-with-fota-support",
        "title": "Designing an Embedded System with FoTA Support",
        "body": "<p>I am working on designing an embedded system that will support a touch screen and will communicate with a motor controller. This device, however needs to support firmware updates via a Wi-Fi module. </p>\n\n<p>The following are my specific questions:\nUsing an ESP266 has been effective in sending data to my server (Apache with MySQL database) but can this module be used to download firmware updates? (I've had a hard time finding anything on this.)\nIf not what would be a more effective module/approach?</p>\n\n<p>What would a typical server setup look like for distributing firmware updates? Would it use TCP/IP or FTP? I don't imagine there would be more 10,000 of these devices distributed and the firmware itself would likely be >=50MB.</p>\n\n<p>As far as flashing the firmware goes I was considering having a memory location dedicated to storing updated firmware and having the boot loader check if there is new firmware there. If there is it will begin flashing the new firmware. Whats a good method to ensure this is atomic? Is the bootloader the best place to do this or would something else be more appropriate?</p>\n"
    }, {
        "tags": ["python-2.7", "amazon-web-services", "aws-lambda", "iot", "alexa-skills-kit"],
        "is_answered": false,
        "view_count": 610,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1525927066,
        "creation_date": 1464690672,
        "question_id": 37543220,
        "link": "https://stackoverflow.com/questions/37543220/fetch-aws-iot-data-in-lambda-function",
        "title": "Fetch aws iot data in lambda function",
        "body": "<p>I tried sending data from raspberry to aws iot and now i am trying to fetch this data in lambda function. How can we fetch aws iot data in lambda function ?</p>\n\n<p>I tried creating the rule to invoke lambda function but it is just calling a function, it is not sending the data of aws iot to it.</p>\n"
    }, {
        "tags": ["azure", "iot"],
        "is_answered": true,
        "view_count": 968,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1523860093,
        "creation_date": 1523831543,
        "question_id": 49847424,
        "link": "https://stackoverflow.com/questions/49847424/how-do-i-send-an-event-to-azure-iot-hub-via-https",
        "title": "How do I send an event to Azure IoT Hub via HTTPS",
        "body": "<p>I setup an IoT hub on Azure, and created a device called \"ServerTemp\".  I generated an SAS token, and it seems to be accepted (I don't get 401).  But I'm getting a 400 Bad Request.  </p>\n\n<p>Here is the request I'm sending via curl:</p>\n\n<p><code>curl -v -H\"Authorization:SharedAccessSignature sr=A794683.azure-devices.net&amp;sig=&lt;snip&gt;\" -H\"Content-Type:application/json\" -d'{\"deviceId\":\"ServerTemp\",\"temperature\":70}' https://A479683.azure-devices.net/devices/ServerTemp/messages/events?api-version=2016-11-14</code></p>\n\n<p>Request and Response (output from curl):</p>\n\n<pre><code>&gt; POST /devices/ServerTemp/messages/events?api-version=2016-11-14 HTTP/1.1\n&gt; Host: A479683.azure-devices.net\n&gt; User-Agent: curl/7.47.0\n&gt; Accept: */*\n&gt; Authorization:SharedAccessSignature sr=A794683.azure-devices.net&amp;sig=&lt;snip&gt;\n&gt; Content-Type:application/json\n&gt; Content-Length: 42\n&gt;\n* upload completely sent off: 42 out of 42 bytes\n&lt; HTTP/1.1 400 Bad Request\n&lt; Content-Length: 151\n&lt; Content-Type: application/json; charset=utf-8\n&lt; Server: Microsoft-HTTPAPI/2.0\n&lt; iothub-errorcode: ArgumentInvalid\n&lt; Date: Sun, 15 Apr 2018 22:21:50 GMT\n&lt;\n* Connection #0 to host A479683.azure-devices.net left intact\n{\"Message\":\"ErrorCode:ArgumentInvalid;BadRequest\",\"ExceptionMessage\":\"Tracking ID:963189cb515345e69f94300655d3ca23-G:10-TimeStamp:04/15/2018 22:21:50\"}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub"],
        "is_answered": false,
        "view_count": 842,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1522069139,
        "creation_date": 1522069139,
        "question_id": 49492076,
        "link": "https://stackoverflow.com/questions/49492076/how-to-update-reported-properties-of-azure-iot-device-twin-using-iot-hub-rest-en",
        "title": "How to update Reported properties of Azure IOT device twin using IOT hub rest end point",
        "body": "<p>right now i'm using the following code:</p>\n\n<pre><code>string patch = \"{\\\"Device\\\": {\\\"DeviceState\\\": \\\"started\\\",\\\"Location\\\": {\\\"Latitude\\\": 50.400188,\\\"Longitude\\\": 30.61224}}}\";\nawait _deviceClient.UpdateReportedPropertiesAsync(JsonConvert.DeserializeObject&lt;TwinCollection&gt;(patch));\n</code></pre>\n\n<p>This works fine, my requirement is i want to update the same (reported properties) using IOT hub rest API,  I read something like the following:</p>\n\n<blockquote>\n  <p>https://{{hubName}}.azure-devices.net/twins/{{deviceId}}?api-version=2016-11-14</p>\n</blockquote>\n\n<p>A patch request to the above api with a json payload, it is returning <strong>200Ok</strong>, but not updating the twin.</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 428,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1521635595,
        "creation_date": 1521623150,
        "question_id": 49402050,
        "link": "https://stackoverflow.com/questions/49402050/single-aws-iot-rule-for-all-thing-shadow-updates",
        "title": "Single AWS IOT rule for all thing shadow updates",
        "body": "<p>Hi I am new to AWS IOT rules and I have a use case where I need to process all the successful updates to multiple thing shadows in a lambda. The rule triggers the lambda.</p>\n\n<p>Currently my iot rule is something like this:</p>\n\n<p><code>SELECT * FROM '$aws/things/testThing/shadow/update/accepted'</code></p>\n\n<p>But instead of 'testThing' i want to use something like </p>\n\n<p><code>SELECT * FROM '$aws/things/#/shadow/update/accepted'</code></p>\n\n<p>which will trigger the same lambda for any thing shadow update.</p>\n\n<p>But I am unable to come up with such a rule. Currently I am creating multiple rules(one for each shadow) which I don't think is the right thing to do.</p>\n\n<p>I might use something like </p>\n\n<p><code>SELECT * FROM '$aws/things/#'</code></p>\n\n<p>which will give lot of unwanted data and unwanted triggers, I am trying to avoid doing such a thing.</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "mqtt", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 38,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1521575033,
        "creation_date": 1521567590,
        "last_edit_date": 1521575033,
        "question_id": 49390846,
        "link": "https://stackoverflow.com/questions/49390846/management-of-not-reliable-commands-to-aws-iot-device",
        "title": "Management of not reliable commands to AWS IoT device",
        "body": "<p>I'm working on IoT devices on AWS serverless infrastructure and nodeJS SDK on the device.</p>\n\n<p>My devices are connected over a non-reliable connection. So I expect that some commands I send to them will never arrive at the target.</p>\n\n<p>My project will provide some API REST on API Gateway that ask the one device to perform asynchronously some complex operations. After the command is sent over MQTT the HTTP connection will be closed (200). </p>\n\n<p>The operation result at the end of the required operation on the device will be sent asynchronously from the device over MQTT to a AWS Lambda and then with REST call to a specific route on a server.</p>\n\n<p>My problem is that when I do the request to API Gateway (and get 200) the message can't reach the device via MQTT and gets lost.</p>\n\n<p>In this scenario I'll never receive an error message or timeout on my designated listening route to inform that the requested operation called previously on the REST API was never performed.</p>\n\n<p>Any advice on how solve the problem in an AWS serverless IoT scenario?</p>\n\n<p>I see that thing shadow can be used to change status of the device. Can I use it to send command to the device and create a timeout event in case that the device doesn't receive the data after some seconds?</p>\n\n<p>My command must have a timeout because if not performed in the correct moment then it's not needed anymore.</p>\n"
    }, {
        "tags": ["http", "curl", "mime-types", "content-type", "iot"],
        "is_answered": true,
        "view_count": 1602,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1521124228,
        "creation_date": 1520505758,
        "last_edit_date": 1520917857,
        "question_id": 49171138,
        "link": "https://stackoverflow.com/questions/49171138/body-data-request-with-application-octet-stream",
        "title": "body data request with application/octet-stream",
        "body": "<p>I have to do a request to a Daikin intelligent Touch Controller and i don't know how. Its documentation says that Content-Type should be \"application/octet-stream\". So i don't know how the request body should be. \nHere is a photo with an example in the documentation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rTvd8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rTvd8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Probably if i can replicate this request i could continue by my own. I've been searching a lot with no results.</p>\n\n<p>By the way i'm using cURL. </p>\n"
    }, {
        "tags": ["iot", "access-denied", "aws-iot"],
        "is_answered": true,
        "view_count": 950,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1520685158,
        "creation_date": 1520529956,
        "question_id": 49179039,
        "link": "https://stackoverflow.com/questions/49179039/aws-iot-access-denied-exception-when-calling-get-registration-code",
        "title": "AWS-IoT: Access denied exception when calling get-registration-code",
        "body": "<p>I am following the steps to register a device in AWS-IoT. I am doing the steps described <a href=\"https://aws.amazon.com/premiumsupport/knowledge-center/iot-self-signed-certificates/\" rel=\"nofollow noreferrer\">by AWS to use a self-signed certificate</a>. The step three of the tutorial indicates the following command:</p>\n\n<pre><code>aws iot get-registration-code\n</code></pre>\n\n<p>But I am getting the following exception:</p>\n\n<blockquote>\n  <p>$ aws iot get-registration-code</p>\n  \n  <p>An error occurred (AccessDeniedException) when calling the\n  GetRegistrationCode operation: User: arn:aws:iam::xxxxxxxx:user/dalton\n  is not authorized to perform: iot:GetRegistrationCode on resource: *</p>\n</blockquote>\n\n<p>It is not clear how I can assign the right permissions. At IAM Management Console, I assigned the following permissions to my user:</p>\n\n<blockquote>\n  <p>AWSIoTThingsRegistration</p>\n  \n  <p>AWSIoTLogging</p>\n  \n  <p>AWSIoTConfigAccess</p>\n  \n  <p>AWSIoTRuleActions</p>\n  \n  <p>AWSIoTConfigReadOnlyAccess</p>\n  \n  <p>AWSQuickSightIoTAnalyticsAccess</p>\n  \n  <p>AWSIoTOTAUpdate</p>\n  \n  <p>AWSIoTDataAccess</p>\n  \n  <p>AWSIoTFullAccess</p>\n</blockquote>\n\n<p>Still without success.</p>\n"
    }, {
        "tags": ["iot", "aws-iot"],
        "is_answered": true,
        "view_count": 178,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1520548908,
        "creation_date": 1499219471,
        "question_id": 44915934,
        "link": "https://stackoverflow.com/questions/44915934/how-to-identify-the-lat-long-location-from-where-the-iot-button-click-was-made",
        "title": "How to identify the lat/long location from where the IoT button click was made",
        "body": "<p>How to identify the lat/long location from where the IoT button click was made</p>\n\n<p><a href=\"https://aws.amazon.com/iotbutton/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/iotbutton/</a></p>\n"
    }, {
        "tags": ["embedded-linux", "iot", "buildroot", "orange-pi"],
        "is_answered": true,
        "view_count": 1731,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1520239862,
        "creation_date": 1520164034,
        "question_id": 49095034,
        "link": "https://stackoverflow.com/questions/49095034/buildroot-with-readonly-filesystem-allow-writing-on-etc",
        "title": "Buildroot with readonly filesystem: allow writing on /etc",
        "body": "<p>I'm preparing a Buildroot IoT project based on Orange PI Zero, so I will make it a readonly system. Anyway, I need to persistently write on /etc to update wpa_supplicant.conf when user configure it for his WiFi network. I also need to update a custom text file with some config parameters, if the user want to.</p>\n\n<p>I'd like to avoid remounting the whole filesystem in r/w everytime I need to update a single file.</p>\n\n<p>Which is the best way to accomplish this?</p>\n"
    }, {
        "tags": ["java", "amazon-web-services", "aws-sdk", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 84,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1519292159,
        "creation_date": 1507698367,
        "last_edit_date": 1519292159,
        "question_id": 46680227,
        "link": "https://stackoverflow.com/questions/46680227/how-to-parse-the-messages-sent-from-iot-client-to-the-aws-thing",
        "title": "How to parse the messages sent from IoT Client to the Aws Thing",
        "body": "<p>I am fairly new to the IoT. I have created a thing on Aws and I have created a client .Everything works fine when I test the set up. <br>I am unable to parse the message sent from the client to the Aws IoT.\n<br> Any Suggestion would be helpful</p>\n"
    }, {
        "tags": ["embedded", "iot", "intel-edison", "intel-galileo", "soc"],
        "is_answered": true,
        "view_count": 26280,
        "favorite_count": 9,
        "closed_date": 1582423948,
        "score": 21,
        "last_activity_date": 1518675631,
        "creation_date": 1416245281,
        "last_edit_date": 1457735048,
        "question_id": 26978356,
        "link": "https://stackoverflow.com/questions/26978356/compare-intel-galileo-and-intel-edison",
        "title": "Compare Intel Galileo and Intel Edison",
        "body": "<p>I am quite new to the Internet of Things. I checked the Intel website and went through a few other links too. But I cannot clearly understand what is the difference between Intel Galileo and Intel Edison? And which one should be used when?</p>\n\n<p>Does anyone know of a good resource for reference?</p>\n"
    }, {
        "tags": ["iot", "google-cloud-pubsub", "google-cloud-iot"],
        "is_answered": true,
        "view_count": 129,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1518553097,
        "creation_date": 1517980914,
        "question_id": 48656519,
        "link": "https://stackoverflow.com/questions/48656519/unable-to-access-google-iot-core-v1beta1-discovery-api",
        "title": "Unable to access Google Iot core v1beta1 discovery api",
        "body": "<p>I am trying to access Google Iot core v1beta1 discovery api using the link <a href=\"https://cloudiot.googleapis.com/\" rel=\"nofollow noreferrer\">https://cloudiot.googleapis.com/</a>$discovery/rest?version=v1beta1.\nWhenever i try to access it shows </p>\n\n<pre><code>{\n  \"error\": {\n    \"code\": 404,\n    \"message\": \"Discovery document not found for API service: cloudiot.googleapis.com format: rest version: v1beta1\",\n    \"status\": \"NOT_FOUND\"\n  }\n}\n</code></pre>\n\n<p>Am i missing something in this.</p>\n"
    }, {
        "tags": ["json", "mqtt", "iot", "fiware", "fiware-orion"],
        "is_answered": true,
        "view_count": 200,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1518446725,
        "creation_date": 1518266933,
        "last_edit_date": 1518435773,
        "question_id": 48720944,
        "link": "https://stackoverflow.com/questions/48720944/provision-device-with-json-mqtt-iot-agent-fiware",
        "title": "Provision device with JSON/MQTT IOT AGENT FIWARE",
        "body": "<p><a href=\"https://i.stack.imgur.com/6mtZX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6mtZX.png\" alt=\"enter image description here\"></a>\ncurl -X POST -vv -H \"Fiware-Service: myHome\" -H \"Fiware-ServicePath: /environment\" -H \"Content-Type: application/json\" -H \"Cache-Control: no-cache\" -d '{\n    \"devices\": [\n        {\n            \"device_id\": \"0000000000000000\",\n            \"entity_name\": \"BedRoomSensor\",\n            \"entity_type\": \"multiSensor\",\n            \"attributes\": [\n                  { \"object_id\": \"t\", \"name\": \"Temperature\", \"type\": \"celsius\" },\n                  { \"object_id\": \"h\", \"name\": \"Humidity\", \"type\": \"degrees\" }\n            ]\n        }\n    ]\n} '<a href=\"http://localhost:4041/iot/devices\" rel=\"nofollow noreferrer\">http://localhost:4041/iot/devices</a>'</p>\n\n<p>I execute the above curl commmand in order to provision my device.However it doesn't show anything and the command never ends.\nWhat i missunderstood?\n<a href=\"https://i.stack.imgur.com/3L2Pg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3L2Pg.png\" alt=\"Here are some logs\"></a>\n<a href=\"https://i.stack.imgur.com/3Umqp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Umqp.png\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["android", "ibeacon", "iot", "eddystone", "proximityapi"],
        "is_answered": true,
        "view_count": 578,
        "favorite_count": 2,
        "score": 0,
        "last_activity_date": 1518402555,
        "creation_date": 1473688414,
        "question_id": 39451979,
        "link": "https://stackoverflow.com/questions/39451979/google-proximity-beacon-api-gives-403-unauthorised-error",
        "title": "Google Proximity Beacon API gives 403 unauthorised error",
        "body": "<p>I am trying to consume Google's Beacon Proximity api. i have followed following steps to integrate them:</p>\n\n<pre><code>1) Signed up on Google Api Console.\n2) Created new Project.\n3) enabled Beacon proximity api and Nearby Api.\n4) Generated Api key from Credentials. \n</code></pre>\n\n<p>Afterwards i invoke the following api:</p>\n\n<pre><code> {\n  \"advertisedId\": {\n    \"type\": \"EDDYSTONE\",\n    \"id\": \"ABEiM0RVZneImaq7zN3u/w==\"\n  },\n  \"status\": \"ACTIVE\",\n  \"placeId\": \"ChIJL_P_CXMEDTkRw0ZdG-0GVvw\",\n  \"latLng\": {\n    \"latitude\": \"71.6693771\",\n    \"longitude\": \"-22.1966037\"\n  },\n  \"indoorLevel\": {\n    \"name\": \"1\"\n  },\n  \"expectedStability\": \"STABLE\",\n  \"description\": \"An example beacon.\",\n  \"properties\": {\n    \"position\": \"entryway\"\n  }\n}\n</code></pre>\n\n<p>with the follwing url:</p>\n\n<pre><code>https://proximitybeacon.googleapis.com/v1beta1/beacons:register?key=xxxx(my_api_key)\n</code></pre>\n\n<p>but the response says: </p>\n\n<pre><code>{\n  \"error\": {\n    \"code\": 403,\n    \"message\": \"Unauthorized.\",\n    \"status\": \"PERMISSION_DENIED\"\n  }\n}\n</code></pre>\n\n<p>what is it that i am missing..</p>\n\n<pre><code>I also tried to use Beacon tools app but after entering EID and all other credentials..the App crashes(on android), while it is not able to connect to my eddystone on Ios. \n</code></pre>\n"
    }, {
        "tags": ["wso2", "iot"],
        "is_answered": false,
        "view_count": 28,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1517481644,
        "creation_date": 1517408611,
        "last_edit_date": 1517409862,
        "question_id": 48544458,
        "link": "https://stackoverflow.com/questions/48544458/wso2-iot-server-samet-time-two-policy",
        "title": "Wso2 iot server - Samet time two policy",
        "body": "<p>wso2 iot 2 policies can not be assigned to a device on the server at the same time?</p>\n\n<p>Why does not the other one work when a policy is defined?\n<a href=\"https://wso2.org/jira/secure/attachment/40091/PolicyPriorityUI.png\" rel=\"nofollow noreferrer\">https://wso2.org/jira/secure/attachment/40091/PolicyPriorityUI.png</a></p>\n"
    }, {
        "tags": ["linux", "iot", "android-things", "intel-edison"],
        "is_answered": true,
        "view_count": 179,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1516390470,
        "creation_date": 1485043880,
        "last_edit_date": 1516390470,
        "question_id": 41785972,
        "link": "https://stackoverflow.com/questions/41785972/adb-and-ifconfig-commands-not-work-in-intel-edison-with-android-things-so",
        "title": "adb and ifconfig commands not work in intel edison with android things SO",
        "body": "<p>I put Android Things SO in my intel Edison with Arduino breakout board.\nI run this example <a href=\"https://github.com/androidthings/sample-simplepio/tree/master/blink\" rel=\"nofollow noreferrer\">enter link description here</a>\n and everything worked ok.\nBut when I try run other code using IO13 I have this issue:</p>\n\n<pre><code> E/HomeActivity: Error on PeripheralIO API\ncom.google.android.things.pio.PioException: android.os.ServiceSpecificException: IO13 is already in use But I can not do it.\n</code></pre>\n\n<p><a href=\"https://drive.google.com/file/d/0B9gPdWq4OH-XOE1kZlpkcUFEY0E/view?usp=sharing\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p><strong>I need use adb commands to uninstall packages</strong></p>\n\n<p><strong><em>Can someone help me there?</em></strong></p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 732,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1516357842,
        "creation_date": 1516184826,
        "last_edit_date": 1516357842,
        "question_id": 48298822,
        "link": "https://stackoverflow.com/questions/48298822/send-data-from-cloud-to-aws-iot-thing",
        "title": "Send data from cloud to aws iot thing",
        "body": "<p>I am trying to a reliable way to send data from aws lambda function to a aws iot thing. The thing is basically a raspberry pi which is located remotely.</p>\n\n<p>I have seen aws iot topics, but they don't seem to be reliable for my use case.</p>\n\n<p>So far I have found the following functionalities about topics</p>\n\n<p>Topics:</p>\n\n<ul>\n<li>Topics are asynchronous.</li>\n<li>When something is added to topic all and only currently listening devices will receive the update.</li>\n<li>There is no queueing.</li>\n<li>No delivery notification for the publisher.</li>\n</ul>\n\n<p>In my use case I need to know if the delivery is made(retry otherwise), but if the device is not connected, the topic might lose the write.</p>\n\n<p>Is there a way to solve this issue. Any help is much appreciated.</p>\n\n<p>Edit:</p>\n\n<p>What I am trying to do is send data about a user who can interact with the device from a remote server. </p>\n\n<p>To over come the limitation of topic for my use case I came up with the following solution. </p>\n\n<p>Step 1: Dynamo -> lambda1 -> sqs -> topic1 -> remote device</p>\n\n<p>Step 2: remote device(after getting the data) -> topic2(acknowledgement) -> lambda2(delete message from sqs) -> Update DB about action</p>\n\n<p>Does this solution seem reliable?</p>\n\n<p><b>Edit 2:</b></p>\n\n<p>Basically I am trying to send all the updates made to a DB to IOT Thing.</p>\n\n<p>Based on answer from @dvd86,</p>\n\n<p>Step 1: DynamoStream -> lambda1 -> sqs -> Thing shadow desired</p>\n\n<p>Step 2: shadow reported updated -> lambda2(delete message from sqs) -> Update DB about action</p>\n"
    }, {
        "tags": ["mqtt", "iot", "fiware", "mosquitto", "fiware-orion"],
        "is_answered": true,
        "view_count": 335,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1516196931,
        "creation_date": 1513873241,
        "last_edit_date": 1515155438,
        "question_id": 47928899,
        "link": "https://stackoverflow.com/questions/47928899/iotagent-json-using-mqtt-not-publishing-anything-when-command-is-sent",
        "title": "iotagent-json using MQTT not publishing anything when command is sent",
        "body": "<p>On my server I have Orion context broker and an IoT agent working in docker containers. I can register and update my entity using MQTT protocol no problem. But I would like to be able to send command to my device using the command system in the IoT Agent. In the <a href=\"https://github.com/telefonicaid/fiware-iot-stack/blob/master/docs/device_api.md\" rel=\"nofollow noreferrer\">Documentation</a>, it says that when a command is registered, the IoT agent publish something in /apiKey/EntityID/cmd. However, when I do so, I don't have anything published. The entity is updated properly (I can see the status of the command going to PENDING, and positive LOG telling me that everything is OK. But nothing is published on my MQTT topic.</p>\n\n<p>Here is my docker-compose.yml file:</p>\n\n<pre><code>version: '3.3'\nservices: \n    iot-mongo:\n        image: mongo:3.2\n        ports:\n         - \"27017:27017\"\n        volumes:\n         - ./data/mongo:/data/db\n\n\n    iot-agent:\n        image: fiware/iotagent-json\n        ports:\n         - \"4041:4041\"\n        links:\n         - iot-mongo\n         - orion\n         - mosquitto\n        volumes:\n            - ./config.js:/opt/iotajson/config.js\n    mosquitto:\n        image: toke/mosquitto\n        ports:\n            - \"1883:1883\"\n            - \"9001:9001\"\n    orion:\n      image: fiware/orion:1.9.0\n      links:\n        - iot-mongo\n      ports:\n        - \"1026:1026\"\n      command: -dbhost iot-mongo\n</code></pre>\n\n<p>I create my entity like this : </p>\n\n<pre><code>curl -X POST http://127.23.64.163:4041/iot/devices \\\n-i \\\n-H \"Content-Type: application/json\" \\\n-H \"Fiware-Service: proj\" \\\n-H \"Fiware-ServicePath: /proj\" \\\n-d ' { \"devices\": [\n        { \"device_id\": \"iotsensor10\", \"entity_name\": \"iotsensor10\", \"entity_type\": \"sensorping\", \"timezone\": \"America/Santiago\",\n        \"commands\": [\n            { \"name\": \"ping\", \"type\": \"command\", \"value\": \"\"} \n        ],\n        \"attributes\": [ \n            { \"object_id\": \"title\", \"name\": \"title\", \"type\": \"Text\" },\n            { \"object_id\": \"percentage\", \"name\": \"percentage\", \"type\": \"Text\" }                  \n        ],\n        \"static_attributes\": [ { \"name\": \"att_name\", \"type\": \"string\", \"value\": \"value\" } ] }\n        ]\n    }'\n</code></pre>\n\n<p>I can update my entity with the following command:</p>\n\n<pre><code>mosquitto_pub -h 127.23.64.163 -t /1234/iotsensor10/attrs -m '{\"title\": \"mqtttitle\", \"percentage\": \"31.5\"}'\n</code></pre>\n\n<p>and create a command like this : </p>\n\n<pre><code>curl --request POST http://127.23.64.163:1026/v1/updateContext \\\n     -i \\\n-H \"Content-Type: application/json\" \\\n-H \"Accept: application/json\" \\\n-H \"Fiware-Service: proj\" \\\n-H \"Fiware-ServicePath: /proj\" \\\n-d ' {\"updateAction\": \"UPDATE\", \"contextElements\": [\n    {\"id\": \"iotsensor10\", \"type\": \"sensorping\", \"isPattern\": \"false\", \n    \"attributes\": [\n        {\"name\": \"ping\", \"type\": \"command\", \"value\": \"ALIVE\" } \n    ]\n    }\n]}'\n</code></pre>\n\n<p>and I subscribe with :</p>\n\n<pre><code>mosquitto_sub -h 127.23.64.163 -t /# -v\n</code></pre>\n\n<p>But I see nothing coming when I create a command.</p>\n\n<p>However, if I run :</p>\n\n<pre><code>mosquitto_pub -h 127.23.64.163 -t /1234/iotsensor10/cmdexe -m '{\"ping\": \"kebab\"}'\n</code></pre>\n\n<p>I can validate the command and watch the result on my entity. The only problem I have is that nothing is published when the command is created when I expect something to be published on /apikey/sensor10/cmd . Any idea why and how to fix it?</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>I tried to do the same manipulations with the image fiware/iotagent-ul but I have the exact same result. Nothing is published.</p>\n"
    }, {
        "tags": ["ios", "amazon-web-services", "aws-sdk", "iot"],
        "is_answered": false,
        "view_count": 173,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1513031959,
        "creation_date": 1513022654,
        "question_id": 47760558,
        "link": "https://stackoverflow.com/questions/47760558/aws-iot-button-certificates",
        "title": "AWS IoT button certificates",
        "body": "<p>We have 500 AWS buttons and building an iOS app to configure them. </p>\n\n<p>1) Do we need a different certificate for each button? The documentation suggests that there is a limit of 10 certificates per account. \n<a href=\"http://docs.aws.amazon.com/iot/latest/apireference/API_RegisterCACertificate.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/apireference/API_RegisterCACertificate.html</a></p>\n\n<p>Also, the Configure process also requires a private key. Not sure how we generate that with the documentation above.  </p>\n\n<p>2) Can we use the same certificate and private key, bundle it with the iOS app and upload it to the button during the configuration? If yes, where can we find more information about how to do this? We tried this approach without success with a certificate we created here:\n<a href=\"https://console.aws.amazon.com/iotv2/home?region=us-east-1#/certificatehub\" rel=\"nofollow noreferrer\">https://console.aws.amazon.com/iotv2/home?region=us-east-1#/certificatehub</a></p>\n\n<p>Our team is a bit lost on how to achieve our goal, and having a hard time finding answers in the documentation (configure AWS button via app). Does anyone know how Amazon does it with their iOS app? </p>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["iot", "aws-iot"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1509748481,
        "creation_date": 1509748481,
        "question_id": 47105297,
        "link": "https://stackoverflow.com/questions/47105297/using-aws-iot-to-communicate-between-multiple-ipad-type-devices",
        "title": "Using AWS IOT to communicate between multiple IPad type devices",
        "body": "<p>I am looking at a project that is trying to connect a number of IPad type devices, so each can pass information to the other members of this group.</p>\n\n<p>For example, given six devices, if Dev1 moves to a new position, that position information should be propagated to Dev2-6.  Similarly, if Dev2 moves, the information is passed to Dev1, Dev3-6.</p>\n\n<p>It would seem to me that this might be doable by </p>\n\n<ol>\n<li>Having a Message Broker with a MQTT topic to which all devices subscribe.</li>\n<li>Writing the information to the broker</li>\n<li>Then reading, or better still, pushing the data to other devices (perhaps using shadow devices).</li>\n</ol>\n\n<p>Is this a reasonable approach?  (I don't quite see how to write to the message broker).</p>\n\n<p>Could binary data be sent?</p>\n\n<p>Any ideas on how it would scale?</p>\n"
    }, {
        "tags": ["rest", "amazon-web-services", "cookies", "token", "iot"],
        "is_answered": true,
        "view_count": 1357,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1508881740,
        "creation_date": 1508880655,
        "question_id": 46920362,
        "link": "https://stackoverflow.com/questions/46920362/aws-iot-rest-api",
        "title": "AWS Iot rest api",
        "body": "<p>I currently have a sensor sending data to AWS but I'm having issues figuring out the current status. For example, the sensor sends it's most recent status and I would like to view its status via http/s. Im currently trying to via my devices current status via </p>\n\n<p>https://<strong>endpoint</strong>/things/<strong>thingName</strong>/shadow</p>\n\n<p>or</p>\n\n<p><a href=\"https://something.iot.region.amazonaws.com/things/MyDevice/shadow\" rel=\"nofollow noreferrer\">https://something.iot.region.amazonaws.com/things/MyDevice/shadow</a></p>\n\n<p>The only response I get back is the following.</p>\n\n<pre><code>{\"message\":\"Custom Authorizers are not allowed for this\nAPI\",\"traceId\":\"123432-2343-23423-2343-12132432\"}\n</code></pre>\n\n<p>I know that there's some form of authentication but I cannot seem to find any example on how to call these endpoints.</p>\n"
    }, {
        "tags": ["node.js", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 28,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1508842263,
        "creation_date": 1508842263,
        "question_id": 46908592,
        "link": "https://stackoverflow.com/questions/46908592/stop-periodic-function-calls-on-event",
        "title": "Stop periodic function calls on event",
        "body": "<p>I am working on an IoT device that has a continuously running function sequence. The device can also receive commands and execute them. While I can have both these \"sections\" running on their own, I'm having trouble trying to have both these things run simultaneously. Here's what I'm trying to do:</p>\n\n<pre><code>//all required imports\nvar handler = new events.EventEmitter.call(this)\nfunction step0(){\n  //do something\n  if(err) {setTimeout(step0, 1500); return; }\n  step1(result);\n}\n\nfunction step1(){\n  //do something\n  if(err) {setTimeout(step0, 1500); return; }\n  step2(result);\n}\n\nfunction step2(){\n  //do something\n  if(err) {setTimeout(step0, 1500); return; }\n  console.log(result);\n}\n\nvar timeOutID = setTimeout(step0, 1500);\n\n//END of loop tasks\naws.device.on('message', function(payload, topic){\n    clearTimeout(timeOutID);  \n    handler.emit(payload.command);  \n})\n\nhandler.on('command1', function(){\n   /*do something*/\n   setTimeout(step0, 1500);\n});\nhandler.on('command2', function(){\n   /*do something*/\n   setTimeout(step0, 1500);\n});\nhandler.on('command3', function(){\n   /*do something*/\n   setTimeout(step0, 1500);\n});\n</code></pre>\n\n<p>The issue I am facing is that there appears to be a race condition between - the \"step\" functions get invoked while the \"command\" event handlers are executing. I am fairly new to nodeJS so I'm not sure if this the right way to go about it. </p>\n"
    }, {
        "tags": ["aws-lambda", "iot", "boto3", "aws-iot"],
        "is_answered": true,
        "view_count": 2133,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1508782201,
        "creation_date": 1488634112,
        "last_edit_date": 1488824459,
        "question_id": 42596589,
        "link": "https://stackoverflow.com/questions/42596589/can-i-retrieve-the-name-of-the-aws-iot-thing-that-triggered-my-lambda-function",
        "title": "Can I retrieve the name of the AWS IoT Thing that triggered my Lambda function?",
        "body": "<p>I have a Python Lambda function that processes triggers from IoT Things.</p>\n\n<p>Is there a way to read the <code>context</code> handed to the handler function (with Boto 3) to identify which the name of the triggering Thing -- e.g. as expected in <code>thingName</code> supplied to <code>get_thing_shadow</code>?</p>\n"
    }, {
        "tags": ["raspberry-pi", "raspbian", "iot", "aws-cli"],
        "is_answered": true,
        "view_count": 131,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1508457163,
        "creation_date": 1508421266,
        "question_id": 46831614,
        "link": "https://stackoverflow.com/questions/46831614/cant-connect-to-iot-west-amazonaws-com",
        "title": "Can&#39;t connect to iot.west.amazonaws.com",
        "body": "<p>I am trying to setup an IoT AWS on my raspberry pi and when I try and describe my certificate it says it couldn't reach the endpoint URL iot.west.amazonaws.com. I can ping amazonaws.com which is the actual domain. I've tried changing my DNS to Google's public one (8.8.8.8) but still no luck. Am I doing something wrong?</p>\n"
    }, {
        "tags": ["json", "arduino", "iot"],
        "is_answered": true,
        "view_count": 494,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1507105272,
        "creation_date": 1506358039,
        "last_edit_date": 1506444883,
        "question_id": 46410245,
        "link": "https://stackoverflow.com/questions/46410245/json-parsing-failing-in-arduino-and-esp8266",
        "title": "JSON parsing failing in Arduino and ESP8266",
        "body": "<p>I have to extract an Ajax response from [this REST API][1]. Please provide a code snippet for this so that  I can proceed I am stuck here.</p>\n\n<p>I need to read JSON data from <a href=\"http://tutor4study.com/forms/ajaxDeviceValue\" rel=\"nofollow noreferrer\">http://tutor4study.com/forms/ajaxDeviceValue</a> and then I have to parse it.</p>\n\n<pre><code>enter code here\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ArduinoJson.h&gt;\n\nconst char* ssid = \"ssid\";\nconst char* password = \"password\";\n\nconst char* host = \"tutor4study.com\";\nconst int httpsPort = 80;\n WiFiClient client;\n WiFiClient readClient;\n String sensorValue1 = \"5555\";\n String sensorValue2 = \"9999\";\n String readUrl = \"\";\n char readLine;\n String readResponse =\"\";\n String readJsonResponse =\"\";\n\n\n\nvoid setup() {\n               Serial.begin(115200);\n               Serial.println();\n               Serial.print(\"connecting to \");\n               Serial.println(ssid);\n               WiFi.begin(ssid, password);\n               while (WiFi.status() != WL_CONNECTED) {\n                                                        delay(500);\n                                                        Serial.print(\".\");\n                                                      }\n               Serial.println(\"\");\n               Serial.println(\"WiFi connected\");\n               Serial.println(\"IP address: \");\n               Serial.println(WiFi.localIP());\n               Serial.print(\"connecting to \");\n\n                pinMode(4, OUTPUT);\n                pinMode(5, OUTPUT);\n               // yield();\n\n            }\n\nStaticJsonBuffer&lt;200&gt; jsonBuffer;\n\n\n\nvoid readConnect(){\n                   if(!readClient.connect(host,httpsPort)){\n                                                            Serial.println(\"connection failed for readCLient\");\n                                                            ESP.reset();\n                                                            return;\n                    }\n                   readUrl = \"/forms/ajaxDeviceValue\";\n                    Serial.print(\"requesting URL: \");\n                    Serial.println(readUrl);\n                    readClient.print(String(\"GET \")+readUrl+\" HTTP/1.1\\r\\n\"+\n                    \"Host: \"+host+\"\\r\\n\"+\n                    \"Connection: close\\r\\n\\r\\n\");\n                    while(readClient.connected()){\n                                                  readLine = readClient.read();\n                                                  Serial.print(readLine);\n                                                  readResponse += readLine;                 \n                      }\n\n                      JsonObject&amp; root = jsonBuffer.parseObject(readResponse);\n\n    if (!root.success()) {\n    Serial.println(\"parseObject() failed\");\n    return;\n    }\n\n  }\n\nvoid loop() {\n              readConnect();\n\n            }\n</code></pre>\n\n<p>Aboveis my code. Please have a look at the code and let me know how to read a JSON response for url /ajaxDeviceValue and parse it in a string.</p>\n"
    }, {
        "tags": ["iot", "uniqueidentifier", "thingworx"],
        "is_answered": true,
        "view_count": 222,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1506214776,
        "creation_date": 1499798284,
        "question_id": 45042246,
        "link": "https://stackoverflow.com/questions/45042246/uniquely-identify-thingworx-things",
        "title": "Uniquely identify Thingworx things",
        "body": "<p>I've set up an application key, shape, service, and thing, and am ready to update the thing using REST calls.  However, I will have potentially thousands of things of the exact same type, though each with a unique serial number.  What I'm unclear on is how I manage this in Thingworx.  Does the thing identifier account for this, and if so, how?  Also, when updating values, how do I specify which 'thing' the updates apply to?  </p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 2412,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1505851289,
        "creation_date": 1504792573,
        "question_id": 46098272,
        "link": "https://stackoverflow.com/questions/46098272/aws-iot-python-device-sdk-shadow-update-timeouts",
        "title": "AWS IoT Python Device SDK Shadow Update Timeouts",
        "body": "<p>I have been developing AWS IoT device shadow updates for our devices for some time.  We are using the AWS IoT Python device SDK located at <a href=\"https://github.com/aws/aws-iot-device-sdk-python\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-iot-device-sdk-python</a> on an ARM distribution of Linux (made with Yocto/Bitbake) and Python 2.7.3 (which is the only version available provided by our hardware vendor for the Yocto we use for our ARM board).</p>\n\n<p>I downloaded the sample shadow update code from the AWS repo, modified it to suite our needs, and put it on our device build.  It works, most of the time, I would say, but has a failure rate that I am still uncomfortable with.  Note, in this code, I added the \"OfflinePublishQueueing\" setting to handle when it takes a while for the device to connect.  This was recommended by one site to prevent \"PublishQueueDisabled\" errors that we were getting.  Here's the initialization code.  I will add that I know that the certificates we are using are good, otherwise there would be no success ever.</p>\n\n<pre><code>self.AWSIoTMQTTShadowClient = AWSIoTMQTTShadowClient(\"InCoIoTShadowUpdate\")\nself.AWSIoTMQTTShadowClient.configureEndpoint(endpoint, 8883)\nself.AWSIoTMQTTShadowClient.configureCredentials(rootCAPath, privateKeyFile, \njointCertificateFile)\n# AWSIoTMQTTShadowClient configuration\nself.AWSIoTMQTTShadowClient.configureAutoReconnectBackoffTime(1, 32, 20)\nself.AWSIoTMQTTShadowClient.configureConnectDisconnectTimeout(10)  # 10 sec\nself.AWSIoTMQTTShadowClient.configureMQTTOperationTimeout(15)  # 15 sec\nMQTTClient = self.AWSIoTMQTTShadowClient.getMQTTConnection()\nMQTTClient.configureOfflinePublishQueueing(5, DROP_OLDEST)\n</code></pre>\n\n<p>And later on, the code to update the shadow, noting that the ThingId is set elsewhere from local device config.</p>\n\n<pre><code>def ConnectAndUpdate(self):\n\n    deviceState = InovaIoTDeviceState()\n    log = logging.getLogger(\"InovaIoTDeviceClient:connectAndUpdate\")\n\n    # Connect and subscribe to AWS IoT\n    try:\n        self.AWSIoTMQTTShadowClient.connect()\n    except (connectError, connectTimeoutException):\n        log.error(\"Error connecting to AWS IoT service\")\n        return False\n\n    # Create a deviceShadow with persistent subscription\n    updateBot = self.AWSIoTMQTTShadowClient.createShadowHandlerWithName(self.ThingId, True)\n    JSONPayload = deviceState.GetDeviceShadowDocument()\n\n    try:\n        updateBot.shadowUpdate(JSONPayload, self.ShadowUpdateCallback, 15)\n    # This is bad if these errors are thrown, probably either an initial device registration failure\n    # or global problem with Inova AWS IoT console configuration or lambda function\n    except (publishError, subscribeError):\n\n        log.error('Publish or subscribe error..')\n        return False\n\n    except (publishTimeoutException, subscribeTimeoutException):\n\n        # It is possible we are here due to a temporary snafu in AWS\n        log.error('Publish or subscribe timeout..')\n        return False\n\n    except publishQueueDisabledException:\n\n        # From time to time, AWS will randomly disconnect.\n        log.error('Publish Queue disabled..')\n        return False\n\n    while not self.ResponseReceived:\n        time.sleep(1)\n\n    # reset state\n    self.ResponseReceived = False\n\n    try:\n        self.AWSIoTMQTTShadowClient.disconnect()\n    except (disconnectError, disconnectTimeoutException):\n        log.error('Error attempting to disconnect')\n\n    return self.UpdateSuccess\n</code></pre>\n\n<p>and finally, the callback code</p>\n\n<pre><code># Custom MQTT message callback\ndef ShadowUpdateCallback(self, payload, responseStatus, token):\n    log = logging.getLogger(\"InovaIoTDeviceClient:shadowUpdateCallback\")\n    if responseStatus == \"timeout\":\n        log.info(\"Shadow update timeout\")\n        self.UpdateSuccess = False\n    elif responseStatus == \"accepted\":\n        log.info(\"Shadow update successful\")\n        self.successive_errors = 0\n        self.UpdateSuccess = True\n    elif responseStatus == \"rejected\":\n        log.info(\"Rejected shadow update\")\n        self.UpdateSuccess = False\n\n    self.ResponseReceived = True\n</code></pre>\n\n<p>Here are the various errors we get, which are relatively common. I would say that the success rate of the shadow update is only around 60%.  Here's a timeout reported from AWS:</p>\n\n<pre><code>2017-09-06 11:15:13: (INFO:AWSIoTPythonSDK.core.shadow.deviceShadow) \nSubscribed to update accepted/rejected topics for deviceShadow: \nqqpba4fgsfazl2zfgqq8zkavj (Line:372)\n2017-09-06 11:15:13: (INFO:AWSIoTPythonSDK.core.protocol.mqttCore) Offline \npublish request detected. (Line:343)\n2017-09-06 11:15:13: (INFO:AWSIoTPythonSDK.core.protocol.mqttCore) Try \nqueueing up this request... (Line:347)\n2017-09-06 11:15:28: (INFO:AWSIoTPythonSDK.core.shadow.deviceShadow) Shadow \nrequest with token: InCoIoTShadowUpdate_qqpba4fgsfazl2zfgqq8zkavj_0_acbxa \nhas timed out. (Line:202)\n2017-09-06 11:15:28: (INFO:InCoIoTDeviceClient:shadowUpdateCallback) Shadow \nupdate timeout (Line:188)\n</code></pre>\n\n<p>Here's a timeout error from the actual shadow update call</p>\n\n<pre><code>2017-09-06 12:40:11: (INFO:AWSIoTPythonSDK.core.protocol.mqttCore) Connected \nto AWS IoT. (Line:302)\n2017-09-06 12:40:27: (ERROR:AWSIoTPythonSDK.core.protocol.mqttCore) No \nfeedback detected for subscribe request 1. Timeout and failed. (Line:413)\n2017-09-06 12:40:27: (ERROR:InCoIoTDeviceClient:connectAndUpdate) Publish \nor subscribe timeout.. (Line:147)\n2017-09-06 12:40:27: (INFO:cycle) Unsuccessful shadow update... (Line:173)\n</code></pre>\n\n<p>So those are the timeouts, which are essentially all the errors.  As an additional wrinkle, we wiresharked our device's connection and publish attempts, not to see the content (since it is TLS 1.2 encrypted) but to see the connection behavior.  We noted that the behavior we see from the wireshark output is that the AWS endpoint is served by at least 8 different IP addresses.  In the timeout cases, we always see a connection happen <em>somewhere</em>.  In the case that we subscribe and publish to the shadow update topic, but receive a timeout, it only connects to one of the addresses.  In the subscribe or publish timeout, it tries three different addresses.</p>\n\n<p>It may be that all of this is on AWS and the performance at their end, but I wondered if anyone had seen this and been able to work around.  Upping the timeout values doesn't seem to help.</p>\n"
    }, {
        "tags": ["javascript", "node.js", "amazon-web-services", "aws-lambda", "iot"],
        "is_answered": true,
        "view_count": 918,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1504373464,
        "creation_date": 1504372566,
        "last_edit_date": 1504373464,
        "question_id": 46016282,
        "link": "https://stackoverflow.com/questions/46016282/aws-lambda-javascript-json-object-undefined",
        "title": "AWS Lambda Javascript JSON object undefined",
        "body": "<p>My lambda function is called with by an IoT rule (MQTT message in JSON).  I am simply trying to log the values, and the top level dot fields work fine, but nested objects in the JSON are seen as \"undefined\".  I tried to JSON.stringify these with no success.  Any ideas?</p>\n\n<pre><code>'use strict';\nconsole.log('Loading function');\nexports.handler = (event, context, callback) =&gt; {\n  console.log('Received event:', JSON.stringify(event, null, 2)); // Complete message\n  console.log('Received event.ApiVersion:',event.ApiVersion);\n  console.log('Received event.CollectionID:',event.CollectionId);\n  console.log('Received event.TagData.Time:',event.TagData.Time); //undefined\n\n  var TimeObj = {}; \n  TimeObj = event.TagData.Time;\n  console.log('Received event TimeObj:',TimeObj); //undefined\n};\n</code></pre>\n\n<p>Here are the cloud watch logs / results:</p>\n\n<pre><code>Loading function\nReceived event:\n{\n \"FormatId\": \"TagValues\",\n \"ApiVersion\": 1,\n \"CollectionId\": 2,\n \"TagData\": [\n     {\n         \"Time\": \"2017-09-02T11:06:35.917000+02:00\",\n         \"Values\": {\n             \"var1\": 16777216,\n             \"var2\": 7534\n         }\n     }\n ]\n}\nReceived event.ApiVersion: 1\nReceived event.CollectionID: 2\nReceived event.TagData.Time: undefined\nReceived event TimeObj: undefined\n</code></pre>\n"
    }, {
        "tags": ["javascript", "node.js", "socket.io", "iot"],
        "is_answered": true,
        "view_count": 6597,
        "favorite_count": 2,
        "score": 4,
        "last_activity_date": 1504289035,
        "creation_date": 1503197262,
        "last_edit_date": 1503287403,
        "question_id": 45777998,
        "link": "https://stackoverflow.com/questions/45777998/using-socket-io-from-node-js-to-connect-to-external-server",
        "title": "Using Socket.IO from Node.js to connect to external server",
        "body": "<p>Background: I have a node.js server running on my localhost (call this Server A); and an external server running node.js at <a href=\"https://example.net:3000\" rel=\"nofollow noreferrer\">https://example.net:3000</a> (call this Server B). I do not control or have access to Server B (it is a dashboard site for an IoT device in my home), but I need to connect to is using socket.io and emit a specific message.</p>\n\n<p>I can connect to it easily from a flat javascript file (client-side), but need it running server side (ultimate goal is to make it into something I can call with an HTTP request); and examples such as <a href=\"https://stackoverflow.com/questions/8837236/how-to-connect-two-node-js-servers-with-websockets\">How to connect two node.js servers with websockets?</a> suggest I should be able to use socket.io-client from node.js with nearly the same code to achieve the same results. But when I run the code from node.js, I cannot connect to the socket.</p>\n\n<p>Below is the code that works successfully in flat javascript file. I know it works because I see 'socket connect' in the console, and I can also test for the the socket emit at the end.</p>\n\n<pre><code>var myemail = \"email@gmail.com\";\nvar device_id = '12345';\n// Create SocketIO instance, connect\nvar socket = io.connect('https://example.net:3000');\n\nsocket.on('connect', function(){\n    try {\n        console.log('socket connect');\n        socket.emit('configure', {email:myemail, deviceid:device_id});\n    } catch(e) {\n        console.log(e);\n    }\n});\nsocket.emit(\"/\" + device_id, \"45678\");\n</code></pre>\n\n<p>...and below is the code I cannot get to work when running from my node.js instance. I'd expect a message 'socket connect' in the command line log and get nothing.</p>\n\n<pre><code>var express=require('express');\nvar http=require('http');\nvar app=express();\nvar server = http.createServer(app);\n//Variables\n\nvar myemail = \"email@gmail.com\";\nvar device_id = '12345'; \n\nvar io = require('socket.io-client');\nvar socket = io.connect('https://example.net:3000');\n\n//Connect listener\nsocket.on('connect', function(){\n   try {\n      console.log('socket connect');\n      socket.emit('configure', {email:myemail, deviceid:device_id});\n   } catch(e) {\n     console.log(e);\n   }\n});\nsocket.emit(\"/\" + device_id, \"45678\");\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>Ran debug utility, results included as linked image below. Key thing I see is that engine.io tries to do an xhr poll, and gets a 503 response back from the server. (Obviously not a true 'temporary error' with the server as again, this all works from running client-side js in chrome).</p>\n\n<p><a href=\"https://i.stack.imgur.com/5Xv7l.png\" rel=\"nofollow noreferrer\">debugging output image link</a></p>\n"
    }, {
        "tags": [".net", "xamarin", "console-application", "iot"],
        "is_answered": false,
        "view_count": 69,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1502612844,
        "creation_date": 1502602589,
        "last_edit_date": 1502612844,
        "question_id": 45657455,
        "link": "https://stackoverflow.com/questions/45657455/creating-console-app-interface-and-calling-in-xamarin-pcl-project",
        "title": "Creating console app interface and calling in Xamarin PCL project",
        "body": "<p>I am creating a console app in .Net for Azzure IoT that refers in Xamarin cross platform. So what should be approach to achieve it?</p>\n\n<p>Referencing console app in xamarin cross platform doesn't work. I tried creating console project in xamarin and referring in PCL project.</p>\n\n<p>Should I create interface for console app? Is it possible? Or suggest me other ways to do so.</p>\n"
    }, {
        "tags": ["geolocation", "embedded", "mqtt", "iot", "google-geolocation"],
        "is_answered": false,
        "view_count": 160,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1502449018,
        "creation_date": 1502449018,
        "question_id": 45633523,
        "link": "https://stackoverflow.com/questions/45633523/how-can-i-call-geolocation-api-via-mqtt",
        "title": "How can I call geolocation API via MQTT?",
        "body": "<p>I am working on an IoT project in which I am required to use Google's geolocation API. Well I know it can be called via HTTP request, is there any way I can call it via MQTT as I think it will be more power efficient and have publish/subscribe approach as I want?</p>\n"
    }, {
        "tags": ["azure", "iot", "azure-eventhub", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 512,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1502200590,
        "creation_date": 1480580610,
        "question_id": 40905731,
        "link": "https://stackoverflow.com/questions/40905731/gprs-device-and-azure-iot-hub-issue",
        "title": "GPRS Device and Azure IOT Hub issue",
        "body": "<p>We are developing a system in which several devices equipped with Simcom SIM800 GPRS modules need to send telemetry data to an IoT Hub at port 443 using the AT command for GET &amp; POST data to Azure REST API endpoint.</p>\n\n<blockquote>\n  <p>https://{IoTHubName}.azure-devices.net/devices/{deviceId}/messages/events?api-version={api-version}</p>\n</blockquote>\n\n<p><strong>Problem:</strong> We got the <em>message successfully</em> at IOT end. But at device end we always got Status Code <strong>600</strong>. </p>\n\n<p><strong>Note:</strong> </p>\n\n<p><strong>1.</strong> We are able to Get &amp; Post from any other REST Api using AT command, which we are host in Azure &amp; able to get status code 200. </p>\n\n<p><strong>2.</strong> We call our own REST service via AT command, which is host in Azure, purpose of this service to post data into IOT Hub using azure C# SDK. We get status 200.   </p>\n\n<p><strong>3.</strong> We can not use Azure C SDK due to device incompatibility. so we using IOT Hub Rest API call via AT command. </p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "ibm-watson"],
        "is_answered": true,
        "view_count": 171,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1500289706,
        "creation_date": 1499301805,
        "question_id": 44938082,
        "link": "https://stackoverflow.com/questions/44938082/ibm-watson-iot-platform-how-to-create-application-interface",
        "title": "IBM Watson IoT Platform - How to create application interface?",
        "body": "<p>I've created devices and managed them with Node-RED. And receiving real-time data in my IoT platform board. So i wanted to access those data by REST API which i found this: <a href=\"https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002-beta/info-mgmt-beta.html\" rel=\"nofollow noreferrer\">https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002-beta/info-mgmt-beta.html</a></p>\n\n<p>Specially wanted to use this \n<code>/device/types/{typeId}/devices/{deviceId}/state/{applicationInterfaceId}</code></p>\n\n<p>And i created schema by following this: <a href=\"https://developer.ibm.com/courses/labs/create-device-schema-internet-things-platform-service-ibm-bluemix-dwc013/\" rel=\"nofollow noreferrer\">https://developer.ibm.com/courses/labs/create-device-schema-internet-things-platform-service-ibm-bluemix-dwc013/</a></p>\n\n<p>Then i requested to <code>/api/v0002/applicationinterfaces</code>, <code>/api/v0002/schemas</code>. </p>\n\n<p>But both result was: \n<code>\n{\"results\": [], \"meta\": {\"total_rows\": 0}}\n</code></p>\n\n<p>How can i create schema and application interface?</p>\n"
    }, {
        "tags": ["postman", "iot", "watson-iot"],
        "is_answered": true,
        "view_count": 193,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1499995469,
        "creation_date": 1499775392,
        "last_edit_date": 1499995469,
        "question_id": 45034373,
        "link": "https://stackoverflow.com/questions/45034373/getting-403-forbidden-when-trying-to-add-bulk-devices-on-ibm-iot-platform",
        "title": "getting 403 Forbidden when trying to add bulk devices on IBM IoT Platform",
        "body": "<p>I'm getting \"403 Forbidden\" when trying to use Postman in order to add a POST  call so that I can add bulk devices to IBM Watson IoT Platform</p>\n"
    }, {
        "tags": ["amazon-web-services", "aws-lambda", "iot"],
        "is_answered": false,
        "view_count": 198,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1498555706,
        "creation_date": 1497453776,
        "last_edit_date": 1497673746,
        "question_id": 44548802,
        "link": "https://stackoverflow.com/questions/44548802/invalid-input-when-trying-to-configure-lambda-blueprint-iot-button-email",
        "title": "Invalid Input when trying to configure lambda blueprint iot-button-email",
        "body": "<p>I'm trying to use tha AWS Lambda Blueprint iot-button-email. Apparently it does not accept the serial number, even if I'm quite sure it is correct:\n<a href=\"https://i.stack.imgur.com/ft2qQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ft2qQ.png\" alt=\"enter image description here\"></a>\nThis prevent creating the lambda. What am I doing wrong?</p>\n\n<p><strong>workaround</strong></p>\n\n<blockquote>\n  <p>By creating an empty lambda ( ie pressing remove ) and then creating a rule\n  from the \"thing\" in the registry it is possible to achieve the desired result as well. Maybe the problem was my thing already be registered?</p>\n</blockquote>\n"
    }, {
        "tags": ["javascript", "amazon-web-services", "iot"],
        "is_answered": true,
        "view_count": 377,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1498264442,
        "creation_date": 1497739068,
        "question_id": 44610036,
        "link": "https://stackoverflow.com/questions/44610036/cannot-publish-to-reserved-topic-using-aws-iot-sdk",
        "title": "Cannot publish to reserved topic using AWS IoT SDK",
        "body": "<p>I am currently using the javascript AWS Iot SDK. Adapting the example provided <a href=\"https://github.com/aws/aws-iot-device-sdk-js/blob/master/examples/browser/temperature-monitor/index.js\" rel=\"nofollow noreferrer\">here</a>, I have been able to register with my thingShadow, and I am trying to publish an update after registration. However, when I do, I get the following error message:</p>\n\n<pre><code>cannot publish to reserved topic '$aws/things/&lt;thingName&gt;/shadow/update'\n</code></pre>\n\n<p>I understand the '$' indicates that this is a reserved topic, but Amazon's documentation (<a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/topics.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/developerguide/topics.html</a>)\nstates that publish and subscribe operations are allowed for this reserved topic. If that is the case, I am not sure why my attempt to publish is resulting in an error. This snippet demonstrates how I attempt to publish in my connection callback:</p>\n\n<pre><code>shadows.register(&lt;thingName&gt;, {\n    persistentSubscribe: true\n}, () =&gt; {\n    shadows.publish('$aws/things/&lt;thingName&gt;/shadow/update', &lt;message&gt;);\n});\n</code></pre>\n"
    }, {
        "tags": ["python", "http", "iot", "coap"],
        "is_answered": true,
        "view_count": 5278,
        "favorite_count": 0,
        "score": -3,
        "last_activity_date": 1497279777,
        "creation_date": 1497245431,
        "last_edit_date": 1497279344,
        "question_id": 44491979,
        "link": "https://stackoverflow.com/questions/44491979/how-to-send-coap-requests-with-python",
        "title": "How to send CoAP requests with Python?",
        "body": "<p>Is there a way to send CoAP requests, like HTTP requests, using Python. I tried below one but I got many errors.</p>\n\n<pre><code>rec = reuest.get(coap://localhost:5683/other/block)\n</code></pre>\n"
    }, {
        "tags": ["json", "http", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 813,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1496151214,
        "creation_date": 1484006032,
        "question_id": 41558968,
        "link": "https://stackoverflow.com/questions/41558968/aws-iot-json-error",
        "title": "AWS IoT JSON Error",
        "body": "<p>I'm trying to get a Skywire LTE Cat 1 modem (<a href=\"http://nimbelink.com/skywire-4g-lte-cat-1/\" rel=\"nofollow noreferrer\">http://nimbelink.com/skywire-4g-lte-cat-1/</a>) to update a thing shadow on AWS IoT. I have the device talking to AWS via HTTP, and am able to execute a GET command per their tutorial. </p>\n\n<p>Now I am trying to execute a POST command to update my thing's shadow. However, whenever I try to send my POST command:</p>\n\n<pre><code>POST /things/AWS_Test_Thing/shadow HTTP/1.1\nBODY: {\"state\":{\"reported\":{\"Temp\":55}}}\n</code></pre>\n\n<p>AWS sends me the following error: </p>\n\n<pre><code>HTTP/1.1 Bad Request\n{\"message\":\"Payload contains invalid json\",\"traceId\":\"e53be1d6-7967f52c-4dd6-d7b95cc20628\"}\n</code></pre>\n\n<p>I've never used JSON before, but from what I can gather, </p>\n\n<pre><code>{\"state\":{\"reported\":{\"Temp\":55}}} \n</code></pre>\n\n<p>should be valid JSON and complies with AWS IoT documentation (<a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/thing-shadow-document-syntax.html#thing-shadow-example-request-json\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/developerguide/thing-shadow-document-syntax.html#thing-shadow-example-request-json</a>). What am I missing? </p>\n"
    }, {
        "tags": ["lua", "iot", "esp8266", "nodemcu", "ifttt"],
        "is_answered": true,
        "view_count": 3092,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1495477130,
        "creation_date": 1488199396,
        "last_edit_date": 1488299435,
        "question_id": 42486123,
        "link": "https://stackoverflow.com/questions/42486123/how-to-use-https-post-request-in-nodemcu-http-module",
        "title": "How to use HTTPS post request in NodeMCU HTTP module",
        "body": "<p>I am using following code with HTTP module of the NodeMCU firmware. As per the documentation both HTTP and HTTPS URLs should work. </p>\n\n<p><a href=\"https://nodemcu.readthedocs.io/en/master/en/modules/http/#httppost\" rel=\"nofollow noreferrer\">https://nodemcu.readthedocs.io/en/master/en/modules/http/#httppost</a></p>\n\n<p>Though I am getting error when I use 'https'. 'http' is working fine for me. For URL in code, I am facing following error.</p>\n\n<p>\"The plain http request was sent for HTTPS port\". </p>\n\n<p>Please help.</p>\n\n<pre><code>http.post('https://maker.ifttt.com/trigger/......',\n        'Content-Type: application/json\\r\\n',\n        '{\"value1\":\"mainlobby\"}', function(code, data)\n        if (code &lt; 0) then\n            print(\"HTTP request failed\")\n        else\n        print(code, data)\n        end        \n  end\n</code></pre>\n"
    }, {
        "tags": ["ajax", "ibm-cloud", "iot", "watson-iot"],
        "is_answered": false,
        "view_count": 435,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1495227559,
        "creation_date": 1494250564,
        "last_edit_date": 1494282758,
        "question_id": 43849151,
        "link": "https://stackoverflow.com/questions/43849151/access-control-allow-origin-ibm-bluemix",
        "title": "Access-Control-Allow-Origin, IBM Bluemix",
        "body": "<p>I create a service for adding IOT devices to the list. When sending data I get an error:</p>\n\n<p><em>Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource</em></p>\n\n<p>I tried like this:</p>\n\n<pre><code>xmlhttp = new XMLHttpRequest();\n    xmlhttp.onreadystatechange = cfunc;\n    xmlhttp.open(\"POST\", url, true);\n    xmlhttp.setRequestHeader(\"Authorization\", \"Basic \" + auth);\n    xmlhttp.setRequestHeader('Content-type', 'application/json');\n    xmlhttp.setRequestHeader('Access-Control-Allow-Origin', '*');\n    xmlhttp.setRequestHeader('Access-Control-Allow-Methods', 'POST, GET, DELETE, PUT');\n    xmlhttp.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,Content-Type');\n    xmlhttp.send(JSON.stringify(jsonString));\n</code></pre>\n\n<p>but the error was repeating so I tried to do this, with the same error:</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    url: 'https://pmhhdo.internetofthings.ibmcloud.com/api/v0002/bulk/devices/add',\n    headers: {\n\n        'Authorization': 'Basic ' + auth,\n        'Content-Type':'application/json',\n        'Access-Control-Allow-Origin': 'https://pmhhdo.internetofthings.ibmcloud.com',\n        'Access-Control-Allow-Methods': 'GET, POST, PATCH, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token'\n    },\n\n\n    withCredentials: true,\n    crossDomain: true,\n    data: jsonString,\n    dataType: 'json',\n    success : function(data) {\n    },\n\n});\n</code></pre>\n\n<p>Any ideas what I need to do?</p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "watson-iot"],
        "is_answered": false,
        "view_count": 77,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1492681470,
        "creation_date": 1492670521,
        "last_edit_date": 1492681470,
        "question_id": 43512056,
        "link": "https://stackoverflow.com/questions/43512056/watson-internet-of-things-platform-not-able-to-assign-standard-gateway-role-to",
        "title": "Watson internet of things platform: not able to assign standard gateway role to a device",
        "body": "<p>I am trying to assign standard gateway role to a gateway device as per docs available \n<a href=\"https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002-beta/security-gateway-beta.html#!/Limited_Gateway/put_authorization_devices_deviceId_roles\" rel=\"nofollow noreferrer\">https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002-beta/security-gateway-beta.html#!/Limited_Gateway/put_authorization_devices_deviceId_roles</a></p>\n\n<p>But I keep on getting 403 Forbidden error. I am using app credentials (api key and token) which has \"Operations application\" role and hence privileges to assign roles. </p>\n\n<p>Here are few scripts which are run, where I have replaced org, type, id and token with dummy values</p>\n\n<pre><code>curl -X PUT \\\n https://dummyorg.internetofthings.ibmcloud.com:443/api/v0002/authorization/devices/g%3Adummyorg%3Adummytype%3Adummyid/roles \\\n      -H 'authorization: Basic dummyauth' \\\n      -H 'content-type: application/json' \\\n      -d '{\n      \"roles\": [\n        {\n          \"roleId\": \"PD_STANDARD_GW_DEVICE\",\n          \"roleStatus\": 1\n        }\n      ]\n    }'\n</code></pre>\n\n<p>Response\nHTTP 403 forbidden</p>\n\n<p>When I try to get the role of device, it works fine</p>\n\n<pre><code>curl -X GET \\\n  https://dummyorg.internetofthings.ibmcloud.com:443/api/v0002/authorization/devices/g%3Adummyorg%3Adummytype%3Adummyid/roles \\\n  -H 'authorization: Basic dummyauth' \\\n</code></pre>\n\n<p>Response</p>\n\n<pre><code>{\n  \"results\": [\n    {\n      \"roleId\": \"PD_PRIVILEGED_GW_DEVICE\",\n      \"roleStatus\": 1\n    }\n  ],\n  \"rolesToGroups\": {}\n}\n</code></pre>\n"
    }, {
        "tags": ["iot", "sensorthings"],
        "is_answered": false,
        "view_count": 135,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1491923711,
        "creation_date": 1491911095,
        "last_edit_date": 1491917855,
        "question_id": 43344985,
        "link": "https://stackoverflow.com/questions/43344985/create-datastream-entity-with-phenomenontime-using-sensorup-sensorthings-api-im",
        "title": "Create Datastream entity with phenomenonTime using SensorUp (SensorThings API implementation)",
        "body": "<p>I am trying to create a datastream using SensorUp with the phenomenon as shown in line 13 of the attached image, the response to the datastream does not contain the phenomenonTime:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z9ug3.jpg\" rel=\"nofollow noreferrer\">Datastream creation with PhenomenonTime</a></p>\n\n<p>Can someone advise how I can create the Datastream entity with the phenomenonTime? My understanding is that if the phenomenonTime is not provided, the standard picks up the time when the Datastream was created. However while querying for the Datastream, the phenomenonTime is not included in the response. </p>\n"
    }, {
        "tags": ["c#", "c", "iot", "azure-eventhub", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 745,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1491546970,
        "creation_date": 1491291238,
        "last_edit_date": 1491469529,
        "question_id": 43200966,
        "link": "https://stackoverflow.com/questions/43200966/how-do-i-set-certain-system-properties-with-the-azure-iot-c-sdk-for-the-amqp-pro",
        "title": "How do I set certain system properties with the Azure IoT C SDK for the AMQP protocol and where do they end up in the EventHub?",
        "body": "<p>edit: Add more information, see end</p>\n\n<p>In the C# IoT SDK, I can set certain properties on the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.devices.client.message\" rel=\"nofollow noreferrer\">message class</a>. There are no equivalent options at <a href=\"https://github.com/Azure/azure-iot-sdk-c/blob/master/iothub_client/inc/iothub_message.h\" rel=\"nofollow noreferrer\">Message Handles</a> in the C SDK, however.</p>\n\n<p>How can I set the following properties with the C SDK:</p>\n\n<ul>\n<li>To</li>\n<li>UserId</li>\n</ul>\n\n<p>Furthermore, how do I access them on the receiver side in C# via the EventData Class and the C SDK with the EventData Class? In the C# class the message properties are split in system properties and properties, whereas in the C class there are only properties. I can only set these properties in the property map when I use the C IoT Hub.</p>\n\n<p>I can't seem to find entries for the following keys in the system properties map:</p>\n\n<ul>\n<li>\"user-id\"</li>\n<li>\"to\"</li>\n</ul>\n\n<p>I can find them in the normal property map, however. When I set them in the C# SDK with the specialized setters, they should appear in the system properties map.</p>\n\n<p>Why does this happen and how can I get this working for both cases? And what are the actual mappings between the C# message class setters and the EventHub system properties and properties?</p>\n\n<p>edit:</p>\n\n<p>Maybe I should be somewhat more specific. I am using the AMQP protocol and according to the standard page 74-78 (Sorry I cannot post a link, due to missing reputation) a message contains \"properties\", i.e. the properties I can set with SetCorrelationId, and \"application properties\", which are the properties I can set with the Map_AddOrUpdate method.</p>\n\n<p>I would expect the following:</p>\n\n<p>When receiving the message with the EventHub I expected to have the fields \"to\" and \"user-id\" in the system properties map, since those are the names mentioned in the standard. By debugging I was able to see entries in the system properties map which were semantically what I expected, but under different names.</p>\n\n<p>Since that means the properties are probably send, there must be some sort of mapping which corresponds to: </p>\n\n<ol>\n<li>AMQP standard property name &lt;-> Eventhub system property name</li>\n<li>C SDK \"system properties\" name (automatically inferred or not) &lt;-> Eventhub system properties name</li>\n</ol>\n"
    }, {
        "tags": ["java", "azure", "iot"],
        "is_answered": false,
        "view_count": 1072,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1491288566,
        "creation_date": 1491203051,
        "last_edit_date": 1491203128,
        "question_id": 43178450,
        "link": "https://stackoverflow.com/questions/43178450/how-to-resolve-errorcodeiothubunauthorizedaccessunauthorized",
        "title": "How to resolve ErrorCode:IotHubUnauthorizedAccess;Unauthorized?",
        "body": "<p>I am trying to get the list of devices from azure IOT by using JAVA REST API.\nwhen I use this URL </p>\n\n<pre><code>https:iothubhostname/devices/?maxCount=5&amp;api-version=2015-07-01\n</code></pre>\n\n<p>It's giving response as:</p>\n\n<blockquote>\n  <p>ErrorCode:IotHubUnauthorizedAccess;Unauthorized</p>\n</blockquote>\n\n<p>Can you anyone help us, how to make this request as authorized request?</p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "iot", "boto3", "policy"],
        "is_answered": true,
        "view_count": 1422,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1490794215,
        "creation_date": 1490103132,
        "question_id": 42928656,
        "link": "https://stackoverflow.com/questions/42928656/aws-boto3-create-policy-specify-policydocument",
        "title": "AWS boto3 create_policy() - specify policyDocument",
        "body": "<p>I am using python's boto3 library to interface to AWS IoT. I want to use create a policy using <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/iot.html#IoT.Client.create_policy\" rel=\"nofollow noreferrer\">create_policy() API</a> but I do not understand what to use for <strong>policyDocument</strong> field. I think it is related to the <a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/iot-policies.html\" rel=\"nofollow noreferrer\">policyStatement</a>, but I can't figure out the syntax. Here's what I have so far.</p>\n\n<pre><code>from __future__ import print_function\nimport os\nimport sys\nimport boto3\nfrom botocore.exceptions import ClientError\nfrom colorama import Fore, Back, Style\nfrom colorama import init\ninit()\n\nthingType = 'TpmStation'\nthingBaseName = thingType + '-'\nthingPolicy = thingType + '-Policy-GenDerivedKey'\n\ndef eprint(*args, **kwargs):\n    print(*args, file=sys.stderr, **kwargs)\n\ntry:\n    # Use system hosted credentials - see\n    # http://docs.aws.amazon.com/cli/latest/userguide/installing.html\n    # http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html\n    client = boto3.client('iot')\n\n    policyDocument = {}\n    policyDocument['Statement'] = []\n    policyDocument['Statement'].append({})\n    policyDocument['Statement'][0]['Effect'] = 'Allow'\n    policyDocument['Statement'][0]['Action'] = []\n    policyDocument['Statement'][0]['Action'].append('iot:Connect')\n    policyDocument['Statement'][0]['Action'].append('iot:Publish')\n    policyDocument['Statement'][0]['Action'].append('iot:Subscribe')\n    policyDocument['Statement'][0]['Action'].append('iot:Receive')\n    policyDocument['Statement'][0]['Action'].append('iot:GetThingShadow')\n    policyDocument['Statement'][0]['Action'].append('iot:UpdateThingShadow')\n    policyDocument['Statement'][0]['Resource'] = '*'\n    response = client.create_policy(\n        policyName = thingPolicy,\n        policyDocument = policyDocument\n    )\n    if 200 != response['ResponseMetadata']['HTTPStatusCode']:\n        eprint(Fore.RED + \"ERROR: Unable to 'create_thing_type' \" + Style.RESET_ALL)\n        sys.exit(1)\n    print(Fore.GREEN + \"Created new policy '\" + thingPolicy + \"'\" +\n            Style.RESET_ALL)\n\nexcept ClientError as e:\n    exc_type, exc_obj, exc_tb = sys.exc_info()\n    fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[1]\n    eprint(Fore.RED + \"ERROR in \" + fname + ':' + str(exc_tb.tb_lineno) + ' - ' + e.response['Error']['Code'] + ' - ' + e.response['Error']['Message'] + Style.RESET_ALL)\n    sys.exit(1)\n</code></pre>\n"
    }, {
        "tags": ["ibm-cloud", "iot"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1490239783,
        "creation_date": 1475242834,
        "last_edit_date": 1475272620,
        "question_id": 39792950,
        "link": "https://stackoverflow.com/questions/39792950/cflogin-fails-bluemix",
        "title": "CFLogin fails Bluemix",
        "body": "<p>I am trying to deploy a project on IoT bluemix. I have created 3 devices, but the cf login command fails. It says authentication failed. I don't know what's the problem.</p>\n"
    }, {
        "tags": ["apache", "iot"],
        "is_answered": false,
        "view_count": 105,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1489871444,
        "creation_date": 1489870833,
        "last_edit_date": 1489871444,
        "question_id": 42879827,
        "link": "https://stackoverflow.com/questions/42879827/how-does-apache-2-server-process-http-get-request",
        "title": "How does apache 2 server process http GET request?",
        "body": "<p>I was trying an IOT project where in I want to update the database remotely using ESP8266-01 module. I have the php file to update the database, but to execute that I am trying with GET method. Unfortunately, it wan't working. The server received the request in the access.log, but wan't updating the database. Wanted to debug, so I had this question.</p>\n\n<p>The entry in the access.log is as follows:</p>\n\n<p>192.168.43.150 - - [18/Mar/2017:20:23:40 +0000] \"GET collectdata.php?status=1 HTTP/1.1\\r\\nHost: 192.168.43.92\\r\\n\\r\\n\" 400 0 \"-\" \"-\"</p>\n"
    }, {
        "tags": ["iot", "fiware", "agent", "fiware-orion"],
        "is_answered": true,
        "view_count": 90,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1489136007,
        "creation_date": 1482227033,
        "question_id": 41239177,
        "link": "https://stackoverflow.com/questions/41239177/fiware-idas-which-iot-agents-protocol-should-i-choose",
        "title": "FIWARE - IDAS :Which IoT-Agents protocol should I choose?",
        "body": "<p>I want an Iot Agents that support Interaction models: Active Attributes.\nMy choice is OMA LWM2M, I am wondering whether there is another choice is same or better?</p>\n"
    }, {
        "tags": ["http", "arduino", "http-post", "httprequest", "iot"],
        "is_answered": true,
        "view_count": 285,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1486373756,
        "creation_date": 1457297808,
        "last_edit_date": 1464271452,
        "question_id": 35832452,
        "link": "https://stackoverflow.com/questions/35832452/tools-to-troubleshoot-and-view-raw-http-requests",
        "title": "Tools to troubleshoot and view raw HTTP Requests",
        "body": "<p>I am writing code that will let Arduino sent http posts to a IOT cloud service (thethings.io). The Arduino (Adafruit Trinket Pro 3v) uses AT commands to control a cellular module (Adafruit FONA 3G). The AT commands specify http headers and body of the http post. The server I am calling is returning 400 bad request, but it does not echo back to me the actual HTTP request so that I can see what is malformed. What ways are there to view the raw output of an HTTP request? Sites/services/tools?</p>\n"
    }, {
        "tags": ["c#", "bluetooth", "iot", "windowsiot"],
        "is_answered": false,
        "view_count": 112,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1486225740,
        "creation_date": 1486002344,
        "last_edit_date": 1486019526,
        "question_id": 41993256,
        "link": "https://stackoverflow.com/questions/41993256/monitor-bluetooth-peripheral-commands",
        "title": "Monitor Bluetooth Peripheral Commands",
        "body": "<p>I am developing a little Windows IOT application on a Raspberry Pi 3 and I have purchased this Bluetooth device:</p>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/B00WDARWRY\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">https://www.amazon.com/gp/product/B00WDARWRY/ref=oh_aui_detailpage_o01_s00?ie=UTF8&amp;psc=1</a></p>\n\n<p>I want to be able to listen for the Bluetooth device commands and handle them in my UWP.</p>\n"
    }, {
        "tags": ["amazon-web-services", "lambda", "iot"],
        "is_answered": true,
        "view_count": 134,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1485914646,
        "creation_date": 1478616792,
        "question_id": 40489982,
        "link": "https://stackoverflow.com/questions/40489982/aws-iot-rule-invoked-by-many-devices-calling-one-lambda",
        "title": "AWS IoT rule invoked by many devices calling one lambda",
        "body": "<p>I have an IoT registry of things, all of them identical and processed in the same way. </p>\n\n<p>I create a rule which triggers whenever some condition holds for one of the things. The rule invokes lambda function, which gets the thing shadow or subset of its fields in the <em>event</em> parameter. (I use Python for lambda)</p>\n\n<p>However it does not seem to be possible for lambda to figure which exactly thing triggered the rule - there are only two parameters, <em>event</em> and <em>context</em>, neither of which contains information about original thing id. Am I missing something?</p>\n"
    }, {
        "tags": ["python", "curl", "raspberry-pi", "iot", "influxdb"],
        "is_answered": false,
        "view_count": 482,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1485873766,
        "creation_date": 1485792838,
        "last_edit_date": 1485859049,
        "question_id": 41940530,
        "link": "https://stackoverflow.com/questions/41940530/converting-curl-in-python-request",
        "title": "Converting cURL in python request",
        "body": "<p>I would like to know how to convert a cURL command into a python request.\nIndeed, I am using this cURL command : </p>\n\n<blockquote>\n  <p>curl -i -XPOST '<a href=\"http://localhost:8086/write?db=mydb\" rel=\"nofollow noreferrer\">http://localhost:8086/write?db=mydb</a>' --data-binary\n  'air_quality,host=raspberrypi value=200'</p>\n</blockquote>\n\n<p>So, it allows to write the value 200 in the database mydb. But I would like to put this command in a python script. Then, it's not possible to do it, I got a format error.</p>\n\n<p>I think it is possible to do it with python but I don't know how exactly. First, I have to import that :</p>\n\n<blockquote>\n  <p>import requests</p>\n</blockquote>\n\n<p>Then the command should be like that : </p>\n\n<blockquote>\n  <p>requests.post(\"htp://localhost:8086/write?db=mydb\n  air_quality,host=raspberrypi value=\"+str(sensor_value))</p>\n</blockquote>\n\n<p>My question is : how to write correctly the previous line for the python request ? \nThis a screenshot of my error : \n<a href=\"https://i.stack.imgur.com/QPtDr.png\" rel=\"nofollow noreferrer\">Troubleshooting</a></p>\n"
    }, {
        "tags": ["http", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 620,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1483104479,
        "creation_date": 1483090885,
        "question_id": 41393951,
        "link": "https://stackoverflow.com/questions/41393951/list-things-api-using-http-in-aws-iot",
        "title": "List-things api using http in AWS-IoT?",
        "body": "<p>I am new to this AWS IoT, i was able to get/update thing shadows using http api (<a href=\"https://endpoint/things/thingName/shadow\" rel=\"nofollow noreferrer\">https://endpoint/things/thingName/shadow</a>), provided by AWS IoT, but i want the list of things created under my account. Documentation provides the way of getting list-things using AWS CLI, how can i achieve the same using rest-api ?</p>\n"
    }, {
        "tags": ["azure", "iot"],
        "is_answered": false,
        "view_count": 725,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1482820897,
        "creation_date": 1455290703,
        "last_edit_date": 1455362584,
        "question_id": 35366206,
        "link": "https://stackoverflow.com/questions/35366206/d2c-message-using-iot-hub",
        "title": "D2C message using IoT Hub",
        "body": "<p>I\u2019d like to ask you a favor. I do have a problem confirming previously readed D2C message using IoT Hub. I am using REST API to pick up message like (I have replace SIG)</p>\n\n<p>Request:</p>\n\n<pre><code>GET https://iot-hub-pospa.azure-devices.net/devices/18596c88-01e6-3f16-427b-10028d7305c5/messages/devicebound?api-version=2015-08-15-preview HTTP/1.1\nIoTHub-MessageLockTimeout: 3600\nAccept: application/json\nAuthorization: SharedAccessSignature sr=iot-hub-pospa.azure-devices.net&amp;sig={sig}&amp;se=1485558838&amp;skn=iothubowner\nHost: iot-hub-pospa.azure-devices.net\nIf-None-Match: \"1c5006a4-2288-4a2f-b7ea-dcdf9b5bbc99\"\nConnection: Close\nX-P2P-PeerDist: Version=1.1\nX-P2P-PeerDistEx: MinContentInformation=1.0, MaxContentInformation=2.0\nAccept-Encoding: peerdist\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>HTTP/1.1 200 OK\nContent-Length: 35\nETag: \"dfc78580-d251-4156-a5f6-c2a30811a504\"\nServer: Microsoft-HTTPAPI/2.0\niothub-messageid: 02cdb012-9749-48a9-bfb3-5812a4740675\niothub-to: /devices/18596c88-01e6-3f16-427b-10028d7305c5/messages/deviceBound\niothub-expiry: \niothub-correlationid: \niothub-ack: full\niothub-sequencenumber: 56\niothub-enqueuedtime: 2/2/2016 9:57:34 AM\niothub-deliverycount: 0\nDate: Tue, 02 Feb 2016 10:21:43 GMT\nConnection: close\n\n2/2/2016 10:57:34 AM - Test message\n</code></pre>\n\n<p>Then when confirming I am getting HTTP 412 like</p>\n\n<p>Request:</p>\n\n<pre><code>DELETE https://iot-hub-pospa.azure-devices.net/devices/18596c88-01e6-3f16-427b-10028d7305c5/messages/devicebound/02cdb012-9749-48a9-bfb3-5812a4740675?api-version=2015-08-15-preview HTTP/1.1\nAccept: application/json\nIf-Match: \"02cdb012-9749-48a9-bfb3-5812a4740675\"\nAuthorization: SharedAccessSignature sr=iot-hub-pospa.azure-devices.net&amp;sig={sig}&amp;se=1485558838&amp;skn=iothubowner\nHost: iot-hub-pospa.azure-devices.net\nContent-Length: 0\nConnection: Close\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>HTTP/1.1 412 Precondition Failed\nContent-Length: 330\nContent-Type: application/json; charset=utf-8\nServer: Microsoft-HTTPAPI/2.0\niothub-errorcode: DeviceMessageLockLost\nDate: Tue, 02 Feb 2016 10:21:49 GMT\nConnection: close\n\u00a0\n{\"Message\":\"ErrorCode:DeviceMessageLockLost;Message 02cdb012-9749-48a9-bfb3-5812a4740675 lock was lost for Device 18596c88-01e6-3f16-427b-10028d7305c5\\r\\nTracking Id:05994074a3664933a0910b5fc70e04e5-G:GatewayWorkerRole.6-B:1-P:cffe397b-f627-4435-bd54-48f5ba79c3ca-TimeStamp:02/02/2016 10:21:49\\r\\nErrorCode:DeviceMessageLockLost\"}\n\u00a0\n\u00a0\n</code></pre>\n\n<p>Does anybody know what should I do to successfully confirm/delete message from IoT Hub, please? Thanks</p>\n"
    }, {
        "tags": ["azure", "iot", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 622,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1482666693,
        "creation_date": 1481756383,
        "last_edit_date": 1481781713,
        "question_id": 41153708,
        "link": "https://stackoverflow.com/questions/41153708/receiving-cloud-to-device-messages-from-azure-to-esp8266",
        "title": "Receiving Cloud-to-Device messages from Azure to esp8266",
        "body": "<p>Using this project <a href=\"https://github.com/gloveboxes/Arduino-ESP8266-Secure-Azure-IoT-Hub-Client\" rel=\"nofollow noreferrer\">here</a> Im able to get an esp8266 to send messages to the Azure Iot hub, and I can read them with PowerBI. However, I would like to be able to use the device explorer Twin to send messages to the device. </p>\n\n<p>I imagine that since the esp is sending messages to the Iot hub using an HTTP POST request, that I should be able to use an HTTP GET request to read the messages sent to the device when using the correct endpoint, outlined <a href=\"https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-messaging#cloud-to-device-messages\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Is this correct, or am I missing something? Doing this seems to only cause errors. If this is the right way, what would the format of a proper GET request be.</p>\n"
    }, {
        "tags": ["iot", "fiware", "agent", "fiware-orion"],
        "is_answered": false,
        "view_count": 58,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1482225636,
        "creation_date": 1482225636,
        "question_id": 41238695,
        "link": "https://stackoverflow.com/questions/41238695/fiware-idas-issue-with-create-new-a-device-oma-lwm2m",
        "title": "FIWARE - IDAS: Issue with create new a device OMA-LWM2M",
        "body": "<p>I am really new in IDAS field.\nI want to create new device as the following instruction (<a href=\"http://docs.telefonicaiotiotagents.apiary.io/#reference/configuration-api/devices/create-a-device\" rel=\"nofollow noreferrer\">http://docs.telefonicaiotiotagents.apiary.io/#reference/configuration-api/devices/create-a-device</a>)\nbut i have got the error with description as follow:</p>\n\n<pre><code>{\n    \"name\": \"Error\",\n    \"message\": \"getaddrinfo ENOTFOUND\"\n}\n</code></pre>\n\n<p>Environment: FIWARE - IDAS using OMA-LWM2M agent with Coap protocol.</p>\n\n<p>I don't know what i should do in this case?</p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 1287,
        "favorite_count": 2,
        "score": 3,
        "last_activity_date": 1482117366,
        "creation_date": 1461075588,
        "last_edit_date": 1482117366,
        "question_id": 36721132,
        "link": "https://stackoverflow.com/questions/36721132/how-to-troubleshoot-mqtt-and-aws-iot",
        "title": "How to troubleshoot mqtt and AWS iot",
        "body": "<p>I am newbie to AWS IoT and MQTT as well. I am trying with simple example to read payload from AWS and publish payload to AWS. I am able to read payload on device but not able to publish. When I update shadow state from AWS console my raspberry pi able to receive the message but when I am publishing nothing happening. Not even state is changing on AWS console.</p>\n\n<p>Code is attached. Please suggest.</p>\n\n<pre><code>def on_connect(mqttc, obj, flags, rc):\n    if rc==0:\n        print (\"Subscriber Connection status code: \"+str(rc)+\" | Connection status: successful\")\n    elif rc==1:\n        print (\"Subscriber Connection status code: \"+str(rc)+\" | Connection status: Connection refused\")\n\ndef on_subscribe(mqttc, obj, mid, granted_qos):\n    print(\"Subscribed: \"+str(mid)+\" \"+str(granted_qos)+\"data\"+str(obj))\n    first_message()\n\ndef on_message(mqttc, obj, msg):\n    print(\"Received message from topic: \"+msg.topic+\" | QoS: \"+str(msg.qos)+\" | Data Received: \"+str(msg.payload))\n\ndef on_publish(client, userdata, mid):\n    print(\"Message is published\")\n\ndef first_message():\n    data = {} data['r'] = 2 data['g'] = 255 data['b'] = 95 data2 = {} data2['color'] = data data3 = {} data3['reported'] = data2 data4 = {}\n    data4['state'] = data3 json_data = json.dumps(data4) print(str(json_data))\n    (rc, mid) = mqttc.publish(\"$aws/things/thirdthing/shadow/update/\", str(json_data), 1)\n\nmqttc = mqtt.Client(client_id=\"thirdthing1\")\nmqttc.on_connect = on_connect\nmqttc.on_subscribe = on_subscribe\nmqttc.on_message = on_message\nmqttc.on_publish = on_publish\nmqttc.tls_set(\"/home/pi/deviceSDK/root-CA.crt\",\n                certfile=\"/home/pi/deviceSDK/7391d7d21d-certificate.pem.crt\",\n                keyfile=\"/home/pi/deviceSDK/7391d7d21d-private.pem.key\",\n              tls_version=ssl.PROTOCOL_TLSv1_2,\n              ciphers=None)\nmqttc.connect(\"AYYCW0HM971XS.iot.us-west-2.amazonaws.com\", port=8883) #AWS IoT service hostname and portno\nmqttc.subscribe(\"$aws/things/thirdthing/shadow/update/#\", qos=1) #The names of these topics start with $aws/things/thingName/shadow.\"\nmqttc.loop_forever()\n</code></pre>\n\n\n"
    }, {
        "tags": ["http", "amazon-web-services", "aws-lambda", "iot"],
        "is_answered": true,
        "view_count": 153,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1481549386,
        "creation_date": 1481198865,
        "last_edit_date": 1481211242,
        "question_id": 41039153,
        "link": "https://stackoverflow.com/questions/41039153/how-to-invoke-aws-lambda-function-over-http-from-iot-device",
        "title": "How to invoke AWS lambda function over http from IoT device?",
        "body": "<p>The device doesnt support https requests so I need to make http request to a lambda function from a device and pass some data as well. How can I achieve that?</p>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-s3", "amazon-ec2", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 178,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1481274544,
        "creation_date": 1479811033,
        "question_id": 40739594,
        "link": "https://stackoverflow.com/questions/40739594/is-it-possible-to-call-api-on-ec2-from-aws-iot-rules-engine",
        "title": "Is it possible to call API on EC2 from AWS IoT Rules Engine?",
        "body": "<p>I have use case like once data received in AWS IoT Rules Engine from things, I want to call API instead of dynamoDb, kinesis and lambda. I read FAQ <a href=\"https://aws.amazon.com/iot/faqs/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/iot/faqs/</a> and doc but now found anything related to routing data to API on EC2 instance. This developer guide <a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/iot-create-rule.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/iot/latest/developerguide/iot-create-rule.html</a> shows how to route data to dynamoDb, S2, Kinesis, SNS and machine learning. Is it possible to route data to EC2 instance from IoT Rules Engine?</p>\n"
    }, {
        "tags": ["c", "iot", "texas-instruments"],
        "is_answered": false,
        "view_count": 416,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1479068689,
        "creation_date": 1437093094,
        "last_edit_date": 1592644375,
        "question_id": 31466716,
        "link": "https://stackoverflow.com/questions/31466716/failed-to-process-http-post-get-put-and-delete-request-from-cc3200-launchpad-to",
        "title": "failed to process http post,get,put and delete request from cc3200 launchpad to local server or http server",
        "body": "<p>//I am using</p>\n<h1>define GET_REQUEST_URI  &quot;GET /ms/v_updated.php?id=9,9,9&amp; qty=9,9,9/HTTP/1.1\\r\\nHost:127.0.0.1\\r\\nAccept: <em>/</em>\\r\\n\\r\\n&quot;</h1>\n<p>for v_updated.php file on my localserver  using my cc3200 launchpad</p>\n<p>//and i wanted to know that is this the correct syntax am i using for GET request in cc3200</p>\n<pre><code>    ![on console i got following outpt]\n    [1] STA connected to AP:\n    [2]IP Acquired :\n    [3]Connection to server created successfully \n    \n    HTTP Get Begin:\n    Failed to send HTTP GET request\n    HTTP Post Get failed\n    HTTP gET End: \n    \n    \n    \n</code></pre>\n<p>and i also want to know about the json parser being used..</p>\n"
    }, {
        "tags": ["mobile", "maps", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 68,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1477303874,
        "creation_date": 1476950526,
        "last_edit_date": 1477086503,
        "question_id": 40148737,
        "link": "https://stackoverflow.com/questions/40148737/ibm-bluemix-customizing-mobile-app-map-with-geoanalytics",
        "title": "IBM Bluemix customizing mobile app map with geoanalytics",
        "body": "<h2>Heading</h2>\n\n<p>I am new to use IBM Bluemix. I wish to create an application which tracks vehicles. A region on map will be divided into 4 sub regions and each sub region will have five vehicles. Whenever, the vehicles leaves its region, the manager will be notified. I know that it can be done by using IOT and geoanalytics. Is there anyway I can use geo analytics with my mobile application (which i have built using IBM mobile services). If so how? If no, is there any other possible way to do the required i.e. breaking region into sub regions. Any link or comment will be helpful.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 943,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1473887013,
        "creation_date": 1473859095,
        "question_id": 39491520,
        "link": "https://stackoverflow.com/questions/39491520/send-aws-iot-commands-from-cloud-to-device-over-unreliable-connections",
        "title": "Send AWS IoT commands from cloud to device over unreliable connections",
        "body": "<p>We're considering AWS IoT for an upcoming project featuring devices with unreliable network connections. One requirement is to send commands to devices. The commands must be reliably delivered (ack'd) and the devices should also signal success/failure when the commands are completed later. It seems that just publishing commands to an MQTT topic won't ensure the message gets delivered, given that AWS don't support persistent sessions - is this right?</p>\n\n<p>We've been speculating about poking the command into an array of commands inside the device shadow's 'desired' state. The device could then ack receipt of the command by replicating the command in the shadow's 'reported' state, and report success/failure by setting an outcome field within the command in the 'reported' state.</p>\n\n<p>Given our lack of experience with AWS IoT, does this seem like a sane approach? Or can anyone see anything neater? One nasty thing about this is that the shadow accumulates completed commands, which presumably means that I will eventually need some kind of housekeeping to remove the completed commands to keep the shadow to a reasonable size.</p>\n\n<p>Finally, does anyone know how clever the bandwidth use is - if my server adds an element to an array of one hundred elements nested deeply inside the 'desired' state, how much data actually flows over the wire? And similarly when my device moves the element into the 'reported' state.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 1811,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1473783408,
        "creation_date": 1447145961,
        "question_id": 33626171,
        "link": "https://stackoverflow.com/questions/33626171/what-is-wrong-with-my-configuration-aws-iot-using-mqtt",
        "title": "What is wrong with my configuration? AWS - IoT using MQTT",
        "body": "<p>I am following the developer guide for amazon web service IoT, but I have run into some beginner problems and I don't know what to do to solve them. I been sitting for two days. This is what has happened (I am using mac): </p>\n\n<p>1st problem: \nIn this guide: <a href=\"http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html\" rel=\"nofollow\">http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html</a>\nI can see and edit my profile by calling \"$ was configure\" in the terminal. If I call \"ls ~/.aws\" I can see the config and the credentials folder. But if i call: \"~/.aws/credentials\" or \"~/.aws/config\", I get the following error: -bash: /Users/christopher/.aws/credentials: Permission denied. \nIf i search in finder no file names aws is found. </p>\n\n<p>2nd Problem: \nOn the next page of the guide, at number 11. i can't get the dot go green cause I get an error when I press connect. The MQTT.fx tool says that it can't find the rootCA.pem file, in the Log. Like this:</p>\n\n<pre><code>2015-11-10 09:55:48,330  INFO --- ScriptsController              : Clear console.\n2015-11-10 09:55:48,332  INFO --- MqttFX ClientModel             : MqttClient with ID fc47354d17e84b6c8507eb1accb61560 assigned.\n2015-11-10 09:55:48,340 ERROR --- MqttFX ClientModel             : Error when connecting\njava.io.FileNotFoundException: rootCA.pem (No such file or directory)\n    at java.io.FileInputStream.open0(Native Method) ~[?:1.8.0_60]\n    at java.io.FileInputStream.open(FileInputStream.java:195) ~[?:1.8.0_60]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[?:1.8.0_60]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93) ~[?:1.8.0_60]\n    at de.jensd.mqttfx.ssl.SSLFellow.loadX509CertificatePem(SSLFellow.java:173) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.ssl.SSLFellow.createSSLSocketFactory(SSLFellow.java:51) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.model.MqttFXClientModel.getMqttConnectOptions(MqttFXClientModel.java:713) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.model.MqttFXClientModel.connect(MqttFXClientModel.java:420) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.services.BrokerConnectService$1.call(BrokerConnectService.java:68) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.services.BrokerConnectService$1.call(BrokerConnectService.java:65) ~[MQTT.fx-jfx.jar:?]\n    at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) ~[jfxrt.jar:?]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_60]\n    at javafx.concurrent.Service.lambda$null$493(Service.java:725) ~[jfxrt.jar:?]\n    at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_60]\n    at javafx.concurrent.Service.lambda$executeTask$494(Service.java:724) ~[jfxrt.jar:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_60]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_60]\n    at java.lang.Thread.run(Thread.java:745) [?:1.8.0_60]\n2015-11-10 09:55:48,563  INFO --- ScriptsController              : Clear console.\n2015-11-10 09:55:48,563 ERROR --- BrokerConnectService           : FileNotFoundException: rootCA.pem (No such file or directory)\n</code></pre>\n\n<p>When i click the \"...\" button next to the certificate I Notice two things. \n1. The certificates here created in my user folder, not in the aws? config folder. \n2. No rootCA.pem certificate have been created. </p>\n\n<p>I followed this tutorial to sign my own rootCA.pem certificate: <a href=\"http://datacenteroverlords.com/2012/03/01/creating-your-own-ssl-certificate-authority/\" rel=\"nofollow\">http://datacenteroverlords.com/2012/03/01/creating-your-own-ssl-certificate-authority/</a></p>\n\n<p>Then in the MQTT.fx tool I press the \"...\" buttons again next to each certificate to manually select each certificate. The path to each one is displayed, like this: /Users/christopher/cert.pem</p>\n\n<p>When I try to connect again i get the following error in the MQTT.fx tool: </p>\n\n<pre><code>2015-11-09 17:00:30,634  INFO --- ScriptsController              : Clear console.\n2015-11-09 17:00:30,635 ERROR --- BrokerConnectService           : NullPointerException: null\n2015-11-09 17:43:17,544  INFO --- BrokerConnectorController      : onConnect\n2015-11-09 17:43:17,592  INFO --- ScriptsController              : Clear console.\n2015-11-09 17:43:17,595  INFO --- MqttFX ClientModel             : MqttClient with ID fc47354d17e84b6c8507eb1accb61560 assigned.\n2015-11-09 17:43:17,661 ERROR --- MqttFX ClientModel             : Error when connecting\njava.lang.NullPointerException\n    at de.jensd.mqttfx.ssl.SSLFellow.loadPem(SSLFellow.java:221) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.ssl.SSLFellow.loadPrivateKeyPem(SSLFellow.java:184) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.ssl.SSLFellow.createSSLSocketFactory(SSLFellow.java:55) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.model.MqttFXClientModel.getMqttConnectOptions(MqttFXClientModel.java:713) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.model.MqttFXClientModel.connect(MqttFXClientModel.java:420) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.services.BrokerConnectService$1.call(BrokerConnectService.java:68) ~[MQTT.fx-jfx.jar:?]\n    at de.jensd.mqttfx.services.BrokerConnectService$1.call(BrokerConnectService.java:65) ~[MQTT.fx-jfx.jar:?]\n    at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) ~[jfxrt.jar:?]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_60]\n    at javafx.concurrent.Service.lambda$null$493(Service.java:725) ~[jfxrt.jar:?]\n    at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_60]\n    at javafx.concurrent.Service.lambda$executeTask$494(Service.java:724) ~[jfxrt.jar:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_60]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_60]\n    at java.lang.Thread.run(Thread.java:745) [?:1.8.0_60]\n2015-11-09 17:43:18,472  INFO --- ScriptsController              : Clear console.\n2015-11-09 17:43:18,473 ERROR --- BrokerConnectService           : NullPointerException: null\n</code></pre>\n\n<p>I can see on the aws IoT site (the console?) that the certificate, the policy and the lightbulb are all connected just like in the tutorial. But the rest is a mystery. \nI would be so happy for all help I can get. Thank you!</p>\n"
    }, {
        "tags": ["iot", "kaa"],
        "is_answered": true,
        "view_count": 360,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1473761910,
        "creation_date": 1473404327,
        "last_edit_date": 1473404635,
        "question_id": 39405576,
        "link": "https://stackoverflow.com/questions/39405576/endpoint-nodes-list-in-kaa",
        "title": "Endpoint nodes list in Kaa",
        "body": "<p>I want to get list of endpoints in Kaa, I see many REST functions <a href=\"http://docs.kaaproject.org/display/KAA/Admin+REST+API\" rel=\"nofollow\">here</a> but all of them need informations like Endpoint Hash Key and ... but I don't know how I can find them.  Anybody can help me how I can do this ? and is there a way for geting event on device discovery in Kaa ?</p>\n\n<p>Thanks in advance</p>\n"
    }, {
        "tags": ["raspberry-pi2", "rrdtool", "iot", "rrd"],
        "is_answered": false,
        "view_count": 152,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1472405841,
        "creation_date": 1439622533,
        "question_id": 32022435,
        "link": "https://stackoverflow.com/questions/32022435/rrdtool-archives-storing-only-nan",
        "title": "RRDTool archives storing only NaN",
        "body": "<p>I have a RRDB on raspberry Pi. The rrdb was created using </p>\n\n<pre><code>//RRA1: Archive point is saved every 5min, archive is kept for 1hour back. \n//RRA2-4: Archive point is saved every 1hour, archive is kept for 30day back.\n//RRA5: Archive point is saved every 3hour, archive is kept for 1year back.\n//RRA6-8: Archive point is saved every 1day, archive is kept for 5year back. \n\n rrdtool create %s%s \\\n--step '300' \\\n--start '1438387200' \\\n'DS:temp:GAUGE:600:0:100' \\\n'DS:humidity:GAUGE:600:10:100' \\\n'DS:dewpoint:GAUGE:600:-60:100' \\\n'RRA:LAST:0.5:1:1' \\\n'RRA:AVERAGE:0.5:1:12' \\\n'RRA:MIN:0.5:12:720' \\\n'RRA:MAX:0.5:12:720' \\\n'RRA:MIN:0.5:12:720' \\\n'RRA:AVERAGE:0.5:36:2920' \\\n'RRA:MIN:0.5:288:1825' \\\n'RRA:MAX:0.5:288:1825' \\\n'RRA:AVERAGE:0.5:288:1825'\n</code></pre>\n\n<p>The rrdb gets updated every 5 minutes, by a <a href=\"https://github.com/AdysTech/raspy-weather\" rel=\"nofollow\">c program</a>, triggered by cronjob.</p>\n\n<pre><code>rrdtool updatev dht11.rrd 1439622104:27.000000:44.000000:13.692617\n</code></pre>\n\n<p>The rrdb is getting its last values set as verified by </p>\n\n<pre><code>rrdtool lastupdate dht11.rrd\n temp humidity dewpoint\n\n1439622104: 27.000000 44.000000 13.692617\n</code></pre>\n\n<p>But none of the RRA (archives) are getting updated. All of them still have NaN. </p>\n\n<pre><code> rrdtool xport -s now-1h -e now DEF:a=/dht11.rrd:temp:AVERAGE XPORT:a:\"Livingroom\"\n&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;\n\n&lt;xport&gt;\n  &lt;meta&gt;\n    &lt;start&gt;1439619000&lt;/start&gt;\n    &lt;step&gt;300&lt;/step&gt;\n    &lt;end&gt;1439619000&lt;/end&gt;\n    &lt;rows&gt;13&lt;/rows&gt;\n    &lt;columns&gt;1&lt;/columns&gt;\n    &lt;legend&gt;\n      &lt;entry&gt;Livingroom&lt;/entry&gt;\n    &lt;/legend&gt;\n  &lt;/meta&gt;\n  &lt;data&gt;\n    &lt;row&gt;&lt;t&gt;1439619000&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439619300&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439619600&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439619900&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439620200&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439620500&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439620800&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439621100&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439621400&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439621700&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439622000&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439622300&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n    &lt;row&gt;&lt;t&gt;1439622600&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;\n  &lt;/data&gt;\n&lt;/xport&gt;\n</code></pre>\n\n<p>Any idea as what I am doing wrong, and any tips on getting RRAs updated?</p>\n"
    }, {
        "tags": ["iot", "endpoint", "kaa"],
        "is_answered": true,
        "view_count": 64,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1471623608,
        "creation_date": 1471530590,
        "question_id": 39020870,
        "link": "https://stackoverflow.com/questions/39020870/deleting-of-old-endpoint-profiles-from-admin-ui",
        "title": "Deleting of old endpoint profiles from admin ui",
        "body": "<p>How I can to delete endpoint profiles from Admin-UI? Because I have a lot of old endpoints which does not work and not valid list of endpoints a bit annoying</p>\n"
    }, {
        "tags": ["amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 58,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1470945573,
        "creation_date": 1470945573,
        "question_id": 38905100,
        "link": "https://stackoverflow.com/questions/38905100/how-to-publish-message-from-aws-iot-to-another-host",
        "title": "How to publish message from AWS IoT to another host?",
        "body": "<p>I would like to publish message from Amazon IoT to another host. In Amazon IoT there is MQTT client which have publish and subscribe functionalities. But as far as I know of MQTT client it can publish and subscribe with in Amazon only. I also checked aws iot commands. They don't provide commands for publish and subscribe. Can anyone suggest a way to publish messages from Amazon IoT to another host? </p>\n"
    }, {
        "tags": ["amazon-web-services", "websocket", "iot", "auth0"],
        "is_answered": false,
        "view_count": 126,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1470224541,
        "creation_date": 1469888837,
        "last_edit_date": 1470101037,
        "question_id": 38674994,
        "link": "https://stackoverflow.com/questions/38674994/allow-client-signin-from-auth0-access-aws-iot",
        "title": "allow client signin from auth0 access aws IoT",
        "body": "<p>I have been working on accessing the aws IoT from JS(webapp). I am using Auth0 for user login. I've also setup AWS delegation in Auth0. I have appended the following rule in Auth0.</p>\n\n<pre><code>role:arn:aws:iam::xxxxxxxxxxxx:role/access-to-iot-per-user\nprincipal:arn:aws:iam::xxxxxxxxxxxx:saml-provider/auth0-provider\n</code></pre>\n\n<p>On IAM console, I've attached the following policy to the given role above</p>\n\n<p>AWSIoTDataAccess</p>\n\n<p>As per my basic understanding, the delegation token now should allow us to connect to the IoT in aws in my account but I am getting 403 forbidden error while connecting. Am I doing anything wrong? </p>\n\n<p>`</p>\n"
    }, {
        "tags": ["javascript", "amazon-web-services", "aws-lambda", "iot", "alexa-skills-kit"],
        "is_answered": true,
        "view_count": 145,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469551837,
        "creation_date": 1469209150,
        "last_edit_date": 1469285203,
        "question_id": 38532396,
        "link": "https://stackoverflow.com/questions/38532396/aws-intenthandler-call-in-alexa-skills-template-cancels-out-preceding-functio",
        "title": "AWS: intentHandler.call() in Alexa skills template cancels out preceding function call",
        "body": "<p>I am trying to publish to an IoT topic from a Lambda function, which is triggered from an Alexa skill. In the Lambda function, I'm doing this IoT publish:</p>\n\n<pre><code>var params = {\n  topic: 'testTopic',\n  payload: new Buffer('test message'),\n  qos: 1\n};\n\niotData.publish(params, function(err, data) {\n  if (err) console.log('ERR: ', err); // an error occurred\n  else if (data) console.log('DATA: ', data);  // successful response\n});\n</code></pre>\n\n<p>If I run this code (and this code only) in a Lambda function, it works fine. But if I put the params and the publish function in the onIntent function of the Alexa Skill template, and put that in a new Lambda function, it doesn't work. (Both Lambda functions have the same configuration and policies.) </p>\n\n<p>If I comment out intentHandler.call(), then iotData.publish() does run, so it appears the the intentHandler call is cancelling it for some reason I don't understand.</p>\n\n<pre><code>onIntent: function (intentRequest, session, response) {\n  var intent = intentRequest.intent,\n      intentName = intentRequest.intent.name,\n      intentHandler = this.intentHandlers[intentName];\n\n  if (intentHandler) {\n    console.log('dispatch intent = ' + intentName);\n\n    var params = {\n      topic: 'testTopic',\n      payload: new Buffer('test message'),\n      qos: 1\n    };\n\n    iotData.publish(params, function(err, data) {\n      if (err) console.log('ERR: ', err); // an error occurred\n      else if (data) console.log('DATA: ', data);  // successful response\n    });\n\n    intentHandler.call(this, intent, session, response);\n  } else {\n    throw 'Unsupported intent = ' + intentName;\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["javascript", "html", "firebase", "iot"],
        "is_answered": false,
        "view_count": 1258,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469504458,
        "creation_date": 1469488016,
        "last_edit_date": 1469493543,
        "question_id": 38578718,
        "link": "https://stackoverflow.com/questions/38578718/changing-status-data-true-false-on-firebase-by-web",
        "title": "Changing status data (true/false) on Firebase by web",
        "body": "<p>I can't change the status data on my Firebase project with the HTML site and using javascript (.js) to connect with my Firebase project. I've made checkbox to change the status data on Firebase. But it can't change the data value on Firebase. I've change id checkbox, but there is no result. Anyone please help me. I am newbie. This is my HTML code</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n        &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n        &lt;meta name=\"description\"&gt;\n        &lt;meta name=\"author\"&gt;\n        &lt;title&gt;\n            Web Kontrol\n        &lt;/title&gt;\n        &lt;!-- Bootstrap core CSS --&gt;\n        &lt;link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n        &lt;!-- Custom styles for this template --&gt;\n\n\n    &lt;script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"&gt;&lt;/script&gt;\n    &lt;!-- &lt;link href=\"assets/css/style.css\" rel=\"stylesheet\"&gt; --&gt;\n    &lt;link href=\"assets/css/sh-default.css\" rel=\"stylesheet\" default-stylesheet=\"true\" type=\"text/css\"&gt;\n    &lt;link href=\"//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n&lt;/head&gt;\n&lt;body style=\"cursor: auto;\"&gt;\n    &lt;div class=\"navbar navbar-inverse navbar-fixed-top\" role=\"navigation\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;div class=\"navbar-header\"&gt;\n                &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\"&gt;\n                    &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                    &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                &lt;/button&gt;&lt;a class=\"navbar-brand\" href&gt;Web Kontrol Lampu&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;div class=\"collapse navbar-collapse\"&gt;\n                &lt;ul class=\"nav navbar-nav pull-right\"&gt;\n                    &lt;li&gt;\n                        &lt;a data-target=\"#login\" href&gt;Login&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;!--&lt;li&gt;\n                        &lt;a data-target=\"#register\" href&gt;Signup&lt;/a&gt;\n                    &lt;/li&gt;--&gt;\n                    &lt;li&gt;\n                        &lt;a data-target=\"#lists\" href&gt;Control&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li&gt;\n                        &lt;a id=\"logout\" href&gt;Logout&lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;&lt;!--/.nav-collapse --&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"welcome\"&gt;&lt;/div&gt;\n    &lt;div class=\"container tab default\" id=\"login\"&gt;\n        &lt;form class=\"form-signin\" role=\"form\"&gt;\n            &lt;h2 class=\"form-signin-heading\"&gt;\n                &lt;em class=\"stackhive-marker\"&gt;&lt;/em&gt;Login to Your Account\n            &lt;/h2&gt;\n            &lt;hr&gt;\n            &lt;input type=\"email\" class=\"form-control\" placeholder=\"Email address\" required=\"\" autofocus=\"\" id=\"login-email\"&gt;&lt;input type=\"password\" class=\"form-control\" placeholder=\"Password\"\n            required=\"\" id=\"login-password\"&gt;\n            &lt;button class=\"btn btn-primary\" type=\"button\" id=\"login-btn\"&gt;\n                Login\n            &lt;/button&gt;\n            &lt;hr&gt;\n            &lt;div class=\"status alert alert-info hide\"&gt;&lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n    &lt;div class=\"container tab hide\" id=\"register\"&gt;\n        &lt;form class=\"form-signin\" role=\"form\"&gt;\n            &lt;h2 class=\"form-signin-heading\"&gt;\n                Daftar Akun Baru\n            &lt;/h2&gt;\n            &lt;hr&gt;\n            &lt;input type=\"text\" class=\"form-control\" placeholder=\"Your Name\" required=\"\" autofocus=\"\" id=\"name\"&gt;&lt;input type=\"email\" class=\"form-control\" placeholder=\"Email address\" required=\"\"\n            autofocus=\"\" id=\"email\"&gt;&lt;input type=\"password\" class=\"form-control\" placeholder=\"Password\" required=\"\" id=\"password\"&gt;\n            &lt;button class=\"btn btn-primary\" type=\"button\" id=\"signup-btn\"&gt;\n                Masuk !\n            &lt;/button&gt;\n        &lt;/form&gt;\n        &lt;hr&gt;\n        &lt;div class=\"status alert alert-info hide\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"container tab hide\" id=\"lists\"&gt;\n        &lt;div class=\"status alert alert-info hide\"&gt;&lt;/div&gt;&lt;br&gt;\n        &lt;h1&gt;Kontrol Lampu&lt;/h1&gt;\n        &lt;div align=\"center\"&gt;\n\n            &lt;input id=\"cmn-toggle-1\" class=\"cmn-toggle cmn-toggle-round-1\" type=\"checkbox\"&gt;\n            &lt;input id=\"cmn-toggle-2\" class=\"cmn-toggle cmn-toggle-round-2\" type=\"checkbox\"&gt;\n        &lt;/div&gt;&lt;!-- Bootstrap core JavaScript\n================================================== --&gt;\n    &lt;!-- Placed at the end of the document so the pages load faster --&gt;\n    &lt;script type=\"text/javascript\" src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"https://cdn.firebase.com/js/client/2.2.3/firebase.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"./firebasefunctions.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"./script.js\"&gt;&lt;/script&gt;\n    &lt;!-- &lt;script type=\"text/javascript\" src=\"./script-coba.js\"&gt;&lt;/script&gt; --&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>And this .js file</p>\n\n<pre><code>$(document).ready(function() {\n\n  //this URL to my FIrebase project\n  var ref = new Firebase(\"https://firesmartlamp.firebaseio.com/devices/smartlamp/parameters/\");\n\n  /*****************************************************************\n   Get the status on Firebase\n  ******************************************************************/\n  ref.once(\"value\", function(res) {\n    var status = res.child(\"state\").val(); //state is my data on Firebase\n    $('#cmn-toggle-1').attr('checked', status); //cmn-toggle-1 is my checkbox id\n    console.log(\"Statusnya: \" +status)\n  });\n\n  ref.once(\"value\", function(res) {\n    var status2 = res.child(\"state2\").val();\n    $('#cmn-toggle-2').attr('checked', status);\n    console.log(\"Statusnya: \" +status2)\n  });\n\n  /*****************************************************************\n   Sync to firebase\n  ******************************************************************/\n  ref.on(\"child_changed\", function(res) {\n\n    var states = res.val();\n    $('#cmn-toggle-1').prop('checked', states);\n    console.log(\"Cek: \" +states)\n\n  });\n\n  ref.on(\"child_changed\", function(res) {\n\n    var states2 = res.val();\n    $('#cmn-toggle-2').prop('checked', states2);\n    console.log(\"Cek: \" +states2)\n\n  });        \n\n /*****************************************************************\n   Update value, changed status of Switch \n  ******************************************************************/\n  $('#cmn-toggle-1').on('change', function(){ \n     if(this.checked) \n      {\n          console.log(\"On\")\n          ref.update({ state: true }); //true and false are value of data on Firebase\n      }\n      else{\n          console.log(\"Off\")\n          ref.update({ state: false });\n      }\n    });\n\n  $('#cmn-toggle-2').on('change', function(){ \n     if(this.checked) \n      {\n          console.log(\"On\")\n          ref.update({ state2: true });\n      }\n      else{\n          console.log(\"Off\")\n          ref.update({ state2: false });\n      }\n    });\n\n});\n</code></pre>\n"
    }, {
        "tags": ["github", "ibm-cloud", "iot"],
        "is_answered": false,
        "view_count": 43,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1467796342,
        "creation_date": 1467728908,
        "last_edit_date": 1467796342,
        "question_id": 38206037,
        "link": "https://stackoverflow.com/questions/38206037/bluemix-internet-of-things-platform-github-repository-edit-code-setting-up-works",
        "title": "Bluemix Internet of Things Platform GitHub repository edit code setting up workspace stalls at loading resources",
        "body": "<p>Newbie question. I have spent hours on it and searched help.</p>\n\n<p>In <strong>Bluemix</strong>, I created a new <strong>IoT</strong> Platform  and  created a new GitHub.  </p>\n\n<p>Then I went to \"Edit Code.\"</p>\n\n<p>Setting up Workspace stalls at \"loading resources\".</p>\n\n<p>I have enabled 3rd party cookies and tried 4 different browsers (Chrome, Firefox, Edge, Explorer in that order).</p>\n\n<p>I cannot get it to work.  I believe there is something incorrectly configured on my computer.</p>\n\n<p>Any help would be appreciated.  </p>\n\n<p>Thank you!</p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "pushbullet"],
        "is_answered": false,
        "view_count": 615,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1466584319,
        "creation_date": 1466506166,
        "last_edit_date": 1466584319,
        "question_id": 37942380,
        "link": "https://stackoverflow.com/questions/37942380/i-am-using-pushbullet-to-send-a-message-from-raspberry-pi-what-should-i-enter-a",
        "title": "I am using PushBullet to send a message from Raspberry Pi. What should i enter as the host password in LXTerminal?",
        "body": "<p>I am trying to send a push notification from Raspberry Pi to Pushbullet in Chrome PC from the <a href=\"http://%20https://learnraspi.com/get-notifications-raspberry-pi-pushbullet/\" rel=\"nofollow\">following resource</a>.</p>\n\n<p>After typing the following commands, what should I enter when it asks for host password?</p>\n\n<pre><code>    sudo apt-get install curl\n    curl -u [type your access code here] https://api.pushbullet.com/v2/pushes/ -d type=note -d title=\"Raspberry Pi\" body=\"Hello World!\"\n    Enter password for host:\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "websocket", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 6116,
        "favorite_count": 7,
        "score": 14,
        "last_activity_date": 1465804462,
        "creation_date": 1455209968,
        "last_edit_date": 1455213914,
        "question_id": 35345481,
        "link": "https://stackoverflow.com/questions/35345481/aws-iot-mqtt-over-websocket-protocol",
        "title": "AWS IoT MQTT over WebSocket Protocol",
        "body": "<p>I've been following the AWS IoT docs trying to get started with the MQTT tutorial at \n<a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/protocols.html#mqtt-ws\">http://docs.aws.amazon.com/iot/latest/developerguide/protocols.html#mqtt-ws</a>\nto set up a WebSocket connection to AWS IoT in a web application. The first step is to initiate a WebSocket connection by making a GET request to an endpoint created by following the steps in the tutorial but I'm getting this error:</p>\n\n<p><code>XMLHttpRequest cannot load &lt;my endpoint&gt; Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https, chrome-extension-resource.</code></p>\n\n<p>I was wondering if anyone has encountered this error and if so, how they resolved it? </p>\n\n<p>Here's a link to the code <a href=\"https://github.com/dwyl/learn-aws-iot/blob/2c8035728ec8228e296580c8714f3f7ace870fbe/src/js/components/App.js\">https://github.com/dwyl/learn-aws-iot/blob/2c8035728ec8228e296580c8714f3f7ace870fbe/src/js/components/App.js</a></p>\n"
    }, {
        "tags": ["python", "amazon-web-services", "raspberry-pi", "iot", "paho"],
        "is_answered": true,
        "view_count": 1625,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1465236548,
        "creation_date": 1462985474,
        "last_edit_date": 1462992729,
        "question_id": 37168822,
        "link": "https://stackoverflow.com/questions/37168822/aws-iot-and-raspberry-pi-with-paho-mqtt-dont-connect",
        "title": "AWS IoT and Raspberry Pi with paho-mqtt don&#39;t connect",
        "body": "<p>I have installed the last version of raspbian on my raspberry pi, and I have opened an account AWS IoT on Amazon, then in the IoT web interface I have created a thing, with \"RaspberryPi_2\" name and create certificate and connect the certificate to the thing, I have followed this guide:</p>\n\n<p><a href=\"http://blog.getflint.io/blog/get-started-with-aws-iot-and-raspberry-pi\" rel=\"nofollow\">http://blog.getflint.io/blog/get-started-with-aws-iot-and-raspberry-pi</a></p>\n\n<p>I have then created the script in the guide, to connect and subscribed the raspberry pi, this is my code:</p>\n\n<pre><code>#!/usr/bin/python3\n\n#required libraries\nimport sys                                 \nimport ssl\nimport paho.mqtt.client as mqtt\n\n#called while client tries to establish connection with the server\ndef on_connect(mqttc, obj, flags, rc):\n    if rc==0:\n        print (\"Subscriber Connection status code: \"+str(rc)+\" | Connection status: successful\")\n    elif rc==1:\n        print (\"Subscriber Connection status code: \"+str(rc)+\" | Connection status: Connection refused\")\n\n#called when a topic is successfully subscribed to\ndef on_subscribe(mqttc, obj, mid, granted_qos):\n    print(\"Subscribed: \"+str(mid)+\" \"+str(granted_qos)+\"data\"+str(obj))\n\n#called when a message is received by a topic\ndef on_message(mqttc, obj, msg):\n    print(\"Received message from topic: \"+msg.topic+\" | QoS: \"+str(msg.qos)+\" | Data Received: \"+str(msg.payload))\n\n#creating a client with client-id=mqtt-test\nmqttc = mqtt.Client(client_id=\"mqtt-test\")\n\nmqttc.on_connect = on_connect\nmqttc.on_subscribe = on_subscribe\nmqttc.on_message = on_message\n\n#Configure network encryption and authentication options. Enables SSL/TLS support.\n#adding client-side certificates and enabling tlsv1.2 support as required by aws-iot service\nmqttc.tls_set(\"/home/pi/aws_iot/things/raspberryPi_2/certs/aws-iot-rootCA.crt\",\n                certfile=\"/home/pi/aws_iot/things/raspberryPi_2/certs/0ea2cd7eb6-certificate.pem.crt\",\n                keyfile=\"/home/pi/aws_iot/things/raspberryPi_2/certs/0ea2cd7eb6-private.pem.key\",\n              tls_version=ssl.PROTOCOL_TLSv1_2,\n              ciphers=None)\n\n#connecting to aws-account-specific-iot-endpoint\nmqttc.connect(\"A2GF7W5U5A46J1.iot.us-west-2.amazonaws.com\", port=8883) #AWS IoT service hostname and portno\n\n#the topic to publish to\nmqttc.subscribe(\"$aws/things/RaspberryPi_2/shadow/update/#\", qos=1) #The names of these topics start with $aws/things/thingName/shadow.\"\n\n#automatically handles reconnecting\nmqttc.loop_forever()\n</code></pre>\n\n<p>but when I do this command:</p>\n\n<pre><code>python3 mqtt_test.py\n</code></pre>\n\n<p>or this command:</p>\n\n<pre><code>python mqtt_test.py\n</code></pre>\n\n<p>and press enter, and the cursor flash and doesn't print anything and stay stuck there, someone can help me? </p>\n\n<p>I haven't also understand if the client-id name should be the same of the things name, and the meaning of the subscribe path, for example in a tutorial I have found this:</p>\n\n<pre><code>mqttc.publish(\"temperature\", tempreading, qos=1)\n</code></pre>\n\n<p>why there isn't the complete path?</p>\n\n<p>or this:</p>\n\n<pre><code>$aws/things/RaspberryPi_2/shadow/update/delta\n</code></pre>\n\n<p>so I can put everything I want in the path?</p>\n\n<p>thanks</p>\n"
    }, {
        "tags": ["java", "iot", "coap"],
        "is_answered": true,
        "view_count": 437,
        "favorite_count": 2,
        "score": 1,
        "last_activity_date": 1464875938,
        "creation_date": 1463929284,
        "last_edit_date": 1464875938,
        "question_id": 37375922,
        "link": "https://stackoverflow.com/questions/37375922/how-to-use-path-variable-in-californium-coap-server",
        "title": "how to use path variable in californium CoAP server?",
        "body": "<p>Similar with Restful syntax in Jersey or other framework, I could fetch the variable in the Restful uri path like that:</p>\n\n<pre><code>@Path(\"/users/{username}\")\npublic class UserResource {\n\n    @GET\n    @Produces(\"text/xml\")\n    public String getUser(@PathParam(\"username\") String userName) {\n        ...\n    }\n}\n</code></pre>\n\n<p>but in californium, the syntax is different, I try these codes but it is not correct:</p>\n\n<pre><code>class usersextends CoapResource {\n\n    public users() {\n        super(\"users/{username}\");\n    }\n\n    @Override\n    public void handleGET(CoapExchange exchange) {\n\n        exchange.respond(\"The username is \"+ ???????);\n    }\n}\n</code></pre>\n\n<p>How could I use the same function as first piece of code did? Another thing is where I can find official document introduce the API? I just saw the source code and try to find the solution now.</p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "ibm-watson"],
        "is_answered": true,
        "view_count": 160,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1462372809,
        "creation_date": 1462262261,
        "question_id": 36998656,
        "link": "https://stackoverflow.com/questions/36998656/ibm-watson-iot-platform-missing-feature-in-device-management-framework",
        "title": "IBM Watson IoT platform: Missing feature in device management framework?",
        "body": "<p>I am using device management framework of IBM Watson IoT platform. One of the key client requirements is that firmware should be installed (aka updated) in device as soon as it is downloaded. Currently I am not able to figure out a good way to fulfill that requirement using WIoTP. </p>\n\n<p>That is I am not able to find a way in which my application will be notified by WIoTP when download completes on the device. I am left with polling using REST APIs, but that leaves some gap between download and update. In addition it creates an overhead. I tried subscribing to different MQTT topics mentioned <a href=\"https://docs.internetofthings.ibmcloud.com/applications/mqtt.html\" rel=\"nofollow\">here</a> for an application, but don't see any message coming in for device management statuses. </p>\n\n<p>Basically am not able to find the feature of an app. being notified when a device completes download of firmware. Am I missing something or is the feature currently missing in WIoTP?</p>\n\n<p>The only other way I think I can make this happen is for the device to publish download complete message to another topic. The application can then subscribe to this topic and get notified. But this is again a hack.</p>\n"
    }, {
        "tags": ["http", "heroku", "at-command", "iot", "modem"],
        "is_answered": true,
        "view_count": 288,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1461770132,
        "creation_date": 1461704404,
        "last_edit_date": 1461709227,
        "question_id": 36875646,
        "link": "https://stackoverflow.com/questions/36875646/http-505-error-when-requesting-heroku-apps-w-a-cell-module",
        "title": "HTTP 505 error when requesting Heroku apps w a cell module",
        "body": "<p>I'm trying to use the Telit GE910 cell module to make HTTP requests over the cell network. I've connected it via a FTDI board to my computer's USB port and am sending it AT commands via the terminal. I'm using the AT commands to successfully open a socket in command mode and send the HTTP request. </p>\n\n<pre><code>AT#SD=1,0,80,\"google.com\",0,0,1\nOK\n\ufffdAT#SSEND=1\n&gt; HE\ufffdAD\ufffd /\ufffd HTT\ufffdP/1.1\n\n\nOK\n\nSRING: 1\n</code></pre>\n\n<p>I don't understand why these \ufffd are turning up. When making requests for google.com this is fine but anything hosted on Heroku gives me a 505 error.</p>\n\n<pre><code>HTTP/1.1 505 HTTP Version Not Supported\nConnection: close\nServer: Cowboy\nDate: Tue, 26 Apr 2016 20:39:34 GMT\nContent-Length: 0\n</code></pre>\n\n<p>I've read in one or two forums that this 505 response is specific to Heroku and has to do with incorrect spacing in the HTTP request. I suspect the unrecognized characters are creating the problem. What is going on? They consistently turn up before 'A', 'space', and 'P'; there may be other letters also but those are the ones that I've seen.</p>\n"
    }, {
        "tags": ["node.js", "amazon-web-services", "raspberry-pi", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 466,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1461243356,
        "creation_date": 1461239534,
        "last_edit_date": 1461243356,
        "question_id": 36768772,
        "link": "https://stackoverflow.com/questions/36768772/how-to-consume-aws-iot-service-on-device-or-machine",
        "title": "How to consume AWS IoT Service on device or machine",
        "body": "<p>Yesterday I configured my Raspberry Pi to connect with AWS IoT web services. Now my pi can publish and listen messages. On Pi I connected light sensor which will update shadow after every 30 sec.</p>\n\n<p>Now I want to write a client (Mobile app or Web app) who will also listen to same shadow and notify me. For same reason I am trying to connect my ubuntu machine with AWS IoT using node js. Now when I run sample examples mentioned on this <a href=\"http://docs.aws.amazon.com/iot/latest/developerguide/iot-device-sdk-node.html\" rel=\"nofollow\">link</a> I only see screen with message connected. When I update shadow from AWS console I should receive a message on node side. Am I right with my understanding or I am doing any mistake. If this is not a right approach then what is right approach? </p>\n\n<p>Code am trying to execute is <a href=\"https://github.com/aws/aws-iot-device-sdk-js/blob/master/examples/echo-example.js\" rel=\"nofollow\">here</a></p>\n\n<p>and command which I am using to execute is </p>\n\n<pre><code>nodejs examples/echo-example.js --host-name=AYYCW0HM971XS.iot.us-west-2.amazonaws.com --certificate-dir=/home/sangam/iot/certs --thing-name=thirdthing --debug\n</code></pre>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "iot-context-mapping"],
        "is_answered": false,
        "view_count": 125,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1460558997,
        "creation_date": 1458873090,
        "last_edit_date": 1460558997,
        "question_id": 36213145,
        "link": "https://stackoverflow.com/questions/36213145/no-event-information-is-returned-with-the-queryevent-rest-api-in-ibm-watson-iot",
        "title": "No event information is returned with the queryEvent REST API in IBM Watson IoT Map Insights",
        "body": "<p>I referred to the document of IBM Watson IoT Map Insights (<a href=\"https://new-console.ng.bluemix.net/apidocs/123\" rel=\"nofollow\">https://new-console.ng.bluemix.net/apidocs/123</a>) and tried to use the queryEvent REST API as follows. But no event information was returned...</p>\n\n<p>-Request-type:GET, url: <a href=\"https://automotive.internetofthings.ibmcloud.com/mapinsights/eventservice/event/query?tenant_id=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\" rel=\"nofollow\">https://automotive.internetofthings.ibmcloud.com/mapinsights/eventservice/event/query?tenant_id=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</a></p>\n\n<p>-Return body:  []  &lt;--- No event information was returned.</p>\n"
    }, {
        "tags": ["eclipse", "iot", "kura"],
        "is_answered": false,
        "view_count": 709,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1459803146,
        "creation_date": 1422008620,
        "last_edit_date": 1441089576,
        "question_id": 28107717,
        "link": "https://stackoverflow.com/questions/28107717/can-not-connect-to-local-web-ui-of-kura",
        "title": "Can not connect to Local Web UI of Kura",
        "body": "<p>I want to install Kura in my computer (ubuntun 14.04, JDK1.7) with eclipse. I followed <a href=\"http://eclipse.github.io/kura/doc/configurable_component.html\" rel=\"nofollow\">http://eclipse.github.io/kura/doc/configurable_component.html</a>. My problem is I can not connect to localhost:8080.</p>\n\n<p>In console of eclipse, I inputted 'ss' and its outputs are</p>\n\n<pre><code>\"Framework is launched.\"\n\n\nid  State       Bundle\n0   ACTIVE      org.eclipse.osgi_3.8.1.v20120830-144521\n1   RESOLVED    slf4j.log4j12_1.6.0\n                Master=39\n2   ACTIVE      org.eclipse.equinox.ds_1.4.0.v20120522-1841\n3   ACTIVE      org.eclipse.jetty.http_8.1.3.v20120522\n4   ACTIVE      javax.servlet_3.0.0.v201112011016\n5   ACTIVE      org.eclipse.equinox.console_1.0.0.v20120522-1841\n6   ACTIVE      org.apache.commons.fileupload_1.2.2.v20111214-1400\n7   ACTIVE      org.eclipse.kura.deployment.agent_1.0.1\n8   ACTIVE      org.eclipse.jetty.continuation_8.1.3.v20120522\n9   ACTIVE      org.apache.felix.deploymentadmin_0.9.5\n10  ACTIVE      org.eclipse.kura.example.hello_osgi_1.0.0.qualifier\n11  INSTALLED   org.eclipse.kura.core_1.0.1\n12  ACTIVE      org.eclipse.equinox.io_1.0.400.v20120522-2049\n13  ACTIVE      log4j_1.2.17\n                Fragments=24\n14  ACTIVE      org.eclipse.equinox.metatype_1.2.0.v20120522-1841\n15  ACTIVE      org.eclipse.osgi.services_3.3.100.v20120522-1822\n16  ACTIVE      org.apache.commons.io_2.4.0\n17  ACTIVE      com.gwt.user_0.2.0\n18  ACTIVE      org.apache.commons.net_3.1.0.v201205071737\n19  INSTALLED   org.eclipse.kura.core.net_1.0.1\n20  ACTIVE      org.apache.felix.dependencymanager_3.0.0\n21  INSTALLED   org.eclipse.kura.core.configuration_1.0.1\n22  ACTIVE      org.eclipse.equinox.http.jetty_3.0.0.v20120522-1841\n23  ACTIVE      org.eclipse.soda.dk.comm_1.2.1\n24  RESOLVED    log4j.apache-log4j-extras_1.1.0\n                Master=13\n25  ACTIVE      org.hsqldb.hsqldb_2.3.0\n26  ACTIVE      org.eclipse.equinox.http.servlet_1.1.300.v20120522-1841\n27  ACTIVE      org.eclipse.equinox.util_1.0.400.v20120522-2049\n28  ACTIVE      org.eclipse.equinox.event_1.2.200.v20120522-2049\n29  ACTIVE      org.eclipse.jetty.server_8.1.3.v20120522\n30  ACTIVE      org.eclipse.jetty.servlet_8.1.3.v20120522\n31  INSTALLED   org.eclipse.kura.core.cloud_1.0.1\n32  ACTIVE      org.json_1.0.0.v201011060100\n33  ACTIVE      javax.usb.api_1.0.2\n34  INSTALLED   org.eclipse.kura.emulator_1.0.1\n35  ACTIVE      org.eclipse.osgi.util_3.2.300.v20120522-1822\n36  ACTIVE      org.apache.felix.gogo.runtime_0.8.0.v201108120515\n37  ACTIVE      org.eclipse.kura.api_1.0.1\n38  ACTIVE      org.eclipse.jetty.util_8.1.3.v20120522\n39  ACTIVE      slf4j.api_1.6.4\n                Fragments=1\n40  ACTIVE      org.eclipse.kura.example.configurable_1.0.0.qualifier\n41  ACTIVE      org.eclipse.jetty.io_8.1.3.v20120522\n42  ACTIVE      org.eclipse.equinox.cm_1.0.400.v20120522-1841\n43  ACTIVE      org.apache.felix.gogo.shell_0.8.0.v201110170705\n44  ACTIVE      org.eclipse.jetty.security_8.1.3.v20120522\n45  INSTALLED   org.eclipse.kura.web_1.0.1\n46  ACTIVE      org.eclipse.kura.core.crypto_1.0.1\n47  ACTIVE      osgi.cmpn_4.3.0.201111022214\n48  ACTIVE      javax.usb.common_1.0.2\n</code></pre>\n\n<p>comment 'ls' gave</p>\n\n<pre><code>All Components:\nID  State           Component Name          Located in bundle\n1   Active      org.eclipse.kura.deployment.agent           org.eclipse.kura.deployment.agent(bid=7)\n2   Active      org.eclipse.kura.example.hello_osgi         org.eclipse.kura.example.hello_osgi(bid=10)\n3   Active      org.eclipse.equinox.event           org.eclipse.equinox.event(bid=28)\n4   Unsatisfied     org.eclipse.kura.example.configurable           org.eclipse.kura.example.configurable(bid=40)\n5   Active      org.eclipse.kura.crypto.CryptoService           org.eclipse.kur\n</code></pre>\n\n<p>Is there anybody ever had this problem may help me, please. Thank you in advance</p>\n"
    }, {
        "tags": ["api", "rest", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 201,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1459310219,
        "creation_date": 1458310851,
        "question_id": 36086771,
        "link": "https://stackoverflow.com/questions/36086771/rest-api-to-register-a-new-application-on-ibm-iot-foundation",
        "title": "REST API to register a new application on IBM IoT Foundation?",
        "body": "<p>Is it possible to create an API Key for an application in IBM IoT Foundation using REST API?</p>\n\n<p>I have seen that I can create it by logging into the IBM IoT Foundation Dashboard and clicking on the API Keys Link, but I would to automate this process using another application.</p>\n\n<p>I have found these API <a href=\"https://developer.ibm.com/iotfoundation/recipes/api-documentation\" rel=\"nofollow\">https://developer.ibm.com/iotfoundation/recipes/api-documentation</a>, but the API Key is a prerequisite.</p>\n\n<p>Thanks in advance\nRegards</p>\n"
    }, {
        "tags": ["arduino", "http-headers", "google-cloud-endpoints", "iot"],
        "is_answered": true,
        "view_count": 1030,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1458718403,
        "creation_date": 1458681594,
        "last_edit_date": 1458698998,
        "question_id": 36165454,
        "link": "https://stackoverflow.com/questions/36165454/how-to-make-a-post-api-call-to-google-endpoints-using-the-ardunio-wificlient",
        "title": "How to make a POST api call to google endpoints using the ardunio WiFiClient",
        "body": "<p>i'm working on an iot project with the ESP8266 wifi module. I've been able to successfully connect it to the internet and make an GET request to a html page  using this tutorial provided by adafruit.\n but I seem to be having difficulties integrating it with the api endpoints that I have running on the google developer console.</p>\n\n<p>Here's the potion of the code i'm having problems with</p>\n\n<pre><code>const char* Host = \"www.my_app_id.appspot.com\";\nString PostData = \"clientId=&amp;fanId=&amp;kueliiKey=\";\nString url = \"/_ah/api/fan/v1/register?\";\nSerial.print(\"Requesting URL: \");\nSerial.println(url);\n//Connect to the client and make the api call\nif (client.connect(Host, httpPort)) {\n    client.println(\"POST \" + url + \" HTTP/1.1\");\n    client.println(\"Host: \"+ (String)Host);\n    client.println(\"User-Agent: Arduino/1.0\");\n    client.println(\"Connection: close\");\n    client.print(\"Content-Length: \");\n    client.println(PostData.length());\n    client.println();\n    client.println(PostData);\n    delay(500);\n}\n//Read all the lines of the reply from server and print them to Serial          \nwhile (client.available()) {\n    String line = client.readStringUntil('\\r');\n    Serial.print(line);\n}\n\n//Serial.println();\nSerial.println(\"closing connection\");\n</code></pre>\n\n<p>I'm able to connect but I keep on getting a 404 error</p>\n\n<pre><code>lloc\\umm_malloc.c\nHTTP/1.1 404 Not Found\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nPragma: no-cache\nExpires: Fri, 01 Jan 1990 00:00:00 GMT\nDate: Tue, 22 Mar 2016 12:08:06 GMT\nVary: X-Origin\nContent-Type: text/html; charset=UTF-8\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\nServer: GSE\nAccept-Ranges: none\nVary: Origin,Accept-Encoding\nConnection: close\n\nNot Found\nclosing connection;\n</code></pre>\n\n<p>What I have in</p>\n\n<pre><code>String url = \"/_ah/api/fan/v1/register?\";\n</code></pre>\n\n<p>might be wrong, but I've double checked and using <a href=\"http://hurl.it\" rel=\"nofollow\">http://hurl.it</a> and the api call works and returns what I want <a href=\"http://i.stack.imgur.com/8UzNs.png\" rel=\"nofollow\">image of successful request</a> any insight on this would be greatly appreciated.</p>\n\n<p>Thanks.</p>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": false,
        "view_count": 364,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1458390552,
        "creation_date": 1458390552,
        "question_id": 36101740,
        "link": "https://stackoverflow.com/questions/36101740/aws-iot-to-to-send-once-off-real-time-command-to-device",
        "title": "AWS IoT to to send once-off real-time command to device",
        "body": "<p>I have a weather station which is publishing to AWS IoT. </p>\n\n<p>It reports it's state as well as measurements of the environment by publishing to shadows service messages of the format:</p>\n\n<pre><code>{\n \"state\": {\n   \"reported\": {\n      \"temperature\" : 22,\n      \"humidity\" : 70,\n       ....\n      \"wind\" : 234,\n      \"air\" : 345\n   }\n }\n</code></pre>\n\n<hr>\n\n<p>The station has some interactive properties like <code>_led1</code> and <code>_led2</code> which I can also report and update via Shadows service by setting \"desired\" state. To do that I can send to a device message like that:</p>\n\n<pre><code>{\n \"state\": {\n   \"desired\": {\n      \"_led1\" : \"on\",\n      \"_led2\" : \"off\",\n       ....\n      \"_lock99\" : \"open\"\n   }\n }\n</code></pre>\n\n<p>Thanks to shadow service <em>Whenever device gets online</em> it will receive synchronized state and will turn the leds and locks into desired position.</p>\n\n<p>However, <strong>sometimes I want to operate the device in real-time</strong>: when troubleshooting a device - I want to send a real-time command to reboot it - and if device is live and receives the message I want to reboot it. If device was offline, then nothing happens (the reboot command never reaches the device).</p>\n\n<p>So what would be the best way to control device in real-time?  Still try to play with the shadows service to achieve that? Or simply create a separate topic eg. <code>my-things/{thing_name}/real-time-commands</code> and force device to subscribe to it?</p>\n"
    }, {
        "tags": ["json", "amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 757,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1457221002,
        "creation_date": 1457047948,
        "last_edit_date": 1457060088,
        "question_id": 35785210,
        "link": "https://stackoverflow.com/questions/35785210/aws-client-error-malformed-policy-exception",
        "title": "AWS client error (Malformed Policy Exception)",
        "body": "<p>I am trying to create an AWS IoT Policy using the command: 'aws iot create-policy --policy-name \"PubSubToAnyTopic\" --policy-document file://path-to-your-policy-document'. </p>\n\n<p>For some reason I can't get around the following: A client error (MalformedPolicyException) occurred when calling the CreatePolicy operation: Policy document is Malformed. I believe I've verified the path to the json file is correct with echo $(pwd)/file.json. </p>\n\n<p>The AWS json code is below</p>\n\n<pre><code>{\n\"Version\": \"2012-10-17\", \n\"Statement\": [{\n    \"Effect\": \"Allow\",\n    \"Action\": [\"iot:*\"],\n    \"Resource\": [\"*\"]\n}]\n}\n</code></pre>\n\n<p>I've tried numerous changes (spacing, additional lines in between [ &amp; {, etc..) but still can't create the policy. Tried vi &amp; nano as well. Has anyone seen this error before? Thanks </p>\n"
    }, {
        "tags": ["java", "amazon-web-services", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 1679,
        "favorite_count": 0,
        "closed_date": 1454377084,
        "score": 0,
        "last_activity_date": 1454346020,
        "creation_date": 1454343950,
        "last_edit_date": 1454346020,
        "question_id": 35135396,
        "link": "https://stackoverflow.com/questions/35135396/how-to-fetch-data-from-aws-iot-platform",
        "title": "How to fetch data from aws iot platform",
        "body": "<p>I want to fetch data from the AWS IoT broker.  An API is available on github and its complete documentation is available on the AWS official site for this purpose.\n<a href=\"https://github.com/aws/aws-sdk-java/tree/master/aws-java-sdk-iot\" rel=\"nofollow\">https://github.com/aws/aws-sdk-java/tree/master/aws-java-sdk-iot</a>\n<a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html</a>\nI could not find a single example for it in java supporting MQTT or HTTP protocol. Are there any examples?</p>\n"
    }, {
        "tags": ["ibm-cloud", "mqtt", "iot", "node-red"],
        "is_answered": true,
        "view_count": 266,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1453478259,
        "creation_date": 1453407920,
        "last_edit_date": 1453478259,
        "question_id": 34933638,
        "link": "https://stackoverflow.com/questions/34933638/either-mqtt-client-is-not-fully-initialized-please-wait-or-non-json-message-ha",
        "title": "Either MQTT Client is not fully initialized (please wait) or non-JSON message has been sent",
        "body": "<p>When trying to send a command to an IBM IoT node from an Inject node using the Node-RED flow editor, the following error appears: \"Either MQTT Client is not fully initialized (please wait) or non-JSON message has been sent\".</p>\n\n<p><strong>Inject Node Configuration</strong>:<br>\nPayload: timestamp</p>\n\n<p><strong>IBM IoT Node Configuration</strong>:<br>\nAuthentication: Bluemix Serivce<br>\nOutput Type: Device Command<br>\nDevice Type: <br>\nDevice Id: <br>\nCommand Type: test<br>\nFormat: json<br>\nData: {\"testMessage\": \"testMessage\"}<br>\nName: IBM IoT  </p>\n"
    }, {
        "tags": ["amazon-web-services", "iot"],
        "is_answered": false,
        "view_count": 2181,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1452560920,
        "creation_date": 1451567951,
        "question_id": 34547081,
        "link": "https://stackoverflow.com/questions/34547081/aws-iot-how-to-simulate-a-thing-to-publish-an-mqtt-message-to-a-topic",
        "title": "AWS IOT - how to simulate a thing to publish an MQTT message to a topic?",
        "body": "<p>Apologies if this is a noob.  I am trying to learn the ropes of AWS IOT.</p>\n\n<p>I understand that I can use a client like MQTT.fx to publish messages to a topic in a message broker</p>\n\n<p>I also see that AWS IOT resources console, I can create things, attach certificates, policies, and create rules.</p>\n\n<p>If I create a thing say 'car' using the IOT resources console, is there some way that the console gives where i can have the car publish MQTT messages to a topic?  Or is the only way wiring up the simulate car to an actual device using the SDK.</p>\n\n<p>Like I mentioned, I am aware of publishing through an MQTT client.  I just want to understand how to make a 'thing' I created in the resources console, to publish the MQTT messages to a message broker?</p>\n\n<p>Thanks</p>\n"
    }, {
        "tags": ["rest", "authentication", "amazon-web-services", "iot"],
        "is_answered": true,
        "view_count": 2469,
        "favorite_count": 0,
        "score": 5,
        "last_activity_date": 1450436708,
        "creation_date": 1450174901,
        "last_edit_date": 1450175267,
        "question_id": 34286585,
        "link": "https://stackoverflow.com/questions/34286585/aws-iot-access-shadow-through-net-rest-with-certificate",
        "title": "AWS IoT - Access shadow through .Net, REST, with certificate",
        "body": "<p>Trying to learn AWS IoT, I created a few \"Things\" + a Policy and I am even able to use IoT CLI to <strong><em>list-things</em></strong> or <strong><em>list-policies</em></strong>. I am even able to update the shadow through CLI with <strong><em>update-thing</em></strong> command through CLI. But once I try to access a Shadow through REST GET / POST request (through a .Net program or directly like <a href=\"https://XXXXXXXXXXXXX.iot.us-west-2.amazonaws.com/things/mything/shadow\" rel=\"nofollow\">https://XXXXXXXXXXXXX.iot.us-west-2.amazonaws.com/things/mything/shadow</a>), I receive a </p>\n\n<blockquote>\n  <p>\"Missing Authentication Token\"</p>\n</blockquote>\n\n<p>. So I started to use a certificate. Here is part of my code:</p>\n\n<pre><code>string Certificate = \"xxxxxxxxx-certificate.crt\"; // downloaded from my thing\nX509Certificate cert = new X509Certificate(Certificate);\nWebRequestHandler handler = new WebRequestHandler();\nhandler.ClientCertificates.Add(cert);\nHttpClient client = new HttpClient(handler);\n// url = @\"https://xxxxxxxxxxxxx.iot.us-west-2.amazonaws.com/things/&lt;mything&gt;/shadow\";\nHttpResponseMessage webResponse = client.GetAsync(url, HttpCompletionOption.ResponseContentRead).Result;\n</code></pre>\n\n<p><strong>The result is:</strong></p>\n\n<blockquote>\n  <p>StatusCode: 403, ReasonPhrase: 'Forbidden', Version: 1.1, Content: System.Net.Http.StreamContent, Headers:<br>\n  {<br>\n     x-amzn-RequestId: 25f3c1dc-9ddd-4787-a4cf-cb79dc96748b<br>\n     connection: Keep-Alive<br>\n     x-amzn-ErrorType: ForbiddenException:<br>\n     Date: Tue, 15 Dec 2015 08:53:56 GMT<br>\n     Content-Length: 91<br>\n     Content-Type: application/json<br>\n  }  </p>\n</blockquote>\n\n<p>Any assistance?</p>\n"
    }, {
        "tags": ["fiware", "iot"],
        "is_answered": true,
        "view_count": 525,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1448529010,
        "creation_date": 1448275252,
        "question_id": 33869017,
        "link": "https://stackoverflow.com/questions/33869017/fiware-iot-agent-send-command-to-device-via-mqtt",
        "title": "FIWARE-IoT Agent: send command to device via MQTT",
        "body": "<p>I am using the FIWARE IoT agent [1] to communicate with my devices using MQTT protocol, I create a command to be able to update my device value, Here is my request to create a device:</p>\n\n<pre><code>curl -X POST http://193.48.247.247:80/iot/devices \\\n-i \\\n-H \"Content-Type: application/json\" \\\n-H \"Fiware-Service: egmsmartcity\" \\\n-H \"Fiware-ServicePath: /egmsmartcitypath\" \\\n-d ' { \"devices\": [ { \"device_id\": \"streetlight1\",\n \"entity_name\": \"sensors:streetlight1\",\n \"entity_type\": \"sensors\",\n\"protocol\": \"PDI-IoTA-MQTT-UltraLight\",\n \"timezone\": \"Europe/Paris\",\n \"endpoint\": \"notUsed\",\n \"commands\": [{ \"name\": \"streetlight1\", \"type\": \"command\", \"value\": \"\"}]  } ] }'\n</code></pre>\n\n<p>Since I am using MQTT, the filed <strong>endpoint</strong> is not used on my case but if I delete it the MQTT does not notify my device.\nThis request is working but is it the correct way to create a device to be able to send a command to my device via MQTT?</p>\n\n<p>Thanks in advance for your help!</p>\n\n<p>[1]<a href=\"https://github.com/telefonicaid/fiware-IoTAgent-Cplusplus\" rel=\"nofollow\">https://github.com/telefonicaid/fiware-IoTAgent-Cplusplus</a> </p>\n"
    }, {
        "tags": ["curl", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 289,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1448406984,
        "creation_date": 1448366440,
        "last_edit_date": 1448406984,
        "question_id": 33893167,
        "link": "https://stackoverflow.com/questions/33893167/retrieve-historical-iot-data-bluemix",
        "title": "retrieve historical IoT data bluemix",
        "body": "<p>I tried to retrieve historical data of my Internet of Things Foundation devices using CURL command. So I executed this command:</p>\n\n<blockquote>\n  <p>curl -v -X GET -H \"Authorization:Basic api_key:auth_token\" -H\n  \"Content-Type: application/json\" -H \"Accept: application/json\"\n  <a href=\"http://[ogrId].messaging.internetofthings.ibmcloud.com/api/v0002/historian/[ogrId]/types/[type]/devices/[mac\" rel=\"nofollow\">http://[ogrId].messaging.internetofthings.ibmcloud.com/api/v0002/historian/[ogrId]/types/[type]/devices/[mac</a>\n  add]?top=10</p>\n</blockquote>\n\n<p>But I could not access the data!</p>\n"
    }, {
        "tags": ["json", "api", "rest", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 79,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1447334486,
        "creation_date": 1447263528,
        "question_id": 33656496,
        "link": "https://stackoverflow.com/questions/33656496/json-response-in-the-history-rest-call-from-bluemix-iotf-does-not-contain-bookma",
        "title": "JSON response in the history REST call from bluemix iotf does not contain bookmark",
        "body": "<p>I try to access the historian information from bluemix IoTF. \nThe official documentation describes the REST call here:</p>\n\n<p><a href=\"https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Historical_Event_Retrieval/get_historian\" rel=\"nofollow\">https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Historical_Event_Retrieval/get_historian</a></p>\n\n<p>So the result should be like this:</p>\n\n<pre><code>{\n \"bookmark\": \"string\",\n \"events\": [\n  {\n   \"device_id\": \"string\",\n   \"device_type\": \"string\",\n   \"evt_type\": \"string\",\n   \"timestamp\": {\n     \"$date\": 0\n   },\n</code></pre>\n\n<p>but it is like this:</p>\n\n<pre><code>{\n \"events\": [\n {\n   \"device_id\": \"bluefish\",\n   \"device_type\": \"esp8266\",\n  \"evt_type\": \"tank\",\n  \"timestamp\": {\n    \"$date\": 1447262923695\n  },\n  \"evt\": {\n    \"heater\": \"92\",\n    \"westCloud\": \"70\",\n    \"plateTemp\": \"27.50\",\n    \"moon\": \"27\",\n    \"centerCloud\": \"70\",\n    \"waterTemp\": \"26.69\",\n    \"eastCloud\": \"70\"\n  }\n },\n</code></pre>\n\n<p>which looks like the V1 version of the API call but I call the V2 version:</p>\n\n<p><a href=\"https://5rn7ip.internetofthings.ibmcloud.com:443/api/v0002/historian/?start=1447200000000&amp;end=1447286399165\" rel=\"nofollow\">https://5rn7ip.internetofthings.ibmcloud.com:443/api/v0002/historian/?start=1447200000000&amp;end=1447286399165</a></p>\n\n<p>The query should return more then 100 entries so the bookmark is really \nnecessary to access the rest of the data.</p>\n\n<p>Is there a problem in the IoTF or do I do something wrong?</p>\n"
    }, {
        "tags": ["ibm-cloud", "iot"],
        "is_answered": false,
        "view_count": 81,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1447271241,
        "creation_date": 1446715973,
        "last_edit_date": 1446751653,
        "question_id": 33540921,
        "link": "https://stackoverflow.com/questions/33540921/cant-launch-bluemix-iot-foundation-dashboard-on-mac-computer",
        "title": "Can&#39;t launch bluemix IOT foundation dashboard on MAC computer?",
        "body": "<p>I tried use browser safari , firefox, Chrome, the dashboard is pending on loading something. I tried from Windows, the dashboard works fine.\nI launched the IOTF dashboard from bluemix portal after I login the system.<br> \nI got from error message from web console .</p>\n\n<pre><code>\"NetworkError: 401 Unauthorized - https://internetofthings.ibmcloud.com/api/v0001/auth/\"\n/api/v0001/auth/ &lt;br&gt;\n\"NetworkError: 401 Unauthorized - https://internetofthings.ibmcloud.com/api/v0001/auth/organizations\"\norganizations&lt;br&gt;\n    TypeError: a is null\n    a/&lt;.requestUser/&lt;/&lt;()iotui-d....0.0.js (line 10)\n    n/j.success/&lt;()iotui-d...ndor.js (line 2)\n    i/&lt;()iotui-d...ndor.js (line 2)\n    Wb/this.$get&lt;/m.prototype.$eval()iotui-d...ndor.js (line 3)\n    Wb/this.$get&lt;/m.prototype.$digest()iotui-d...ndor.js (line 2)\n    Wb/this.$get&lt;/m.prototype.$apply()iotui-d...ndor.js (line 3)\n    f()iotui-d...ndor.js (line 2)\n    r()iotui-d...ndor.js (line 2)\n    kb/&lt;/g()iotui-d...ndor.js (line 2)\n\n\n    ...ypes.get=function(b){return b?          a.get(c.rest.v2.type(b)):a.get(c.rest.deviceTypes(...\n\n    iotui-d...ndor.js (line 2)\n</code></pre>\n"
    }, {
        "tags": ["node.js", "login", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 363,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1447248889,
        "creation_date": 1447227062,
        "question_id": 33645987,
        "link": "https://stackoverflow.com/questions/33645987/bluemix-cannot-login-stop-restart-applications",
        "title": "bluemix cannot login, stop/restart applications",
        "body": "<p>I cannot stop/restart an sample program from <a href=\"http://m2m.demos.ibm.com/trafficsimulator.html\" rel=\"nofollow\">http://m2m.demos.ibm.com/trafficsimulator.html</a>. It gives the following errors:\n\"BXNUI0018E: Instances for the 'undefined' application could not be retrieved\". </p>\n\n<p>After I to refreshes the dashboard, I cannot login.\n\"BXNUI0303E: The account information could not be retrieved because of a problem contacting the business support system. You will be logged out of Bluemix.</p>\n\n<p>Try again later. If you see this message again, go to DOCS and select Troubleshooting for help and support options.\"</p>\n\n<p>anyone can help me out? </p>\n\n<p>Based on my experience, it seems that Bluemix IoT service is not quite stable. </p>\n\n<p>Thanks,\nJun</p>\n"
    }, {
        "tags": ["c#", "azure", "web-applications", "azure-webjobs", "iot"],
        "is_answered": true,
        "view_count": 61,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1445018965,
        "creation_date": 1444904830,
        "question_id": 33146068,
        "link": "https://stackoverflow.com/questions/33146068/create-azure-webjob-for-multiple-entries-of-dictionary-object",
        "title": "Create Azure WebJob for multiple entries of Dictionary object",
        "body": "<p>Requirement: I will create Dictionary/List with about 5 item in it (Initially this will be static). I need to run some operations for each item in that List. Each item may have different running time (i.e. 3min, 5min)</p>\n\n<p>Later from my Azure Web App user will be able to add some item to that List. I might update WebJob Dictionary/List using Azure Queue. </p>\n\n<p>Any idea about how can i run individual process/timer task for each list item?</p>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-dynamodb", "iot", "aws-lambda", "aws-iot"],
        "is_answered": true,
        "view_count": 4102,
        "favorite_count": 1,
        "score": 5,
        "last_activity_date": 1444946585,
        "creation_date": 1444637454,
        "last_edit_date": 1444659383,
        "question_id": 33076198,
        "link": "https://stackoverflow.com/questions/33076198/issues-with-amazon-iot-rules-with-dynamodb-and-lambda",
        "title": "Issues with Amazon IoT Rules with DynamoDB and Lambda",
        "body": "<p>I am currently going through the \"Quick Start\" tutorial for <a href=\"https://aws.amazon.com/iot/\" rel=\"noreferrer\">Amazon IoT</a> and I have gotten to the point where I am <a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/config-and-test-rules.html\" rel=\"noreferrer\">configuring my rules and test rules</a>. I can see my rules in my aws console under Amazon IoT, along with my thing, cert, and policy. I am using Mosquitto like they suggest for testing it, and I can see my message when I subscribe to my topic.</p>\n\n<p>But I am having an issue that, when I publish a message, I don't see anything in my DynamoDB or the CloudWatch logs from Lambda. And in IoT, I am able to create a resource and see my roles, db table, and lambda function as if it's working. I am keeping to what the tutorial is saying and nothing extra. I can't find any other forum that has discussed Amazon IoT or is having this issue.</p>\n"
    }, {
        "tags": ["iot", "intel-edison", "smartthings"],
        "is_answered": false,
        "view_count": 1410,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1441207570,
        "creation_date": 1435778580,
        "last_edit_date": 1435781145,
        "question_id": 31169934,
        "link": "https://stackoverflow.com/questions/31169934/i-am-trying-to-update-data-on-thingspeak-but-it-updates-only-at-once-using-ediso",
        "title": "I am trying to update data on Thingspeak,but it updates only at once using Edison",
        "body": "<p>I am trying to update Thingspeak using Edison, it updates Data but only once.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;SPI.h&gt;\n\n// ThingSpeak Settings\nchar thingSpeakAddress[] = \"api.thingspeak.com\";  //TS\n\nString writeAPIKey = \"**************\";    //TS\nconst int updateThingSpeakInterval = 10 * 1000;      // Time interval in milliseconds to update ThingSpeak (number of seconds * 1000 = interval)\n\nchar ssid[] = \"*******\";     //  your network SSID (name) \nchar pass[] = \"********\";  // your network password\n\n\nint status = WL_IDLE_STATUS;     // the Wifi radio's status\n\n// initialize the library instance:\nWiFiClient client;\nString stringVal = \"\"; \n// Variable Setup\nlong lastConnectionTime = 0; \nboolean lastConnected = false;\nint failedCounter = 0;\nint a;\n//char dtostrfbuffer[20];\n\nfloat tempC;\nfloat temp =3;\nvoid setup() {\n  //Initialize serial and wait for port to open:\n  Serial.begin(115200); \n  while (!Serial) {\n    ; // wait for serial port to connect. Needed for Leonardo only\n  }\n // printWifiStatus();\n  // check for the presence of the shield:\n  if (WiFi.status() == WL_NO_SHIELD) {\n    Serial.println(\"WiFi shield not present\"); \n    // don't continue:\n    while(true);\n  } \n\n // attempt to connect to Wifi network:\n  while ( status != WL_CONNECTED) { \n    Serial.print(\"Attempting to connect to WPA SSID: \");\n    Serial.println(ssid);\n    // Connect to WPA/WPA2 network:    \n    status = WiFi.begin(ssid, pass);\n\n    // wait 10 seconds for connection:\n    delay(10000);\n\n  }\n\n  // you're connected now, so print out the data:\n  Serial.print(\"You're connected to the network\");\n  // printCurrentNet();\n  // printWifiData();\n\n}\n\n  void loop() {\n\n a = analogRead(temp);\n tempC = (5.0 * a * 1000)/1024.0;\n float cel = tempC/10;\n\n // converts temp  to string\n\n stringVal += String(int(cel))+ \".\"+String(getDecimal(cel));\n\n //char buf[16];\n //String strTemp = floatToString(16 , cel , 5);\n //Serial.println(strTemp);\n\n // Print Update Response to Serial Monitor\n  if (client.available())\n  {\n    char c = client.read();\n    Serial.print(c);\n  }\n\n  // Disconnect from ThingSpeak\n  if (!client.connected() &amp;&amp; lastConnected)\n  {\n    Serial.println(\"...disconnected\");\n    Serial.println();\n\n    client.stop();  }\n\n  // Update ThingSpeak\n  if(!client.connected() &amp;&amp; (millis() - lastConnectionTime &gt; updateThingSpeakInterval))\n  {\n    updateThingSpeak(\"field1=\"+ stringVal);\n     Serial.print( stringVal);\n\n     Serial.println(\"C\");\n     delay(1000);\n     Serial.println();\n\n  }\n\n  lastConnected = client.connected();\n\n}\n//function to extract decimal part of float\nlong getDecimal(float val)\n{\n int intPart = int(val);\n long decPart = 100*(val-intPart); //I am multiplying by 100 assuming that the foat values will have a maximum of 3 decimal places\n                                   //Change to match the number of decimal places you need\n if(decPart&gt;0)return(decPart);           //return the decimal part of float number if it is available \n else if(decPart&lt;0)return((-1)*decPart); //if negative, multiply by -1\n else if(decPart=0)return(00);           //return 0 if decimal part of float number is not available\n}\n\nvoid updateThingSpeak(String  stringVal)\n{\n  if (client.connect(thingSpeakAddress, 80))\n  {         \n    client.print(\"POST /update HTTP/1.1\\n\");\n    client.print(\"Host: api.thingspeak.com\\n\");\n    client.print(\"Connection: close\\n\");\n    client.print(\"X-THINGSPEAKAPIKEY: \"+writeAPIKey+\"\\n\");\n    client.print(\"Content-Type: application/x-www-form-urlencoded\\n\");\n    client.print(\"Content-Length: \");\n    client.print( stringVal.length());\n    client.print(\"\\n\\n\");\n\n    client.print( stringVal);\n\n    lastConnectionTime = millis();\n\n    if (client.connected())\n    {\n      Serial.println(\"Connecting to ThingSpeak...\");\n      Serial.println();\n\n      failedCounter = 0;\n    }\n    else\n    {\n      failedCounter++;\n\n      Serial.println(\"Connection to ThingSpeak failed (\"+String(failedCounter, DEC)+\")\");   \n      Serial.println();\n    }\n\n  }\n  else\n  {\n    failedCounter++;\n\n    Serial.println(\"Connection to ThingSpeak Failed (\"+String(failedCounter, DEC)+\")\");   \n    Serial.println();\n\n    lastConnectionTime = millis(); \n  }\n}\n</code></pre>\n\n<p>Why does it update Data only once?</p>\n"
    }, {
        "tags": ["google-chrome", "middleware", "iot"],
        "is_answered": true,
        "view_count": 306,
        "favorite_count": 0,
        "closed_date": 1452659936,
        "score": 0,
        "last_activity_date": 1440838633,
        "creation_date": 1440773174,
        "question_id": 32273743,
        "link": "https://stackoverflow.com/questions/32273743/google-weave-api-info",
        "title": "Google Weave API info",
        "body": "<p>I have seen the news announcements, but I would like to know where I can get some documentation on the API and even better if there is an SDK available for testing.</p>\n\n<p>And if it is not available yet. What other middleware and glueware apis are the based on websockets for the IoT?</p>\n\n<p>Right now, oddly enough I replicate state via CouchDB &amp; PouchDB, which works well also.</p>\n"
    }, {
        "tags": ["rest", "sensors", "middleware", "distributed-system", "iot"],
        "is_answered": true,
        "view_count": 90,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1440161998,
        "creation_date": 1440092171,
        "question_id": 32124749,
        "link": "https://stackoverflow.com/questions/32124749/gsn-virtual-sensor-wrapper-for-a-rest-service",
        "title": "GSN virtual sensor wrapper for a REST service",
        "body": "<p>I'm trying to write a GSN wrapper for a REST service, which returns the following output when called from a browser:</p>\n\n<p>1, 23.22</p>\n\n<p>However, the wrapper that I wrote doesn't really work. Any ideas of what am I doing wrong?</p>\n\n<p><strong>WRAPPER</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;virtual-sensor name=\"ForecastService\" priority=\"10\" &gt;\n&lt;processing-class&gt;\n    &lt;class-name&gt;org.openiot.gsn.vsensor.BridgeVirtualSensor&lt;/class-name&gt;\n    &lt;init-params&gt;\n        &lt;param name=\"allow-nulls\"&gt;false&lt;/param&gt;\n        &lt;param name=\"publish-to-lsm\"&gt;true&lt;/param&gt;\n    &lt;/init-params&gt;\n    &lt;output-structure&gt;\n        &lt;field name=\"rain\" type=\"Integer\" /&gt;\n        &lt;field name=\"temperature\" type=\"Double\" /&gt;\n    &lt;/output-structure&gt;\n&lt;/processing-class&gt;\n&lt;description&gt;weather forecast station&lt;/description&gt;\n&lt;life-cycle pool-size=\"10\"/&gt;\n&lt;addressing&gt;\n    &lt;predicate key=\"geographical\"&gt;&lt;/predicate&gt;\n&lt;/addressing&gt;\n&lt;storage history-size=\"1\" /&gt;\n&lt;streams&gt;\n    &lt;stream name=\"input1\"&gt;\n        &lt;source alias=\"source1\" sampling-rate=\"1\" storage-size=\"1\"&gt;\n            &lt;address wrapper=\"http-get\"&gt;\n                &lt;predicate key=\"url\"&gt;http://192.168.1.100:8080/ForecastService/webresources/forecastservice/forecast/true/csv&lt;/predicate&gt;\n                &lt;predicate key=\"rate\"&gt;1000&lt;/predicate&gt;\n            &lt;/address&gt;\n            &lt;query&gt;select * from wrapper&lt;/query&gt;\n        &lt;/source&gt;\n        &lt;query&gt;select * from source1&lt;/query&gt;\n    &lt;/stream&gt;\n&lt;/streams&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>18:16:11.229 [VSensorLoader-Thread0] DEBUG org.openiot.gsn.beans.StreamSource - validate() called\n18:16:11.229 [VSensorLoader-Thread0] DEBUG org.openiot.gsn.VSensorLoader - Preparing input streams for: forecastservice\n18:16:11.230 [VSensorLoader-Thread0] DEBUG o.o.g.w.general.HttpGetWrapper - AXISWirelessCameraWrapper is now running @1000 Rate.\n18:16:11.230 [VSensorLoader-Thread0] DEBUG org.openiot.gsn.VSensorLoader - Wrapper name: Http Receiver -- view name _774699928\n18:16:11.230 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.240 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.240 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - The create table statement is : CREATE TABLE _774699928 (PK BIGINT NOT NULL IDENTITY, timed BIGINT NOT NULL, DATA Binary)\n18:16:11.242 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - The create index statement is : CREATE  UNIQUE  INDEX _774699928_INDEX ON _774699928 (timed DESC)\n18:16:11.244 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.250 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.251 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Dropping table structure: _sql_view_helper_ With query: Drop table if exists _sql_view_helper_\n18:16:11.263 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.264 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - The create table statement is : CREATE TABLE _sql_view_helper_ (PK BIGINT NOT NULL IDENTITY, timed BIGINT NOT NULL, U_ID varchar(17))\n18:16:11.264 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - The create index statement is : CREATE  INDEX _sql_view_helper__INDEX ON _sql_view_helper_ (timed DESC)\n18:16:11.266 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.270 [VSensorLoader-Thread0] DEBUG o.o.g.b.w.TupleBasedSlidingHandler - The original Query : select * from wrapper\n18:16:11.271 [VSensorLoader-Thread0] DEBUG o.o.g.b.w.TupleBasedSlidingHandler - The merged query : select * from  (select * from _774699928 where timed &gt;= (select distinct(timed) from _774699928 where timed in (select timed from _774699928 order by timed desc limit 1 offset 0 )) order by timed desc ) of the StreamSource source1 of the InputStream: input1\n18:16:11.271 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.271 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Creating a view:create view __911689473 AS ( select * from  (select * from _774699928 where timed &gt;= (select distinct(timed) from _774699928 where timed in (select timed from _774699928 order by timed desc limit 1 offset 0 )) order by timed desc ) )\n18:16:11.274 [VSensorLoader-Thread0] DEBUG o.o.gsn.wrappers.AbstractWrapper - Adding listeners:  Stream Source object:  Alias: source1 uidS: __911689473 Active source: [http-geturl = http://192.168.1.100:8080/ForecastService/webresources/forecastservice/forecast/true/csv,rate = 1000,]\n18:16:11.274 [VSensorLoader-Thread0] DEBUG o.openiot.gsn.storage.StorageManager - Asking a con. to DB: jdbc:h2:file:MyFile =&gt; busy: 0, max-size: 8, idle: 1\n18:16:11.277 [VSensorLoader-Thread0] ERROR org.openiot.gsn.VSensorLoader - The column : RAIN in the &gt;forecastservice&lt; table is not compatible with type : Integer. The actual type for this table (currently in the database): 2005\norg.openiot.gsn.utils.GSNRuntimeException: The column : RAIN in the &gt;forecastservice&lt; table is not compatible with type : Integer. The actual type for this table (currently in the database): 2005\n    at org.openiot.gsn.storage.StorageManager.tableExists(StorageManager.java:241) ~[classes/:na]\n    at org.openiot.gsn.storage.StorageManager.tableExists(StorageManager.java:270) ~[classes/:na]\n    at org.openiot.gsn.VSensorLoader.loadPlugin(VSensorLoader.java:255) ~[classes/:na]\n    at org.openiot.gsn.VSensorLoader.loadPlugin(VSensorLoader.java:210) ~[classes/:na]\n    at org.openiot.gsn.VSensorLoader.run(VSensorLoader.java:134) ~[classes/:na]\n    at java.lang.Thread.run(Thread.java:745) [na:1.7.0_79]\n</code></pre>\n"
    }, {
        "tags": ["arduino", "sms", "gsm", "iot", "sim900"],
        "is_answered": false,
        "view_count": 518,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1438833609,
        "creation_date": 1438433526,
        "last_edit_date": 1438589328,
        "question_id": 31762041,
        "link": "https://stackoverflow.com/questions/31762041/why-i-could-not-read-the-other-received-smss-except-the-first-sms",
        "title": "Why I could not read the other received sms&#39;s except the first SMS?",
        "body": "<p>I have to read the incoming SMS on my gsm module SIM900 (which is connected to Arduino), and I want to print the sender number and message on to serial monitor.</p>\n\n<p>I first configure gsm module with AT commands and Response() function will give me the response to AT commands.</p>\n\n<p>as any SMS will be in the following pattern</p>\n\n<p>+CMT: \"[Mobile number]\", \"[Date and Time]\"\n   [message body]</p>\n\n<p>So, I first extract +CMT and after that I will take mobile number and atlast we have message body. The code I have used is</p>\n\n<pre><code>char RcvdMsg[200] = \"\";\nint RcvdCheck = 0;\nint RcvdConf = 0;\nint index = 0;\nint RcvdEnd = 0;\nchar MsgMob[15];\nchar MsgTxt[50];\nint MsgLength = 0;\n\nvoid Config() // This function is configuring our SIM900 module i.e. sending the initial AT commands\n{\ndelay(1000);\nSerial.print(\"ATE0\\r\");\nResponse();\nSerial.print(\"AT\\r\");\nResponse();\nSerial.print(\"AT+CMGF=1\\r\");\nResponse();\nSerial.print(\"AT+CNMI=1,2,0,0,0\\r\");\nResponse();\n}\n\n\nvoid setup()\n{\n  Serial.begin(9600);\n  Config();\n}\n\nvoid loop()\n{\n  RecSMS();\n}\n\n\nvoid Response() // Get the Response of each AT Command\n{\nint count = 0;\nSerial.println();\nwhile(1)\n{\nif(Serial.available())\n{\nchar data =Serial.read();\nif(data == 'K'){Serial.println(\"OK\");break;}\nif(data == 'R'){Serial.println(\"GSM Not Working\");break;}\n}\ncount++;\ndelay(10);\nif(count == 1000){Serial.println(\"GSM not Found\");break;}\n\n}\n}\n\nvoid RecSMS() // Receiving the SMS and extracting the Sender Mobile number &amp; Message Text\n{\nif(Serial.available())\n{\nchar data = Serial.read();\nif(data == '+'){RcvdCheck = 1;}\nif((data == 'C') &amp;&amp; (RcvdCheck == 1)){RcvdCheck = 2;}\nif((data == 'M') &amp;&amp; (RcvdCheck == 2)){RcvdCheck = 3;}\nif((data == 'T') &amp;&amp; (RcvdCheck == 3)){RcvdCheck = 4;}\nif(RcvdCheck == 4){RcvdConf = 1; RcvdCheck = 0;}\n\nif(RcvdConf == 1)\n{\nif(data == '\\n'){RcvdEnd++;}\nif(RcvdEnd == 3){RcvdEnd = 0;}\nRcvdMsg[index] = data;\n\nindex++;\nif(RcvdEnd == 2){RcvdConf = 0;MsgLength = index-2;index = 0;}\nif(RcvdConf == 0)\n{\nSerial.print(\"Mobile Number is: \");\nfor(int x = 4;x &lt; 17;x++)\n{\n  MsgMob[x-4] = RcvdMsg[x];\n  Serial.print(MsgMob[x-4]);\n}\n  Serial.println();\n  Serial.print(\"Message Text: \");\nfor(int x = 46; x &lt; MsgLength; x++)\n{\n  MsgTxt[x-46] = RcvdMsg[x];\n  Serial.print(MsgTxt[x-46]);\n}\n\nSerial.println();\nSerial.flush();\n\n\n}\n}\n}\n}\n</code></pre>\n\n<p>The problem of the code is</p>\n\n<p>After receiving first SMS I am getting my mobile number and message body. After that I am only getting sender number printed on to my serial monitor but not the message body.</p>\n\n<p>Where It has gone wrong. I could not understood.</p>\n\n<p>Please help me.......Thanks in advance.</p>\n"
    }, {
        "tags": ["java", "client", "server", "contiki", "iot"],
        "is_answered": false,
        "view_count": 66,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1437644845,
        "creation_date": 1437643690,
        "last_edit_date": 1437644845,
        "question_id": 31583346,
        "link": "https://stackoverflow.com/questions/31583346/get-request-to-contiki-well-known-core-returns-null",
        "title": "GET request to Contiki @ \\.well-known\\core returns NULL",
        "body": "<p>I have a trouble about an IoT project, I'll explain it better :</p>\n\n<p>I have a CLIENT based on Californium Java that has to make a <code>GET</code> request to a Contiki based Server (based on Zolertia z1 node).\nWhen I make the request, if the server node has too many resources or too many resource's attributes, the server reply is <code>NULL</code>.\nOtherwise, it replies with a Core Link Format that contains the list of available resources stored on it.</p>\n\n<p>Thank you all!\nIf you want some code, I'll post it. </p>\n\n<p>Client CODE</p>\n\n<pre><code>Request rq = new Request(Code.GET);\n\n            CoapResponse coapRe = coapClientCore.advanced(rq);\n            if(coapRe != null)\n                System.out.println(coapRe.getResponseText());\n            else \n                System.out.println(\"is null\");\n</code></pre>\n"
    }, {
        "tags": [".net", "web-services", "architecture", "thread-safety", "iot"],
        "is_answered": true,
        "view_count": 68,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1436284759,
        "creation_date": 1436256328,
        "question_id": 31263047,
        "link": "https://stackoverflow.com/questions/31263047/safely-allow-multiple-clients-to-share-a-single-resource",
        "title": "Safely allow multiple clients to share a single resource",
        "body": "<p>I am creating a program where I need to talk to multiple devices (in the order of 10-20 devices), over different physical connections (serial port, UDP). These devices only reply to requests I do to them, and each of them only process one request before allowing a new one. The application might request a value update from each of them every second.</p>\n\n<p>As of now, I have an interface <code>IRequestReplyDevice</code></p>\n\n<pre><code>public interface IRequestReplyDevice\n{\n    T SendMessage&lt;T&gt;(IMessage message) where T : IMessage;\n}\n</code></pre>\n\n<p>Where SendMessage is a blocking call that returns the response received from the device. In each implementation of this interface, ex. <code>SerialPortDevice : IRequestReplyDevice</code>, I have a lock in <code>SendMessage</code> that ensures that no new message is sent until the response to the previous reply is received and returned to caller.</p>\n\n<p>I was wanting to build a Web API on top of this, and that may lead to several clients wanting to request something from the same device at the same time.</p>\n\n<p>Is this approach robust or even sane? Would you approach it differently? </p>\n"
    }, {
        "tags": ["http", "arduino", "arduino-uno", "iot"],
        "is_answered": false,
        "view_count": 1354,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1436084519,
        "creation_date": 1435703451,
        "last_edit_date": 1436084519,
        "question_id": 31149657,
        "link": "https://stackoverflow.com/questions/31149657/sending-put-request-with-arduino-esp8622",
        "title": "Sending PUT request with Arduino &amp; ESP8622",
        "body": "<p>I'm trying to send some test request to <a href=\"http://requestb.in/qucuwrqu?inspect\" rel=\"nofollow\">http://requestb.in/qucuwrqu?inspect</a> with ESP8622 but without luck. I tried a lot and still it doesn't seems to work.</p>\n\n<p>Endpoints works fine when requesting them via cURL.</p>\n\n<pre><code>AT+RST\n\nAT+CWMODE=1\n\nAT+CIPMUX=0\n\nAT+CWJAP=\"wifi ssid\",\"password\"\n\nAT+CIPSTART=\"TCP\",\"requestb.in\",80\"\n\nAT+CIPSEND=53\nPOST /qucuwrqu HTTP/1.1\\r\\n\\r\\n1234567890123456789012\n\nAT+CIPCLOSE\n</code></pre>\n\n<p>All commands except line with POST (none) I'm sending with NL/CR.</p>\n\n<p>To be honest I will need to send more complex request, but wanted to make it work with simpler one first hoping that it will help me finish more complex one.</p>\n\n<p>More complex should have something like that in data:</p>\n\n<pre><code>PUT /rooms/2.json HTTP/1.1\\r\\nHost: some_host\\r\\nContent-Type: application/x-www-form-urlencoded\\r\\nConnection: close\\r\\nContent-Length: 15\\r\\n\\r\\n{\"empty\": true}\n</code></pre>\n\n<p>Will it also work with https:// ?</p>\n\n<p>If you see what might be wrong, let me know please.</p>\n\n<p><strong>UPDATE with some aditional info</strong></p>\n\n<p>I've tried something like this (empty sample, just sending AT commands):</p>\n\n<pre><code>AT\n\nOK\nAT+CWJAP=\"SSID\",\"password\"\n\nOK\nAT+CIPSTART=\"TCP\",\"50.16.237.179\",80\n\nOK\nLinked\nAT+CIPSEND=30\n\n&gt; GET /qucuwrqu?key=sometest\\r\\n\nSEND OK\n\nOK\nUnlink\n</code></pre>\n\n<p>But there is no response on web side. I am getting corect response from ESP8622 so it should work fine I hope. Also tried this code:</p>\n\n<pre><code>#define SSID \"Dawid\"\n#define PASS \"somepass\"\n#define IP \"50.16.237.179\" // requestb.in\nString GET = \"GET /qucuwrqu?key=some_test\";\n\nvoid setup()\n{\n  Serial.begin(9600);\n  Serial.println(\"AT\");\n  delay(5000);\n  if(Serial.find(\"OK\")){\n    connectWiFi();\n  }\n}\n\nvoid loop(){\n  updateTemp(\"teesst\");\n  delay(60000);\n}\n\nvoid updateTemp(String tenmpF){\n  String cmd = \"AT+CIPSTART=\\\"TCP\\\",\\\"\";\n  cmd += IP;\n  cmd += \"\\\",80\";\n  Serial.println(cmd);\n  delay(2000);\n  if(Serial.find(\"Error\")){\n    return;\n  }\n  cmd = GET;\n  cmd += tenmpF;\n  cmd += \"\\r\\n\";\n  Serial.print(\"AT+CIPSEND=\");\n  Serial.println(cmd.length());\n  if(Serial.find(\"&gt;\")){\n    Serial.print(cmd);\n  }else{\n    Serial.println(\"AT+CIPCLOSE\");\n  }\n}\n\n\nboolean connectWiFi(){\n  Serial.println(\"AT+CWMODE=1\");\n  delay(2000);\n  String cmd=\"AT+CWJAP=\\\"\";\n  cmd+=SSID;\n  cmd+=\"\\\",\\\"\";\n  cmd+=PASS;\n  cmd+=\"\\\"\";\n  Serial.println(cmd);\n  delay(5000);\n  if(Serial.find(\"OK\")){\n    return true;\n  }else{\n    return false;\n  }\n}\n</code></pre>\n\n<p>And I've noticed that it isn't connecting to WiFi.</p>\n\n<p>What might be wrong?</p>\n\n<p>Thanks in adavance,\nRegards David</p>\n"
    }, {
        "tags": ["java", "open-source", "cloud", "sensors", "iot"],
        "is_answered": true,
        "view_count": 59,
        "favorite_count": 0,
        "closed_date": 1433553686,
        "score": 0,
        "last_activity_date": 1433175046,
        "creation_date": 1432813026,
        "question_id": 30505485,
        "link": "https://stackoverflow.com/questions/30505485/how-to-add-https-support-in-global-sensor-networksgsn",
        "title": "How to add https support in Global Sensor Networks(GSN)",
        "body": "<p>Now am work with global sensor network(GSN &amp; X-GSN). how to enable https (SSL) support in GSN or X-GSN . anybody can help me. </p>\n"
    }, {
        "tags": ["html", "embedded", "iot"],
        "is_answered": true,
        "view_count": 54,
        "favorite_count": 0,
        "closed_date": 1432872062,
        "score": -3,
        "last_activity_date": 1432841253,
        "creation_date": 1432840867,
        "last_edit_date": 1432841127,
        "question_id": 30515368,
        "link": "https://stackoverflow.com/questions/30515368/ideas-for-embedded-application-that-uses-post-and-get-to-interact-with-the-inter",
        "title": "Ideas for embedded application that uses POST and GET to interact with the internet",
        "body": "<p>I am trying to do a project where I use POST and GET html requests to do something cool on the internet. I am using an alpha version of a Redpine signals board (they gave use exclusive access for a class at my university).</p>\n\n<p>My problem is <em>I don't really know much about html requests</em>. </p>\n\n<p>Is it possible to do something simple like post a twitter status using only POST and/or GET?</p>\n"
    }, {
        "tags": ["javascript", "websocket", "jersey", "atmosphere", "iot"],
        "is_answered": false,
        "view_count": 113,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1424985083,
        "creation_date": 1424391812,
        "last_edit_date": 1424985083,
        "question_id": 28619626,
        "link": "https://stackoverflow.com/questions/28619626/internet-of-things-design-for-jersey-and-atmosphere",
        "title": "Internet of Things design for jersey and atmosphere",
        "body": "<p>I have a fully working Jersey/Rest application server on an embedded device and am in the process of converting it to websockets with atmosphere-jersey to make it available through a firewall.  I've just run into some design questions.</p>\n\n<p>I have around 125 different rest call endpoints.  I setup a websocket to a few of them and transferred data back and forth, similar to rest, but with live pushes.  Since I built a socket with a subscriber for each endpoint, does this mean I'm actually maintaining a websocket on the browser side for each connecting endpoint?  Or is the browser smart enough to hold a single socket open to the same domain and send requests back and forth to each endpoint?  If I am maintaining a lot of websockets, then is there a particular strategy to do all communication with multiple endpoints, using a single websocket?</p>\n\n<p>As well, my project is going to require an intermediary service to match up a login to a device of registered socket listeners.  Is there a container that takes care of matching up logins to a websocket broker, that I could host with my own webservices (must be free)?  Since all of my backend services look like rest, I don't want to have to subscribe each endpoint to the intermediary; so I'm wondering if I need to setup a single websocket broker to handle the traffic and push it out to the endpoints, or if the jersey-atmosphere service is smart enough to handle this?</p>\n\n<p>Edit: added a design question:\nIn order to communicate between a web browser and a back end server using a single websocket interface; Is there a clean and easy way to generate a POJO for each receiving broker, or will I have to do a JSON conversion as the first step in each class that receives an object?  If I build a javascript message with some sort of key to determine the broker, then I could map the key to a class and do a pojo generation for passing back the object to the handler: but it seems like this is a bit clunky and coupled.</p>\n"
    }]
}