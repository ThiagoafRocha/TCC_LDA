{
    "items": [{
        "tags": ["iot", "at-command", "modem", "gprs", "sim800"],
        "is_answered": true,
        "view_count": 455,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1630422834,
        "creation_date": 1540567971,
        "last_edit_date": 1540581463,
        "question_id": 53012013,
        "link": "https://stackoverflow.com/questions/53012013/should-a-response-be-appended-right-to-an-at-command-if-ate1-echo-enabled",
        "title": "Should a response be appended right to an AT command if ATE1 (echo) enabled?",
        "body": "<p>I am about to implement a console program for PC which works with a GPRS modem (SIM800L, particularly).</p>\n\n<p>I've just learnt what it is hard to parse the responses due to appearance of UCR (Unsolicited Result Codes).</p>\n\n<p>So I had a bit googling and found this post:</p>\n\n<p><a href=\"https://embeddedfreak.wordpress.com/2008/08/19/handling-urc-unsolicited-result-code-in-hayes-at-command/\" rel=\"nofollow noreferrer\">https://embeddedfreak.wordpress.com/2008/08/19/handling-urc-unsolicited-result-code-in-hayes-at-command/</a></p>\n\n<p>Quoting:</p>\n\n<blockquote>\n  <p>Turn ON the ECHO (ATE1)\n  Most of application samples that I\u2019ve seen turn off the ECHO (by sending ATE0). The reason is unknown, but most of them saying to reduce the serial port communication (hence reducing the parser effort). But that is not correct.</p>\n  \n  <p>If you want to build robust communication, you should turn ON the ECHO. The reason is simple, you can detect the sequence of the command/URC that\u2019s received by the modem. Here\u2019s the actual sequence of the illustration above (viewed from the modem\u2019s echo):</p>\n\n<pre><code>application&gt;AT+CMGL=4 # List all of SMS inside the ME\nME&gt; OK # There's no SMS inside the ME\nME&gt; RING # Incoming call\nME&gt; RING # Incoming call\n</code></pre>\n</blockquote>\n\n<p>I am confused. I guess it should work but only if a response always goes right after a corresponding command.</p>\n\n<p>But I couldn't find a strong point for it. Neither description of AT commands nor SIM800L datasheet does contain that statement.</p>\n\n<p>Or maybe I just understand it in a wrong way?</p>\n"
    }, {
        "tags": ["embedded", "stm32", "iot", "lwip", "mbedtls"],
        "is_answered": false,
        "view_count": 22,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1630223702,
        "creation_date": 1630223702,
        "question_id": 68970932,
        "link": "https://stackoverflow.com/questions/68970932/stm32cube-fw-f7-client-mbedtls-ssl-handshake-fails-at-parse-change-cipher-spec",
        "title": "STM32Cube_FW_F7 client mbedTLS SSL handshake fails at \u201eparse change cipher spec\u201c",
        "body": "<p>I am still implementing a cloud client for my IOT project. I had it working but due to data loss I have to start again\u2026\nThe problem my face now, is that the handshake stops at the \u201cparse change cipher spec\u201d option. I attach the full log file below. Do you to stick overflowing invitations I had to shorten the data dump. I use the LWIP stack together with mbedTLS. The TLS version is 1.2.</p>\n<p>I have tried everything and I\u2019m really desperate because nothing seems to work. I am very grateful for any hint in the right direction, thank you!</p>\n<pre><code> . Seeding the random number generator... ok\n . Loading the CA root certificate ... ok (0 skipped)\n . Connecting to tcp/www.google.de/443... ok\n . Setting up the SSL/TLS structure... ok\n . Performing the SSL/TLS handshake...=&gt; handshake\nclient state: 0\n=&gt; flush output\n&lt;= flush output\nclient state: 1\n=&gt; flush output\n&lt;= flush output\n=&gt; write client hello\nclient hello, max version: [3:3]\nclient hello, current time: 3\ndumping 'client hello, random bytes' (32 bytes)\n0000:  ff ff ff ff 8b 1e 54 53 28 36 79 78 6f 59 e9 21  ......TS(6yxoY.!\n0010:  6b 81 7b f3 e5 d6 ce d2 70 be ff aa c6 20 0a 6d  k.{.....p.... .m\nclient hello, session id len.: 0\ndumping 'client hello, session id' (0 bytes)\nclient hello, add ciphersuite: c02c\nclient hello, add ciphersuite: c02b\nclient hello, add ciphersuite: c030\nclient hello, got 3 ciphersuites (excluding SCSVs)\nadding EMPTY_RENEGOTIATION_INFO_SCSV\nclient hello, compress len.: 1\nclient hello, compress alg.: 0\nclient hello, adding signature_algorithms extension\nclient hello, adding supported_elliptic_curves extension\nclient hello, adding supported_point_formats extension\nclient hello, total extension length: 38\n=&gt; write handshake message\n=&gt; write record\noutput record: msgtype = 22, version = [3:3], msglen = 91\ndumping 'output record sent to network' (96 bytes)\n0000:  16 03 03 00 5b 01 00 00 57 03 03 ff ff ff ff 8b  ....[...W.......\n0010:  1e 54 53 28 36 79 78 6f 59 e9 21 6b 81 7b f3 e5  .TS(6yxoY.!k.{..\n0020:  d6 ce d2 70 be ff aa c6 20 0a 6d 00 00 08 c0 2c  ...p.... .m....,\n0030:  c0 2b c0 30 00 ff 01 00 00 26 00 0d 00 12 00 10  .+.0.....&amp;......\n0040:  06 03 06 01 05 03 05 01 04 03 04 01 03 03 03 01  ................\n0050:  00 0a 00 06 00 04 00 18 00 17 00 0b 00 02 01 00  ................\n=&gt; flush output\nmessage length: 96, out_left: 96\nssl-&gt;f_send() returned 96 (-0xffffffa0)\n&lt;= flush output\n&lt;= write record\n&lt;= write handshake message\n&lt;= write client hello\nclient state: 2\n=&gt; flush output\n&lt;= flush output\n=&gt; parse server hello\n=&gt; read record\n=&gt; fetch input\nin_left: 0, nb_want: 5\nin_left: 0, nb_want: 5\nssl-&gt;f_recv(_timeout)() returned 5 (-0xfffffffb)\n&lt;= fetch input\ndumping 'input record header' (5 bytes)\n0000:  16 03 03 00 57                                   ....W\ninput record: msgtype = 22, version = [3:3], msglen = 87\n=&gt; fetch input\nin_left: 5, nb_want: 92\nin_left: 5, nb_want: 92\nssl-&gt;f_recv(_timeout)() returned 87 (-0xffffffa9)\n&lt;= fetch input\ndumping 'input record from network' (92 bytes)\n0000:  16 03 03 00 57 02 00 00 53 03 03 61 23 aa 0e bb  ....W...S..a#...\n0010:  86 eb b9 26 89 6e 33 b3 88 c6 1b 8d 7a 90 a4 30  ...&amp;.n3.....z..0\n0020:  4c d5 42 44 4f 57 4e 47 52 44 01 20 47 03 57 dc  L.BDOWNGRD. G.W.\n0030:  86 51 46 15 d1 ee a1 0a 80 f8 af fd 62 d5 d9 61  .QF.........b..a\n0040:  0b d0 6c 2c 4b ed ba a3 aa 01 a5 81 c0 30 00 00  ..l,K........0..\n0050:  0b ff 01 00 01 00 00 0b 00 02 01 00              ............\nhandshake message: msglen = 87, type = 2, hslen = 87\n&lt;= read record\ndumping 'server hello, version' (2 bytes)\n0000:  03 03                                            ..\nserver hello, current time: 1629727246\ndumping 'server hello, random bytes' (32 bytes)\n0000:  61 23 aa 0e bb 86 eb b9 26 89 6e 33 b3 88 c6 1b  a#......&amp;.n3....\n0010:  8d 7a 90 a4 30 4c d5 42 44 4f 57 4e 47 52 44 01  .z..0L.BDOWNGRD.\nserver hello, session id len.: 32\ndumping 'server hello, session id' (32 bytes)\n0000:  47 03 57 dc 86 51 46 15 d1 ee a1 0a 80 f8 af fd  G.W..QF.........\n0010:  62 d5 d9 61 0b d0 6c 2c 4b ed ba a3 aa 01 a5 81  b..a..l,K.......\nno session has been resumed\nserver hello, chosen ciphersuite: c030\nserver hello, compress alg.: 0\nserver hello, chosen ciphersuite: TLS-ECDHE-RSA-WITH-AES-256-GCM-SHA384\nserver hello, total extension length: 11\nfound renegotiation extension\nfound supported_point_formats extension\npoint format selected: 0\n&lt;= parse server hello\nclient state: 3\n=&gt; flush output\n&lt;= flush output\n=&gt; parse certificate\n=&gt; read record\n=&gt; fetch input\nin_left: 0, nb_want: 5\nin_left: 0, nb_want: 5\nssl-&gt;f_recv(_timeout)() returned 5 (-0xfffffffb)\n&lt;= fetch input\ndumping 'input record header' (5 bytes)\n0000:  16 03 03 31 c0                                   ...1.\ninput record: msgtype = 22, version = [3:3], msglen = 12736\n=&gt; fetch input\nin_left: 5, nb_want: 12741\nin_left: 5, nb_want: 12741\nssl-&gt;f_recv(_timeout)() returned 2703 (-0xfffff571)\nin_left: 2708, nb_want: 12741\nssl-&gt;f_recv(_timeout)() returned 1400 (-0xfffffa88)\nin_left: 4108, nb_want: 12741\nssl-&gt;f_recv(_timeout)() returned 4200 (-0xffffef98)\nin_left: 8308, nb_want: 12741\nssl-&gt;f_recv(_timeout)() returned 4200 (-0xffffef98)\nin_left: 12508, nb_want: 12741\nssl-&gt;f_recv(_timeout)() returned 233 (-0xffffff17)\n&lt;= fetch input\ndumping 'input record from network' (12741 bytes)\n0af0:  63 6f 6d 82 16 2a 2e 79 6f 75 74 75 62 65 65 64  com..*.youtubeed\n0b00:  75 63 61 74 69 6f 6e 2e 63 6f 6d 82 0f 79 6f 75  ucation.com..you\n0b10:  74 75 62 65 6b 69 64 73 2e 63 6f 6d 82 11 2a 2e  tubekids.com..*.\n0b20:  79 6f 75 74 75 62 65 6b 69 64 73 2e 63 6f 6d 82  youtubekids.com.\n0b30:  05 79 74 2e 62 65 82 07 2a 2e 79 74 2e 62 65 82  .yt.be..*.yt.be.\n0b40:  1a 61 6e 64 72 6f 69 64 2e 63 6c 69 65 6e 74 73  .android.clients\n0b50:  2e 67 6f 6f 67 6c 65 2e 63 6f 6d 82 1b 64 65 76  .google.com..dev\n0b60:  65 6c 6f 70 65 72 2e 61 6e 64 72 6f 69 64 2e 67  eloper.android.g\n0b70:  6f 6f 67 6c 65 2e 63 6e 82 1c 64 65 76 65 6c 6f  oogle.cn..develo\n0b80:  70 65 72 73 2e 61 6e 64 72 6f 69 64 2e 67 6f 6f  pers.android.goo\n0b90:  67 6c 65 2e 63 6e 82 18 73 6f 75 72 63 65 2e 61  gle.cn..source.a\n0ba0:  6e 64 72 6f 69 64 2e 67 6f 6f 67 6c 65 2e 63 6e  ndroid.google.cn\n0bb0:  82 09 67 6f 6f 67 6c 65 2e 61 63 82 0b 2a 2e 67  ..google.ac..*.g\n0bc0:  6f 6f 67 6c 65 2e 61 63 82 09 67 6f 6f 67 6c 65  oogle.ac..google\n0bd0:  2e 61 64 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 61 64  .ad..*.google.ad\n0be0:  82 09 67 6f 6f 67 6c 65 2e 61 65 82 0b 2a 2e 67  ..google.ae..*.g\n0bf0:  6f 6f 67 6c 65 2e 61 65 82 09 67 6f 6f 67 6c 65  oogle.ae..google\n0c00:  2e 61 66 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 61 66  .af..*.google.af\n0c10:  82 09 67 6f 6f 67 6c 65 2e 61 67 82 0b 2a 2e 67  ..google.ag..*.g\n0c20:  6f 6f 67 6c 65 2e 61 67 82 09 67 6f 6f 67 6c 65  oogle.ag..google\n0c30:  2e 61 69 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 61 69  .ai..*.google.ai\n0c40:  82 09 67 6f 6f 67 6c 65 2e 61 6c 82 0b 2a 2e 67  ..google.al..*.g\n0c50:  6f 6f 67 6c 65 2e 61 6c 82 09 67 6f 6f 67 6c 65  oogle.al..google\n0c60:  2e 61 6d 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 61 6d  .am..*.google.am\n0c70:  82 09 67 6f 6f 67 6c 65 2e 61 73 82 0b 2a 2e 67  ..google.as..*.g\n0c80:  6f 6f 67 6c 65 2e 61 73 82 09 67 6f 6f 67 6c 65  oogle.as..google\n0c90:  2e 61 74 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 61 74  .at..*.google.at\n0ca0:  82 09 67 6f 6f 67 6c 65 2e 61 7a 82 0b 2a 2e 67  ..google.az..*.g\n0cb0:  6f 6f 67 6c 65 2e 61 7a 82 09 67 6f 6f 67 6c 65  oogle.az..google\n0cc0:  2e 62 61 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 62 61  .ba..*.google.ba\n0cd0:  82 09 67 6f 6f 67 6c 65 2e 62 65 82 0b 2a 2e 67  ..google.be..*.g\n0ce0:  6f 6f 67 6c 65 2e 62 65 82 09 67 6f 6f 67 6c 65  oogle.be..google\n0cf0:  2e 62 66 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 62 66  .bf..*.google.bf\n0d00:  82 09 67 6f 6f 67 6c 65 2e 62 67 82 0b 2a 2e 67  ..google.bg..*.g\n0d10:  6f 6f 67 6c 65 2e 62 67 82 09 67 6f 6f 67 6c 65  oogle.bg..google\n0d20:  2e 62 69 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 62 69  .bi..*.google.bi\n0d30:  82 09 67 6f 6f 67 6c 65 2e 62 6a 82 0b 2a 2e 67  ..google.bj..*.g\n0d40:  6f 6f 67 6c 65 2e 62 6a 82 09 67 6f 6f 67 6c 65  oogle.bj..google\n0d50:  2e 62 73 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 62 73  .bs..*.google.bs\n0d60:  82 09 67 6f 6f 67 6c 65 2e 62 74 82 0b 2a 2e 67  ..google.bt..*.g\n0d70:  6f 6f 67 6c 65 2e 62 74 82 09 67 6f 6f 67 6c 65  oogle.bt..google\n0d80:  2e 62 79 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 62 79  .by..*.google.by\n0d90:  82 09 67 6f 6f 67 6c 65 2e 63 61 82 0a 67 6f 6f  ..google.ca..goo\n0da0:  67 6c 65 2e 63 61 74 82 0c 2a 2e 67 6f 6f 67 6c  gle.cat..*.googl\n0db0:  65 2e 63 61 74 82 09 67 6f 6f 67 6c 65 2e 63 63  e.cat..google.cc\n0dc0:  82 0b 2a 2e 67 6f 6f 67 6c 65 2e 63 63 82 09 67  ..*.google.cc..g\n0dd0:  6f 6f 67 6c 65 2e 63 64 82 0b 2a 2e 67 6f 6f 67  oogle.cd..*.goog\n0de0:  6c 65 2e 63 64 82 09 67 6f 6f 67 6c 65 2e 63 66  le.cd..google.cf\n0df0:  82 0b 2a 2e 67 6f 6f 67 6c 65 2e 63 66 82 09 67  ..*.google.cf..g\n0e00:  6f 6f 67 6c 65 2e 63 67 82 0b 2a 2e 67 6f 6f 67  oogle.cg..*.goog\n0e10:  6c 65 2e 63 67 82 09 67 6f 6f 67 6c 65 2e 63 68  le.cg..google.ch\n0e20:  82 0b 2a 2e 67 6f 6f 67 6c 65 2e 63 68 82 09 67  ..*.google.ch..g\n0e30:  6f 6f 67 6c 65 2e 63 69 82 0b 2a 2e 67 6f 6f 67  oogle.ci..*.goog\n0e40:  6c 65 2e 63 69 82 09 67 6f 6f 67 6c 65 2e 63 6c  le.ci..google.cl\n0e50:  82 09 67 6f 6f 67 6c 65 2e 63 6d 82 0b 2a 2e 67  ..google.cm..*.g\n0e60:  6f 6f 67 6c 65 2e 63 6d 82 09 67 6f 6f 67 6c 65  oogle.cm..google\n0e70:  2e 63 6e 82 0b 2a 2e 67 6f 6f 67 6c 65 2e 63 6e  .cn..*.google.cn\n0e80:  82 0c 67 6f 6f 67 6c 65 2e 63 6f 2e 61 6f 82 0e  ..google.co.ao..\n0e90:  2a 2e 67 6f 6f 67 6c 65 2e 63 6f 2e 61 6f 82 0c  *.google.co.ao..\n0ea0:  67 6f 6f 67 6c 65 2e 63 6f 2e 62 77 82 0e 2a 2e  google.co.bw..*.\n0eb0:  67 6f 6f 67 6c 65 2e 63 6f 2e 62 77 82 0c 67 6f  google.co.bw..go\n0ec0:  6f 67 6c 65 2e 63 6f 2e 63 6b 82 0e 2a 2e 67 6f  ogle.co.ck..*.go\n0ed0:  6f 67 6c 65 2e 63 6f 2e 63 6b 82 0c 67 6f 6f 67  ogle.co.ck..goog\n0ee0:  6c 65 2e 63 6f 2e 63 72 82 0e 2a 2e 67 6f 6f 67  le.co.cr..*.goog\n0ef0:  6c 65 2e 63 6f 2e 63 72 82 0c 67 6f 6f 67 6c 65  le.co.cr..google\n0f00:  2e 63 6f 2e 68 75 82 0e 2a 2e 67 6f 6f 67 6c 65  .co.hu..*.google\n0f10:  2e 63 6f 2e 68 75 82 0c 67 6f 6f 67 6c 65 2e 63  .co.hu..google.c\n0f20:  6f 2e 69 64 82 0e 2a 2e 67 6f 6f 67 6c 65 2e 63  o.id..*.google.c\n0f30:  6f 2e 69 64 82 0c 67 6f 6f 67 6c 65 2e 63 6f 2e  o.id..google.co.\n0f40:  69 6c 82 0e 2a 2e 67 6f 6f 67 6c 65 2e 63 6f 2e  il..*.google.co.\n0f50:  69 6c 82 0c 67 6f 6f 67 6c 65 2e 63 6f 2e 69 6d  il..google.co.im\n0f60:  82 0e 2a 2e 67 6f 6f 67 6c 65 2e 63 6f 2e 69 6d  ..*.google.co.im\n0f70:  82 0c 67 6f 6f 67 6c 65 2e 63 6f 2e 69 6e 82 0c  ..google.co.in..\n0f80:  67 6f 6f 67 6c 65 2e 63 6f 2e 6a 65 82 0e 2a 2e  google.co.je..*.\n0f90:  67 6f 6f 67 6c 65 2e 63 6f 2e 6a 65 82 0c 67 6f  google.co.je..go\n0fa0:  6f 67 6c 65 2e 63 6f 2e 6a 70 82 0c 67 6f 6f 67  ogle.co.jp..goog\n0fb0:  6c 65 2e 63 6f 2e 6b 65 82 0e 2a 2e 67 6f 6f 67  le.co.ke..*.goog\n0fc0:  6c 65 2e 63 6f 2e 6b 65 82 0c 67 6f 6f 67 6c 65  le.co.ke..google\n0fd0:  2e 63 6f 2e 6b 72 82 0e 2a 2e 67 6f 6f 67 6c 65  .co.kr..*.google\n0fe0:  2e 63 6f 2e 6b 72 82 0c 67 6f 6f 67 6c 65 2e 63  .co.kr..google.c\n0ff0:  6f 2e 6c 73 82 0e 2a 2e 67 6f 6f 67 6c 65 2e 63  o.ls..*.google.c\nhandshake message: msglen = 12736, type = 11, hslen = 12736\n&lt;= read record\npeer certificate #1:\ncert. version     : 3\nserial number     : 96:E8:9D:E5:B2:1E:78:81:0A:00:00:00:00:F6:F2:0F\nissuer name       : C=US, O=Google Trust Services LLC, CN=GTS CA 1C3\nsubject name      : CN=google.com\nissued  on        : 2021-07-26 04:18:36\nexpires on        : 2021-10-18 04:18:35\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=false\nvalue of 'crt-&gt;rsa.N' (2048 bits) is:\n9c cd 5f 60 60 75 64 71 5d 0c 4a 61 02 b4 01 bd\n41 42 4b 29 1b ed e8 d4 a1 02 a6 97 dd 28 3a 87\n74 53 27 0c 09 12 67 22 71 89 58 b7 68 27 a0 f7\n1f d7 1a a9 f9 a2 cc 98 4e 03 52 e2 45 d4 35 a5\n13 2b fb 14 8a 2c d7 c3 54 82 09 58 0b 0f 70 c9\n07 5a ec d5 35 29 22 cb fe a3 5b e8 1d 4b 04 11\nf6 92 ad 1e a4 77 81 78 2d 88 0f a7 9f 23 8c 8b\nf3 9d 65 46 17 79 b8 f5 8d ea df 39 06 56 bb c6\nbc 83 d9 12 b2 71 e5 64 be 69 30 ec 9d 17 6a 9a\nfb b8 2c 00 e8 04 76 3d 30 ae e0 3b 1b 3c ec d4\n10 bf a0 a9 a1 bc 3a 41 f4 5e e3 88 d7 47 b2 03\neb c7 99 8b a2 53 25 03 ba 1a f2 0e 33 07 c8 07\n30 85 4b 08 bc 0b 08 d0 02 e8 5e 88 aa 70 bb 2f\n02 88 fe 9c ec 83 eb 4b b1 54 d0 2a f2 90 d3 62\nf0 28 86 8e 15 e4 7c 0e de 05 94 73 34 ea d6 e0\n1c 57 f7 b9 18 4c f6 3d dc 38 46 2c 64 73 d3 c5\nvalue of 'crt-&gt;rsa.E' (17 bits) is:\n01 00 01\npeer certificate #2:\ncert. version     : 3\nserial number     : 02:03:BC:53:59:6B:34:C7:18:F5:01:50:66\nissuer name       : C=US, O=Google Trust Services LLC, CN=GTS Root R1\nsubject name      : C=US, O=Google Trust Services LLC, CN=GTS CA 1C3\nissued  on        : 2020-08-13 00:00:42\nexpires on        : 2027-09-30 00:00:42\nsigned using      : RSA with SHA-256\nRSA key size      : 2048 bits\nbasic constraints : CA=true, max_pathlen=0\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\next key usage     : TLS Web Server Authentication, TLS Web Client Authentication\nvalue of 'crt-&gt;rsa.N' (2048 bits) is:\nf5 88 df e7 62 8c 1e 37 f8 37 42 90 7f 6c 87 d0\nfb 65 82 25 fd e8 cb 6b a4 ff 6d e9 5a 23 e2 99\nf6 1c e9 92 03 99 13 7c 09 0a 8a fa 42 d6 5e 56\n24 aa 7a 33 84 1f d1 e9 69 bb b9 74 ec 57 4c 66\n68 93 77 37 55 53 fe 39 10 4d b7 34 bb 5f 25 77\n37 3b 17 94 ea 3c e5 9d d5 bc c3 b4 43 eb 2e a7\n47 ef b0 44 11 63 d8 b4 41 85 dd 41 30 48 93 1b\nbf b7 f6 e0 45 02 21 e0 96 42 17 cf d9 2b 65 56\n34 07 26 04 0d a8 fd 7d ca 2e ef ea 48 7c 37 4d\n3f 00 9f 83 df ef 75 84 2e 79 57 5c fc 57 6e 1a\n96 ff fc 8c 9a a6 99 be 25 d9 7f 96 2c 06 f7 11\n2a 02 80 80 eb 63 18 3c 50 49 87 e5 8a ca 5f 19\n2b 59 96 81 00 a0 fb 51 db ca 77 0b 0b c9 96 4f\nef 70 49 c7 5c 6d 20 fd 99 b4 b4 e2 ca 2e 77 fd\n2d dc 0b b6 6b 13 0c 8c 19 2b 17 96 98 b9 f0 8b\nf6 a0 27 bb b6 e3 8d 51 8f bd ae c7 9b b1 89 9d\nvalue of 'crt-&gt;rsa.E' (17 bits) is:\n01 00 01\npeer certificate #3:\ncert. version     : 3\nserial number     : 77:BD:0D:6C:DB:36:F9:1A:EA:21:0F:C4:F0:58:D3:0D\nissuer name       : C=BE, O=GlobalSign nv-sa, OU=Root CA, CN=GlobalSign Root CA\nsubject name      : C=US, O=Google Trust Services LLC, CN=GTS Root R1\nissued  on        : 2020-06-19 00:00:42\nexpires on        : 2028-01-28 00:00:42\nsigned using      : RSA with SHA-256\nRSA key size      : 4096 bits\nbasic constraints : CA=true\nkey usage         : Digital Signature, Key Cert Sign, CRL Sign\nvalue of 'crt-&gt;rsa.N' (4096 bits) is:\nb6 11 02 8b 1e e3 a1 77 9b 3b dc bf 94 3e b7 95\na7 40 3c a1 fd 82 f9 7d 32 06 82 71 f6 f6 8c 7f\nfb e8 db bc 6a 2e 97 97 a3 8c 4b f9 2b f6 b1 f9\nce 84 1d b1 f9 c5 97 de ef b9 f2 a3 e9 bc 12 89\n5e a7 aa 52 ab f8 23 27 cb a4 b1 9c 63 db d7 99\n7e f0 0a 5e eb 68 a6 f4 c6 5a 47 0d 4d 10 33 e3\n4e b1 13 a3 c8 18 6c 4b ec fc 09 90 df 9d 64 29\n25 23 07 a1 b4 d2 3d 2e 60 e0 cf d2 09 87 bb cd\n48 f0 4d c2 c2 7a 88 8a bb ba cf 59 19 d6 af 8f\nb0 07 b0 9e 31 f1 82 c1 c0 df 2e a6 6d 6c 19 0e\nb5 d8 7e 26 1a 45 03 3d b0 79 a4 94 28 ad 0f 7f\n26 e5 a8 08 fe 96 e8 3c 68 94 53 ee 83 3a 88 2b\n15 96 09 b2 e0 7a 8c 2e 75 d6 9c eb a7 56 64 8f\n96 4f 68 ae 3d 97 c2 84 8f c0 bc 40 c0 0b 5c bd\nf6 87 b3 35 6c ac 18 50 7f 84 e0 4c cd 92 d3 20\ne9 33 bc 52 99 af 32 b5 29 b3 25 2a b4 48 f9 72\ne1 ca 64 f7 e6 82 10 8d e8 9d c2 8a 88 fa 38 66\n8a fc 63 f9 01 f9 78 fd 7b 5c 77 fa 76 87 fa ec\ndf b1 0e 79 95 57 b4 bd 26 ef d6 01 d1 eb 16 0a\nbb 8e 0b b5 c5 c5 8a 55 ab d3 ac ea 91 4b 29 cc\n19 a4 32 25 4e 2a f1 65 44 d0 02 ce aa ce 49 b4\nea 9f 7c 83 b0 40 7b e7 43 ab a7 6c a3 8f 7d 89\n81 fa 4c a5 ff d5 8e c3 ce 4b e0 b5 d8 b3 8e 45\ncf 76 c0 ed 40 2b fd 53 0f b0 a7 d5 3b 0d b1 8a\na2 03 de 31 ad cc 77 ea 6f 7b 3e d6 df 91 22 12\ne6 be fa d8 32 fc 10 63 14 51 72 de 5d d6 16 93\nbd 29 68 33 ef 3a 66 ec 07 8a 26 df 13 d7 57 65\n78 27 de 5e 49 14 00 a2 00 7f 9a a8 21 b6 a9 b1\n95 b0 a5 b9 0d 16 11 da c7 6c 48 3c 40 e0 7e 0d\n5a cd 56 3c d1 97 05 b9 cb 4b ed 39 4b 9c c4 3f\nd2 55 13 6e 24 b0 d6 71 fa f4 c1 ba cc ed 1b f5\nfe 81 41 d8 00 98 3d 3a c8 ae 7a 98 37 18 05 95\nvalue of 'crt-&gt;rsa.E' (17 bits) is:\n01 00 01\nx509_verify_cert() returned -9984 (-0x2700)\n! Certificate verification flags 8\n&lt;= parse certificate\nclient state: 4\n=&gt; flush output\n&lt;= flush output\n=&gt; parse server key exchange\n=&gt; read record\n=&gt; fetch input\nin_left: 0, nb_want: 5\nin_left: 0, nb_want: 5\nssl-&gt;f_recv(_timeout)() returned 5 (-0xfffffffb)\n&lt;= fetch input\ndumping 'input record header' (5 bytes)\n0000:  16 03 03 01 4d                                   ....M\ninput record: msgtype = 22, version = [3:3], msglen = 333\n=&gt; fetch input\nin_left: 5, nb_want: 338\nin_left: 5, nb_want: 338\nssl-&gt;f_recv(_timeout)() returned 333 (-0xfffffeb3)\n&lt;= fetch input\ndumping 'input record from network' (338 bytes)\n0000:  16 03 03 01 4d 0c 00 01 49 03 00 17 41 04 b9 f7  ....M...I...A...\n0010:  66 36 7a 2d f9 03 de 69 f7 93 8f 86 6f e6 70 a9  f6z-...i....o.p.\n0020:  47 ab 69 db 43 6f af 72 a7 1f a4 3b 71 0b 44 1f  G.i.Co.r...;q.D.\n0030:  c4 cf 9f 49 e9 2a 46 ed 71 94 94 cb 8c fa c8 0e  ...I.*F.q.......\n0040:  79 9b 1a b1 0f 91 26 1a df dc ee 81 b8 2b 04 01  y.....&amp;......+..\n0050:  01 00 35 69 0f e1 44 e9 a5 df 97 86 95 93 61 c2  ..5i..D.......a.\n0060:  1f a3 a1 cd c3 05 b9 0c 82 49 6c a4 62 8d 5c af  .........Il.b.\\.\n0070:  f7 fc 48 d5 3c 37 ef 17 75 8b 80 43 f2 56 a7 8b  ..H.&lt;7..u..C.V..\n0080:  b4 fd 1a 2e 20 8e b6 9a 96 d7 84 d1 0c 7e 29 60  .... ........~)`\n0090:  ae e9 73 d6 8f dc 51 a6 73 10 6d d2 19 30 5d df  ..s...Q.s.m..0].\n00a0:  70 9c 4c 58 f2 b6 5b 8c 3b b7 b7 74 a3 1c b5 de  p.LX..[.;..t....\n00b0:  c1 0f 0b 99 72 1a e9 c4 03 c3 da 15 20 e4 67 13  ....r....... .g.\n00c0:  dd fe bb 44 21 9a cb 3f a4 f3 83 75 d1 97 96 38  ...D!..?...u...8\n00d0:  67 d9 78 f4 4c b4 d0 0b 7c 50 24 7a d0 7e 48 f5  g.x.L...|P$z.~H.\n00e0:  a2 09 bf 7c 9d 74 2a 81 5f 15 20 8b 80 63 f4 1f  ...|.t*._. ..c..\n00f0:  66 b0 1d 13 60 6c 14 07 f8 8e 24 a5 f3 b2 fa 9d  f...`l....$.....\n0100:  be 8e 76 da 9e 47 ff 71 9d 8b b5 03 6c c5 48 cc  ..v..G.q....l.H.\n0110:  3e fc 4f 4a 05 9d bd d6 69 a6 66 7d e7 32 5b 7d  &gt;.OJ....i.f}.2[}\n0120:  fe 98 04 82 66 9d e9 89 98 97 d9 10 77 26 8c 8e  ....f.......w&amp;..\n0130:  dd a6 7b 68 7e 00 20 ce c5 20 4a 65 d8 7d 97 19  ..{h~. .. Je.}..\n0140:  d9 df b8 e3 9a 30 fe 21 85 db 11 fc 66 88 ca 2e  .....0.!....f...\n0150:  bd 4b                                            .K\nhandshake message: msglen = 333, type = 12, hslen = 333\n&lt;= read record\ndumping 'server key exchange' (329 bytes)\n0000:  03 00 17 41 04 b9 f7 66 36 7a 2d f9 03 de 69 f7  ...A...f6z-...i.\n0010:  93 8f 86 6f e6 70 a9 47 ab 69 db 43 6f af 72 a7  ...o.p.G.i.Co.r.\n0020:  1f a4 3b 71 0b 44 1f c4 cf 9f 49 e9 2a 46 ed 71  ..;q.D....I.*F.q\n0030:  94 94 cb 8c fa c8 0e 79 9b 1a b1 0f 91 26 1a df  .......y.....&amp;..\n0040:  dc ee 81 b8 2b 04 01 01 00 35 69 0f e1 44 e9 a5  ....+....5i..D..\n0050:  df 97 86 95 93 61 c2 1f a3 a1 cd c3 05 b9 0c 82  .....a..........\n0060:  49 6c a4 62 8d 5c af f7 fc 48 d5 3c 37 ef 17 75  Il.b.\\...H.&lt;7..u\n0070:  8b 80 43 f2 56 a7 8b b4 fd 1a 2e 20 8e b6 9a 96  ..C.V...... ....\n0080:  d7 84 d1 0c 7e 29 60 ae e9 73 d6 8f dc 51 a6 73  ....~)`..s...Q.s\n0090:  10 6d d2 19 30 5d df 70 9c 4c 58 f2 b6 5b 8c 3b  .m..0].p.LX..[.;\n00a0:  b7 b7 74 a3 1c b5 de c1 0f 0b 99 72 1a e9 c4 03  ..t........r....\n00b0:  c3 da 15 20 e4 67 13 dd fe bb 44 21 9a cb 3f a4  ... .g....D!..?.\n00c0:  f3 83 75 d1 97 96 38 67 d9 78 f4 4c b4 d0 0b 7c  ..u...8g.x.L...|\n00d0:  50 24 7a d0 7e 48 f5 a2 09 bf 7c 9d 74 2a 81 5f  P$z.~H....|.t*._\n00e0:  15 20 8b 80 63 f4 1f 66 b0 1d 13 60 6c 14 07 f8  . ..c..f...`l...\n00f0:  8e 24 a5 f3 b2 fa 9d be 8e 76 da 9e 47 ff 71 9d  .$.......v..G.q.\n0100:  8b b5 03 6c c5 48 cc 3e fc 4f 4a 05 9d bd d6 69  ...l.H.&gt;.OJ....i\n0110:  a6 66 7d e7 32 5b 7d fe 98 04 82 66 9d e9 89 98  .f}.2[}....f....\n0120:  97 d9 10 77 26 8c 8e dd a6 7b 68 7e 00 20 ce c5  ...w&amp;....{h~. ..\n0130:  20 4a 65 d8 7d 97 19 d9 df b8 e3 9a 30 fe 21 85   Je.}.......0.!.\n0140:  db 11 fc 66 88 ca 2e bd 4b                       ...f....K\nECDH curve: secp256r1\nvalue of 'ECDH: Qp(X)' (256 bits) is:\nb9 f7 66 36 7a 2d f9 03 de 69 f7 93 8f 86 6f e6\n70 a9 47 ab 69 db 43 6f af 72 a7 1f a4 3b 71 0b\nvalue of 'ECDH: Qp(Y)' (255 bits) is:\n44 1f c4 cf 9f 49 e9 2a 46 ed 71 94 94 cb 8c fa\nc8 0e 79 9b 1a b1 0f 91 26 1a df dc ee 81 b8 2b\nServer used SignatureAlgorithm 1\nServer used HashAlgorithm 4\ndumping 'signature' (256 bytes)\n0000:  35 69 0f e1 44 e9 a5 df 97 86 95 93 61 c2 1f a3  5i..D.......a...\n0010:  a1 cd c3 05 b9 0c 82 49 6c a4 62 8d 5c af f7 fc  .......Il.b.\\...\n0020:  48 d5 3c 37 ef 17 75 8b 80 43 f2 56 a7 8b b4 fd  H.&lt;7..u..C.V....\n0030:  1a 2e 20 8e b6 9a 96 d7 84 d1 0c 7e 29 60 ae e9  .. ........~)`..\n0040:  73 d6 8f dc 51 a6 73 10 6d d2 19 30 5d df 70 9c  s...Q.s.m..0].p.\n0050:  4c 58 f2 b6 5b 8c 3b b7 b7 74 a3 1c b5 de c1 0f  LX..[.;..t......\n0060:  0b 99 72 1a e9 c4 03 c3 da 15 20 e4 67 13 dd fe  ..r....... .g...\n0070:  bb 44 21 9a cb 3f a4 f3 83 75 d1 97 96 38 67 d9  .D!..?...u...8g.\n0080:  78 f4 4c b4 d0 0b 7c 50 24 7a d0 7e 48 f5 a2 09  x.L...|P$z.~H...\n0090:  bf 7c 9d 74 2a 81 5f 15 20 8b 80 63 f4 1f 66 b0  .|.t*._. ..c..f.\n00a0:  1d 13 60 6c 14 07 f8 8e 24 a5 f3 b2 fa 9d be 8e  ..`l....$.......\n00b0:  76 da 9e 47 ff 71 9d 8b b5 03 6c c5 48 cc 3e fc  v..G.q....l.H.&gt;.\n00c0:  4f 4a 05 9d bd d6 69 a6 66 7d e7 32 5b 7d fe 98  OJ....i.f}.2[}..\n00d0:  04 82 66 9d e9 89 98 97 d9 10 77 26 8c 8e dd a6  ..f.......w&amp;....\n00e0:  7b 68 7e 00 20 ce c5 20 4a 65 d8 7d 97 19 d9 df  {h~. .. Je.}....\n00f0:  b8 e3 9a 30 fe 21 85 db 11 fc 66 88 ca 2e bd 4b  ...0.!....f....K\ndumping 'parameters hash' (32 bytes)\n0000:  32 98 e1 d5 59 ea f6 9a b7 84 61 63 7a 30 02 3b  2...Y.....acz0.;\n0010:  81 0e 05 ff 0c 65 58 ff ff db 35 10 eb 9b 6b af  .....eX...5...k.\n&lt;= parse server key exchange\nclient state: 5\n=&gt; flush output\n&lt;= flush output\n=&gt; parse certificate request\n=&gt; read record\n=&gt; fetch input\nin_left: 0, nb_want: 5\nin_left: 0, nb_want: 5\nssl-&gt;f_recv(_timeout)() returned 5 (-0xfffffffb)\n&lt;= fetch input\ndumping 'input record header' (5 bytes)\n0000:  16 03 03 00 04                                   .....\ninput record: msgtype = 22, version = [3:3], msglen = 4\n=&gt; fetch input\nin_left: 5, nb_want: 9\nin_left: 5, nb_want: 9\nssl-&gt;f_recv(_timeout)() returned 4 (-0xfffffffc)\n&lt;= fetch input\ndumping 'input record from network' (9 bytes)\n0000:  16 03 03 00 04 0e 00 00 00                       .........\nhandshake message: msglen = 4, type = 14, hslen = 4\n&lt;= read record\ngot no certificate request\n&lt;= parse certificate request\nclient state: 6\n=&gt; flush output\n&lt;= flush output\n=&gt; parse server hello done\n=&gt; read record\nreuse previously read message\n&lt;= read record\n&lt;= parse server hello done\nclient state: 7\n=&gt; flush output\n&lt;= flush output\n=&gt; write certificate\n&lt;= skip write certificate\nclient state: 8\n=&gt; flush output\n&lt;= flush output\n=&gt; write client key exchange\nvalue of 'ECDH: Q(X)' (256 bits) is:\nbd 96 78 41 2d ca 42 49 36 df a9 33 d4 c1 d5 a3\nbb d9 28 6b 38 ec 80 85 31 e9 00 df f6 2e bc 70\nvalue of 'ECDH: Q(Y)' (255 bits) is:\n5f ed ad b8 c2 68 4e ea 4a b4 d1 53 6b dc ab 35\nb2 54 86 2d 41 1d 37 3c 49 cd c0 cf 42 9a fa bf\nvalue of 'ECDH: z' (255 bits) is:\n59 99 2b fc 4e 26 fc 71 1e bf d3 d3 1d 06 8b 80\nae 85 ad 54 a0 1d 35 e2 8f 3c 30 08 9b 1b 72 6b\n=&gt; write handshake message\n=&gt; write record\noutput record: msgtype = 22, version = [3:3], msglen = 70\ndumping 'output record sent to network' (75 bytes)\n0000:  16 03 03 00 46 10 00 00 42 41 04 bd 96 78 41 2d  ....F...BA...xA-\n0010:  ca 42 49 36 df a9 33 d4 c1 d5 a3 bb d9 28 6b 38  .BI6..3......(k8\n0020:  ec 80 85 31 e9 00 df f6 2e bc 70 5f ed ad b8 c2  ...1......p_....\n0030:  68 4e ea 4a b4 d1 53 6b dc ab 35 b2 54 86 2d 41  hN.J..Sk..5.T.-A\n0040:  1d 37 3c 49 cd c0 cf 42 9a fa bf                 .7&lt;I...B...\n=&gt; flush output\nmessage length: 75, out_left: 75\nssl-&gt;f_send() returned 75 (-0xffffffb5)\n&lt;= flush output\n&lt;= write record\n&lt;= write handshake message\n&lt;= write client key exchange\nclient state: 9\n=&gt; flush output\n&lt;= flush output\n=&gt; write certificate verify\n=&gt; derive keys\ndumping 'premaster secret' (32 bytes)\n0000:  59 99 2b fc 4e 26 fc 71 1e bf d3 d3 1d 06 8b 80  Y.+.N&amp;.q........\n0010:  ae 85 ad 54 a0 1d 35 e2 8f 3c 30 08 9b 1b 72 6b  ...T..5..&lt;0...rk\nciphersuite = TLS-ECDHE-RSA-WITH-AES-256-GCM-SHA384\ndumping 'master secret' (48 bytes)\n0000:  0a 60 e4 64 7e b3 e4 19 4b 58 94 29 27 f4 24 42  .`.d~...KX.)'.$B\n0010:  08 2f ba 1e 1a e2 65 f5 b4 f3 25 83 20 65 33 e3  ./....e...%. e3.\n0020:  e8 a2 2d 41 9f b5 82 f1 31 9b 34 64 d3 2b a1 92  ..-A....1.4d.+..\ndumping 'random bytes' (64 bytes)\n0000:  61 23 aa 0e bb 86 eb b9 26 89 6e 33 b3 88 c6 1b  a#......&amp;.n3....\n0010:  8d 7a 90 a4 30 4c d5 42 44 4f 57 4e 47 52 44 01  .z..0L.BDOWNGRD.\n0020:  ff ff ff ff 8b 1e 54 53 28 36 79 78 6f 59 e9 21  ......TS(6yxoY.!\n0030:  6b 81 7b f3 e5 d6 ce d2 70 be ff aa c6 20 0a 6d  k.{.....p.... .m\ndumping 'key block' (256 bytes)\n0000:  c2 0e 17 ad 93 68 01 63 3a 2d 7a 35 35 1d dc e7  .....h.c:-z55...\n0010:  3b 9e 12 47 b1 f6 ee 4a 07 e2 96 2e 93 1a 20 c9  ;..G...J...... .\n0020:  ba 6a 10 96 cc 60 f9 f1 e0 89 6b 9f c4 b5 30 d1  .j...`....k...0.\n0030:  63 91 dd 48 ce f4 f9 f0 42 db 5b c4 05 3e 6b 9a  c..H....B.[..&gt;k.\n0040:  57 89 f2 5a 50 b1 32 e4 44 83 2f 75 1d 9d 76 e6  W..ZP.2.D./u..v.\n0050:  e9 cd 7c f8 01 13 79 0a 0e 75 11 fb 9f 16 60 dd  ..|...y..u....`.\n0060:  1a 80 16 d4 a2 fe c2 dd a7 52 90 f0 c5 88 8a 0e  .........R......\n0070:  48 9a 0a 6f 36 68 e7 91 06 71 8b ad 55 e3 50 18  H..o6h...q..U.P.\n0080:  e8 2a 65 9d 5f a3 2f b0 00 ff b7 b4 a0 7f 9c 2f  .*e._./......../\n0090:  63 02 1f 16 ed e6 4e 63 31 46 a2 23 46 74 13 51  c.....Nc1F.#Ft.Q\n00a0:  f0 b2 0f e4 45 de df 97 49 6d 27 1c 78 35 08 31  ....E...Im'.x5.1\n00b0:  70 82 ea 88 1d 68 dc 1b 78 65 70 17 fd 4f 99 1e  p....h..xep..O..\n00c0:  ea 7e 2b f0 96 05 b6 34 d0 19 0c 1b 0f af f3 e1  .~+....4........\n00d0:  26 d8 c1 ee 66 0e 2b 24 d2 70 a6 88 e8 ca 9d b2  &amp;...f.+$.p......\n00e0:  4b 3a 3f 39 81 ee 88 c3 fb 1e 2b 00 5e d1 5d 76  K:?9......+.^.]v\n00f0:  f7 31 cc 57 57 a4 33 79 7f 64 d4 ab 5c 0d 98 d5  .1.WW.3y.d..\\...\nkeylen: 32, minlen: 24, ivlen: 12, maclen: 0\n&lt;= derive keys\n&lt;= skip write certificate verify\nclient state: 10\n=&gt; flush output\n&lt;= flush output\n=&gt; write change cipher spec\n=&gt; write handshake message\n=&gt; write record\noutput record: msgtype = 20, version = [3:3], msglen = 1\ndumping 'output record sent to network' (6 bytes)\n0000:  14 03 03 00 01 01                                ......\n=&gt; flush output\nmessage length: 6, out_left: 6\nssl-&gt;f_send() returned 6 (-0xfffffffa)\n&lt;= flush output\n&lt;= write record\n&lt;= write handshake message\n&lt;= write change cipher spec\nclient state: 11\n=&gt; flush output\n&lt;= flush output\n=&gt; write finished\n=&gt; calc  finished tls sha384\ndumping 'finished sha512 state' (64 bytes)\n0000:  ca ed c7 cd de 2a 4e 54 58 3f ba 63 39 a2 5b 75  .....*NTX?.c9.[u\n0010:  59 5e b3 3b 10 c7 2d 9e 0f f5 91 7a b0 f6 c5 28  Y^.;..-....z...(\n0020:  ef 36 95 e6 8f e1 08 70 7b 63 3d 5c c0 1b d2 4a  .6.....p{c=\\...J\n0030:  3e 46 55 46 8b 88 98 16 24 cb 6e ea d5 9e 27 ab  &gt;FUF....$.n...'.\ndumping 'calc finished result' (12 bytes)\n0000:  6f ae 89 bc c8 9e 69 fe c3 11 64 b3              o.....i...d.\n&lt;= calc  finished\nswitching to new transform spec for outbound data\n=&gt; write handshake message\n=&gt; write record\n=&gt; encrypt buf\ndumping 'before encrypt: output payload' (16 bytes)\n0000:  14 00 00 0c 6f ae 89 bc c8 9e 69 fe c3 11 64 b3  ....o.....i...d.\ndumping 'additional data for AEAD' (13 bytes)\n0000:  00 00 00 00 00 00 00 00 16 03 03 00 10           .............\ndumping 'IV used (internal)' (12 bytes)\n0000:  57 89 f2 5a 00 00 00 00 00 00 00 00              W..Z........\ndumping 'IV used (transmitted)' (8 bytes)\n0000:  00 00 00 00 00 00 00 00                          ........\nbefore encrypt: msglen = 24, including 0 bytes of padding\ndumping 'after encrypt: tag' (16 bytes)\n0000:  64 da 96 53 d3 dc 30 ce ec e6 5b a8 e7 db cd 4c  d..S..0...[....L\n&lt;= encrypt buf\noutput record: msgtype = 22, version = [3:3], msglen = 40\ndumping 'output record sent to network' (45 bytes)\n0000:  16 03 03 00 28 00 00 00 00 00 00 00 00 81 7b a6  ....(.........{.\n0010:  fc f9 fe 50 49 2f 3a 50 27 47 76 2a 53 64 da 96  ...PI/:P'Gv*Sd..\n0020:  53 d3 dc 30 ce ec e6 5b a8 e7 db cd 4c           S..0...[....L\n=&gt; flush output\nmessage length: 45, out_left: 45\nssl-&gt;f_send() returned 45 (-0xffffffd3)\n&lt;= flush output\n&lt;= write record\n&lt;= write handshake message\n&lt;= write finished\nclient state: 12\n=&gt; flush output\n&lt;= flush output\n=&gt; parse change cipher spec\n=&gt; read record\n=&gt; fetch input\nin_left: 0, nb_want: 5\nin_left: 0, nb_want: 5\nssl-&gt;f_recv(_timeout)() returned 0 (-0x0000)\nmbedtls_ssl_fetch_input() returned -29312 (-0x7280)\nssl_get_next_record() returned -29312 (-0x7280)\nmbedtls_ssl_read_record() returned -29312 (-0x7280)\n&lt;= handshake\nfailed\n ! mbedtls_ssl_handshake returned -0x7280\n</code></pre>\n"
    }, {
        "tags": ["json", "base64", "iot"],
        "is_answered": false,
        "view_count": 18,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1629715250,
        "creation_date": 1629715250,
        "question_id": 68891169,
        "link": "https://stackoverflow.com/questions/68891169/why-use-base64-in-iot-use-cases",
        "title": "Why use Base64 in IoT use cases?",
        "body": "<p>I've noticed a lot of payload data encoded as Base64 before transmission in many IoT use cases.  Particularly in LPWAN (LoRa, LTE-M, NBIoT Sigfox, etc).\nFor simplicity sake, sending JSON payloads makes a lot of sense.  Also it's my understanding that Base64 encoding adds some additional weight to the payload size, which for low bandwidth use cases it seems counter intuitive.</p>\n<p>Could someone explain the benefits of using Base64 in IoT (or otherwise) applications?\nThanks!</p>\n"
    }, {
        "tags": ["c", "embedded", "iot", "contiki", "contiki-ng"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1629455088,
        "creation_date": 1629455088,
        "question_id": 68860751,
        "link": "https://stackoverflow.com/questions/68860751/contiki-ng-tsch-network-creation-takes-a-really-long-time",
        "title": "Contiki-NG: tsch network creation takes a really long time",
        "body": "<p>Im currently developing a low power IoT node based on a TI CC1350 launchpad board. I'm using Contiki-NG with tsch to let the nodes connect to themselves and the network coordinator.</p>\n<p>My problem is that the first connection between a node and the coordinator takes way too long (in the 10s of minutes) which makes debugging the network near impossible as each time a node is reset I have to wait a long time before trying my changes.</p>\n<p>Is there any settings I could change in the contiki configuration to allow the connection to happen more quickly?</p>\n"
    }, {
        "tags": ["iot", "azure-iot-hub", "azure-iot-edge"],
        "is_answered": false,
        "view_count": 33,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1628712044,
        "creation_date": 1628695599,
        "last_edit_date": 1628708549,
        "question_id": 68744865,
        "link": "https://stackoverflow.com/questions/68744865/duplicate-message-on-iot-edge-hub-send-to-cloud",
        "title": "Duplicate Message On IOT Edge Hub Send To Cloud",
        "body": "<p>I get a duplicate message on Cloud, the duplicate message has not come regularly  but it comes any time where I check on my module it sends only one message to the IoT edge hub every 60 seconds, I also check with cloud receive time also I share my excel sheet with sending message time and cloud receive time\n<a href=\"https://i.stack.imgur.com/UqEaC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UqEaC.png\" alt=\"Screenshot of an Excel sheet\" /></a></p>\n"
    }, {
        "tags": ["go", "google-cloud-platform", "rsa", "iot", "google-cloud-iot"],
        "is_answered": true,
        "view_count": 1308,
        "favorite_count": 2,
        "score": 0,
        "last_activity_date": 1626785975,
        "creation_date": 1560613885,
        "last_edit_date": 1560670456,
        "question_id": 56611893,
        "link": "https://stackoverflow.com/questions/56611893/gcp-iot-core-rejects-this-rsa-pem-public-key-with-an-error",
        "title": "GCP IoT core rejects this RSA_PEM public key with an error",
        "body": "<p>I try to develop an automation to register new IoT device with public RSA pem certificate but I have a problem which is I don't know the reason.</p>\n\n<p>The problem is RSA_PEM public pem is generated my automation is rejected by GCP IoT Server with an error. That error is \"The key data for the device credential in position 1 is invalid. Make sure the format is correct: Invalid RS256 public key\"</p>\n\n<p>When I debug the my code, the pem public certificate looks fine. But I am not sure that.</p>\n\n<p>I am sharing go code that generate private and public certificates in paired.</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package cert\n\nimport (\n    \"bytes\"\n    \"crypto/rand\"\n    \"crypto/rsa\"\n    \"crypto/x509\"\n    \"encoding/pem\"\n\n    \"io\"\n)\n\ntype CertificateRSA struct {\n    Private io.Reader\n    Public  io.Reader\n}\n\nfunc Create() (*CertificateRSA, error) {\n\n    bitSize := 2048\n    key, err := rsa.GenerateKey(rand.Reader, bitSize)\n    if err != nil {\n        return nil, err\n    }\n\n    var privateKey = &amp;pem.Block{\n        Type:  \"RSA PRIVATE KEY\",\n        Bytes: x509.MarshalPKCS1PrivateKey(key),\n    }\n\n    var priBuff bytes.Buffer\n    err = pem.Encode(&amp;priBuff, privateKey)\n    if err != nil {\n        return nil, err\n    }\n\n    // asn1Bytes := x509.MarshalPKCS1PublicKey(&amp;key.PublicKey)\n    asn1Bytes := x509.MarshalPKCS1PublicKey(&amp;key.PublicKey)\n\n    var publicKey = &amp;pem.Block{\n        Type:  \"PUBLIC KEY\",\n        Bytes: asn1Bytes,\n    }\n\n    var pubBuff bytes.Buffer\n\n    err = pem.Encode(&amp;pubBuff, publicKey)\n    return &amp;CertificateRSA{\n        Private: &amp;priBuff,\n        Public:  &amp;pubBuff,\n    }, err\n}\n\n</code></pre>\n\n<p>Can you see any problem in my code ?</p>\n\n<p>And this code can generates certificates like as these:</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA0FGWENPInhIfCLDTqCFKFsyrvmzKsEjJtHEL0Tqh0LtHDWG5\nSh7MT7/x/xNAFc00zmgGG+PPaJDP/7gkGJitRAXcJOlKwlowgmVTf+QGwH81pq3o\nZNRd0mEXbF0EuPBRNt/9TzkZPAlPDGruMCiMq9LWsoIflx+u/3UmXgsyMQTs5vSM\nz4T5VCELHGCtfZfBrDAP19KzwjFEUTEzX+Llotp0mO6+cRCslVvSK3xd8KIk2cOm\nAXEmCavZnwuVsqCVmNZFoQZvFszisMf5cXZRDstKCGsqDgqIGM5dMMrBS92CqZ4u\nj6h9zbMG7J9oXsVmVFiQ++hS0TLJdWwMD+uhWQIDAQABAoIBAAbKIfH6dRdxz8Eg\nwkVAkIGduhtCwHhuZuSSqqfvGUcMU4yEGt3nkxEmWGTP487SGV6A1XIjQqdN0Pms\nrsB+eWc2Ka6qS915wwr88nPAotezTbRZBrICmew5beICRh0g+ASp2D+0xLXIN+NX\nuNuo9qzC+mxnAVCTn8iDsPRvuPsP9vJSy5zIzPWURdPBQ3Ny1pbj+odqwDdUw8q7\nFfUmGHC7a5oKex3vxDhDL8OPc3KjynFJdm1YqUagLzppDHMZtI2rNAYfWrkrJVB7\nzlX3m0hUDDrvHbQBiqGUj2qI2MqgrFlcK0HSryJdCz4tVdYY3qBi/tZrwOAvnSkv\nzNFT6AECgYEA9veJpGwUYdRhWyo05xsatDJ+KvBpizi66Iu2Lu+fRQUuwYaC0DSV\nBMr1ktbJzbgbu4XDNrJ8GKrqka06vGjaYVhw1C56LU83hHsckTx+K3fpb9wkFamE\ngCZG3uAqflLsEPZ6xPHLe1U+SDZfghLrH90JYi7tTULReAVy5zVs8iECgYEA1/Aq\n6ls9kPtJWLEU299WdNGYy5Fx1N8oUj5sjYTfPf/27OeBXWg+CKBIhXk534z9pwqq\nLUs7NbmqhuocuxFtE7oxdwqXqUR7qYUdpVuRZ8EmVvBuUGxI1MG6MMKxHxSSpTs5\n3tTDAd2WlwPX3jbqAj2WOiL2T97cXNjYyKxiuDkCgYBbI0RnKf9njtGSrAOz2XvE\nTfHjdK7uUrQfBxfnQER9WwlDH5l8rjrj9uYjFyKHyU5qqFU/BSTokYJY2h2X0/Xr\nAJE6rCAoQliRikEjk7hX4DuELTAf0lv0UqvKqdzkm0NEi0EJFtXpoK6IRZB/Vu3v\n50kEM58c6PCWIyShEEUxIQKBgQCg63qf0UTNMWaUcMqxm/sq7TNnqMjisTa0K47r\n27Qd2Q1juJZATLnF5eSFizSkssYoYJs3S9QhEm7RQdANXEwkImJQaxVgcAeT6f6Q\nxu9SGa9/pIcg6cFQw9oEEmK6XbN27O8Qbw+v6Tka6yNIlzXGW60DQCC8nsErc/IB\nge3DiQKBgA3183wzRLj7oZD/KJHW+BY0Y6ljZ8EQQ5anc3RFsQrJ48MdPtRNvC49\nOe0T2lRznVdiPcGY8DKlBMYXQ4jiXZxpWmM8jNkJYPBhx9rq8zBDESo8DKSFd1Jo\nlNADlBGDEPYgxG29hnSOrBf5TI1Fkj15RVZOJ79uaefp98ACIgkl\n-----END RSA PRIVATE KEY-----\n</code></pre>\n\n<pre><code>-----BEGIN PUBLIC KEY-----\nMIIBCgKCAQEA0FGWENPInhIfCLDTqCFKFsyrvmzKsEjJtHEL0Tqh0LtHDWG5Sh7M\nT7/x/xNAFc00zmgGG+PPaJDP/7gkGJitRAXcJOlKwlowgmVTf+QGwH81pq3oZNRd\n0mEXbF0EuPBRNt/9TzkZPAlPDGruMCiMq9LWsoIflx+u/3UmXgsyMQTs5vSMz4T5\nVCELHGCtfZfBrDAP19KzwjFEUTEzX+Llotp0mO6+cRCslVvSK3xd8KIk2cOmAXEm\nCavZnwuVsqCVmNZFoQZvFszisMf5cXZRDstKCGsqDgqIGM5dMMrBS92CqZ4uj6h9\nzbMG7J9oXsVmVFiQ++hS0TLJdWwMD+uhWQIDAQAB\n-----END PUBLIC KEY-----\n</code></pre>\n"
    }, {
        "tags": ["javascript", "ibm-cloud", "iot", "node-red", "watson-iot"],
        "is_answered": false,
        "view_count": 35,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1625550326,
        "creation_date": 1625520116,
        "last_edit_date": 1625550326,
        "question_id": 68262225,
        "link": "https://stackoverflow.com/questions/68262225/node-red-humidity-and-temperature-application",
        "title": "Node Red Humidity and Temperature application",
        "body": "<p>So i have set up my watson iot node with my function node which has the code\nand i have set up Data transferred card on my Watson Iot service and i am injecting the node but the data transferred is still 0 what am i doing wrong?</p>\n<p><img src=\"https://i.stack.imgur.com/FOJ8P.png\" alt=\"Node Red Iot device flow on my PC\" /></p>\n<pre><code>// Array of simulated temperatures\nvar temp1 = [15, 17, 18.5, 20, 21.5, 23, 24, 22.2, 19, 1];\n// Array of simulated relative humidities\nvar humidity1 = [50, 55, 61, 68, 65, 60, 80, 70, 62, 53];\nvar counter1 = context.get('counter1') || 0;\ncounter1 = counter1 + 1;\nif (counter1 &gt; 9)\n    counter1 = 0;\ncontext.set('counter1', counter1);\nmsg = {\n    payload:\n    {\n        d: {\n            &quot;temperature&quot;: temp1[counter1],\n            &quot;humidity&quot;: humidity1[counter1]\n        }\n    }\n};\nreturn msg;\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 25,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1625347764,
        "creation_date": 1625234335,
        "last_edit_date": 1625347764,
        "question_id": 68226479,
        "link": "https://stackoverflow.com/questions/68226479/aws-iot-multiple-device-connection-at-the-same-time-problem",
        "title": "AWS IOT multiple device connection at the same time problem",
        "body": "<p>I successfully integrated ESP8266 01 and AWS IOT core. It's working fine. But when I tried to connect second device then the first connection got closed.</p>\n<p>To fix the issue I tried the followings:</p>\n<ol>\n<li>different things</li>\n<li>different certificates</li>\n<li>different topics</li>\n</ol>\n<p>But these not helped to fix my problem.</p>\n<p>Another thing is that each and every thing shows the same endpoint.</p>\n<p>So how to connect multiple devices at the same time?</p>\n"
    }, {
        "tags": ["udp", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 692,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1624952836,
        "creation_date": 1538558592,
        "last_edit_date": 1538567341,
        "question_id": 52623794,
        "link": "https://stackoverflow.com/questions/52623794/mqtt-sn-payload-size",
        "title": "MQTT-SN Payload size",
        "body": "<p>What is the maximum payload length of MQTT-SN packet over UDP? The UDP does support 65507 bytes of data on its payload, but I wanted know what's the max size of MQTT-SN payload. Also, can the data be compressed in the MQTT-SN payload?  </p>\n"
    }, {
        "tags": ["c", "sockets", "udp", "iot", "mbed"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1623785602,
        "creation_date": 1623785602,
        "question_id": 67992414,
        "link": "https://stackoverflow.com/questions/67992414/mbed-udpsocket-recvfrom-method-dont-receive-any-data-before-calling-sendto",
        "title": "Mbed UDPSocket &#39;recvfrom&#39; method don&#39;t receive any data before calling &#39;sendto&#39; method in MbedOS",
        "body": "<p>I'm building an IOT device which need to listen incoming UDP messages when it is turned on. I have encountered the problem that the &quot;recvfrom&quot; method does not accept any incoming messages before I call the &quot;sendto&quot; method. But after calling &quot;sendto&quot;, &quot;recvfrom&quot;, although it accepts the correct messages, returns the address (stored in 'bufferAddr') that was used for sending, although it should have returned the sender's address.</p>\n<pre><code>UDPSocket UDPsock;\n\nSocketAddress sockAddrUDP;\nSocketAddress bufferAddr;\n\nUDPsock.open(wifi);\nsockAddrUDP.set_ip_address(wifi-&gt;get_ip_address());\nsockAddrUDP.set_port(8095);\nUDPsock.bind(8090);\n\nchar connBuffer[32];\n\nUDPsock.sendto(sockAddrUDP,&quot;INIT&quot;, 32);\nUDPsock.recvfrom(&amp;bufferAddr, connBuffer, sizeof(connBuffer));\n</code></pre>\n<p>'wifi' is my WiFi interface, which works fine.</p>\n"
    }, {
        "tags": ["firebase", "firebase-realtime-database", "iot", "esp32", "arduino-ide"],
        "is_answered": false,
        "view_count": 115,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1623739334,
        "creation_date": 1623735378,
        "last_edit_date": 1623739334,
        "question_id": 67980559,
        "link": "https://stackoverflow.com/questions/67980559/firebase-sometimes-dont-send-data-to-esp32",
        "title": "Firebase sometimes dont send data to ESP32",
        "body": "<p>a digital dimmer,programmed in the ESP32 with the IDE of ARDUINO, this dimmer is controlled by an app, the app is made in MIT App inventor, the problem is when i modify a little bit the code, I load the new program, after that the ESP32 stops receiving data from firebase or firebase stops sending it, but if I send data from the app to firebase, this one receives I know it because changes the value of the variables, by the way I will put my code to demonstrate an example, so i hope you can help me, or say me what is wrong or for why reason failed the communication Firebase ESP32.</p>\n<pre><code>#include &lt;WiFi.h&gt;\n#include &quot;FirebaseESP32.h&quot;\n\n#define FIREBASE_HOST &quot;link of to firebase&quot;\n#define FIREBASE_AUTH &quot;AUTH OF FIREBASE&quot;\n\n#define WIFI_SSID &quot;NAME OF NETWORK\n#define WIFI_PASSWORD &quot;PASSWORD&quot;\n\n\nFirebaseData firebaseData;\n\n#define LEDC_CHANNEL_0     0    // use first channel of 16 channels (started from zero)\n#define LEDC_TIMER_8_BIT   8    // use 8 bit precission for LEDC timer\n#define LEDC_BASE_FREQ     5000 // use 5000 Hz as a LEDC base frequency\n#define LED_PIN            15    // PWM\n\n\n\nString nodo = &quot;/Sensores&quot;;\nbool iterar = true;\nString  MYINCOMINGDATA;\nString  MYINCOMINGDATA1;\nint SHINE= 250;    //TO CONTROL THE BRIGHT \n\nvoid setup() \n{\n\n    Serial.begin(115200);\n    ledcSetup(LEDC_CHANNEL_0, LEDC_BASE_FREQ, LEDC_TIMER_8_BIT); // Setup timer and attach timer to a led pin\n  ledcAttachPin(LED_PIN, LEDC_CHANNEL_0);\n\n pinMode(2, OUTPUT);\n pinMode(4, OUTPUT);\n  MYINCOMINGDATA = &quot;&quot;;\n  MYINCOMINGDATA1 == &quot;&quot;;\n\n  Serial.println();\n\n  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);\n  Serial.print(&quot;Conectado al Wi-Fi&quot;);\n  while (WiFi.status() != WL_CONNECTED)\n  {\n    Serial.print(&quot;.&quot;);\n    delay(300);\n  }\n  Serial.println();\n\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);\n  Firebase.reconnectWiFi(true);\n   Serial.println(&quot;1&quot;); //CONFIRMATION TO FIREBASE\n}\n\n\nvoid loop() \n{\n    while(iterar){\n       \n        Firebase.getInt(firebaseData, nodo + &quot;/sensor1&quot;);\n        //Serial.println(firebaseData.intData());\n        delay(1000);\n        Firebase.getString(firebaseData, nodo + &quot;/sensor2&quot;);\n        //Serial.println(firebaseData.stringData());\n        if (Firebase.getString(firebaseData, nodo + &quot;/sensor2&quot;)) {\n    MYINCOMINGDATA = (firebaseData.stringData());\n    if (MYINCOMINGDATA == &quot;1&quot;) \n   {   digitalWrite(2,HIGH);\n      Serial.println(&quot;ON&quot;);  // \n    delay(100);  \n        SHINE= SHINE- 10;\n    if (SHINE== 170) {\n    Firebase.setString(firebaseData, nodo + &quot;/sensor2&quot;, &quot;0&quot;);} \n    delay(100);   \n   if (SHINE== 90) {\n    Firebase.setString(firebaseData, nodo + &quot;/sensor2&quot;, &quot;0&quot;);}\n  if (SHINE&lt;= 0) {  //***EXAMPLE IF I CHANGE THE VALUE TO &lt;=90 OR fewer values other than zero the ESP32, stop receiving data, even changing in FIREBASE manually, dont work.***\n     SHINE= 0;}\n    }\n   \n }\nif (Firebase.getString(firebaseData, nodo + &quot;/sensor3&quot;)) {\n    MYINCOMINGDATA1 = (firebaseData.stringData());\n    if (MYINCOMINGDATA1 == &quot;1&quot;) \n   {   digitalWrite(4,HIGH);\n      Serial.println(&quot;ON&quot;);  \n    delay(100);  \n        SHINE= SHINE+ 10;   ***//EXAMPLE IF I CHANGE THE VALUE of +10 to +30 or higher values the ESP32, stop receiving data, even changing in FIREBASE                         manually, dont work.***\nif (SHINE== 80) {\n    Firebase.setString(firebaseData, nodo + &quot;/sensor3&quot;, &quot;0&quot;);}\n    //if (SHINE == 180) {\n    //Firebase.setString(firebaseData, nodo + &quot;/sensor3&quot;, &quot;0&quot;);}      \n   if (SHINE&gt;= 255) {\n     SHINE= 255;}\n    } \n }\n\n  Serial.println(&quot;T3=&quot; + String(digitalRead(22)) + &quot; T0=&quot; + String(digitalRead(23)) + &quot; Brillo=&quot; + String(brillo));\n\n  ledcWrite(LEDC_CHANNEL_0, brillo);\n \n        }  \n }// End Loop\n</code></pre>\n"
    }, {
        "tags": ["c", "embedded", "iot", "microcontroller", "microprocessors"],
        "is_answered": true,
        "view_count": 91,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1623682483,
        "creation_date": 1623678258,
        "question_id": 67971404,
        "link": "https://stackoverflow.com/questions/67971404/for-the-mcu-stm32f103c8t6-what-is-the-boundry-address-for-reset-and-clock-cont",
        "title": "For the MCU STM32F103C8T6 : What is the boundry address for reset and clock control registers",
        "body": "<p>What is difference between address and boundry address,how to find the reset registers address and clock control register address using datasheet.\n<a href=\"https://www.mouser.in/datasheet/2/389/cd00161566-1796535.pdf\" rel=\"nofollow noreferrer\">https://www.mouser.in/datasheet/2/389/cd00161566-1796535.pdf</a>\nDATA SHEET LINK</p>\n"
    }, {
        "tags": ["c", "iot", "hardware"],
        "is_answered": true,
        "view_count": 56,
        "favorite_count": 0,
        "closed_date": 1621231000,
        "score": -3,
        "last_activity_date": 1621207065,
        "creation_date": 1621205520,
        "question_id": 67562191,
        "link": "https://stackoverflow.com/questions/67562191/does-anyone-know-the-amount-of-resources-that-a-c-program-that-handles-1080-x-19",
        "title": "Does anyone know the amount of resources that a C program that handles 1080 x 1920 pixel images may require?",
        "body": "<p>I am developing a project that consists of extracting text from images and then placing them in a .txt file and later converting that .txt into an mp3 that will be played by some speakers. My problem is that I do not know what type of microcontroller will be able to carry out all these tasks taking into account that I want it to be as economical as possible.</p>\n"
    }, {
        "tags": ["python", "timestamp", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 52,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620328718,
        "creation_date": 1620032040,
        "last_edit_date": 1620328718,
        "question_id": 67366052,
        "link": "https://stackoverflow.com/questions/67366052/handling-late-mqtt-messages",
        "title": "Handling late MQTT messages",
        "body": "<p>I'm making a Python program that sends and receives data using MQTT. The sending device is often portable and might not have a reliable connection, so it's very much possible for messages to arrive late.</p>\n<p>For the program to function correctly, the messages need to arrive in a somewhat timely fashion, say 20 seconds or so. If the messages arrive later than that then some special handling needs to happen.</p>\n<p>My problem is determining if a message is late or not, and if so by how much. The first thing that comes to my mind is for the publisher to add a timestamp to the message that the subscriber can then check, but that depends on the publisher and subscriber having a synchronized clock. There is no guarantee that all of the users of this program will have accurate system times. There also isn't necessarily a guarantee of having admin access to correct the system time.</p>\n<p>Another thought was to use ntplib or something like that to apply a timestamp from an NTP server at the moment of publishing, but this also depends on having a reliable internet connection, which is the problem I'm trying to solve in the first place.</p>\n<p>Is there another way to get synchronized time between publisher and subscriber? Another way to determine how late a message is that I'm not thinking of?</p>\n<h2>UPDATE</h2>\n<p>My thought was to get a time offset from an NTP server on connect, then apply that offset to the timestamps generated from time.time(). For example:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import ntplib\n\ntime_offset = 0\nntp_client = ntplib.NTPClient()\n\ndef update_time_offset():\n    global time_offset\n    try:\n        resp = ntp_client.request('pool.ntp.org')\n        time_offset = resp.offset\n        logger.info(f&quot;Time offset set to {time_offset}.&quot;)\n        return True\n    except:\n        logger.warn(&quot;Unable to update time offset.&quot;)\n        return update_time_offset()\n\n\ndef on_connect(client, userdata, flags, rc):   \n    t = Thread(target=update_time_offset)\n    t.daemon = True\n    t.start()\n</code></pre>\n<p>The publish function:</p>\n<pre class=\"lang-py prettyprint-override\"><code>    def publish(message):\n        now = time.time()\n        timestamp = now + time_offset\n        payload = json.dumps({&quot;message&quot;: message, &quot;timestamp&quot;: timestamp})\n        mqtt_client.publish(&quot;topic_name&quot;, payload, qos=1)\n        print(&quot;Published to MQTT.&quot;)\n\n</code></pre>\n<p>And the subscribe function:</p>\n<pre class=\"lang-py prettyprint-override\"><code>    def _new_message(self, client, userdata, message):\n        payload = json.loads(message.payload.decode())\n        now_corrected = time.time() + time_offset\n        message_transit_time = round(now_corrected - payload[&quot;timestamp&quot;], 1)\n        message_data = payload[&quot;message&quot;]\n        stripped_message = &quot; &quot;.join(message_data.split())\n        print(f&quot;Message {stripped_message} transit time: {message_transit_time}.&quot;)\n        \n</code></pre>\n<p>This should have worked in theory, but I ran into the following problem: some users run the program on boot on devices like raspberry pi. A raspberry pi doesn't have a hardware clock, so the system time is incorrect at boot until updated by ntpd. My program was getting a time offset before the system time was updated, resulting in wildly incorrect transit times. I think for now, rather than add more complexity to my code, I will trust that the users system times are relatively accurate and see how I do.</p>\n"
    }, {
        "tags": ["iot", "contiki"],
        "is_answered": false,
        "view_count": 12,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1619705397,
        "creation_date": 1619705397,
        "question_id": 67319086,
        "link": "https://stackoverflow.com/questions/67319086/how-does-contiki-use-uip-send-to-send-packet",
        "title": "How does contiki use uip_send to send packet",
        "body": "<p>all.As the title says,when I read source code,i find this function, it looks like only copy data into uip_sappdata,but I wanna know how to really send these data to the port in another ipv4 address.</p>\n<pre><code>enter code here\n    void\nuip_send(const void *data, int len)\n{\n  int copylen;\n  copylen = MIN(len, UIP_BUFSIZE - UIP_LLH_LEN - UIP_TCPIP_HLEN -\n        (int)((char *)uip_sappdata - (char *)&amp;uip_buf[UIP_LLH_LEN + \nUIP_TCPIP_HLEN]));\n  if(copylen &gt; 0) {\n    uip_slen = copylen;\n    if(data != uip_sappdata) {\n      memcpy(uip_sappdata, (data), uip_slen);\n    }\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["python", "iot", "communication", "modbus", "pymodbus"],
        "is_answered": false,
        "view_count": 96,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1618996588,
        "creation_date": 1618981425,
        "last_edit_date": 1618996588,
        "question_id": 67189566,
        "link": "https://stackoverflow.com/questions/67189566/trying-to-read-data-from-modbus-rtu-device-in-pycharm-using-python-and-usb-conve",
        "title": "Trying to read data from modbus RTU device in Pycharm using python and USB Converter",
        "body": "<p>I have one modbus RTU based device. Parameters are Slave id 1 , Baud rate 9600, parity none, Stop bit 1, Read input register address 31001, counts 1, COM Port 4. The registers can be read successfully in ModScan32 as shown in the screenshot below:\n<img src=\"https://i.stack.imgur.com/ny5y2.png\" alt=\"response rec from slab device in modscan32 software\" /></p>\n<p>When I try to read the same register using pymodbus I can connect successfully (<code>Client.connect()</code> returns true) but I receive an error when running <code>Client.resd_input_registers</code> as shown in the image below:\n<img src=\"https://i.stack.imgur.com/iLW5T.png\" alt=\"image is of code and its response\" /></p>\n"
    }, {
        "tags": ["bots", "iot", "slack"],
        "is_answered": true,
        "view_count": 3966,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1618867076,
        "creation_date": 1465368077,
        "question_id": 37695020,
        "link": "https://stackoverflow.com/questions/37695020/can-anyone-tell-me-how-can-i-get-read-receipts-of-messages-on-slack",
        "title": "Can anyone tell me how can I get read receipts of messages on Slack?",
        "body": "<p>I am developing a bot for Slack.\nCan anyone help me with the message read receipts?</p>\n"
    }, {
        "tags": ["java", "websocket", "iot", "esp32"],
        "is_answered": false,
        "view_count": 27,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1618445233,
        "creation_date": 1618445233,
        "question_id": 67100577,
        "link": "https://stackoverflow.com/questions/67100577/problem-with-socket-java-server-and-esp32-client",
        "title": "Problem with socket (java server) and (esp32 client)",
        "body": "<p>i'm trying make a server socket java and esp32 client socket talk but only works one time, after the first time, not work more. if i reset java application work more one time gain, i test with a java client and works well, Somebody help? I don't find the problem, my code below.\nthaks<br />\npackage socket;</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic class Server {\n\npublic static void main(String args[]) {\n    try {\n\n            ServerSocket server = new ServerSocket(80);\n            System.out.println(&quot;Server ok on port 80&quot;);\n            while(true){\n            Socket cliente = server.accept();\n            System.out.println(&quot;Client connected from IP &quot; + cliente.getInetAddress().getHostAddress());\n            InputStreamReader inputStreamReader = new InputStreamReader(cliente.getInputStream());\n            OutputStreamWriter outputStreamWriter = new OutputStreamWriter(cliente.getOutputStream());\n            BufferedReader bfr = new BufferedReader(inputStreamReader);\n            BufferedWriter bfw = new BufferedWriter(outputStreamWriter);\n\n            while (true) {\n                String str = bfr.readLine();\n                if (str != null) {\n                    System.err.println(&quot;client say: &quot; + str);\n\n                    bfw.write(&quot;received&quot;);\n                    bfw.newLine();\n                    bfw.flush();\n\n                    if (str.equalsIgnoreCase(&quot;by&quot;)) {\n                        break;\n                    }\n                }\n            }\n            bfr.close();\n            server.close();\n            }\n    } catch (IOException ex) {\n        Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>esp32 code</p>\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;WiFiMulti.h&gt;\n\nWiFiMulti WiFiMulti;\n\nvoid setup()\n{\n    Serial.begin(115200);\n    delay(10);\n\n    // We start by connecting to a WiFi network\n    WiFiMulti.addAP(&quot;TP-Link_3757&quot;, &quot;@ap401mocelin&quot;);\n\n    Serial.println();\n    Serial.println();\n    Serial.print(&quot;Waiting for WiFi... &quot;);\n\n    while(WiFiMulti.run() != WL_CONNECTED) {\n        Serial.print(&quot;.&quot;);\n        delay(500);\n    }\n\n    Serial.println(&quot;&quot;);\n    Serial.println(&quot;WiFi connected&quot;);\n    Serial.println(&quot;IP address: &quot;);\n    Serial.println(WiFi.localIP());\n\n    delay(500);\n}\n\n\nvoid loop()\n{\n//    const uint16_t port = 80;\n//    const char * host = &quot;192.168.1.1&quot;; // ip or dns\n    const uint16_t port = 80;\n    const char * host = &quot;192.168.0.114&quot;; // ip or dns\n\n    Serial.print(&quot;Connecting to &quot;);\n    Serial.println(host);\n\n    // Use WiFiClient class to create TCP connections\n    WiFiClient client;\n\n    if (!client.connect(host, port)) {\n        Serial.println(&quot;Connection failed.&quot;);\n        Serial.println(&quot;Waiting 5 seconds before retrying...&quot;);\n        delay(5000);\n        return;\n    }\n\n    // This will send a request to the server\n    //uncomment this line to send an arbitrary string to the server\n    //client.print(&quot;Send this data to the server&quot;);\n    //uncomment this line to send a basic document request to the server\n    client.print(&quot;GET /index.html HTTP/1.1\\n\\n&quot;);\n\n  int maxloops = 0;\n\n  //wait for the server's reply to become available\n  while (!client.available() &amp;&amp; maxloops &lt; 1000)\n  {\n    maxloops++;\n    delay(1); //delay 1 msec\n  }\n  if (client.available() &gt; 0)\n  {\n    //read back one line from the server\n    String line = client.readStringUntil('\\r');\n    Serial.println(line);\n    client.flush();\n    client.stop();\n  }\n  else\n  {\n    Serial.println(&quot;client.available() timed out &quot;);\n  }\n\n    Serial.println(&quot;Closing connection.&quot;);\n    client.flush();\n    client.stop();\n\n    Serial.println(&quot;Waiting 5 seconds before restarting...&quot;);\n    delay(5000);\n}\n</code></pre>\n"
    }, {
        "tags": ["c", "casting", "embedded", "iot", "uint8t"],
        "is_answered": true,
        "view_count": 143,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1617700179,
        "creation_date": 1617328175,
        "last_edit_date": 1617700179,
        "question_id": 66913540,
        "link": "https://stackoverflow.com/questions/66913540/how-to-convert-a-uint8-t-array-to-a-character-array-in-c",
        "title": "How to convert a uint8_t array to a character array in C?",
        "body": "<p>I have a <code>uint8_t</code> array which I want to be able to convert to a char array.\ni.e. <code>uint_8 myInput [4] = {0, 233, 3, 1};</code></p>\n<p>Which in bits it corresponds to: <code>00000000 00000011 11101001 00000001</code></p>\n<p>And I would like to have an array of characters: <code>char myChar [10] ={2,5,6,2,5,7};</code> which is the equivalent number.</p>\n<p>I was able to create a solution: <a href=\"https://onlinegdb.com/DjBLdmz73\" rel=\"nofollow noreferrer\">MySolution</a>:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;     /* strtol */\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n\nint my_uint8_t_to_char (uint8_t givenData[]);\n\n\nint main ()\n    {\n    \n      uint8_t testArray[4];\n      uint32_t monitor_counter;\n      char sendBuffer[10];\n      monitor_counter = 256257;\n    \n    // Here we create our array of uint8_t\n      memcpy (testArray, &amp;monitor_counter, sizeof (monitor_counter));\n    \n    // We flip the order of the bits\n      for (int i = 0; i &lt; 4 / 2; i++)\n        {\n          int temp = testArray[i];\n          testArray[i] = testArray[4 - 1 - i];\n          testArray[4 - 1 - i] = temp;\n        }\n    \n    //Call the function that converts the uint8_t to an integer value\n    int beforeSend = my_uint8_t_to_char(testArray);\n    printf (&quot;\\nHere it is: %d&quot;,beforeSend);\n   \n    \n    sprintf(sendBuffer, &quot;%d&quot;, beforeSend);\n    // for ( int i=0; i&lt; 10;i++)\n    printf(&quot;\\nConverted character: %s&quot;,sendBuffer);\n      \n      \n    \n      return 0;\n    }\n    \n\nint my_uint8_t_to_char (uint8_t givenData[])\n    {\n    \n      char biggerArrayToSaveOctades[32];\n      int n, c, k, i, w;\n      unsigned int arr1[8];\n      int arrTemp[8];\n      long long bigBinaryString;\n    \n    \n    \n      int j;\n      int index;\n      const int length_A = 8;\n      \n      char astr[length_A*10];\n      char astr2[length_A*10];\n      char astr3[length_A*10];\n      char astr4[length_A*10];\n      printf(&quot;\\nSIZE: %d&quot;,sizeof(astr4));\n    \n      // In every loop we get one of the 4 integers from the uint8_t array and convert it to binary character \n      for (i = 0; i &lt; 4; i++)\n        {\n\n          n = givenData[i];\n    \n          for (c = 7; c &gt;= 0; c--)\n        {\n          k = n &gt;&gt; c;\n    \n          if (k &amp; 1)\n            {\n              arr1[c] = 1;\n            }\n          else\n            {\n              arr1[c] = 0;\n            }\n        }\n    \n    \n          /*Flip the bits order */\n          for (int w = 0; w &lt; 8 / 2; w++)\n        {\n          int temp = arr1[w];\n          arr1[w] = arr1[8 - 1 - w];\n          arr1[8 - 1 - w] = temp;\n        }\n\n    \n    // in each case we append into the biggerArrayToSaveOctades the bitstrings\n          switch (i)\n        {\n    \n        case 0:\n    \n          j = 0;\n          index = 0;\n    \n          for (j = 0; j &lt; length_A; j++)\n            {\n              index += sprintf (&amp;astr[index], &quot;%d&quot;, arr1[j]);\n            }\n    \n          for (w = 0; w &lt; 8; w++)\n            biggerArrayToSaveOctades[w] = astr[w];\n    \n          break;\n    \n        case 1:\n          j = 0;\n          index = 0;\n    \n          for (j = 0; j &lt; length_A; j++)\n            {\n              index += sprintf (&amp;astr2[index], &quot;%d&quot;, arr1[j]);\n            }\n    \n          j = 0;\n          for (w = 8; w &lt; 16; w++)\n            {\n              biggerArrayToSaveOctades[w] = astr2[j];\n              j++;\n            }\n    \n          break;\n    \n        case 2:\n          j = 0;\n          index = 0;\n    \n          for (j = 0; j &lt; length_A; j++)\n            {\n              index += sprintf (&amp;astr3[index], &quot;%d&quot;, arr1[j]);\n            }\n    \n          j = 0;\n          for (w = 16; w &lt; 24; w++)\n            {\n              biggerArrayToSaveOctades[w] = astr3[j];\n              j++;\n            }\n    \n          break;\n    \n        case 3:\n          j = 0;\n          index = 0;\n    \n          for (j = 0; j &lt; length_A; j++)\n            {\n              index += sprintf (&amp;astr4[index], &quot;%d&quot;, arr1[j]);\n            }\n    \n          j = 0;\n          for (w = 24; w &lt; 32; w++)\n            {\n              biggerArrayToSaveOctades[w] = astr4[j];\n              j++;\n            }\n          break;\n        }\n    \n    \n        }\n     //Convert the bitstring to integer\n      int result = (int) strtol (biggerArrayToSaveOctades, NULL, 2);\n    \n      return result;\n    }\n</code></pre>\n<p>but unfortunately I have some issues with the creation of the <code>char astr[length_A*10];</code> with the ISO since I am using an IoT device and also I believe that my solution it's pretty complicated and not efficient.</p>\n<p>Is there any way of doing that ?</p>\n"
    }, {
        "tags": ["php", "binary", "hex", "iot"],
        "is_answered": true,
        "view_count": 88,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1615741279,
        "creation_date": 1615670206,
        "question_id": 66618623,
        "link": "https://stackoverflow.com/questions/66618623/unpack-hex-encoded-binary-data-in-php",
        "title": "Unpack hex-encoded binary data in PHP",
        "body": "<p>We're collecting data from a partner's IoT devices and the data comes encoded in a hex string like <code>1C000000010028</code> which contains binary data:</p>\n<ul>\n<li>Byte 0 bit 0 Boolean</li>\n<li>Byte 0 bit 1 Boolean</li>\n<li>Byte 0 bit 2 Boolean</li>\n<li>Byte 0 bit 3 Boolean</li>\n<li>Byte 0 bits 4-7 UInt4</li>\n<li>Bytes 1-2 bits 0-15 UInt16</li>\n<li>Byte 3 bits 0-7 UInt8</li>\n<li>Bytes 4-5 bits 0-15 UInt16</li>\n<li>Byte 6 bits 0-7 UInt8</li>\n</ul>\n<p>I have never worked with this kind of data and am wondering how to decode / unpack this in PHP. I was guessing that <a href=\"https://www.php.net/manual/de/function.unpack.php\" rel=\"nofollow noreferrer\">https://www.php.net/manual/de/function.unpack.php</a> would be my friend but I just don't get it. Any help would be much appreciated, thanks!</p>\n"
    }, {
        "tags": ["c", "iot", "microcontroller", "i2c"],
        "is_answered": false,
        "view_count": 75,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1615134978,
        "creation_date": 1607467113,
        "last_edit_date": 1607468032,
        "question_id": 65207965,
        "link": "https://stackoverflow.com/questions/65207965/reading-long-register-data-from-an-i2c-bus-of-a-microcontroller",
        "title": "Reading long register data from an I2C bus of a microcontroller",
        "body": "<p>I'm trying to connect a BME280 temperature sensor to an A9G microcontroller with custom firmware. Both devices support the I2C protocol and I have found the developer's library for the sensor. The only problem is, I can't seem to implement the callbacks that the library requires correctly with the A9G I2C API.</p>\n<p>The library wants 3 function callbacks - for reading, writing and waiting.\nThe OS has these functions for reading and writing on the I2C bus: <a href=\"https://ai-thinker-open.github.io/GPRS_C_SDK_DOC/en/c-sdk/function-api/iic.html\" rel=\"nofollow noreferrer\">I2C Reference</a>.</p>\n<p>I tried to implement the write like this:</p>\n<pre><code>int8_t Bme280_I2C_Write(uint_8t, reg_addr, const uint8_t* data,\n                        uint32_t len, uint8_t address)\n{\n    I2C_Error_t res = I2C_WriteMem(I2C2, address, reg_addr, len,\n                                   (uint8_t*)data, len, I2C_DEFAULT_TIME_OUT);\n    return res != I2C_ERROR_NONE;\n}\n</code></pre>\n<p>And it seems to work fine. I also implemented the read function in a similar way - using <code>I2C_ReadMem</code>, and it works for reading up to 4 bytes from a register. <strong>But the docs say <code>I2C_ReadMem</code> can only read up to 4 bytes and the library wants to read &gt;20 bytes at a time.</strong></p>\n<p>There are functions like I2C_WriteRawByte, I2C_ReadRawByte, I2C_Receive and I tried to implement the I2C protocol with them but I keep getting errors like LINE_BUSY and reading only 0xFF. I don't know exactly what the functions combined with the command parameters do, which adds to the confusion. For example, if I send an I2C_CMD_MASK_MASTER_START, I'm also supposed to give a byte to send. But what should that byte be? Here's one of my attempts (error handling omitted for clarity):</p>\n<pre><code>int8_t Bme280_I2C_Read(uint8_t reg_addr, uint8_t* data, uint32_t len, void* intf_ptr)\n{\n    Bme280* pThis = intf_ptr;\n\n    I2C_Error_t result;\n\n    if (len &lt;= 4)\n    {\n        // This works.\n        I2C_ReadMem(pThis-&gt;i2c, pThis-&gt;address, reg_addr, len,\n                    data, len, I2C_DEFAULT_TIME_OUT);\n        return 0;\n    }\n\n    // START\n    I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                     I2C_CMD_MASK_MASTER_START, I2C_DEFAULT_TIME_OUT);\n\n    // ADDRESS + W\n    I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                     I2C_CMD_MASK_MASTER_WRITE, I2C_DEFAULT_TIME_OUT);\n\n    // REGISTER\n    I2C_WriteRawByte(pThis-&gt;i2c, reg_addr,\n                     I2C_CMD_MASK_MASTER_WRITE, I2C_DEFAULT_TIME_OUT);\n\n    // RESTART\n    I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                     I2C_CMD_MASK_MASTER_START, I2C_DEFAULT_TIME_OUT);\n\n    // ADDRESS + R\n    I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                     I2C_CMD_MASK_MASTER_READ, I2C_DEFAULT_TIME_OUT);\n\n    // READ\n    result = I2C_Receive(pThis-&gt;i2c, pThis-&gt;address,\n                         data, len, I2C_DEFAULT_TIME_OUT);\n    /*uint32_t read = 0;\n    while(read++ &lt; len)\n    {\n        *data = I2C_ReadRawByte(pThis-&gt;i2c, I2C_CMD_MASK_MASTER_READ,\n                                I2C_DEFAULT_TIME_OUT);\n        I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                         I2C_CMD_MASK_MASTER_NACK, I2C_DEFAULT_TIME_OUT);\n        data++;\n    }*/\n    \n\n    // STOP\n    I2C_WriteRawByte(pThis-&gt;i2c, pThis-&gt;address,\n                     I2C_CMD_MASK_MASTER_STOP, I2C_DEFAULT_TIME_OUT);\n    return 0;\n}\n</code></pre>\n"
    }, {
        "tags": ["linux", "iot", "qemu", "fuzzing"],
        "is_answered": true,
        "view_count": 387,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1612870967,
        "creation_date": 1612754704,
        "question_id": 66095549,
        "link": "https://stackoverflow.com/questions/66095549/fork-server-handshake-failed-error-when-fuzzing-an-arm-binary-without-source-c",
        "title": "&quot;Fork server handshake failed&quot; Error when fuzzing an arm binary without source code",
        "body": "<p>anybody here?\nI have been working on using afl-qemu mode fuzzing IoT binaries. But I got a &quot;Fork server handshake failed&quot; problem when started to run the binary. I have read the previous related session but none of those fix my problem.</p>\n<p>The information of the binary is here:</p>\n<pre><code>./bin/busybox: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-uClibc.so.0, stripped\n</code></pre>\n<p>Through my tests, only the version of qemu bigger than 4.1.0 can cope with the '-L' parameter successfully. So I upgrade the qemu version through editing the build_qemu_support.sh. What needs to be mention is that I comment out a few lines of code in order to deal with the error that occurred running.</p>\n<pre><code>#patch -p1 &lt;../patches/elfload.diff || exit 1\n#patch -p1 &lt;../patches/cpu-exec.diff || exit 1\n#patch -p1 &lt;../patches/syscall.diff || exit 1\n</code></pre>\n<p>After setting the QEMU_LD_PREFIX and AFL_PATH, I tried the suggestion like 'afl-showmap -m none -o fuzz_out/out.txt -Q ./bin/busybox cat' and it turned out to be fine.</p>\n<pre><code>root@ubuntu:squashfs-root# afl-showmap -m none -o fuzz_out/out.txt -Q ./bin/busybox cat\nafl-showmap 2.52b by &lt;lcamtuf@google.com&gt;\n[*] Executing './bin/busybox'...\n\n-- Program output begins --\n</code></pre>\n<p>But when I tried command 'afl-fuzz -m none -i fuzz_in/ -o fuzz_out/ -Q ./bin/busybox cat @@' , it reported the error shown below.</p>\n<pre><code>root@ubuntu:squashfs-root# afl-fuzz -m none -i fuzz_in/ -o fuzz_out/ -Q ./bin/busybox cat @@\nafl-fuzz 2.52b by &lt;lcamtuf@google.com&gt;\n[+] You have 4 CPU cores and 2 runnable tasks (utilization: 50%).\n[+] Try parallel jobs - see /usr/local/share/doc/afl/parallel_fuzzing.txt.\n[*] Checking CPU core loadout...\n[+] Found a free CPU core, binding to #0.\n[*] Checking core_pattern...\n[*] Setting up output directories...\n[+] Output directory exists but deemed OK to reuse.\n[*] Deleting old session data...\n[+] Output dir cleanup successful.\n[*] Scanning 'fuzz_in/'...\n[+] No auto-generated dictionary tokens to reuse.\n[*] Creating hard links for all input files...\n[*] Validating target binary...\n[*] Attempting dry run with 'id:000000,orig:testcase'...\n[*] Spinning up the fork server...\n\n[-] Hmm, looks like the target binary terminated before we could complete a\n    handshake with the injected code. Perhaps there is a horrible bug in the\n    fuzzer. Poke &lt;lcamtuf@coredump.cx&gt; for troubleshooting tips.\n\n[-] PROGRAM ABORT : Fork server handshake failed\n         Location : init_forkserver(), afl-fuzz.c:2253\n</code></pre>\n<p>Could anybody tell me where is the problem? Is there anything to do with my upgrade of qemu? Thanks so much!!</p>\n"
    }, {
        "tags": ["iot", "opc", "siemens", "cnc"],
        "is_answered": false,
        "view_count": 12,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1611902709,
        "creation_date": 1611902709,
        "question_id": 65949940,
        "link": "https://stackoverflow.com/questions/65949940/where-i-can-find-proper-descriptions-for-parameters-listed-by-sinumeric-opc-serv",
        "title": "Where I can find proper descriptions for parameters listed by Sinumeric OPC server?",
        "body": "<p>I am new to CNC machines, I am doing research on communication with sinumeric and display them fairly on dashboards.</p>\n<p>I could establish connection with siemens sinumeric 282D OPC UA\nsuccessfully, and could read all the data\nI want to know how long the machine was utilised properly in the given time frame. For that I was considering to use <code>ProgramStatus</code> variable.</p>\n<blockquote>\n<p>I am able to read value '5' as program status, but I dont know what 5\nmean? is it running or idle or any other state. How can I go about\nsolving this problem? please kindly guide me here.</p>\n</blockquote>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-s3", "iot"],
        "is_answered": false,
        "view_count": 238,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1611844349,
        "creation_date": 1568408160,
        "question_id": 57930250,
        "link": "https://stackoverflow.com/questions/57930250/using-a-value-of-a-key-within-payload-of-mqtt-message-for-aws-iot-s3-rule",
        "title": "Using a value of a key within payload of MQTT message for AWS IoT S3 rule",
        "body": "<p>I would like to create an S3 key using values from a key within the payload. </p>\n\n<p>So far I am able to make a key using</p>\n\n<p><code>${topic()}/${timestamp()}.json</code> </p>\n\n<p>This results in a long chain of sub folders that I don't want. Instead I have the key \"data_type\" in my \"payload\" key whose value I would like to use. I tried doing</p>\n\n<p><code>${payload().data_type()}/${timestamp()}.json</code> </p>\n\n<p>but it is not working. </p>\n\n<p>Any ideas on how I could achieve this?</p>\n"
    }, {
        "tags": ["python", "iot", "firmware", "squashfs"],
        "is_answered": false,
        "view_count": 119,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1611705671,
        "creation_date": 1611701314,
        "last_edit_date": 1611705671,
        "question_id": 65910396,
        "link": "https://stackoverflow.com/questions/65910396/extracting-firmware-with-python-offset-question",
        "title": "Extracting firmware with python (offset question)",
        "body": "<p><a href=\"https://i.stack.imgur.com/Nk74t.jpg\" rel=\"nofollow noreferrer\">The Binwalk output of modified firmware</a></p>\n<p>for some reason whenever I try to extract a firmware with the identified parts using python, I get so many additional xz compressed data.</p>\n<p>Here's my code in the python script, where it is (name, offset, and size)</p>\n<pre><code>    FirmwarePart(&quot;uimage_kernel&quot;, 0x0, 0x40),\n    FirmwarePart(&quot;lzma&quot;,0x40,0x18A143),\n    FirmwarePart(&quot;squashfs&quot;, 0x18A143,0)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ot5Hr.png\" rel=\"nofollow noreferrer\">Binwalk output of original firmware</a></p>\n<p>Here's the Binwalk output of the original firmware binary.</p>\n<p>I have a feeling I'm not calculating the size of the last component &quot;squashfs&quot; correctly. Sorry if this is unclear, I'm new to all this.</p>\n<p><a href=\"https://i.stack.imgur.com/eTRkx.jpg\" rel=\"nofollow noreferrer\">The header added firmware binary file</a></p>\n"
    }, {
        "tags": ["mqtt", "iot", "ibm-watson", "watson-iot"],
        "is_answered": false,
        "view_count": 50,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1611139529,
        "creation_date": 1611057116,
        "last_edit_date": 1611139529,
        "question_id": 65790979,
        "link": "https://stackoverflow.com/questions/65790979/mqtt-suscribe-with-ibm-watson-iot",
        "title": "mqtt suscribe with IBM Watson Iot",
        "body": "<p>My problem is the following: I have to receive from mqtt with IBM Watson Iot a message with a subscribe function but in the message variable hasn't set the value that would be set with a callback function onArrivedMessage.\nWhat can I do to fix the problem?\nThis is my code in javascript:</p>\n<pre><code>   function connect() {\n          var hostname = [...omissis...];\n          var port = useSSL ? mqttPortSecure : mqttPort;\n          var clientId = [...omissis...];\n          var lastWillTopic = topiqReq;\n          var lastWillMessageVal = &quot;&quot;;\n          var lastWillQos = 0;\n          var lastWillRetain = false;\n          password = [...omissis...];\n\n          client = new Paho.MQTT.Client(hostname, port, clientId);\n\n          console.log(&quot;Connecting to Server: [Host: &quot;, hostname, &quot;, Port: &quot;, port, &quot;, Path: &quot;, client.path, &quot;, ID: &quot;, clientId, &quot;]&quot;);\n\n          // set callback handlers\n          client.onConnectionLost = onConnectionLost;\n          client.onMessageArrived = onMessageArrived;\n\n          var options = {\n            invocationContext: { host: hostname, port: port, path: client.path, clientId: clientId },\n            timeout: 100,\n            keepAliveInterval: 100,\n            cleanSession: true,\n                        password: password,\n            useSSL: useSSL,\n            onSuccess: onConnectSuccess,\n            onFailure: onConnectFailure\n          };\n\n          \n          if (lastWillTopic.length &gt; 0) {\n            var lastWillMessage = new Paho.MQTT.Message(lastWillMessageVal);\n            lastWillMessage.destinationName = lastWillTopic;\n            lastWillMessage.qos = lastWillQos;\n            lastWillMessage.retained = lastWillRetain;\n            options.willMessage = lastWillMessage;\n          }\n\n          // connect the client\n          client.connect(options);\n          changeConnectionStatusImage(&quot;../src_mqtt/public/images/connecting.svg&quot;);\n              document.getElementById(&quot;connection&quot;).innerHTML = &quot;Connecting&quot;;\n              console.log(&quot;Connecting device to IoT Foundation...&quot;);\n        }\n\n        connect();\n}\n\nfunction onConnectSuccess(){\n    // The device connected successfully\n    console.log(&quot;Connected Successfully!&quot;);\n    isConnected = true;\n    changeConnectionStatusImage(&quot;../src_mqtt/public/images/connected.svg&quot;);\n    document.getElementById(&quot;connection&quot;).innerHTML = &quot;Connected&quot;;\nsubscribe();\n}\n\nfunction subscribe() {\n  var topic = topicReq;\n  var qos = &quot;0&quot;;\n  console.log(&quot;INFO&quot;, &quot;Subscribing to: [Topic: &quot;, topic, &quot;, QoS: &quot;, qos, &quot;]&quot;);\n  client.subscribe(topic, { qos: Number(qos) });\n}\n\n// called when a message arrives\nfunction onMessageArrived(message) {\nconsole.log(&quot;onMessageArrived:&quot;+message.payloadString);\nclient.disconnect();\n}\n</code></pre>\n"
    }, {
        "tags": ["if-statement", "iot", "esp8266", "nodemcu"],
        "is_answered": false,
        "view_count": 346,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1610036475,
        "creation_date": 1609967239,
        "last_edit_date": 1610019301,
        "question_id": 65603369,
        "link": "https://stackoverflow.com/questions/65603369/multi-thread-problem-with-loop-on-esp8266",
        "title": "Multi thread problem with loop on ESP8266",
        "body": "<p>I'm using Nodemcu for my IoT project and I should use PHP with that. I'm trying to changing funcs, when I press the button on web site. My func1 has 1000ms delay with millis. func2 has a 360000ms delay, so I can't change func2 to func1 when I want to. I tried so many ways, how can I do that?</p>\n<p>My code is like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void func1() {\n  // code for manuel GPIO control \n  // millis....\n}\n\nvoid func2() {\n  // code for automatic GPIO control \n  // millis....\n}\n\nvoid loop() {\n  // millis....\n  if (payload == 1) {\n    func1();\n  } else if (payload == 0) {\n    func2();\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["iot", "lora", "lorawan"],
        "is_answered": true,
        "view_count": 1372,
        "favorite_count": 1,
        "score": 4,
        "last_activity_date": 1609575984,
        "creation_date": 1515001333,
        "question_id": 48082462,
        "link": "https://stackoverflow.com/questions/48082462/what-prevents-lorawan-nodes-accepting-the-same-join-accept-message-in-otaa",
        "title": "What prevents LoRaWAN nodes accepting the same JOIN ACCEPT message in OTAA",
        "body": "<p>I surely must have missed something from my reading of the LoRaWAN specifications, because this seems too bad to be true. Please tell me I'm delirious :) </p>\n\n<p>The following seems to happen in my testbed when I have many OTAA nodes and I can't figure out what would prevent it:</p>\n\n<ol>\n<li><p>multiple nodes in my network issues JOIN REQUEST at the same time (this can happen by chance or if they are powered on simultaneously)</p></li>\n<li><p>gateway receives (at least) one of them successfully and responds with a JOIN ACCEPT assigning a DevAddr, thinking one node did a join req</p></li>\n<li><p><em>all the nodes</em> that did the JOIN REQUEST will receive the ACCEPT and think the JOIN ACCEPT was directed at them, and gladly sets the same received DevAddr</p></li>\n</ol>\n\n<p>From here on, we have several nodes that all think they joined successfully and all think they are unique but have the same DevAddr. Needless to say, the system gets severely messed up.</p>\n\n<p>Reading the LoRaWAN specification, the JOIN REQUEST has a node unique DevEUI, a network unique AppEUI, and a random DevNonce (to prevent replay attacks). The MIC is calculated from these and the secret network unique AppKey stored in the node.</p>\n\n<p>The JOIN ACCEPT has, as far as I can see, no data in it which is derived from the JOIN REQUEST, and therefore it can't be directed to a specific node in the case that many nodes are currently listening to an ACCEPT.</p>\n\n<p>It has: AppNonce NetID DevAddr DLSettings RxDelay CFList, and is encrypted with the AppKey which is network unique and not node unique. The MIC only involves these values and so doesn't help either.</p>\n\n<p>I would have expected that the JOIN ACCEPT at the minimum includes the DevEUI requesting the join as a part of the MIC, and also that it would include the DevNonce. It seems it includes neither.</p>\n\n<p>What gives? Is OTAA broken or not? :)</p>\n"
    }, {
        "tags": ["iot", "robotics", "riot-os"],
        "is_answered": false,
        "view_count": 70,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1608219991,
        "creation_date": 1607461599,
        "last_edit_date": 1607650315,
        "question_id": 65206902,
        "link": "https://stackoverflow.com/questions/65206902/how-to-use-the-iot-lab-platform-and-how-to-choose-the-right-nodes",
        "title": "How to use the iot lab platform and how to choose the right nodes",
        "body": "<p>I want to create an Iot-project where I am gonna have to create a watering system.\nI am going to use Riot-OS on an ESP32 or ESP8266 that will interact with a water pump, n-mosfet, power supply and a humidity sensor.\nAt the same time I will have a Linux webserver running accepting the data from this controller.</p>\n<p>Until my hardware arrives I want to test the code using iot-lab. However, I do not know what nodes I have to use and why. How do I choose the correct ones?\nDo I also need an .elf file for the sensor, like in this tutorial <a href=\"https://www.iot-lab.info/earn/\" rel=\"nofollow noreferrer\">https://www.iot-lab.info/earn/</a> is being used for the lamp ?</p>\n<p>Also, regarding if I use the ssh keygen command and then the copy paste and the connect to the experiment is the only thing that I need to do in order to run my code properly??</p>\n<p>Is there a good tutorial that explains those things because I did not find any ?</p>\n"
    }, {
        "tags": ["iot", "mesh-network", "openthread"],
        "is_answered": true,
        "view_count": 52,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1608163314,
        "creation_date": 1608150117,
        "question_id": 65330594,
        "link": "https://stackoverflow.com/questions/65330594/maximal-number-of-hops-path-cost-in-thread-openthread",
        "title": "Maximal number of hops (path cost) in Thread / OpenThread",
        "body": "<p>What is the maximal number of hops (or path cost) allowed by Thread specification.\nHow many hops are supported by <a href=\"https://github.com/openthread/openthread\" rel=\"nofollow noreferrer\">OpenThread</a>?</p>\n<p>I found two similar questions (<a href=\"https://stackoverflow.com/questions/44326438/is-it-possible-to-connect-300-devices-with-openthread\">link1</a>, <a href=\"https://stackoverflow.com/questions/37449796/how-many-hops-does-openthread-support#:%7E:text=1%20Answer&amp;text=The%20maximum%20path%20cost%20amount,with%20good%20links%20is%2016.\">link2</a>) but answer is different (maybe even outdated?).</p>\n"
    }, {
        "tags": ["python", "iot", "opc-ua"],
        "is_answered": false,
        "view_count": 94,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1607374259,
        "creation_date": 1607275295,
        "last_edit_date": 1607374259,
        "question_id": 65170901,
        "link": "https://stackoverflow.com/questions/65170901/how-to-change-variable-value-without-triggering-a-data-change-event-opc-ua",
        "title": "How to change variable value without triggering a data change event? OPC-UA",
        "body": "<p>I have two representations of the same device in my OPC-UA server. I have one node representing a led array with eight positions and the other is a led word of one byte.</p>\n<p>I have a method that randomly selects one of the two nodes and changes randomly its value.</p>\n<p>Once changed, a data change event is triggered. Now I have to equal both values so they are the same. But changing triggers again the data change event. And so on, and so on... My program enters into a never-ending loop.</p>\n<pre><code>def _make_variables_equal(chaning_node, val):\n    if chaning_node == led_array and isinstance(val, list):\n         led_word.set_value(_boolean_list_to_int(val))\n    elif chaning_node == led_word and isinstance(val, int):\n         led_array.set_value(_int_to_boolean_list(val))\n    else:\n         print(&quot;[SERVER] FATAL ERROR ON _make_variables_equal. Unexpected chaning_node.&quot;)\n\nclass SubHandler(object):\n    def datachange_notification(self, node, val, data):\n        # New data change event\n       _make_variables_equal(node, val)\n\n\nled_array = tablero.add_variable(idx, &quot;led_array&quot;, ua.Variant([\nFalse,\nFalse,\nFalse,\nFalse,\nFalse,\nFalse,\nFalse,\nFalse,], ua.VariantType.Boolean))\n\nled_word = tablero.add_variable(idx, &quot;led_word&quot;, 0, ua.VariantType.Byte)\n\nhandler = SubHandler()\nsub = server.create_subscription(500, handler)\nhandle = sub.subscribe_data_change([led_array, led_word])\n</code></pre>\n"
    }, {
        "tags": ["c", "cross-compiling", "iot", "contiki", "contiki-ng"],
        "is_answered": true,
        "view_count": 143,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1606395984,
        "creation_date": 1598267190,
        "last_edit_date": 1606395984,
        "question_id": 63559803,
        "link": "https://stackoverflow.com/questions/63559803/cannot-use-malloc-in-contiki",
        "title": "Cannot use malloc in Contiki",
        "body": "<p>I am trying to write a simple program using the Contiki-ng operating system for IoT platforms. First tests were ok, but something weird happens when trying to allocate dynamic memory. The test code I'm using is the following:</p>\n<pre><code>#include &quot;contiki.h&quot;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nPROCESS(main_process, &quot;main_process&quot;);\n\nAUTOSTART_PROCESSES(&amp;main_process);\n\nPROCESS_THREAD(main_process, ev, data) {\n    uint8_t *nonce;\n    int i;\n\n    PROCESS_BEGIN();\n\n    nonce = (uint8_t *) malloc(32 * sizeof(uint8_t));\n    if (nonce != NULL) {\n        for (i = 0; i &lt; 32; i++)\n            nonce[i] = 0;\n\n        printf(&quot;Todo OK\\n&quot;);\n    } else {\n        printf(&quot;Todo mal\\n&quot;);\n    }\n\n    PROCESS_END();\n}\n</code></pre>\n<p>When building the project, an error rises stating that &quot;<strong>In funtion _sbrk_r: undefined reference to _sbrk</strong>&quot;. After looking some forums on internet, I managed to solve this problem by including the following line into the Makefile of the project:</p>\n<pre><code>MODULES += os/lib/newlib\n</code></pre>\n<p>This solves the problem because inside the path os/lib/newlib there is a file, syscalls.c, which implements the mentioned _sbrk function. However, the following error rises now:</p>\n<p><a href=\"https://i.stack.imgur.com/FEKct.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FEKct.png\" alt=\"enter image description here\" /></a></p>\n<p>I have not found anyone over the internet with the same problem, so I got stuck here. Additionally, I don't know why but since then, removing the line &quot;MODULES += os/lib/newlib&quot; from the Makefile does nothing, and the problem with _eheap and _heap persists without returning to the undefined _sbrk error. However, I believe that this weird error is due to something wrong with Eclipse IDE cleaning the project. The code from syscalls.c, if needed, is the following:</p>\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n/*---------------------------------------------------------------------------*/\n#define DEBUG 0\n#if DEBUG\n#define PRINTF(...) printf(__VA_ARGS__)\n#else\n#define PRINTF(...)\n#endif\n/*---------------------------------------------------------------------------*/\n/**\n * \\brief Enlarges the allocated heap space\n * \\param incr Number of bytes by which to increase the heap space\n * \\return The previous end of heap on success (which is also a pointer to the\n *         start of the newly allocated memory if \\p incr is positive), or\n *         &lt;tt&gt;(caddr_t)-1&lt;/tt&gt; with \\c errno set to \\c ENOMEM on error\n */\ncaddr_t\n_sbrk(int incr)\n{\n  /*\n   * Newlib's _sbrk_r() assumes that this global errno variable is used here,\n   * which is different from the errno definition provided by &lt;errno.h&gt;.\n   */\n#undef errno\n  extern int errno;\n\n  /* Heap boundaries from linker script. */\n  extern uint8_t _heap;\n  extern uint8_t _eheap;\n\n  static uint8_t *heap_end = &amp;_heap;\n  uint8_t *prev_heap_end = heap_end;\n\n  if(heap_end + incr &gt; &amp;_eheap) {\n    PRINTF(&quot;Out of heap space!\\n&quot;);\n    errno = ENOMEM;\n    return (caddr_t)-1;\n  }\n\n  heap_end += incr;\n  return (caddr_t)prev_heap_end;\n}\n</code></pre>\n<p>I hope someone could help me. I have read that Contiki gives more ways of using dynamic memory, but I need to do it this way because other parts of the code rely on the use of malloc and cannot be changed.</p>\n<p>Thanks.</p>\n"
    }, {
        "tags": ["python", "csv", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 498,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1606387342,
        "creation_date": 1606348237,
        "last_edit_date": 1606387342,
        "question_id": 65014288,
        "link": "https://stackoverflow.com/questions/65014288/mqtt-message-from-csv-file",
        "title": "MQTT message from csv file",
        "body": "<p>I have a csv file and I need to send this file as a MQTT message, but I need it to sending just by one line with a few seconds of break and then next line and again a few sec break. It's something like sensor simulation but with data in csv file. I've tried to solve it in several different ways but nothing worked. I'm coding in Python. Thank you guys for any help. Code here is my latest attempt and after running the function MQTT_publish() I'm receiving messages with 5 sec break but in every message is whole file, not just one line. Ireally don't know what to do with it.</p>\n<pre><code>def MQTT_publish(broker, file, topic):\n  client = mqtt.Client()\n  print(&quot;Connecting to broker&quot;, broker)\n  client.connect(broker)\n  client.loop_start()\n  print(&quot;Publishing...&quot;)\n\n  client.loop_start()\n  with open(file, 'r') as read_obj:\n      data = reader(read_obj)\n      for row in data:\n          client.publish(f&quot;{topic}&quot;, str(row))\n          time.sleep(5)\n  client.loop_stop()\n\ndef on_message(client, userdata, message):\n  print(str(message.payload.decode(&quot;utf-8&quot;)))\n\n\ndef MQTT_subscribe(broker, topic):\n  client = mqtt.Client()\n  print(&quot;Connecting to broker&quot;, broker)\n  client.connect(broker)\n\n  print(f&quot;Subscribing {topic}&quot;)\n  client.subscribe(f&quot;{topic}&quot;)\n  client.on_message = on_message\n  client.loop_forever()\n\nbroker = &quot;mqtt.eclipse.org&quot;\n</code></pre>\n"
    }, {
        "tags": ["python", "subprocess", "iot", "bosch-iot"],
        "is_answered": false,
        "view_count": 131,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1606321487,
        "creation_date": 1592290836,
        "last_edit_date": 1592644375,
        "question_id": 62402685,
        "link": "https://stackoverflow.com/questions/62402685/catching-bosch-bsec-output-from-bme680",
        "title": "Catching Bosch BSEC Output from BME680",
        "body": "<h1>Hello everyone!</h1>\n<h3>What I did</h3>\n<p>I am using the Bosch BSEC Library to get IAQ Data from an I2C attached BME680, by running it as a subprocess in python:</p>\n<pre><code>proc = subprocess.Popen(['path_to_bsec_bme680'],stdout=subprocess.PIPE, stderr=subprocess.STDOUT,shell=False)\n</code></pre>\n<p>In order not to get stuck on this forever-running process, I set the file properties to non-blocking:</p>\n<pre><code>flags = fcntl(proc.stdout, F_GETFL)\nfcntl(proc.stdout, F_SETFL, flags | O_NONBLOCK)\n</code></pre>\n<p>Then I am checking the output at regular intervalls to process whatever the subprocess might have written to stdout:</p>\n<pre><code>output = proc.stdout.readline().decode()\n</code></pre>\n<p>This works reliably as intended.</p>\n<h1>The Problem and my suspicion</h1>\n<p>The BSEC program does some internal calibration and saves its status to a binary file called <code>bsec_iaq.state</code>. I suspect the way I am running it, I am somehow preventing the process to ever write to that file. The calibration cycle is quite long (4 Days) and the file usually gets written to about every 8 hours so debugging what actually happens is a bit of a hassle.</p>\n<h1>A bad workaround</h1>\n<p>After checking everything trivial like correct filepaths and so on, I decided to simply run the process twice, once from my python program and once manually. I figured the subprocess should at least be able to read the state file. To my suprise, this worked, the statefile is now updated regularily and the calibration is stable.<br />\nThis is obviously not a good idea and after some days, I noticed the sensor would start to twitch a bit every now and then (abrupt jumps in the different values). I suppose this is a result of running two instances of bsec at the same time.</p>\n<p>Am I right about my assumption that I am blocking the subprocess from writing to the state file?<br />\nHow could I catch the output and still allow it to write its state?\nDid I go entirely wrong?</p>\n"
    }, {
        "tags": ["android", "nfc", "iot", "esp8266", "rfid"],
        "is_answered": true,
        "view_count": 182,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1605386723,
        "creation_date": 1605383330,
        "question_id": 64837977,
        "link": "https://stackoverflow.com/questions/64837977/why-does-nfc-enabled-android-phones-rfid-changing",
        "title": "Why does NFC enabled android phone&#39;s RFID changing?",
        "body": "<p>I am trying to build a NFC enabled smart door using an NFC enabled android phone as a keycard.\nI am using a NodeMcu and RC522 NFC reader. The code below works fine for reading a Classic RFID card. When i read a phone's RFID the phone's RFID keeps changing.</p>\n<ol>\n<li><p>Why does the RFID of the phone keep changes?</p>\n</li>\n<li><p>If this is not preventable can i send a message such as 'hello world' from the android phone to RC522 using NFC?</p>\n<pre><code>#include &lt;SPI.h&gt;                          //SPI k\u00fct\u00fcphanemizi tan\u0131ml\u0131yoruz.\n#include &lt;MFRC522.h&gt;                      //MFRC522 k\u00fct\u00fcphanemizi tan\u0131ml\u0131yoruz.\n#include &lt;LiquidCrystal.h&gt;\n\nLiquidCrystal lcd(7, 6, 5, 4, 3, 2);\nint RST_PIN = 9;                          //RC522 mod\u00fcl\u00fc reset pinini tan\u0131ml\u0131yoruz.\nint SS_PIN = 10;                          //RC522 mod\u00fcl\u00fc chip select pinini tan\u0131ml\u0131yoruz.\nint buzzerPin = 8;                         //Buzzer motor pinini tan\u0131ml\u0131yoruz.\nMFRC522 rfid(SS_PIN, RST_PIN);            //RC522 mod\u00fcl\u00fc ayarlar\u0131n\u0131 yap\u0131yoruz.\n\n\nvoid setup() { \n  Serial.begin(9600);                     //Seri haberle\u015fmeyi ba\u015flat\u0131yoruz.\n  SPI.begin();                            //SPI ileti\u015fimini ba\u015flat\u0131yoruz.\n  rfid.PCD_Init();                        //RC522 mod\u00fcl\u00fcn\u00fc ba\u015flat\u0131yoruz.\n  pinMode(buzzerPin,OUTPUT);\n  lcd.begin(16, 2);\n  lcd.print(&quot;CARD READER!&quot;);\n}\n\nvoid array_to_string(byte array[], unsigned int len, char buffer[])\n{\n   for (unsigned int i = 0; i &lt; len; i++)\n   {\n      byte nib1 = (array[i] &gt;&gt; 4) &amp; 0x0F;\n      byte nib2 = (array[i] &gt;&gt; 0) &amp; 0x0F;\n      buffer[i*2+0] = nib1  &lt; 0xA ? '0' + nib1  : 'A' + nib1  - 0xA;\n      buffer[i*2+1] = nib2  &lt; 0xA ? '0' + nib2  : 'A' + nib2  - 0xA;\n   }\n   buffer[len*2] = '\\0';\n}\n\nvoid loop() {\n\n  if ( ! rfid.PICC_IsNewCardPresent())    //Yeni kart\u0131n okunmas\u0131n\u0131 bekliyoruz.\n    return;\n\n  if ( ! rfid.PICC_ReadCardSerial())      //Kart okunmad\u0131\u011f\u0131 zaman bekliyoruz.\n    return;\n\n   char cardInput[32] = &quot;&quot;;\n     rfid.PICC_DumpDetailsToSerial(&amp;(rfid.uid)); //dump some details about the card\n\n   array_to_string(rfid.uid.uidByte, 4, cardInput); //Insert (byte array, length, char array for output)\n\n      printCardToScreen(cardInput);\n      lcd.setCursor(0,0);\n      lcd.print(&quot;            &quot;);\n      lcd.setCursor(0,0);\n      lcd.print(cardInput);  \n      digitalWrite(buzzerPin,HIGH);\n      delay(1000);\n      digitalWrite(buzzerPin,LOW);\n      delay(5000);\n      lcd.print(&quot;            &quot;);\n      lcd.setCursor(0,0);\n      lcd.print(&quot;CARD READER!&quot;);\n   rfid.PICC_HaltA();\n}\nvoid printCardToScreen(String cardInput){\n  Serial.print(&quot;ID Numarasi: &quot;);\n  Serial.print(cardInput);\n  Serial.print(&quot; &quot;);\n\n  Serial.println(&quot;&quot;);\n}\n</code></pre>\n</li>\n</ol>\n"
    }, {
        "tags": ["http", "arduino", "iot", "esp8266", "dweet.io"],
        "is_answered": false,
        "view_count": 73,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1604816419,
        "creation_date": 1604816419,
        "question_id": 64735360,
        "link": "https://stackoverflow.com/questions/64735360/how-do-you-receive-http-chunked-responses-on-arduino",
        "title": "How do you receive HTTP chunked responses on Arduino?",
        "body": "<p>I'm building an IoT device with Arduino and ESP8266 with dweet.io. I'm not getting any trouble using the GET request of /get/latest/dweet/for/{thing}, but when I try to use /listen/for/dweets/from/{thing}, the code wouldn't work. The code I have currently is as follows:</p>\n<pre><code>  String url = &quot;https://dweet.io:443/get/latest/dweet/for/testtest&quot;;\n  \n  client.print(String(&quot;GET &quot;) + url + &quot; HTTP/1.1\\r\\n&quot; +\n               &quot;Host: &quot; + host + &quot;\\r\\n&quot;);\n               \n  unsigned long timeout = millis();\n  \n  while (client.available() == 0) {\n    if (millis() - timeout &gt; 5000) {\n      Serial.println(&quot;&gt;&gt;&gt; Client Timeout !&quot;);\n      client.stop();\n      return;\n    }\n  }\n\n  // Read all the lines from the answer\n  while(client.available()){\n    String line = client.readString();\n    handleResponse(line);\n  }\n</code></pre>\n<p>I understand that listening for data would require me to remove the while loop to check for the timeout. However, what I'm currently clueless about is how to modify the code such that the client can remain open such that it can process new data as soon as it's posted. Thanks!</p>\n"
    }, {
        "tags": ["user-interface", "visualization", "iot", "contiki", "cooja"],
        "is_answered": false,
        "view_count": 108,
        "favorite_count": 1,
        "closed_date": 1603198532,
        "score": 2,
        "last_activity_date": 1603171311,
        "creation_date": 1603171311,
        "question_id": 64438916,
        "link": "https://stackoverflow.com/questions/64438916/getting-an-error-message-when-running-a-script-in-cooja",
        "title": "Getting an error message when running a script in Cooja",
        "body": "<p>I'm trying to code the simulation script editor to calculate end-to-end delay and so on, but after the simulation is finished, I encounter the following message:</p>\n<p>TEST TIMEOUT</p>\n<p>TEST FAILED [if test was run without visualization, Cooja would now have been terminated]</p>\n<p>If anyone can point me in the right direct, I would appreciate the help.</p>\n"
    }, {
        "tags": ["google-cloud-platform", "iot", "esp32"],
        "is_answered": true,
        "view_count": 563,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1603049479,
        "creation_date": 1601399179,
        "question_id": 64124392,
        "link": "https://stackoverflow.com/questions/64124392/how-to-send-images-from-esp32-cam-to-iot-core",
        "title": "How to send images from ESP32 CAM to IoT Core?",
        "body": "<p>I need the system to be secure.</p>\n<p>I tired to encode the image with base64 and sending the string via MQTT to Iot Core. Then decode the string with a cloud function and finally storage the decoded image in Google Cloud Storage. The problem is the limited size of a message in MQTT.</p>\n<p>Using a Cloud Function and then storage in Google Cloud Storage is not really secure, anyone could hit that url and I loos control of all the ESP32CAM comunication.</p>\n<p>Am I missing something? is there a really secure way to send files to Google Cloud Storage from to IoT Core?</p>\n<p>Thanks</p>\n"
    }, {
        "tags": ["android", "bluetooth-lowenergy", "iot", "mesh-network"],
        "is_answered": false,
        "view_count": 35,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1602989473,
        "creation_date": 1602819885,
        "last_edit_date": 1602989473,
        "question_id": 64382640,
        "link": "https://stackoverflow.com/questions/64382640/slow-communication-between-and-android-app-with-nodes-in-a-mesh-network",
        "title": "Slow communication between and Android app with nodes in a mesh network",
        "body": "<p>I am building an app to communicate with nodes in a mesh network.</p>\n<h3>Description</h3>\n<p>My app connects with one master node (<em>proxy node</em>), I send and receive messages with mesh network via this <em>proxy node</em>.</p>\n<h3>My issue</h3>\n<ul>\n<li>when I only communicate one of the nodes in the mesh, the node receives and sends the message to my app. That happens immediately.</li>\n<li>when I use 2 nodes to communicate at the same time with app\u2014that causes a delay of about 1\u20132 seconds</li>\n</ul>\n<p>How can I resolve this issue?</p>\n"
    }, {
        "tags": ["cursor", "win-universal-app", "iot"],
        "is_answered": true,
        "view_count": 547,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1601681831,
        "creation_date": 1456640857,
        "last_edit_date": 1601681831,
        "question_id": 35679512,
        "link": "https://stackoverflow.com/questions/35679512/change-cursor-to-hourglass-in-win10-iot-xaml",
        "title": "Change cursor to hourglass in Win10 IoT XAML",
        "body": "<p>I have a method where I am posting a tweet and would like to change the cursor on the Raspberry Pi to the hourglass whilst this is being performed. the this.Cursor is not available and I can't see how to change the cursor. </p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "adafruit", "lora", "lorawan"],
        "is_answered": true,
        "view_count": 105,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1600855870,
        "creation_date": 1600672503,
        "last_edit_date": 1600674503,
        "question_id": 63987730,
        "link": "https://stackoverflow.com/questions/63987730/can-i-use-raspi-lora-with-the-things-network-for-a-raspberry-end-node",
        "title": "Can I use raspi-lora with The Things Network for a Raspberry end node",
        "body": "<p>I am trying to create a Raspberry Pi 3 end node (NOT GATEWAY) with the <a href=\"https://www.adafruit.com/product/3073\" rel=\"nofollow noreferrer\">Adafruit RFM96W</a> module and <a href=\"https://pypi.org/project/raspi-lora/\" rel=\"nofollow noreferrer\">raspi-lora</a> library but it seems that the library has no configurable APPSKEY, NWKSKEY, DEVADDR and etc., so I won't be able to receive downlinks from <a href=\"https://www.thethingsnetwork.org/\" rel=\"nofollow noreferrer\">The Things Network</a>, which is what I want. Does any of you have ideas on how I can do it? Or do you know other libraries that can be used in my case?\nThanks in advance!</p>\n"
    }, {
        "tags": ["node.js", "google-cloud-functions", "iot"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1600156829,
        "creation_date": 1600154713,
        "last_edit_date": 1600156829,
        "question_id": 63897007,
        "link": "https://stackoverflow.com/questions/63897007/make-global-object-available-inside-for-loop-nodejs-10-google-cloud-function",
        "title": "Make global object available inside for loop nodejs 10 Google Cloud Function",
        "body": "<p>I have this Google Cloud Function, I've deleted some useless parts for the example.</p>\n<p>What I want is to have  <strong>app.cloudRegion</strong>, <strong>app.projectId</strong> etc. available at <strong>const setDeviceConfig</strong> inside the for loop.</p>\n<p>My guess is I'm missing some fat arrow somewhere but I'm not sure where.</p>\n<pre><code>exports.newFirmware = async (file) =&gt; {\n    var app = {};\n    const str = file.name;\n    const bucketName = file.bucket;\n    const binaryName = str.substring(0, str.length - 4);\n    app.cloudRegion = '1';\n    app.projectId = '2';\n    app.registryId = '3';\n    app.iotClient = new app.iot.v1.DeviceManagerClient({});\n    app.parentName = app.iotClient.registryPath(app.projectId, cloudRegion, app.registryId);\n    try {\n        const responses = await app.iotClient.listDevices({\n            parent: app.parentName\n        });\n        const devices = responses[0];\n        for (let i = 0; i &lt; devices.length; i++) {\n            const setDeviceConfig = (app.iotClient, bla, app.registryId, app.projectId, app.cloudRegion, bla, bla) =&gt; {\n                const formattedName = iotClient.devicePath(projectId, app.cloudRegion, registryId, deviceId);               \n                const binaryData = Buffer.from(data).toString('base64');\n    \n                try {\n                    const responses = await iotClient.modifyCloudToDeviceConfig(request);                    \n                } catch (err) {                   \n                    ....\n                }\n            };\n        }\n    } catch (err) {\n        ....\n    }\n};\n</code></pre>\n<p><strong>edit:</strong></p>\n<pre><code>    try {\n    const responses = await app.iotClient.listDevices({\n        parent: app.parentName\n    });       \n    const devices = responses[0];\n    console.log(app.data);  \n    for (let i = 0; i &lt; devices.length; i++) {            \n        const device = devices[i];\n        console.log(device.id);\n        setDeviceConfig(app.iotClient, device.id, app.registryId, app.projectId, app.cloudRegion, app.data, binaryName)\n    }\n            const setDeviceConfig = async (iotClient, deviceId, registryId, projectId, cloudRegion, data, version) =&gt; {               \n            const formattedName = iotClient.devicePath(projectId, cloudRegion, registryId, deviceId);\n            console.log('formattedName --&gt; ' + formattedName)\n            const binaryData = Buffer.from(data).toString('base64');\n            const request = {\n                name: formattedName,\n                versionToUpdate: version,\n                binaryData: binaryData,\n            };\n            try {\n                const responses = await iotClient.modifyCloudToDeviceConfig(request);\n                console.log('Success:', responses[0]);\n            } catch (err) {\n                console.error('Could not update config:', deviceId);\n                console.error('Message:', err);\n            }               \n        };\n} catch (err) {\n    console.error('Could not list devices', err);\n}\n</code></pre>\n"
    }, {
        "tags": ["android", "firebase", "firebase-realtime-database", "iot", "android-button"],
        "is_answered": true,
        "view_count": 129,
        "favorite_count": 0,
        "closed_date": 1598603699,
        "score": 0,
        "last_activity_date": 1598571964,
        "creation_date": 1598451422,
        "last_edit_date": 1598571820,
        "question_id": 63599624,
        "link": "https://stackoverflow.com/questions/63599624/how-to-updating-button-click-event-in-android-app-using-firebase-database-realti",
        "title": "How to Updating button click event in android app using firebase database realtime",
        "body": "<p>I'm a newbie in android and firebase development. I have been working on writing my app's button in firebase and now I want to retrieve them to make him related to the database. My java coding is a little weak. My concept is: when I change button value from the database they should be updated on the app phone.</p>\n<p><img src=\"https://i.stack.imgur.com/kNChf.png\" alt=\"this is my database\" /></p>\n<p>this code is written in the database &quot;the status of Manual button(it is a switch) &quot;I want to make him read and change his status according to the database :</p>\n<pre><code> //-------------------------------------------Btn FAN  ----------------------------\n    dref = FirebaseDatabase.getInstance().getReference();\n    myRef = dref.child(&quot;onfan&quot;);\n    myRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot)\n        {\n            String fan = (String) dataSnapshot.child(&quot;onfan&quot;).getValue(String.class);\n            if (fan == &quot;1&quot;) {\n                mFirebaseBtnFan.setTextColor(col1);\n            }\n            else {\n                mFirebaseBtnFan.setTextColor(col2);\n            }\n        }\n        @Override\n        public void onCancelled(DatabaseError databaseError)\n        {\n        }\n    });\n    mFirebaseBtnFan.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            if ((cnt % 2) == 0) {\n                dref.child(&quot;onfan&quot;).setValue(&quot;1&quot;);\n                mFirebaseBtnFan.setTextColor(col1);\n                cnt++;\n            } else {\n                dref.child(&quot;onfan&quot;).setValue(&quot;0&quot;);\n\n                mFirebaseBtnFan.setTextColor(col2);\n                cnt++;\n            }\n        }\n    });\n    \n</code></pre>\n"
    }, {
        "tags": ["php", "sockets", "tcp", "arduino", "iot"],
        "is_answered": true,
        "view_count": 203,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1596418265,
        "creation_date": 1596235276,
        "last_edit_date": 1596279109,
        "question_id": 63199965,
        "link": "https://stackoverflow.com/questions/63199965/php-socket-write-failure-only-returns-error-on-next-call",
        "title": "PHP socket_write failure only returns error on next call",
        "body": "<p>I am trying to send data by PHP sockets, the client is an Arduino device, it receives the data OK when I send it multiple times, but if I reset the client (Arduino device), it reboots in a few seconds, it says it connected to the PHP socket, then when I want to send data again by <code>socket_send()</code> it fails silently, the PHP <code>socket_send()</code> is not returning an error on first actual error, only the second time I try (and fail), only then it returns error (&quot;zero bytes sent&quot;). When this error is received, I create another <code>socket_accept()</code> and successfully send the message.</p>\n<p>What could cause this ? I want it to properly detect a lost connection so I can resend data if needed.</p>\n<p>It feels like it sends data to an old connection and only realizes it on second try, is that possible ?</p>\n<p>Can this be fixed by <code>socket_select()</code> ? I have trouble understanding what that does.</p>\n<p>Clarification: If client restarts and connects again, then sending data to it returns <code>int</code>, then <code>false</code>, <code>false</code>, <code>false</code> (unless I unset the <code>$accept</code> and I do a  <code>socket_accept()</code> again). If client remains offline, then the sending always returns <code>int</code>, <code>int</code>, <code>int</code>.\n<code>int</code> being the size of the string sent.</p>\n<pre class=\"lang-php prettyprint-override\"><code>$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die(&quot;Could not create socket\\n&quot;);\n\n// reuse any existing open port to avoid error\nsocket_set_option($socket, SOL_SOCKET, SO_REUSEADDR, 1);\n\n$result = socket_bind($socket, $host, $port) or die(&quot;Could not bind to socket\\n&quot;);\n\n$result = socket_listen($socket) or die(&quot;Could not set up socket listener\\n&quot;);\n\n    \ndo{\n\n    if(!isset($accept)){\n        echo &quot;\\nwaiting for clients&quot;;\n        $accept = @socket_accept($socket) or die(&quot;Could not accept incoming connection&quot;);\n        echo &quot;\\nclient connected&quot;;\n    }\n    \n    // memcached will return a message here like: &quot;my message\\r\\n&quot;\n    $message_to_send = $memcached-&gt;get('my_socket_message');\n    \n    if($message_to_send!=''){\n\n        echo &quot;\\nsending: &quot;.$message_to_send;\n    \n        $total_data_sent = @socket_send($accept, $message_to_send, strlen($message_to_send), MSG_EOR);\n    \n        // if data was not send (sent to an old connection ?!)...\n        // then clear $accept, so a new connection is accepted\n        // and keep the my_socket_message variable, so message is sent again\n\n        if($total_data_sent === false){\n            echo &quot;\\nSEND FAILED, will retry message: &quot;.$message_to_send;\n            unset($accept);\n        } else {\n            $memcached-&gt;delete('my_socket_message');\n        }\n    \n    }\n    \n} while (true);\n</code></pre>\n"
    }, {
        "tags": ["python", "api", "flask", "python-asyncio", "iot"],
        "is_answered": false,
        "view_count": 889,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1596179068,
        "creation_date": 1596007585,
        "question_id": 63148409,
        "link": "https://stackoverflow.com/questions/63148409/flask-in-combination-with-an-event-loop",
        "title": "Flask in combination with an event loop",
        "body": "<pre><code>   import asyncio\n   from automations import automation_trigger\n   from scenes import call_scene\n   from event_bus import state_loop\n\n\n\n   try:\n       loop.create_task(automation_trigger())              # Run Automations\n       loop.create_task(state_loop())                      # Run event_bus\n       loop.run_forever()\n   except KeyboardInterrupt:\n       pass\n   finally:\n       print(&quot;Closing Loop&quot;)\n       loop.close()\n</code></pre>\n<p>Hello,</p>\n<p>I want to make a smart home server for myself and the idea is that I have a server and an app that's communicate with an API.\nThe server does all the calculations and if something changes I can see it in the app.</p>\n<p>The code that i white is an Asyncio event loop and when you run it then it checks if something is changed in the loop.\nIt works fine, but I want to add a Flask server in my project that makes an API page that I can connect to my app.</p>\n<p>The problem is how can I add a Flask server to my project with an event loop run in the same time.\nIf I add the Flask server in my project at this moment it only runs the Flask server but not the event loop.</p>\n<p>Is there a way to do it at the same time?</p>\n"
    }, {
        "tags": ["c#", "server", "iot", "opc-ua"],
        "is_answered": true,
        "view_count": 1029,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1594915064,
        "creation_date": 1594537707,
        "question_id": 62858122,
        "link": "https://stackoverflow.com/questions/62858122/opc-ua-whats-the-difference-between-value-and-attribute-value",
        "title": "OPC-UA whats the difference between &quot;Value&quot; and &quot;Attribute Value&quot;",
        "body": "<p>I am actually learning OPC-UA. I am using the c# demo server of LibUA (can be freely downloaded here: <a href=\"https://github.com/nauful/LibUA\" rel=\"nofollow noreferrer\">https://github.com/nauful/LibUA</a>). For each node there, I am seeing two values, one which is constantly changing in the &quot;Data Access View&quot; and one which is static in the &quot;Attributes&quot; view:</p>\n<p><a href=\"https://i.stack.imgur.com/2g9cQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2g9cQ.png\" alt=\"enter image description here\" /></a></p>\n<p>After having a look at the code and reading about how subscriptions work in OPC-UA i understand now why the dynamic value is constantly changing. But what is about this &quot;static&quot; value in the attribute window? Whats the reason for this? Why do we have two values per node, one dynamic and one static?</p>\n<p>The static one is generated by a method called &quot;HandleReadRequestInternal&quot; in the demo server. Whats a &quot;internal&quot; read request? I couldn't find anything about this in the specs. Maybe some expert can help me here to bring some clarity. :)</p>\n<p>Thanks!</p>\n"
    }, {
        "tags": ["c", "iot", "contiki", "wireless", "cooja"],
        "is_answered": false,
        "view_count": 31,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1594237640,
        "creation_date": 1592163618,
        "question_id": 62377383,
        "link": "https://stackoverflow.com/questions/62377383/how-to-implement-wcett-metric-in-cooja-emulator",
        "title": "How to implement WCETT metric in Cooja emulator?",
        "body": "<p>I need to implement WCETT (Weighted Cumulative Expected Transmission Time) metric in RPL objective function. So if someone has any idea please help me, I will be grateful.\nThank you</p>\n"
    }, {
        "tags": ["c", "sockets", "iot"],
        "is_answered": false,
        "view_count": 64,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1594027781,
        "creation_date": 1594027781,
        "question_id": 62753121,
        "link": "https://stackoverflow.com/questions/62753121/sending-a-string-with-000-at-beginning-in-c",
        "title": "Sending a string with 000 at beginning in C",
        "body": "<p>I posted this problem a couple of hours ago, but unfortunately, the details was not clear. i've added the code and some explanation.<br />\ni have a string like this to send through socket: &quot;000f45546874684498765&quot; as you see the first 3 numbers are zero, when the C compiler comes to this 000 it thinks these zeros are the finishing of the string. any suggestion?</p>\n<pre><code>proc_socketgps(s32 TaskId)\n while (1)\n{\nQl_Sleep(socket_timer);\nif (is_socket_success == TRUE)\n{\n    APP_DEBUG(&quot;start socket connect\\r\\n&quot;);\n    APP_DEBUG(&quot;m_tcp_state :%d\\r\\n&quot;, m_tcp_state);\n    APP_DEBUG(&quot;STATE_SOC_SEND :%d\\r\\n&quot;, STATE_SOC_SEND);\n    APP_DEBUG(&quot;m_socketid :%d\\r\\n&quot;, m_socketid);\n\n    proc_handle(&quot;\\x00\\x11\\x22&quot;, sizeof(&quot;\\x00\\x11\\x22&quot;));\n}\n\n\n\nstatic void proc_handle(unsigned char *pData, s32 len)\n\nchar *p = NULL;\ns32 iret;\nu8 srvport[10];\n\n//command: Set_APN_Param=&lt;APN&gt;,&lt;username&gt;,&lt;password&gt;\np = Ql_strstr(pData, &quot;Set_APN_Param=&quot;);\nif (p)\n{\nQl_memset(m_apn, 0, 10);\nif (Analyse_Command(pData, 1, '&gt;', m_apn))\n{\n    APP_DEBUG(&quot;&lt;--APN Parameter Error.--&gt;\\r\\n&quot;);\n    return;\n}\nQl_memset(m_userid, 0, 10);\nif (Analyse_Command(pData, 2, '&gt;', m_userid))\n{\n    APP_DEBUG(&quot;&lt;--APN Username Parameter Error.--&gt;\\r\\n&quot;);\n    return;\n}\nQl_memset(m_passwd, 0, 10);\nif (Analyse_Command(pData, 3, '&gt;', m_passwd))\n{\n    APP_DEBUG(&quot;&lt;--APN Password Parameter Error.--&gt;\\r\\n&quot;);\n    return;\n}\n\nAPP_DEBUG(&quot;&lt;--Set APN Parameter Successfully&lt;%s&gt;,&lt;%s&gt;,&lt;%s&gt;.--&gt;\\r\\n&quot;, m_apn, m_userid, m_passwd);\n\nreturn;\n}\n\n//command: Set_Srv_Param=&lt;srv ip&gt;,&lt;srv port&gt;\np = Ql_strstr(pData, &quot;Set_Srv_Param=&quot;);\nif (p)\n{\nQl_memset(m_SrvADDR, 0, SRVADDR_BUFFER_LEN);\nif (Analyse_Command(pData, 1, '&gt;', m_SrvADDR))\n{\n    APP_DEBUG(&quot;&lt;--Server Address Parameter Error.--&gt;\\r\\n&quot;);\n    return;\n}\nQl_memset(srvport, 0, 10);\nif (Analyse_Command(pData, 2, '&gt;', srvport))\n{\n    APP_DEBUG(&quot;&lt;--Server Port Parameter Error.--&gt;\\r\\n&quot;);\n    return;\n}\nm_SrvPort = Ql_atoi(srvport);\nAPP_DEBUG(&quot;&lt;--Set TCP Server Parameter Successfully&lt;%s&gt;,&lt;%d&gt;.--&gt;\\r\\n&quot;, m_SrvADDR, m_SrvPort);\n\nm_tcp_state = STATE_NW_GET_SIMSTATE;\nAPP_DEBUG(&quot;&lt;--Restart the TCP connection process.--&gt;\\r\\n&quot;);\n\nreturn;\n}\n\n//if not command,send it to server\nm_pCurrentPos = m_send_buf;\nQl_strcpy(m_pCurrentPos + m_remain_len, pData);\n\nm_remain_len = Ql_strlen(m_pCurrentPos);\n\n\nif (!Ql_strlen(m_send_buf)) //no data need to send\n        break;\n\n    m_tcp_state = STATE_SOC_SENDING;\n    do\n    {\n        ret = Ql_SOC_Send(m_socketid, m_pCurrentPos, m_remain_len);\n        APP_DEBUG(&quot;Message Data :%s&quot;, m_pCurrentPos);\n        APP_DEBUG(&quot;&lt;--Send data,socketid=%d,number of bytes sent=%d--&gt;\\r\\n&quot;, m_socketid, ret);\n        if (ret == m_remain_len) //send compelete\n        {\n            m_remain_len = 0;\n            m_pCurrentPos = NULL;\n            m_nSentLen += ret;\n            m_tcp_state = STATE_SOC_ACK;\n            break;\n        }\n        else if ((ret &lt;= 0) &amp;&amp; (ret == SOC_WOULDBLOCK))\n        {\n            //waiting CallBack_socket_write, then send data;\n            break;\n        }\n        else if (ret &lt;= 0)\n        {\n            APP_DEBUG(&quot;&lt;--Send data failure,ret=%d.--&gt;\\r\\n&quot;, ret);\n            APP_DEBUG(&quot;&lt;-- Close socket.--&gt;\\r\\n&quot;);\n            Ql_SOC_Close(m_socketid); //error , Ql_SOC_Close\n            m_socketid = -1;\n\n            m_remain_len = 0;\n            m_pCurrentPos = NULL;\n            if (ret == SOC_BEARER_FAIL)\n            {\n                m_tcp_state = STATE_GPRS_DEACTIVATE;\n            }\n            else\n            {\n                m_tcp_state = STATE_GPRS_GET_DNSADDRESS;\n            }\n            break;\n        }\n        else if (ret &lt; m_remain_len) //continue send, do not send all data\n        {\n            m_remain_len -= ret;\n            m_pCurrentPos += ret;\n            m_nSentLen += ret;\n        }\n    } while (1);\n    break;\n</code></pre>\n<p>the code has been added to the question. firs socket gets open and gets connected to the server. this function &gt;&gt; proc_handle(&quot;\\x00\\x11\\x22&quot;, sizeof(&quot;\\x00\\x11\\x22&quot;)); sends hexadecimal string, however i think c consider this part &quot;\\x00&quot; as end of the string ! and the data won't be sent ! I already tested that if I remove &quot;\\x00&quot; from the row above it works like a charm !</p>\n"
    }, {
        "tags": ["iot", "contiki", "cooja"],
        "is_answered": false,
        "view_count": 17,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1593580572,
        "creation_date": 1593580572,
        "question_id": 62670150,
        "link": "https://stackoverflow.com/questions/62670150/need-to-print-out-a-message-when-the-dodag-converge",
        "title": "Need to print out a message when the DODAG converge",
        "body": "<p>I am new to Contiki/Cooja. Any helps are greatly appreciated. I need to find out the time it takes for a DODAG to form and stabilizes. So my questions are:</p>\n<ol>\n<li>What code in examples should I use/start with? Currently I am using the ones in ipv6/simple-udp-rpl.</li>\n<li>I like the root node to print out a message when the DODAG converges, where do I put the code into?</li>\n</ol>\n<p>Thanks a lot.</p>\n"
    }, {
        "tags": ["networking", "iot", "contiki", "cooja"],
        "is_answered": false,
        "view_count": 62,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1593073995,
        "creation_date": 1592991360,
        "last_edit_date": 1592995915,
        "question_id": 62551994,
        "link": "https://stackoverflow.com/questions/62551994/is-there-a-way-to-know-that-the-node-is-disconnected-out-of-the-rpl-network-in-c",
        "title": "Is there a way to know that the node is disconnected/out of the RPL network in contiki 3.0?",
        "body": "<p>I have a mobility node that moved out of the range of the RPL network. I need to know that this node is out of the network range.\nI tried this code:</p>\n<pre><code>if (rpl_neighbor_count() == 0) {\n    printf(&quot;NO NEIGHBORS\\n&quot;); \n}\nelse {\n    printf(&quot;There are NEIGHBORS \\n&quot;);\n}\n</code></pre>\n<p>However, the count doesn't update when the movement of the node happens and it remains as it was before and it is the same all the time.</p>\n"
    }, {
        "tags": ["python-3.x", "iot", "coap"],
        "is_answered": false,
        "view_count": 165,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1592823566,
        "creation_date": 1592744632,
        "last_edit_date": 1592823566,
        "question_id": 62498918,
        "link": "https://stackoverflow.com/questions/62498918/unable-to-get-payload-response-when-payload-length-size-is-greater-than-1000k-c",
        "title": "Unable to get payload response when payload length size is greater than 1000K.(Coap)",
        "body": "<p>I am using Coapthon and Helperclient libraries to get, put, post the data.\nI am using below mentioned code line to get the payload. it is working fine without any issue if pauload length size is not more than 1000.</p>\n<pre><code>response = self.client.get(path_check, timeout=30)\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Jun 21, 2020 5:56:11 PM com.coap.dtls.test.ExampleDTLSClient$1 receiveData\nINFO: received response, length53, hex payload:\n</code></pre>\n<p>But in some cases payload size is high &quot;length1386&quot;, and it failed to get the payload:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Jun 21, 2020 5:56:21 PM com.coap.dtls.test.ExampleDTLSClient$1 receiveData\nINFO: received response, length1386, hex payload:\n</code></pre>\n<p>And displays below mentioned error:\nAttributeError: 'NoneType' object has no attribute 'payload'</p>\n<p>Can anyone help he how can I get high length payload?\nI am using python scripts and copathon libraries to achive it.</p>\n<pre><code>response = self.client.get(path_check, timeout=30)\n</code></pre>\n"
    }, {
        "tags": ["amazon-web-services", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 2290,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1592546597,
        "creation_date": 1491333840,
        "last_edit_date": 1537707147,
        "question_id": 43215942,
        "link": "https://stackoverflow.com/questions/43215942/incorrect-connection-header-with-mqtt-over-websocket-with-aws-iot",
        "title": "Incorrect connection header with MQTT over Websocket with AWS IoT",
        "body": "<p>I have an issue with AWS IoT. I was using the same code for month. But suddenly it stopped working. I'm using Mqtt over Websocket with AWS IoT.</p>\n\n<p>This is the simple bit of code I use.</p>\n\n<pre><code>import com.amazonaws.services.iot.client.AWSIotException;\nimport com.amazonaws.services.iot.client.AWSIotMqttClient;\n\npublic class ThingMain {\n\n    public static void main(String[] args) {\n\n        String clientEndpoint = \"endpoint.iot.us-west-2.amazonaws.com\";\n        String clientId = \"testing\";\n\n        AWSIotMqttClient client = new AWSIotMqttClient(clientEndpoint, clientId, \"accessKey\", \"secretKey\");\n\n        try {\n            client.connect();\n        } catch (AWSIotException e) {\n            e.printStackTrace();\n        }\n   }\n}\n</code></pre>\n\n<p>And I got this log :</p>\n\n<pre><code>AVERTISSEMENT: Connect request failure\nMqttException (0) - java.io.IOException: WebSocket Response header: Incorrect connection header\n    at org.eclipse.paho.client.mqttv3.internal.ExceptionHelper.createMqttException(ExceptionHelper.java:38)\n    at org.eclipse.paho.client.mqttv3.internal.ClientComms$ConnectBG.run(ClientComms.java:690)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.IOException: WebSocket Response header: Incorrect connection header\n    at org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketHandshake.receiveHandshakeResponse(WebSocketHandshake.java:144)\n    at org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketHandshake.execute(WebSocketHandshake.java:74)\n    at org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketSecureNetworkModule.start(WebSocketSecureNetworkModule.java:77)\n    at org.eclipse.paho.client.mqttv3.internal.ClientComms$ConnectBG.run(ClientComms.java:676)\n    ... 1 more\n\navr. 04, 2017 11:00:55 PM \ncom.amazonaws.services.iot.client.core.AwsIotConnection onConnectionFailure\nINFOS: Connection temporarily lost\navr. 04, 2017 11:00:55 PM \ncom.amazonaws.services.iot.client.core.AbstractAwsIotClient onConnectionFailure\nINFOS: Client connection lost: leet\navr. 04, 2017 11:00:58 PM \ncom.amazonaws.services.iot.client.core.AwsIotConnection$1 run\nINFOS: Connection is being retried\n</code></pre>\n\n<p>At this stage I have no clue what is wrong. I was using this code for month. Nothing have changed and now it stopped working.</p>\n\n<p>if somebody can help me sort this out, it would be awesome. Thanks.</p>\n"
    }, {
        "tags": ["embedded", "contiki", "iot"],
        "is_answered": true,
        "view_count": 1945,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1590587616,
        "creation_date": 1427081850,
        "question_id": 29202908,
        "link": "https://stackoverflow.com/questions/29202908/how-to-calculate-the-power-consumption-in-contiki",
        "title": "How to calculate the power consumption in contiki",
        "body": "<p>In cooja simulator I the executed the power trace program for my mote and got the results</p>\n\n<pre><code>00:22.714   ID:1     2821 P 0.18 10 116054 604735 58865 5343 0 3699 10671 54852 5363 490 0 343 (radio 8.90% / 8.93% tx 8.16% / 8.18% listen 0.74% / 0.74%)\n</code></pre>\n\n<p>The above is the one line of my power trace program's result , </p>\n\n<p>For example if my mote is skymote , what is the values of  <strong>ENERGEST_TYPE_CPU , ENERGEST_TYPE_LPM , ENERGEST_TYPE_LISTEN , ENERGEST_TYPE_TRANSMIT</strong> </p>\n\n<p>IN THE BELOW FORMULA how to apply the ENERGEST_TYPE_CPU , ENERGEST_TYPE_LPM , ENERGEST_TYPE_LISTEN , ENERGEST_TYPE_TRANSMIT     values in the <strong>energest_type_time  function</strong> </p>\n\n<pre><code>     energest_type_time(ENERGEST_TYPE_CPU) - last_cpu,\n     energest_type_time(ENERGEST_TYPE_LPM) - last_lpm,\n     energest_type_time(ENERGEST_TYPE_TRANSMIT) - last_transmit,\n     energest_type_time(ENERGEST_TYPE_LISTEN) - last_listen,\n     i++);\n</code></pre>\n\n<p>and i also dont' know the <code>last_cpu , last_lpm , last_transmit , last_listen</code> in the power trace result .</p>\n"
    }, {
        "tags": ["django", "amazon-web-services", "amazon-ec2", "tcp", "iot"],
        "is_answered": false,
        "view_count": 129,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1589179960,
        "creation_date": 1588948840,
        "last_edit_date": 1589179960,
        "question_id": 61681657,
        "link": "https://stackoverflow.com/questions/61681657/best-way-to-run-tcp-server-alongside-django-to-gather-iot-data",
        "title": "Best way to run TCP server alongside Django to gather IoT data",
        "body": "<p>I  a django app running on Elasticbeanstalk in AWS. Within my Django application I'd like to gather IoT data coming in via TCP/IP. Currently, I open the socket and switch it to listening through a View function. This leads to the problem that the socket closes, or stops. Furthermore, the socket needs to listen on the port steadily although data is not coming in continiously.</p>\n\n<p>What is a more elegant way to solve this problem? Is there any Django extension to get the socket and listening from a view to a background task? E.g. listen every 60 seconds on the ports and create an object when data comes in?</p>\n"
    }, {
        "tags": ["c#", "azure", "iot", "azure-iot-hub", "azure-eventhub"],
        "is_answered": false,
        "view_count": 141,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1588790946,
        "creation_date": 1588083768,
        "last_edit_date": 1588790946,
        "question_id": 61482529,
        "link": "https://stackoverflow.com/questions/61482529/how-to-correctly-close-the-eventhubreceiver-when-working-with-azure-iot-in-c",
        "title": "How to correctly close the EventHubReceiver when working with Azure IoT in C#?",
        "body": "<p>I am writing an application that should be able to read and display IoT data. The basic functionality works for me with this code (I removed some checks etc so that the code would the shorter):</p>\n\n<pre><code>public void Run()\n{\n    _eventHubClient = EventHubClient.CreateFromConnectionString(ConnectionString, \"messages/events\");\n    var partitions = _eventHubClient.GetRuntimeInformation().PartitionIds;\n    cts = new CancellationTokenSource();\n\n    var tasks = partitions.Select(partition =&gt; ReceiveMessagesFromDeviceAsync(partition, cts.Token));\n    Task.WaitAll(tasks.ToArray());\n}\n\npublic void Cancel()\n{\n    cts.Cancel();\n}\n\nprivate async Task ReceiveMessagesFromDeviceAsync(string partition, CancellationToken cancellationToken)\n{\n    var eventHubReceiver = _eventHubClient.GetDefaultConsumerGroup().CreateReceiver(partition, DateTime.UtcNow);\n    while (true)\n    {\n        if (cancellationToken.IsCancellationRequested)\n        {\n            break;\n        }\n        var eventData = await eventHubReceiver.ReceiveAsync(new TimeSpan(0,0,1));\n\n        var data = Encoding.UTF8.GetString(eventData.GetBytes());\n        Console.WriteLine(\"Message received at {2}. Partition: {0} Data: '{1}'\", partition, data, eventData.EnqueuedTimeUtc);\n    }\n}\n</code></pre>\n\n<p>My problem is that I need to be able to stop and restart the connection again. Everything works okay until the moment when I start it for the 6th time, then I get the \"QuotaExceededException\": \"Exceeded the maximum number of allowed receivers per partition in a consumer group which is 5\". I have googled the exception and I understand the problem, what I don't know is how to correctly close the previous receivers after I close a connection, so that I could open it again later. I have tried calling</p>\n\n<pre><code>eventHubReceiver.Close()\n</code></pre>\n\n<p>in the Cancel() method but it didn't seem to help.</p>\n\n<p>I would be very grateful for any hints on how to solve this, thanks.</p>\n"
    }, {
        "tags": ["sockets", "networking", "iot", "stm32", "contiki"],
        "is_answered": true,
        "view_count": 324,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1587409000,
        "creation_date": 1539984774,
        "last_edit_date": 1564834092,
        "question_id": 52900177,
        "link": "https://stackoverflow.com/questions/52900177/linux-userspace-code-to-communicate-between-linux-board-and-each-node-running-co",
        "title": "Linux userspace code to communicate between Linux board and each node running contiki udp sender example code",
        "body": "<p>I am using Contiki to create an IoT product involving multiple STM32L152 based nodes and a Linux board. I have one embedded Linux board (based on iMX6) that receives data from nodes, sends to the internet using cellular and 10 nodes that sense the different environmental parameter and deliver to Linux board. Linux board has a coprocessor that running border/edge router code, UART2 lines of that coprocessor is connected to Linux board. I use Contiki tool tunslip6 to create tun0 interface, I am able to ping each node.\nTo make the question more understandable, I will explain the hardware setup and step that I performed.</p>\n\n<ol>\n<li><p>I am running UDP sender example code (STM32CubeExpansion_SUBG1_V3.0.0/Projects/Multi/Applications/Contiki/Udp-sender) on STM32L152RE-NUCLEO board that has x-nucleo-ids01a5 (SPSGRF-915 module) board sitting on top.</p></li>\n<li><p>On second similar hardware setup, I am running Border-router example code. USB cable is attached to my Linux box.</p></li>\n</ol>\n\n<p>after doing this; <code>sudo ./tunslip6 \u2013s /dev/ttyACM0 aaaa::1/64</code>, I am able to see all neighbor node on the webpage, I am able to ping6 each node too.\nI want to write application code on Linux to receive and send data to each node, I am stuck at this point.</p>\n\n<pre><code>sudo ./tunslip6 -s /dev/ttyACM0 aaaa::1/64\n********SLIP started on ``/dev/ttyACM0''\nopened tun device ``/dev/tun0''\nifconfig tun0 inet `hostname` mtu 1500 up\nifconfig tun0 add aaaa::1/64\nifconfig tun0 add fe80::0:0:0:1/64\nifconfig tun0\n\ntun0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00- \n00-00-00-00-00  \n          inet addr:127.0.1.1  P-t-P:127.0.1.1  Mask:255.255.255.255\n          inet6 addr: fe80::1/64 Scope:Link\n          inet6 addr: aaaa::1/64 Scope:Global\n          inet6 addr: fe80::8fad:d1a:c8d0:b76f/64 Scope:Link\n          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:500 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\n*** Address:aaaa::1 =&gt; aaaa:0000:0000:0000\nGot configuration message of type P\nSetting prefix aaaa::\nServer IPv6 addresses:\n aaaa::900:f4ff:c3a:f3c5\n fe80::900:f4ff:c3a:f3c5\n\nifconfig\ntun0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  \n          inet addr:127.0.1.1  P-t-P:127.0.1.1  Mask:255.255.255.255\n          inet6 addr: fe80::1/64 Scope:Link\n          inet6 addr: aaaa::1/64 Scope:Global\n          inet6 addr: fe80::8fad:d1a:c8d0:b76f/64 Scope:Link\n          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1\n          RX packets:37 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:67 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:500 \n          RX bytes:3422 (3.4 KB)  TX bytes:5653 (5.6 KB)\n\nip addr show tun0\n3: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 500\n    link/none \n    inet 127.0.1.1/32 scope host tun0\n       valid_lft forever preferred_lft forever\n    inet6 aaaa::1/64 scope global \n       valid_lft forever preferred_lft forever\n    inet6 fe80::1/64 scope link \n       valid_lft forever preferred_lft forever\n    inet6 fe80::8fad:d1a:c8d0:b76f/64 scope link flags 800 \n       valid_lft forever preferred_lft forever\n\nsudo ip -6 route\naaaa::/64 dev tun0  proto kernel  metric 256  pref medium\nfe80::/64 dev tun0  proto kernel  metric 256  pref medium\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6t7Ey.png\" rel=\"nofollow noreferrer\">This is what I am seeing on the webpage, I have one neighbor node</a> I am able to ping this.</p>\n\n<pre><code>ping6 aaaa::fdff:d2fa:2d05\nPING aaaa::fdff:d2fa:2d05(aaaa::fdff:d2fa:2d05) 56 data bytes\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=1 ttl=63 time=130 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=2 ttl=63 time=131 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=3 ttl=63 time=130 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=4 ttl=63 time=130 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=6 ttl=63 time=130 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=7 ttl=63 time=130 ms\n64 bytes from aaaa::fdff:d2fa:2d05: icmp_seq=8 ttl=63 time=131 ms\n^C\n--- aaaa::fdff:d2fa:2d05 ping statistics ---\n8 packets transmitted, 7 received, 12% packet loss, time 7040ms\nrtt min/avg/max/mdev = 130.681/131.068/131.863/0.555 ms\n</code></pre>\n\n<p>I am not an expert in networking and socket programming, I wrote some code that I found on the internet and tried. I tried something like this;</p>\n\n<pre><code>import socket\nUDP_IP = \"aaaa::fdff:d2fa:2d05\"  \nUDP_PORT = 1234\nprint \"UDP target IP:\", UDP_IP\nprint \"UDP target port:\", UDP_PORT\nsock = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM) # UDP\nsock.connect((UDP_IP, UDP_PORT))\nwhile True:\n   data = sock.recv(1024)\n   print 'Received', repr(data)\n</code></pre>\n\n<p>Question: In Linux userspace, my colleague wants to write an application code that can read and write each node (in this case <code>aaaa::fdff:d2fa:2d05</code>), how can we achieve that? On microcontroller board I am able to read and write with two nodes, but not in Linux space. Please help me, how can I read and write data from Linux userspace to each node? If possible please share some example code. Thanks!</p>\n\n<p><strong>Update -</strong> I tried to communicate between Linux host and node with the different Contiki example, contiki/examples/ipv6/rpl-udp/udp-client.c and had success, I was able to receive data from node. My python code is;</p>\n\n<pre><code>import socket, struct\n\nUDP_LOCAL_IP = 'aaaa::1'\nUDP_LOCAL_PORT = 5678\n\n\nUDP_REMOTE_IP = 'fe80::fdff:d2fa:2d05'\nUDP_REMOTE_PORT = 8765\n\n\ntry:\n    socket_rx = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n    socket_rx.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    socket_rx.bind((UDP_LOCAL_IP, UDP_LOCAL_PORT))\nexcept Exception:\n    print \"ERROR: Server Port Binding Failed\"\n\nprint 'UDP server ready: %s'% UDP_LOCAL_PORT\nprint\n\nwhile True:\n    data, addr = socket_rx.recvfrom(1024)\n    print \"address : \", addr\n    print \"received message: \", data\n    print \"\\n\"\n    socket_rx.sendto(\"Hello from serevr\\n\", (UDP_REMOTE_IP, UDP_REMOTE_PORT))\n</code></pre>\n\n<p><strong>Above python code is working.</strong></p>\n"
    }, {
        "tags": ["php", "mqtt", "iot", "blocking", "phpmqtt"],
        "is_answered": false,
        "view_count": 229,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1583590192,
        "creation_date": 1541626233,
        "last_edit_date": 1583590192,
        "question_id": 53198122,
        "link": "https://stackoverflow.com/questions/53198122/phpmqtt-non-blocking-publish-recieve",
        "title": "phpMQTT non-blocking publish &amp; recieve",
        "body": "<p>I am writing a program connecting a web service in PHP to an MQTT broker. The broker is running Mosquitto on a Raspberry Pi.</p>\n\n<p>The idea is to have the web service send a request (a form is submitted) and then send a publish to the MQTT broker and then wait for a reply.</p>\n\n<p>However, the problem is that the loop seems to cause a PHP fatal error due to the fact that it is an endless loop. </p>\n\n<p>I've tried adding the quitstop() function to quit the loop after a message is received, but the program crashes before it reaches that point.</p>\n\n<p>MQTT is still very new to me, but I need to send the request and then keep the loop open until I receive the answer in order to proceed with my program.</p>\n\n<p>This is the code to handle the form submit: </p>\n\n<pre><code>require(\"phpMQTT.php\");\n\n$server = \"xxx.xxx.xxx.xx\";              // change if necessary\n$port = 1883;                       // change if necessary\n$username = \"username\";             // set your username\n$password = \"password\";             // set your password\n$client_id = \"phpMQTT-request-1234\";     // make sure this is unique for connecting to sever - you could use uniqid()\n\n$mqtt = new phpMQTT($server, $port, $client_id);\n\n$msg = $_POST['box'];\nif (!empty($msg)) {\n    if ($mqtt-&gt;connect(true, null, $username, $password)) {\n        $mqtt-&gt;publish(\"dev/test\", $msg, 0);\n        $mqtt-&gt;close();\n    }\n    subscribeToTopic($mqtt);\n}\n\nfunction subscribeToTopic($mqtt)\n{\n    $topics['dev/test'] = array(\"qos\" =&gt; 0, \"function\" =&gt; \"procmsg\");\n    $mqtt-&gt;subscribe($topics, 0);\n    while ($mqtt-&gt;proc()) {\n\n    }\n    $mqtt-&gt;close();\n\n}\nfunction procmsg($topic, $msg)\n{\n    global $mqtt;\n    echo $msg;\n    quitstop($mqtt);\n}\n\nfunction quitstop($mqtt)\n{\n    $mqtt-&gt;close();\n}\n</code></pre>\n"
    }, {
        "tags": ["simulation", "iot", "ns-3"],
        "is_answered": false,
        "view_count": 285,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1583468260,
        "creation_date": 1583354080,
        "question_id": 60534272,
        "link": "https://stackoverflow.com/questions/60534272/iot-simulation-using-ns3",
        "title": "IoT simulation using NS3",
        "body": "<p>how can I use NS3 to simulate IoT, is there some model that should be added?\nI'm studying RPL protocol security, and I found that the simulation could be done using NS3, but I don't know is there a model specific to IoT.<br>\nthank you</p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "arduino-uno"],
        "is_answered": true,
        "view_count": 651,
        "favorite_count": 0,
        "score": -4,
        "last_activity_date": 1582561929,
        "creation_date": 1498290608,
        "last_edit_date": 1582561929,
        "question_id": 44734194,
        "link": "https://stackoverflow.com/questions/44734194/how-to-get-all-the-gas-value-in-from-gas-sensor-mq135",
        "title": "How to get all the gas value in % from gas sensor MQ135",
        "body": "<p>How to get all the gas value (of co2, nh3, alcohol, smoke, benzene)  in % from gas sensor MQ135 . i am using raspberry pi 3 and arduino.. thanks </p>\n"
    }, {
        "tags": ["amazon-web-services", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 1289,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1582096577,
        "creation_date": 1579019030,
        "last_edit_date": 1592644375,
        "question_id": 59737902,
        "link": "https://stackoverflow.com/questions/59737902/query-multiple-topics-at-once-using-iot-rule-sql",
        "title": "Query multiple Topics at once using IoT Rule SQL",
        "body": "<p>I have two result topics where messages arrive from different sources &quot;almost nearly at the same time&quot;.</p>\n<p>Topic: <code>sensor1/result</code> --receiving payload--&gt; <code>{ &quot;output_from_sensor1&quot;: {&quot;result&quot;:&quot;OK&quot;} }</code><br />\nTopic: <code>sensor2/result</code> --receiving payload--&gt; <code>{ &quot;output_from_sensor2&quot;: {&quot;result&quot;:&quot;OK&quot;} }</code></p>\n<p>I would like to create an AWS IoT Rule which scans these two topics &quot;simultaneously in one query&quot; and take an action.</p>\n<h3>I am not sure if AWS IoT SQL support &quot;scanning multiple topics&quot; in one query. No such references found in AWS docs.</h3>\n<p>During the way, I have tried these IoT queries (from my knowledge of SQL syntax) but no luck so far :(</p>\n<p><code>SELECT output_from_sensor1.result AS final_output.result FROM \u2018sensor1/result\u2019 WHERE (SELECT output_from_sensor2.result FROM \u2018sensor2/result\u2019)=\u2018OK\u2019</code></p>\n<p><code>(SELECT output_from_sensor1.result FROM 'sensor1/result') UNION (SELECT output_from_sensor2.result FROM 'sensor2/result')</code></p>\n<p>Thanks much!</p>\n"
    }, {
        "tags": ["mqtt", "iot", "mosquitto"],
        "is_answered": true,
        "view_count": 25,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1580933776,
        "creation_date": 1580929446,
        "last_edit_date": 1580933715,
        "question_id": 60082509,
        "link": "https://stackoverflow.com/questions/60082509/mqtt-raw-header-dontt-understand-this-one",
        "title": "MQTT: Raw Header - Dont&#39;t understand this one",
        "body": "<p>I am developing a small MQTT client to subscribe to and to monitor certain topics. For the most part, it works well assuming a one-byte length info (2nd byte). But I sometimes get this subscribe 0x30 response, that I can't understand. It seems to have a multi byte length but neither length byte has its MSB set. </p>\n\n<p>Header\n<code>\n0000: 3031312700127b6c756d6f7375727d2f   011'..{lumosur}/\n0010: 6461746574696d65323032302d30322d   datetime2020-02-\n0020: 30342032333a32313a3437311900127b   04 23:21:471...{</code></p>\n\n<p>How to figure it out?</p>\n\n<p>Thanks for your help.</p>\n\n<p>mm.</p>\n"
    }, {
        "tags": ["javascript", "azure", "azure-functions", "iot"],
        "is_answered": false,
        "view_count": 37,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1579286505,
        "creation_date": 1579285703,
        "last_edit_date": 1579286505,
        "question_id": 59793013,
        "link": "https://stackoverflow.com/questions/59793013/azure-function-receiving-iothub-messages-and-saving-into-cosmodb",
        "title": "azure function receiving iothub messages and saving into CosmoDB",
        "body": "<p>I have a demo of a gateway device sending multiple messages to iotHub at a rate of ~1-2 messages per second.</p>\n\n<p>I have an azure function hooked up this as a trigger, and the function will parse through the message and save it to the appropriate collection in a cosmos db.</p>\n\n<p>The problem I am having is that it randomly crashes or when it runs for a while it only receives a couple messages at a time and then goes inactive for couple minutes before it comes back. Meaning that the my frontend (application) has very outdated information being read into from cosmoDB.</p>\n\n<p>The reason I chose this architecture was because Microsoft recommends this style for 'hot storage' and real time applications, but it is quite the opposite. </p>\n\n<p>What tips or pointers can you give me to make this more efficient and way faster, I must be missing something.</p>\n"
    }, {
        "tags": ["c#", "windows", "raspberry-pi2", "iot", "time-critical"],
        "is_answered": true,
        "view_count": 6977,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1578514118,
        "creation_date": 1443612451,
        "last_edit_date": 1443615006,
        "question_id": 32864894,
        "link": "https://stackoverflow.com/questions/32864894/c-windows-iot-sleep-or-delay",
        "title": "c# (Windows IoT) - Sleep() or Delay()?",
        "body": "<p><strong>How can I write a timecritic backgroundapplication for Windows IoT in C#?</strong></p>\n\n<p>The target is to Programm a stepper Motor via C# over the Raspberry Pi 2 with Windows IoT and Visual Studio 2015. Prgramming via Remote-Debug works fine but there is no sleep or delay available. Also System.Threading.Thread.Sleep(time) is not possible. </p>\n\n<p>Also if we implement a timer the time between the steps is not the same at every step.</p>\n\n<p>It is like 5 steps fast - 2 slowly - 5 steps fast - 2 slowly - 5 steps fast - and so on....</p>\n\n<p><strong>How can I Programm the Motor that he is acting correct?</strong></p>\n\n<p>Data:</p>\n\n<p>Motor: HSY214 - F0.8 A NEMA8 - Steppermotor</p>\n\n<p>Driver: A4988  </p>\n"
    }, {
        "tags": ["c#", "sockets", "uwp", "iot", "windowsiot"],
        "is_answered": true,
        "view_count": 50,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1576473540,
        "creation_date": 1576420100,
        "question_id": 59344840,
        "link": "https://stackoverflow.com/questions/59344840/how-to-connect-to-uwp-apps-between-the-same-network",
        "title": "How to connect to UWP apps between the same network",
        "body": "<p>I try to make a connection between to UWP apps, one is the client on a laptop, the second is the server on a raspberry Pi 3 model B with Windows Iot, and the two devices are on the same network.</p>\n\n<p>I have tried this code on the server app : </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System;\nusing System.Net;\nusing System.Net.Sockets;\nusing System.Threading.Tasks;\nusing Windows.UI.Xaml;\nusing Windows.UI.Xaml.Controls;\n\nnamespace IOTServer\n{\n    public sealed partial class MainPage : Page\n    {\n        Socket listenerSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n        IPEndPoint ipEnd;\n        string h\u00f4te, iptest;\n        Task&lt;System.Net.IPHostEntry&gt; iphe;\n        public MainPage()\n        {\n            this.InitializeComponent();\n            h\u00f4te = Dns.GetHostName();\n            iphe = Dns.GetHostEntryAsync(h\u00f4te);\n            iptest = iphe.Result.AddressList[0].ToString();\n            ipEnd = new IPEndPoint(IPAddress.Parse(\"192.168.1.102\"), 8888);\n            listenerSocket.NoDelay = true;\n            listenerSocket.Bind(ipEnd);\n            listenerSocket.Listen(0);\n        }\n\n        private void Button_Click(object sender, RoutedEventArgs e)\n        {\n            Socket clientSocket = listenerSocket.Accept();\n            Byte[] Buffer = new byte[clientSocket.SendBufferSize];\n            int readByte = clientSocket.Receive(Buffer);\n            tbData.Text += readByte.ToString() + Convert.ToChar(13);\n        }\n    }\n}\n</code></pre>\n\n<p>And this code for the client app : </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System.Net;\nusing System.Net.Sockets;\nusing System.Threading.Tasks;\nusing Windows.UI.Xaml;\nusing Windows.UI.Xaml.Controls;\n\nnamespace IOTClient\n{\n    public sealed partial class MainPage : Page\n    {\n        Socket client= new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n        IPEndPoint ipEnd;\n        string h\u00f4te, iptest;\n        Task&lt;System.Net.IPHostEntry&gt; iphe;\n        public MainPage()\n        {\n            this.InitializeComponent();\n            h\u00f4te = Dns.GetHostName();\n            iphe = Dns.GetHostEntryAsync(h\u00f4te);\n            iptest = iphe.Result.AddressList[0].ToString();\n            ipEnd = new IPEndPoint(IPAddress.Parse(\"192.168.1.102\"), 8888);\n        }\n\n        private void BSend_Click(object sender, RoutedEventArgs e)\n        {\n            client.Connect(ipEnd);\n            client.Send(System.Text.Encoding.UTF8.GetBytes(tbSend.Text));\n        }\n    }\n}\n</code></pre>\n\n<p>When I click on the bSend button, the client app crash with this exception error : </p>\n\n<p><a href=\"https://i.stack.imgur.com/hS08W.png\" rel=\"nofollow noreferrer\">Error message for the socket exception</a></p>\n\n<p>I don't understand this, I can ping the raspberry in command line, and execute the server app directly from VS2017 to the raspberry.</p>\n\n<p>Someone can help me please ?\nThanks in advance.</p>\n\n<p>Please apologize my english, i'm french guy ;)</p>\n\n<p>Th\u00e9o</p>\n"
    }, {
        "tags": ["arduino", "iot", "bosch-iot-suite", "eclipse-vorto"],
        "is_answered": true,
        "view_count": 90,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1576071016,
        "creation_date": 1563959360,
        "last_edit_date": 1576071016,
        "question_id": 57179230,
        "link": "https://stackoverflow.com/questions/57179230/vorto-arduino-generator-no-known-conversion-for-argument-from-datatype-percenta",
        "title": "Vorto Arduino Generator: no known conversion for argument from datatype Percentage",
        "body": "<p>Vorto auto-generated code for Arduino won't compile when using Humidity Function Block</p>\n\n<p>I generated an Information Model with both Temperature and Humidity Function block, and when compiling the Arduino auto-generated code, the Percentage Datatype won't compile</p>\n\n<p>Here's a repository to the <a href=\"https://vorto.eclipse.org/#/details/org.eclipse.vorto:Humidity:1.0.0\" rel=\"nofollow noreferrer\">Humidity Function Block</a>.</p>\n\n<p>I expected the code to compile and flash to the NodeMCU V0.9</p>\n\n<p>Here's the <a href=\"https://hastebin.com/cezuwakuwo.http\" rel=\"nofollow noreferrer\">full error message</a>.</p>\n"
    }, {
        "tags": ["java", "android", "mqtt", "iot", "paho"],
        "is_answered": true,
        "view_count": 1048,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1575965018,
        "creation_date": 1574245818,
        "last_edit_date": 1574247244,
        "question_id": 58952157,
        "link": "https://stackoverflow.com/questions/58952157/mqtt-send-message-from-main-thread",
        "title": "MQTT send message from main thread",
        "body": "<p>I have simple MQTT subscriber implemented in <code>MqttHelper</code> class that works fine and receives subscriptions. But how I should deal when I need to send message to server from main program. I have method <code>publish</code> that works fine from <code>IMqttActionListener</code> but how to send text from main program on button pressed event?</p>\n\n<pre><code>package com.kkk.mqtt.helpers;\n\nimport android.content.Context;\nimport android.util.Log;\n\nimport org.eclipse.paho.android.service.MqttAndroidClient;\nimport org.eclipse.paho.client.mqttv3.DisconnectedBufferOptions;\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\n\nimport java.io.UnsupportedEncodingException;\n\npublic class MqttHelper {\n    public MqttAndroidClient mqttAndroidClient;\n\n    final String serverUri = \"tcp://tailor.cloudmqtt.com:16424\";\n\n    final String clientId = \"ExampleAndroidClient\";\n    public final String subscriptionTopic = \"sensor\";\n\n    final String username = \"xxx\";\n    final String password = \"yyy\";\n\n\n\n    public MqttHelper(Context context){\n        mqttAndroidClient = new MqttAndroidClient(context, serverUri, clientId);\n\n        mqttAndroidClient.setCallback(new MqttCallbackExtended() {\n            @Override\n            public void connectComplete(boolean b, String s) {\n                Log.w(\"mqtt\", s);\n            }\n\n            @Override\n            public void connectionLost(Throwable throwable) {\n\n            }\n\n            @Override\n            public void messageArrived(String topic, MqttMessage mqttMessage) throws Exception {\n                Log.w(\"Mqtt\", mqttMessage.toString());\n            }\n\n            @Override\n            public void deliveryComplete(IMqttDeliveryToken iMqttDeliveryToken) {\n\n            }\n        });\n        connect();\n    }\n\n    public void setCallback(MqttCallbackExtended callback) {\n        mqttAndroidClient.setCallback(callback);\n    }\n\n\n    public void publish(String topic, String info)\n    {\n\n\n        byte[] encodedInfo = new byte[0];\n        try {\n            encodedInfo = info.getBytes(\"UTF-8\");\n            MqttMessage message = new MqttMessage(encodedInfo);\n            mqttAndroidClient.publish(topic, message);\n            Log.e (\"Mqtt\", \"publish done\");\n        } catch (UnsupportedEncodingException | MqttException e) {\n            e.printStackTrace();\n            Log.e (\"Mqtt\", e.getMessage());\n        }catch (Exception e) {\n            Log.e (\"Mqtt\", \"general exception \"+e.getMessage());\n        }\n\n    }\n\n    private void connect(){\n        Log.w(\"Mqtt\", \"connect start \" );\n        MqttConnectOptions mqttConnectOptions = new MqttConnectOptions();\n        mqttConnectOptions.setAutomaticReconnect(true);\n        mqttConnectOptions.setCleanSession(false);\n        mqttConnectOptions.setUserName(username);\n        mqttConnectOptions.setPassword(password.toCharArray());\n\n        try {\n\n            mqttAndroidClient.connect(mqttConnectOptions, null, new IMqttActionListener()\n            {\n                @Override\n                public void onSuccess(IMqttToken asyncActionToken) {\n                    Log.w(\"Mqtt\", \"onSuccess \" );\n                    DisconnectedBufferOptions disconnectedBufferOptions = new DisconnectedBufferOptions();\n                    disconnectedBufferOptions.setBufferEnabled(true);\n                    disconnectedBufferOptions.setBufferSize(100);\n                    disconnectedBufferOptions.setPersistBuffer(false);\n                    disconnectedBufferOptions.setDeleteOldestMessages(false);\n                    mqttAndroidClient.setBufferOpts(disconnectedBufferOptions);\n                    subscribeToTopic();\n                    publish(MqttHelper.this.subscriptionTopic,\"information\");\n                }\n\n                @Override\n                public void onFailure(IMqttToken asyncActionToken, Throwable exception) {\n                    Log.w(\"Mqtt\", \"Failed to connect to: \" + serverUri + exception.toString());\n                }\n            });\n\n\n        } catch (MqttException ex){\n            ex.printStackTrace();\n        }\n    }\n\n\n    private void subscribeToTopic() {\n        try {\n            mqttAndroidClient.subscribe(subscriptionTopic, 0, null, new IMqttActionListener() {\n                @Override\n                public void onSuccess(IMqttToken asyncActionToken) {\n                    Log.w(\"Mqtt\",\"Subscribed!\");\n                }\n\n                @Override\n                public void onFailure(IMqttToken asyncActionToken, Throwable exception) {\n                    Log.w(\"Mqtt\", \"Subscribed fail!\");\n                }\n            });\n\n        } catch (MqttException ex) {\n            System.err.println(\"Exception whilst subscribing\");\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Code that starts MQTT subscriber:</p>\n\n<pre><code>private void startMqtt() {\n    mqttHelper = new MqttHelper(getApplicationContext());\n    mqttHelper.setCallback(new MqttCallbackExtended()\n    {\n        @Override\n        public void connectComplete(boolean b, String s) {\n            Log.w(\"Mqtt\", \"Connect complete\"+ s );\n        }\n\n        @Override\n        public void connectionLost(Throwable throwable) {\n            Log.w(\"Mqtt\", \"Connection lost\" );\n        }\n\n        @Override\n        public void messageArrived(String topic, MqttMessage mqttMessage) throws Exception {\n            Log.w(\"Mqtt\", mqttMessage.toString());\n            dataReceived.setText(mqttMessage.toString());\n        }\n\n        @Override\n        public void deliveryComplete(IMqttDeliveryToken iMqttDeliveryToken) {\n            Log.w(\"Mqtt\", \"Delivery complete\" );\n\n        }\n    });\n    Log.w(\"Mqtt\", \"will publish\");\n\n\n}\n</code></pre>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub"],
        "is_answered": false,
        "view_count": 100,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1575496308,
        "creation_date": 1574934511,
        "question_id": 59085915,
        "link": "https://stackoverflow.com/questions/59085915/azure-iot-hub-check-if-port-5671-is-opened",
        "title": "Azure IoT Hub - check if port 5671 is opened",
        "body": "<p>I want to test connection with Azure IoTHub: I have added a firewall rule to stop all the traffic for port 5671 (IoT AMQP) and I have a test connection method that I am expecting to fail in this case.</p>\n\n<pre><code>using (var deviceClient = DeviceClient.Create(iotHubUrl, authenticationMethod))\n{\n    try\n    {\n        await deviceClient.SendEventAsync(encodedMessage);\n\n        var receivedMessage = await deviceClient.ReceiveAsync(TimeSpan.FromSeconds(10));\n        if (receivedMessage != null)\n        {\n            await deviceClient.CompleteAsync(receivedMessage);\n            return true;\n        }\n\n        await deviceClient.CloseAsync();\n        return false;\n    }\n    catch (Exception ex)\n    {\n        logger?.LogDebug($\"Failed : {ex.Message}\");\n        return false;\n    }\n}\n</code></pre>\n\n<p>I get the receivedMessage and everything looks ok, but in IoT hub logs, I see the <strong>deliveryCountExceeded</strong> error.</p>\n\n<p>Any other method to use here?</p>\n"
    }, {
        "tags": ["android", "bluetooth", "iot", "gatt"],
        "is_answered": false,
        "view_count": 61,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1575003752,
        "creation_date": 1575003752,
        "question_id": 59099008,
        "link": "https://stackoverflow.com/questions/59099008/trying-to-connect-with-iot-device-by-bluetooth-connectivitygatt",
        "title": "Trying to connect with IoT device by bluetooth connectivity(Gatt)",
        "body": "<p>I am trying to communicate with an IoT device by BlueTooth connectivity. first, </p>\n\n<ol>\n<li>I have paired the device using BlueTooth.  </li>\n<li>Then prepared the Hexadecimal value using AES encryption</li>\n<li>Send a request to the device using characteristic write</li>\n<li>I tried to read the response from the device using characteristic Read but I got the status as 1 and data is null.</li>\n</ol>\n\n<p>These are the steps which I have done and the code I mentioned below.</p>\n\n<pre><code>BluetoothGatt gatt;\nBluetoothGattCallback gattCallback = new BluetoothGattCallback() {\n    @Override\n    public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {\n        super.onConnectionStateChange(gatt, status, newState);\n\n        System.out.println(\"Lock Conn St ---\"+status);\n        System.out.println(\"Lock Conn new st  ---\"+newState);\n        if (newState == 2){\n            gatt.discoverServices();\n        }\n\n\n    }\n\n    @Override\n    public void onServicesDiscovered(BluetoothGatt gatt, int status) {\n        super.onServicesDiscovered(gatt, status);\n\n        System.out.println(\"Lock Conn new serv discov  ---\"+status);\n\n         if (status == BluetoothGatt.GATT_SUCCESS){\n\n\n\n             System.out.println(\"gatt Success  ---\");\n             String getTockenString;\n             /*List&lt;BluetoothGattService&gt; ls= gatt.getServices ();\n\n             System.out.println(\"gatt List   ---\"+ls.toString());*/\n             //orginal key\n             final byte AESkey[] = new byte[] {0x20,0x57,0x4f,0x55,0x36,0x4b,0x3f,0x47,0x39,0x50,0x41,0x58,0x91,0x63,0x2d,0x8b};\n             final byte Src[] = new byte[] {0x06,0x01,0x01,0x01,0x2D,0x1A,0x68,0x3D,0x48,0x27,0x1A,0x18,0x31,0x6E,0x47,0x1A};\n\n             try {\n                 getTockenString = bytesToHex(encrypt(Src, AESkey));\n                 BluetoothGattService service = gatt.getService(LOCK_SERVICE_UUID);\n                 BluetoothGattCharacteristic readCharect =  service.getCharacteristic(LOCK_READ_DATA_UUID);\n                 BluetoothGattCharacteristic writeCharect =  service.getCharacteristic(LOCK_WRITE_DATA_UUID);\n\n                 gatt.setCharacteristicNotification(readCharect,true);\n\n\n                 writeCharect.setValue(getTockenString.getBytes());\n                 gatt.writeCharacteristic(writeCharect);\n\n                 System.out.println(\"gatt AES ENC   ---\"+getTockenString);\n\n             } catch (Exception e) {\n                 e.printStackTrace();\n\n             }\n\n         }\n        System.out.println(\"gatt end of on descovng   ---\");\n    }\n\n    @Override\n    public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {\n        super.onCharacteristicChanged(gatt, characteristic);\n\n        System.out.println(\"gatt char   changed    ---\"+ Arrays.toString(characteristic.getValue()));\n\n\n\n    }\n\n\n\n    @Override\n    public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n        super.onCharacteristicWrite(gatt, characteristic, status);\n\n        System.out.println(\"gatt =============== == onCharacteristicWrite  happend  ---\"+status+ Arrays.toString(characteristic.getValue() ));\n\n        BluetoothGattService service = gatt.getService(LOCK_SERVICE_UUID);\n        BluetoothGattCharacteristic readCharect =  service.getCharacteristic(LOCK_READ_DATA_UUID);\n        gatt.readCharacteristic(readCharect);\n\n    }\n\n    @Override\n    public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n        super.onCharacteristicRead(gatt, characteristic, status);\n\n        System.out.println(\"gatt ================    onCharacteristicRead   happend  ---\"+status );\n\n        System.out.println(\"gattonCharacteristicRead value---\"+ Arrays.toString(characteristic.getValue()));\n\n\n    }\n\n\n};\n</code></pre>\n\n<p>In the document, they have explained all the communication will be in 16 bit but when I send a request I got one 32 bit value but I don't think that is the value I am expecting. can anyone help me to solve the issue? I have to communicate with my device using BlueTooth.</p>\n"
    }, {
        "tags": ["python-3.x", "iot", "modbus"],
        "is_answered": true,
        "view_count": 964,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1573817652,
        "creation_date": 1573802629,
        "last_edit_date": 1592644375,
        "question_id": 58872129,
        "link": "https://stackoverflow.com/questions/58872129/read-and-write-to-modbus-rtu",
        "title": "Read and write to Modbus RTU",
        "body": "<p>I'm using minimalmodbus for reading and writing. I have USB to Rs485 connection.</p>\n<p>I'm trying to write this &quot;02 05 0000 ff11&quot; to RTU register in python but i'm getting error. Here is my code.</p>\n<p><strong>Device address:</strong> 02</p>\n<p><strong>Function code:</strong> 05</p>\n<p><strong>Register Address:</strong> 0000</p>\n<p><strong>Value:</strong> ff00</p>\n<pre><code> import minimalmodbus\n instrument = minimalmodbus.Instrument('COM4', 1)\n instrument.write_register(02, 05, 0000, ff00)\n</code></pre>\n<p><strong>I need the same functionality in the above code using python!</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Wv77D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wv77D.png\" alt=\"I need this functionality in Python script\" /></a></p>\n"
    }, {
        "tags": ["c", "embedded", "iot"],
        "is_answered": false,
        "view_count": 82,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1573651979,
        "creation_date": 1573651979,
        "question_id": 58838309,
        "link": "https://stackoverflow.com/questions/58838309/sigfox-timeout-on-downlinks",
        "title": "Sigfox timeout on downlinks",
        "body": "<p>I'm working on a B-L072-LRWAN1 board</p>\n\n<p>I'm having a problem where close to 50% of all the downlinks I send to my device are just not received and instead I get a <code>SFX_ERR_INT_GET_RECEIVED_FRAMES_TIMEOUT</code> (0x9B) from the <code>SIGFOX_API_send_frame</code> function even though the sigfox backend tells me that my downlink has been received and ACKED</p>\n\n<p>My LQI varies between good and excellent so I dont think the problem is related to a bad connectivity</p>\n\n<p>I would be very grateful to anyone who has at least an idea on what could be happening here</p>\n\n<p>Thanks for your answers</p>\n"
    }, {
        "tags": ["c#", "azure", "iot", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 59,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1572866249,
        "creation_date": 1572858703,
        "question_id": 58690177,
        "link": "https://stackoverflow.com/questions/58690177/azure-iot-hub-auto-reverting-changes-in-device-twin",
        "title": "Azure IoT hub auto reverting changes in device twin",
        "body": "<p>I'm observing a strange behaviour in my device's twin. I want to change a desired property with <a href=\"https://github.com/Azure-Samples/azure-iot-samples-csharp/blob/master/iot-hub/Samples/service/RegistryManagerSample/RegistryManagerSample.cs#L135\" rel=\"nofollow noreferrer\">example code</a>. It works as expected: desired value changes, device updates value and so the reported property also changes to my new value. But after a few minutes - without any apparent reason - both values are reverted to their original value. Is it some kind of iot hub funcionality (e.g. do I need to \"commit\" my changes somehow?) or is it a fault of device itself?</p>\n"
    }, {
        "tags": ["routing", "iot", "contiki"],
        "is_answered": false,
        "view_count": 116,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1570594700,
        "creation_date": 1569166379,
        "last_edit_date": 1569249735,
        "question_id": 58050714,
        "link": "https://stackoverflow.com/questions/58050714/rpl-routing-neighbors",
        "title": "RPL routing neighbors",
        "body": "<p>Just to be on the safe side, please CORRECT me if I am wrong.<br>\nWhen RPL is in storing mode, each node knows its direct children and via which child a given node can be accessed. \nE.g., the following topology </p>\n\n<pre><code>7-6-5-1-2-3-4 \n  | |     |\n  8 10    9\n</code></pre>\n\n<p>If the node No 1 wants to send a msg to node 7, it will send it to 5 without knowing where exactly No 7 is. Node No 5 will send it to No 6 who knows that it is \"directly\" connected to 7.\nOn the other hand, if No 1 wants to send a msg to No 4, it will send it to No 2, who knows that No 4 is accessible via No 3.</p>\n"
    }, {
        "tags": ["javascript", "arrays", "react-native", "encryption", "iot"],
        "is_answered": true,
        "view_count": 2517,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1570032516,
        "creation_date": 1569954375,
        "last_edit_date": 1570024306,
        "question_id": 58190380,
        "link": "https://stackoverflow.com/questions/58190380/encrypt-a-byte-array-in-javascript-using-crypto-js-aes-ecb-algorithm",
        "title": "Encrypt a byte array in JavaScript using crypto js AES ECB algorithm",
        "body": "<p>I'm using an react native app to communicate with my miband 3, and part of its authentication process is encrypt a array of bytes using AES/ECB/NoPadding algorithm. I'm currently using <a href=\"https://github.com/yogeshojha/MiBand3/blob/master/auth.py\" rel=\"nofollow noreferrer\">this code as reference</a></p>\n\n<p>Since I'm new to iot and encryption, I suppose that <a href=\"https://medium.com/@yogeshojha/i-hacked-xiaomi-miband-3-and-here-is-how-i-did-it-43d68c272391\" rel=\"nofollow noreferrer\">the lest step of its authentication</a> is incorrect because and after writing to the miband 3 the encrypted byte array, I'm not getting authenticated properly. </p>\n\n<p>Currently the last step looks like this: </p>\n\n<pre><code>const base_key = [0x01,0x23,0x45,0x67,0x89,0x01,0x22,0x23,0x34,0x45,0x56,0x67,0x78,0x89,0x90,0x02]\nconsole.warn('Getting random number...')\nconst random_number = bytesToString(notification.filter((byte, index) =&gt; index &gt; 3))\n\n// Encrypting the key\nconst key = bytesToString(base_key)\nconst cipher = CryptoJS.AES.encrypt(random_number,key).toString()\n\n// Step 5) Sending encrypted random number\nconsole.warn('sending encrypted random number...')\nconst request_send_encrypted_key = [0x03,0x00, ...stringToBytes(cipher)]\nawait BleManager.writeWithoutResponse(miband3, service_uuid, characteristic_uuid, request_send_encrypted_key)\n</code></pre>\n\n<p>Notification is filtered because the first 3 bytes are used to tell which notification is happening, so I do not need them. </p>\n\n<p>I must send the following to the miband 3 in order to authenticate properly:</p>\n\n<pre><code>const byteArrayToSend = [0x03,0x00, ...encryptedByteArray]\n</code></pre>\n\n<p><strong>encryptedByteArray</strong> being my random number returned from miband notification (without the first 3 bytes) and properly encrypted .</p>\n\n<p>I'm using 'crypto-js' and <a href=\"https://github.com/innoveit/react-native-ble-manager\" rel=\"nofollow noreferrer\">'react-native-ble-manager'</a> in the code.</p>\n\n<p>How do I properly encrypt this bytearray using AES algorithm in order to send it?</p>\n"
    }, {
        "tags": ["android", "iot", "android-things"],
        "is_answered": false,
        "view_count": 79,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1569508346,
        "creation_date": 1569436510,
        "last_edit_date": 1569508346,
        "question_id": 58104639,
        "link": "https://stackoverflow.com/questions/58104639/why-is-gpio-still-in-use-after-closing-it",
        "title": "Why is GPIO still in use after closing it?",
        "body": "<p>I have an issue with GPIO after the closing of it. The first step I closed the GPIO by calling of the method close() and after that, I tried to open it again, but PeripheralManager throws exception android.os.ServiceSpecificException: BCM17 is already in use (code 16). Why does there happen?</p>\n\n<p>Snippet of the code for example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Gpio gpio = PeripheralManager.getInstance().openGpio(\"BCM17\");\n.\n.\n// do some interactions with opened GPIO\n.\n.\ngpio.close();\n\nGpio gpio1 = PeripheralManager.getInstance().openGpio(\"BCM17\"); //throws exception android.os.ServiceSpecificException: BCM17 is already in use (code 16)\n</code></pre>\n"
    }, {
        "tags": ["iot", "contiki", "cooja"],
        "is_answered": false,
        "view_count": 114,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1567489793,
        "creation_date": 1567446725,
        "last_edit_date": 1567489793,
        "question_id": 57761038,
        "link": "https://stackoverflow.com/questions/57761038/contiki-examples-ipv6-rpl-collect-udp-sink-c-file-function-tcpiphandler-is-not",
        "title": "contiki/examples/ipv6/rpl-collect/udp-sink.c file function &quot;tcpiphandler&quot; is not being called for z1 motes in Cooja Simulator",
        "body": "<p>I am trying to extract the sequence number for each packet of all the Z1 motes in my simulation. The problem is that, the function (tcpiphaandler in udp-sink.c) does not get called but the nodes are sending packets to each other in the simulation.</p>\n\n<p>I have tried to print my name (using printf command) under the \"tcpiphandler\" function to check if it works or not and unfortunately it does nothing.</p>\n"
    }, {
        "tags": ["iot", "cumulocity"],
        "is_answered": true,
        "view_count": 245,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1566973966,
        "creation_date": 1546426505,
        "question_id": 54005061,
        "link": "https://stackoverflow.com/questions/54005061/how-to-debug-microservice-in-cumulocity-platform",
        "title": "How to debug Microservice in cumulocity platform",
        "body": "<p>I wrote microservices using spring boot. some time showing its active in status and sometimes showing inactive, I can't understand the behaviour of microservice and how can debug it </p>\n"
    }, {
        "tags": ["python", "iot", "software-design"],
        "is_answered": false,
        "view_count": 17,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1566866722,
        "creation_date": 1566866722,
        "question_id": 57666425,
        "link": "https://stackoverflow.com/questions/57666425/how-to-package-my-scripts-and-code-into-one-homogeneous-and-comprehensive-softwa",
        "title": "How to package my scripts and code into one homogeneous and comprehensive software?",
        "body": "<p>We have an IoT that does what it's supposed to. however, everyone in our team wrote a piece of its code and scripts and the result was a bunch of scripts codes that work independently. some in Python, other in shell and Java.</p>\n\n<p>We are thinking to rewrite everything in Python. My question is how can we package all those scripts and codes into one piece of software where each piece of code\ntalk to one another.</p>\n\n<p>What is done in the industry today?</p>\n"
    }, {
        "tags": ["iot", "lte", "opennms"],
        "is_answered": true,
        "view_count": 63,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1565798317,
        "creation_date": 1542007508,
        "question_id": 53257520,
        "link": "https://stackoverflow.com/questions/53257520/opennms-can-i-do-industrial-iot-and-lte-mobility",
        "title": "OpenNMS: Can I do Industrial IOT and LTE Mobility",
        "body": "<p>Hi everyone I am new to OpenNMS and for now I am in learning phase. I have request from one of my client to done some research on the following two thing.</p>\n\n<p>1- Can we do Industrial IOT with OpenNMS</p>\n\n<p>2- Private LTE mobility and Monitoring of devices</p>\n\n<p>I have very short time to conclude the result and give it back to the client. Although I searched myself for these points but I cannot conclude because I have not in depth understanding for OpenNMS for now. So my questions is can we do these features in OpenNMS. Its really helpful If someone with more experience in OpenNMS share his thoughts. <strong>Please don't consider the details about devices and their protocol I just want to know if OpenNMS is capable for doing industrial IOT for oil, gas and mining sectors.</strong> </p>\n\n<p>Note: My client already have NMS build in OpenNMS that is why he is interested in OpenNMS for these features.</p>\n"
    }, {
        "tags": ["c#", "windows", "raspberry-pi", "iot", "i2c"],
        "is_answered": false,
        "view_count": 82,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1560394778,
        "creation_date": 1560368818,
        "question_id": 56569417,
        "link": "https://stackoverflow.com/questions/56569417/comexception-when-running-a-background-uwp-on-windows-10-iot",
        "title": "COMException when running a Background UWP on Windows 10 IOT",
        "body": "<p>I am developing an I2C solution for a Raspberry Pi and Teensy 3.6 Arduino . The Pi is going to send NTP via I2C to the Arduino. I have done research for weeks, and tried to test the code below, and receive a couple errors.</p>\n\n<pre><code>public sealed class StartupTask : IBackgroundTask\n{\n    public async void Run(IBackgroundTaskInstance taskInstance)\n    {\n        while(true)\n        {\n            Wait(5000);\n            try\n            {\n                await I2C();\n            }\n            catch (Exception ex)\n            {\n                // eats fast inputs\n            }\n        }\n    }\n\n    private async void Wait(int millis)\n    {\n        await Task.Delay(millis);\n    }\n\n    private async Task I2C()\n    {\n        var settings = new I2cConnectionSettings(1);\n        settings.BusSpeed = I2cBusSpeed.FastMode;\n        var controller = await I2cController.GetDefaultAsync();\n\n        using (I2cDevice device = controller.GetDevice(settings))\n        {\n            byte[] writeBuf = { 0x01, 0x02, 0x03, 0x04 };\n            device.Write(writeBuf);\n        }\n    }\n}\n</code></pre>\n\n<p>Using the debug console, I have found that the I2C method never goes all the way through the using statement.</p>\n\n<p>EXCEPTIONS:</p>\n\n<p>Exception thrown: 'System.Runtime.InteropServices.COMException' in i2cTestIOT.winmd\nWinRT information: Unexpected number of bytes was transferred. Expected: '. Actual: '.\nException thrown: 'System.Runtime.InteropServices.COMException' in System.Private.CoreLib.ni.dll\nWinRT information: Unexpected number of bytes was transferred. Expected: '. Actual: '.</p>\n"
    }, {
        "tags": ["bluetooth", "iot", "lora"],
        "is_answered": false,
        "view_count": 194,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1559577102,
        "creation_date": 1523210605,
        "question_id": 49721021,
        "link": "https://stackoverflow.com/questions/49721021/signal-stability-lora-vs-bluetooth",
        "title": "signal stability lora vs bluetooth",
        "body": "<p>I've tested bluetooth and lora module sx127x. \nAm I correct that sx127x 433Mhz or Lora modules give better RSSI signal strength  in buildings at all? \nOn BT I get's big difference about 20 - 40 between two reads in one/two seconds (ex. -70 and -92). \nOn lora after first tests I get 2-3 (ex. -112 and - 114).</p>\n"
    }, {
        "tags": ["c", "automation", "arduino", "iot", "blynk"],
        "is_answered": false,
        "view_count": 439,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1558861398,
        "creation_date": 1558860571,
        "question_id": 56312028,
        "link": "https://stackoverflow.com/questions/56312028/blynk-write-parameter-to-enter-and-break-a-loop",
        "title": "Blynk_Write parameter to enter and break a loop",
        "body": "<p>I am new to Arduino and blynk. I was working on the automated cloth line with blynk as my mobile application and I got it partially working. I am using virtual pin to enter the loop which is working perfectly fine. But upon the same button press it is supposed to end the loop which is not happening in the current state.</p>\n\n<p>Seems that i am missing something simple.\nAny thoughts ?</p>\n\n<pre><code>#define BLYNK_PRINT DebugSerial\n\n\nint in3 = 7;\nint in4 = 8;\n\n\n#include &lt;SoftwareSerial.h&gt;\nSoftwareSerial DebugSerial(2, 3); // RX, TX\n\n#include &lt;BlynkSimpleStream.h&gt;\nchar auth[] = \"6787948d586b458a96a1bcf38a952297\";\n\nvoid setup()\n{\n  Serial.begin(9600);\n  Blynk.begin(Serial, auth);\n\n  pinMode(7, OUTPUT);\n  pinMode(8, OUTPUT);\n\n}\n\nBLYNK_WRITE(V3) //AUTOMATIC\n{\n  int pinValue2 = param.asInt(); // assigning incoming value from pin V1 to a variable\n\n    {\n      do { \n        if (analogRead(0) &lt; 650) \n          {\n            digitalWrite(8, HIGH);\n            digitalWrite(7, LOW);\n          }\n          else\n          {\n            digitalWrite(8, LOW);\n            digitalWrite(7, HIGH);\n          }\n      }\n          while (pinValue2 != 0); \n    }        \n\n  }\n\n\nvoid loop()\n{\n  Blynk.run();\n}\n</code></pre>\n"
    }, {
        "tags": ["ip-address", "iot", "mac-address", "contiki"],
        "is_answered": false,
        "view_count": 32,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1558684955,
        "creation_date": 1558684955,
        "question_id": 56288277,
        "link": "https://stackoverflow.com/questions/56288277/dynamically-assign-addresses-in-an-iot-ieee-802-15-4-network",
        "title": "Dynamically assign addresses in an IoT IEEE 802.15.4 Network",
        "body": "<h2>Some context</h2>\n\n<p>First let explain the context, for a course I had to create some protocol to save power consumption in a IoT <strong>IEEE 802.15.4</strong> network (thus how to optimise the routing, fault detection, ... to save energy since the devices are running on battery). The network should be a tree and each node has only one parent (I know this is not the best solution but those were the requirements of the teacher). We had to build it with the broadcast and (r)unicast of Rime. A Rime address are two 8 bits values (can be extended to two 16 bits values but I would like to avoid using them to keep the packets as small as possible).</p>\n\n<p>It all works fine on contiki since rime is attributing the nodes an address automatically (base on there node id that is given when they are added to the simulation). When going to hardware all nodes had the same hardcoded id  (thus same address) and of course nothing was working. So I started to think about <strong>how to assign addresses to new nodes in the network?</strong></p>\n\n<h2>Some solutions I found</h2>\n\n<p>Different solutions came up:</p>\n\n<ol>\n<li><p>Don't do it dynamically and hardcode the addresses in each new node you want to add to the network. From what I read it is a common practice but I'm not satisfied by this since it is not quite user friendly and we have to maintain some list of all given addresses per network. </p></li>\n<li><p>All nodes that connect to the network have to ask the the root node which address they may take (like on a normal internet network) but this requires a lot of messages in both directions and those devices are really slow. This would take a lot of time and will consume a lot of energy not only on the root node and the new node but on all nodes between them. Furthermore the root node will have the keep track of all addresses already given and they don't have much memory so when having a lot of nodes ...</p></li>\n<li><p>Quite the same idea as in <strong>2.</strong> but here the parent node will not give an unique address to his new child but a range of addresses, the child will chose one and will be able to give a new range to his children (again this is quite what normal networks do). This is a better solution than the previous but the big drawback is that we the network is limited in depth (quite a lot). Like explained above the addresses are two 8bits values, this makes 65536 different addresses and with this solution the max depth of the network would be 6, thus in the worst case only 6 nodes could be added to the network ...  </p></li>\n<li><p>The last idea is to let the new node chose an address when it boots. It would be a random value. So I tried to find the probability to have twice the same address on the network and I realised this is the same problem as the <a href=\"https://en.wikipedia.org/wiki/Birthday_problem\" rel=\"nofollow noreferrer\">birthday problem</a>. After some maths I found the following statistics:\n<a href=\"https://i.stack.imgur.com/Ou0c3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ou0c3.png\" alt=\"General overview\"></a></p></li>\n</ol>\n\n<p>We can see that it quickly raise to high chance of having duplicates, with 300 nodes we have 50% chance of having a duplicated node. When we take a closer look we can see that under 40 nodes we have less than 1% chance of having duplicated nodes, this become acceptable probabilities. </p>\n\n<p><a href=\"https://i.stack.imgur.com/qKYbC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qKYbC.png\" alt=\"Closer look\"></a></p>\n\n<p>But we will still have some probability to have duplicated nodes and this works for small networks, big networks would require to encoded the addresses on two 16 bits values (what I tried to avoid). The advantage of the two 16bits values for the address is that the chance of having duplicated nodes will be very low, even for quite big networks (don't have graphs or numbers to show ... My computer didn't like to calculate 2^32!) </p>\n\n<h2>My question</h2>\n\n<p>First of all thank you for reading up to here. I'm aware that this is maybe more a discussion than a actual question but still, I hope there is a good solution to this problem. </p>\n\n<blockquote>\n  <p>For what option should I go? The easy solution and don't try to make\n  this dynamically or is dynamically a possible solution? Are there some\n  <em>protocols</em> (not sure if this is the right term) that already solve this problem?</p>\n</blockquote>\n\n<p>Any advise or critic on my reasoning is welcome and any new idea is more than welcome.</p>\n\n<p>Thank you for taking time to read all of this.</p>\n"
    }, {
        "tags": ["iot", "contiki"],
        "is_answered": false,
        "view_count": 38,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1558642173,
        "creation_date": 1558441791,
        "question_id": 56238328,
        "link": "https://stackoverflow.com/questions/56238328/how-to-find-last-relay-node-of-a-data-packet-in-transit",
        "title": "How to find last relay node of a data packet in-transit?",
        "body": "<p>I'm trying to implement a security mechanism in RPL. For this, I need to log where did a packet come from. For example, if a packet is transmitted from A-->B-->C-->D, I want to find out at C that the packet came through B, and similarly for D.</p>\n\n<p>I've added some code in <code>uip6.c</code> file to pull up the sender address from packetbuffer, but it is always null.</p>\n\n<p>I'm storing the last node address and the time when the complete packet was received. These are the data structures.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct packet_time_entry {\n  linkaddr_t *source;\n  uint32_t time;\n};\nMEMB(packet_time_mem, struct packet_time_entry, 16);\nLIST(packet_time);\n</code></pre>\n\n<p>The main code I've written so far is this, in <code>uip_process()</code>, below line 1108 (master branch).</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  struct packet_time_entry *p = memb_alloc(&amp;packet_time_mem);\n  p-&gt;time = clock_time();\n  linkaddr_copy(p-&gt;source, packetbuf_addr(PACKETBUF_ADDR_SENDER));\n\n  struct packet_time_entry *i;\n  for (i = list_head(packet_time); i != NULL; i = list_item_next(i)) {\n    if (linkaddr_cmp(i-&gt;source, p-&gt;source))\n      list_remove(packet_time, i);\n  }\n  list_add(packet_time, p);\n  PRINTF(\"Entry \");\n  PRINTLLADDR((uip_lladdr_t*) p-&gt;source);  // always NULL \n  PRINTF(\"| %lu\", p-&gt;time);\n  PRINTF(\"\\n\");\n</code></pre>\n\n<p>I expect it to give me the address from packetbuf, but it's always NULL. Also, I suspect it is run only at the destination node, but not at the intermediate nodes.</p>\n"
    }, {
        "tags": ["unix", "iot", "node-red"],
        "is_answered": false,
        "view_count": 1888,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1558010591,
        "creation_date": 1489864139,
        "last_edit_date": 1489869383,
        "question_id": 42878704,
        "link": "https://stackoverflow.com/questions/42878704/how-i-can-add-variable-in-the-node-red-exec-unix-command-node",
        "title": "How I can add variable in the node-red exec/unix command node",
        "body": "<p>I wanted to add some variable value (ex. test=test value) at the end of a file with a Unix command. For I wanted to add test value at the end of FILE_NAME.txt. So FILE_NAME.txt would contain test value </p>\n\n<pre><code>nano FILE_NAME.txt\n</code></pre>\n\n<p>will show string > 'test value' inside FILE_NAME.txt</p>\n\n<pre><code>sudo sed -i -e \\$aVARIABLE(VAR_VALUE) /etc/FILE_NAME.txt\n</code></pre>\n\n<p>I tried similar with a node-red text input field node connected to the input of exec node. But didn't work.</p>\n\n<p>Any help would be appreciated. Thanks. </p>\n"
    }, {
        "tags": ["c#", "uwp", "windows-10", "iot"],
        "is_answered": true,
        "view_count": 171,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1556537551,
        "creation_date": 1556411666,
        "last_edit_date": 1556460213,
        "question_id": 55886036,
        "link": "https://stackoverflow.com/questions/55886036/datawriter-detachstream-throws-system-runtime-interopservices-comexception",
        "title": "DataWriter.DetachStream() throws &#39;System.Runtime.InteropServices.COMException&#39;",
        "body": "<p>I'm creating a UWP program for Raspberry Pi. One of the functions of the program is to send and receive some data from an Arduino.</p>\n\n<p>The problem is when I try sending data to the Arduino rapidly and many times, I end up with <code>System.Runtime.InteropServices.COMException The operation identifier is not valid.</code> originating from <code>DataWriter.DetachStream()</code>.</p>\n\n<p>Sending the data rapidly works just fine, up until a certain amount it seems, where I get the exception thrown.\nWith \"rapid\", I mean using an auto clicker to click a button to send data each millisecond.</p>\n\n<p>I've not tried sending data slowly many times in a row to reproduce the issue, as this would probably take a long time (seeing it takes about 10-20 seconds with 1ms delay between transmissions.</p>\n\n<p>I've been searching for a solution to this problem for way too many hours, but I can't seem to find any related questions/solutions.</p>\n\n<pre class=\"lang-c# prettyprint-override\"><code>public sealed partial class LightControl : Page\n{\n    int Alpha;\n    int Red;\n    int Green;\n    int Blue;\n\n    // This is the handler for the button to send data\n    private void LightButton_Click(object sender, RoutedEventArgs e)\n    {\n        if (!(sender is Button button) || button.Tag == null) return;\n\n        string tag = button.Tag.ToString();\n\n        Alpha = int.Parse(tag.Substring(0, 2), System.Globalization.NumberStyles.HexNumber);\n        Red = int.Parse(tag.Substring(2, 2), System.Globalization.NumberStyles.HexNumber);\n        Green = int.Parse(tag.Substring(4, 2), System.Globalization.NumberStyles.HexNumber);\n        Blue = int.Parse(tag.Substring(6, 2), System.Globalization.NumberStyles.HexNumber);\n\n        SendLightData();\n    }\n\n    public async void SendLightData()\n    {\n        await ArduinoHandler.Current.WriteAsync(ArduinoHandler.DataEnum.LightArduino,\n            ArduinoHandler.DataEnum.Light, Convert.ToByte(LightConstants.LightCommand.LightCommand),\n            Convert.ToByte(Red), Convert.ToByte(Green), Convert.ToByte(Blue), Convert.ToByte(Alpha),\n            WriteCancellationTokenSource.Token);\n    }\n}\n</code></pre>\n\n<pre class=\"lang-c# prettyprint-override\"><code>public class ArduinoHandler\n{\n    // Code for singleton behaviour. Included for completeness\n    #region Singleton behaviour\n    private static ArduinoHandler arduinoHandler;\n\n    private static Object singletonCreationLock = new Object();\n\n    public static ArduinoHandler Current\n    {\n        get\n        {\n            if (arduinoHandler == null)\n            {\n                lock (singletonCreationLock)\n                {\n                    if (arduinoHandler == null)\n                    {\n                        CreateNewArduinoHandler();\n                    }\n                }\n            }\n            return arduinoHandler;\n        }\n    }\n\n    public static void CreateNewArduinoHandler()\n    {\n        arduinoHandler = new ArduinoHandler();\n    }\n    #endregion\n\n    private DataWriter dataWriter;\n    private Object WriteCancelLock = new Object();\n\n    public async Task WriteAsync(DataEnum receiver, DataEnum sender,\n        byte commandByte1, byte dataByte1, byte dataByte2, byte dataByte3,\n        byte dataByte4, CancellationToken cancellationToken)\n    {\n        try\n        {\n            dataWriter = new DataWriter(arduinos[receiver].OutputStream);\n            byte[] buffer;\n            Task&lt;uint&gt; storeAsyncTask;\n            lock (WriteCancelLock)\n            {\n                buffer = new byte[8];\n                buffer[0] = Convert.ToByte(receiver);\n                buffer[1] = Convert.ToByte(sender);\n                buffer[2] = commandByte1;\n                buffer[3] = dataByte1;\n                buffer[4] = dataByte2;\n                buffer[5] = dataByte3;\n                buffer[6] = dataByte4;\n                buffer[7] = Convert.ToByte('\\n');\n\n                cancellationToken.ThrowIfCancellationRequested();\n                dataWriter.WriteBytes(buffer);\n                storeAsyncTask = dataWriter.StoreAsync().AsTask(cancellationToken);\n            }\n            uint bytesWritten = await storeAsyncTask;\n            Debug.Write(\"\\nSent: \" + BitConverter.ToString(buffer) + \"\\n\");                    \n        }\n        catch (Exception e)\n        {\n            Debug.Write(e.Message);\n        }\n        finally\n        {\n            dataWriter.DetachStream();  // &lt;--- I've located the exception to originate from here, using the debugger in Visual Studio\n            dataWriter.Dispose();\n        }\n    }\n\n    public enum DataEnum\n    {\n        Light = 0x01,\n        Piston = 0x02,\n        PC = 0x03,\n        LightArduino = 0x04\n    }\n}\n</code></pre>\n\n<p>I would expect the Raspberry Pi to send the data to the Arduino, but after a while with rapid data transmission, the exception is thrown.</p>\n\n<h2>Update</h2>\n\n<p>I tried using a local variable for the dataWriter as suggested below, but this causes strange behavior after a while with rapid data transmission. Just as if it slows down. It is worth noting that I don't get an exception anymore.</p>\n\n<p>Quite hard trying to explain how it behaves, but the Debug.Write logs the message I'm sending (which works fine). However, after a while, it seems to \"slow down\", and even after I stop clicking, the data is being sent once every second or so. It works completely fine up until this point. So I'm wondering if there is a limit of some sort I'm hitting?</p>\n\n<h2>Update 2</h2>\n\n<p>I seem to have found a rather \"hacky\" and weird solution to the problem.\nIf I use Serial.write() on the Arduino to send the data back to the Raspberry Pi, it seems to have fixed the issue somehow.</p>\n\n<p>If anyone knows how this worked, I'd be very interested to know :)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>const int payloadSize = 8;\nbyte payload[payloadSize]\n\nint numBytes;\n\n// Called each time serial data is available\nvoid serialEvent()\n{\n  numBytes = Serial.available();\n  if (numBytes == payloadSize)\n  {\n    for (int i = 0; i &lt; payloadSize; i++)\n    {\n      payload[i] = Serial.read();\n      Serial.write(payload[i]); // &lt;--- This line fixed the issue for whatever reason\n    }\n  }\n\n  checkData(); // Function to do something with the data\n\n  for (int i = 0; i &lt; payloadSize; i++)\n  {\n    payload[i] = None;\n  }\n  numBytes = 0;\n}\n</code></pre>\n"
    }, {
        "tags": ["php", "mysql", "arduino", "iot", "ethernet"],
        "is_answered": true,
        "view_count": 3838,
        "favorite_count": 2,
        "score": 2,
        "last_activity_date": 1555128982,
        "creation_date": 1520377927,
        "question_id": 49141555,
        "link": "https://stackoverflow.com/questions/49141555/why-is-client-available-returning-a-0-arduino",
        "title": "Why is client.available() returning a 0? (Arduino)",
        "body": "<p>I'm working on an Arduino-based RFID user access logger, but I'm having some issues while reading server responses.</p>\n\n<p>My setup is the following:</p>\n\n<p>-An Arduino Mega connected to an MFRC522 card reader and a ENC28J60 ethernet module (SS and RST pins of the MFRC522 are changed to avoid conflicts within the SPI bus).</p>\n\n<p>-A local host server (on port 100) which contains a MySQL database and the necessary php files.</p>\n\n<p>Currently the cards are read properly and the Arduino is succesfully updating variables in the database, however I'm not able to get the echos from the php file to be displayed through the serial monitor. To test if everything was OK from the server side, I've created a small html form and if I send it I get the necessary echos displayed in my browser.</p>\n\n<p>I'm printing the value which client.available() returns and I'm always getting a false, although client.connected() returns true. Comparing my code to others found online there's no much difference. At this point I don't know what to try, I'm hopping you could help me with this!</p>\n\n<p>I'm attaching the codes below:</p>\n\n<p><strong>Arduino:</strong></p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;MFRC522.h&gt;\n#include &lt;UIPEthernet.h&gt;\n\n#include &lt;Wire.h&gt; \n#include &lt;LiquidCrystal_I2C.h&gt;\n\n//----RFID----/\nMFRC522 rfid(8, 9); //(SS pin, RST pin)\nbyte nuidPICC[4];\n\n//----ETHERNET----/\n#define DEBUG\nEthernetClient client;\nchar server[] = \"192.168.xxx.xxx\";   //&lt;-Localhost\nbyte mac[] = { 0x54, 0x34, 0x41, 0x30, 0x30, 0x40 };\n\n//----LCD----/\nLiquidCrystal_I2C lcd(0x3F, 16, 2);\n\n//----VARIABLES----/\nint userid=0;\n\nvoid setup() { \n  Serial.begin(9600);\n  SPI.begin(); // Init SPI bus\n  lcd.begin();\n  pinMode(2,OUTPUT);\n\n  //----RFID----/\n  rfid.PCD_Init(); // Init MFRC522 \n\n  //----ETHERNET----/\n  Ethernet.begin(mac);\n  #ifdef DEBUG\n    Serial.println(\"-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\\n\");\n    Serial.print(\"IP Address        : \");\n    Serial.println(Ethernet.localIP());\n    Serial.print(\"Subnet Mask       : \");\n    Serial.println(Ethernet.subnetMask());\n    Serial.print(\"Default Gateway IP: \");\n    Serial.println(Ethernet.gatewayIP());\n    Serial.print(\"DNS Server IP     : \");\n    Serial.println(Ethernet.dnsServerIP());\n    lcd.print(\"IP Address\");\n    lcd.setCursor(0,1);\n    lcd.print(Ethernet.localIP());\n    delay(2000);\n    lcd.clear();\n    lcd.noBacklight();\n  #endif\n}\n\nvoid sender(){\n\n  /*lcd.clear();\n  lcd.backlight();\n  lcd.setCursor(0,0);\n  lcd.print(\"identifying\");\n  tone(2,900,400);*/\n\n  if(client.connect(server, 100)){\n    Serial.println(\"Conected\");\n  }\n  //String query = \"GET /uploader.php?userid=\";\n  //query=query+String(userid);\n  //Serial.println(query);\n  //client.print(query);\n\n  client.print( \"GET /uploader.php?userid=\");\n  client.print(12345);\n  client.println(\" HTTP/1.1\");\n  client.print(\"HOST: \");\n  client.println(server);\n  client.println();\n  client.println();\n  Serial.println(\"Data sent\");\n\n  delay(1000);\n\n  Serial.println(client.connected());\n  Serial.println(client.available());\n\n  if(client.available())\n        {\n            Serial.println(\"ARDUINO: HTTP message received\");\n            Serial.println(\"ARDUINO: printing received headers and script response...\\n\");\n\n            while(client.available())\n            {\n                char c = client.read();\n                Serial.print(c);\n            }\n            //Code to display info through the serial monitor and the LCD\n        }\n        else\n        {\n            Serial.println(\"ARDUINO: no response received / no response received in time\");\n        }\n  client.stop();\n}\n\nvoid reader(){\n    userid=0;\n  // Look for new cards\n  if ( ! rfid.PICC_IsNewCardPresent())\n    return;\n\n  // Verify if the NUID has been readed\n  if ( ! rfid.PICC_ReadCardSerial())\n    return;\n\n  // Store NUID into nuidPICC array\n  for (byte i = 0; i &lt; 4; i++) {\n    nuidPICC[i] = rfid.uid.uidByte[i];\n    userid=userid+nuidPICC[i];\n  }\n\n  rfid.PICC_HaltA();\n\n  rfid.PCD_StopCrypto1();\n\n  sender();\n}\n\nvoid loop(){\n  reader();\n}\n</code></pre>\n\n<p><strong>Uploader.php</strong></p>\n\n<pre><code>&lt;?php\n$conexion = mysql_connect(\"localhost\", \"user\", \"pass\");\nmysql_select_db(\"db_name\", $conexion);\nmysql_query(\"SET NAMES 'utf8'\");\n\n$userid = $_GET ['userid'];\n\n$sql1 = \"SELECT nombre, ultima_entrada, ultimo_pago, dentro FROM usuarios WHERE id = '$userid'\";\n$retval = mysql_query( $sql1, $conexion );\n\nif(! $retval ) {\n  die('Could not get data: ' . mysql_error());\n  echo \"return error\";\n}\n\n$row = mysql_fetch_array($retval, MYSQL_ASSOC);\n\n$month = date('n',strtotime($row['ultimo_pago']));\n\n$date = date('n');\n\n\n\nif($month &lt; $date){\n    echo \"El usuario:{$row['nombre']} es moroso  &lt;br&gt; \";   \n}else{\n   if($row['dentro']==0){\n       echo \"Usuario:{$row['nombre']} accediendo al lab &lt;br&gt;\";\n       $sql2 = \"UPDATE usuarios SET dentro='1', ultima_entrada = CURRENT_TIMESTAMP WHERE id = '$userid'\";\n       mysql_query($sql2);\n   }elseif($row['dentro']==1){\n       echo \"Usuario:{$row['nombre']} saliendo del lab &lt;br&gt;\";\n       $sql3 = \"UPDATE usuarios SET dentro='0', ultima_salida = CURRENT_TIMESTAMP WHERE id = '$userid'\";\n       mysql_query($sql3);\n   }\n}\n\nmysql_close();\n\n?&gt;\n</code></pre>\n\n<p><strong>SQL table</strong></p>\n\n<pre><code>CREATE TABLE `usuarios` (\n  `id` varchar(11) NOT NULL,\n  `nombre` tinytext NOT NULL,\n  `admin` tinyint(1) NOT NULL DEFAULT '0',\n  `ultima_entrada` timestamp NULL DEFAULT NULL,\n  `ultima_salida` timestamp NULL DEFAULT NULL,\n  `tiempo_total` time DEFAULT NULL,\n  `ultimo_pago` date DEFAULT NULL,\n  `dentro` tinyint(1) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `id` (`id`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n\nINSERT INTO `usuarios` (`id`, `nombre`, `admin`, `ultima_entrada`, `ultima_salida`, `tiempo_total`, `ultimo_pago`, `dentro`) VALUES\n('12345', 'John', 0, '2018-03-06 16:41:44', '2018-03-06 16:41:36', '00:00:00', '2018-03-01', 1);\n</code></pre>\n\n<p>NOTE: I'm using a dummy user Id, in the future this will be changed, now I only want to get a response from the server.</p>\n\n<p>Thank you in advance!</p>\n"
    }, {
        "tags": ["simulation", "iot", "contiki", "cooja"],
        "is_answered": false,
        "view_count": 325,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1553712766,
        "creation_date": 1525418600,
        "last_edit_date": 1525422217,
        "question_id": 50169403,
        "link": "https://stackoverflow.com/questions/50169403/contiki-rpl-and-unicast-dio",
        "title": "Contiki RPL and unicast DIO",
        "body": "<p>I'm trying to learn to use Contiki 3.x.</p>\n\n<p>When launching the \"rpl-collect\" example in Cooja with one udp-sink and several udp-sender, I see that each sender node regularly unicast DIO message to its preferred parent (in addition of multicast DIO).</p>\n\n<p>The only reason I see to this is either a response to a DIS or a probing mechanism, but there is no DIS message and I disabled probing and saw no change.</p>\n\n<p>Maybe is it worth noting that every time a child node sends a DIO in unicast to its parent seems to be just after that child received a 802.15.4 ACK for a previous communication.</p>\n\n<p>Does somebody knows why child node unicast DIO to their parents ?</p>\n"
    }, {
        "tags": ["database", "firebase", "firebase-realtime-database", "iot", "labview"],
        "is_answered": false,
        "view_count": 362,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1552876987,
        "creation_date": 1552255668,
        "last_edit_date": 1552377033,
        "question_id": 55092897,
        "link": "https://stackoverflow.com/questions/55092897/send-cluster-or-array-of-data-generated-by-a-machine-programmed-in-labview-to-f",
        "title": "Send cluster or array of data generated by a machine programmed in LabVIEW, to Firebase",
        "body": "<p>I've already tried to connect LabVIEW to Firebase, and it needs a json file. I added a knob to control the input and meter as an output. When I change the knob, let's say, to 5 for example, the meter also changes to 5.\nNow the machine code is actually made, and it gives an array for the results of tests, and I want to send that array to Firebase.</p>\n\n<p>How can I accomplish this?</p>\n"
    }, {
        "tags": ["java", "iot"],
        "is_answered": true,
        "view_count": 27,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1551889756,
        "creation_date": 1551884998,
        "last_edit_date": 1551885214,
        "question_id": 55026298,
        "link": "https://stackoverflow.com/questions/55026298/i-need-to-short-time-store-associative-data-of-unknown-amount-in-java",
        "title": "I need to short-time store associative data of unknown amount in Java",
        "body": "<p>I want to read different IoT tags in Java and send it to an MQTT server. I could just read the data and send it off through the network, but the data could come in once a few minutes as well as in a flood of occurrences several times a second. So I thought about buffering the data as key->value pairs and checking if a tag number already appeared and how long ago.</p>\n\n<p>I don't know how many tags can appear.</p>\n\n<p>In dynamic scripting languages I'd just use an array or json object like {tag_number: [last_seen, times_seen]} and check each time tagnumber appeared, I increase times_seen by 1 and if last_seen is older than 1 second, send the times_seen to the server in order to reduce network traffic if I get spammed by the tags that report occurrences.</p>\n\n<p>The array supposed to be short-time, long time storage is done by the MQTT server.</p>\n\n<p>Java however has no dynamically growing arrays, I need to declare them with a fixed amount of entries. What would be the best way to do that in Java? I don't need complete examples, just a hint what kind of datatype to use, or a class? Is a buffer class object the right way here?</p>\n"
    }, {
        "tags": ["simulation", "iot", "contiki", "cooja", "orchestra"],
        "is_answered": false,
        "view_count": 87,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1551867600,
        "creation_date": 1549103473,
        "last_edit_date": 1551867600,
        "question_id": 54492153,
        "link": "https://stackoverflow.com/questions/54492153/how-to-fix-rx-problem-in-sender-based-orchestra-scheduling-with-cca",
        "title": "How to fix RX problem in Sender Based Orchestra Scheduling with CCA?",
        "body": "<p>I am realizing a scenario of DAG root and DAG node in Contiki NG environment with Sender Based Orchestra while using UDP between nodes.But I have a problem of lack of RX in my Cooja Simulation after enabling Clear Channel Assesment(CCA) in my <code>project-conf.h</code> file. What should I change in my files to solve this problem?</p>\n\n<p>I use one node for DAG root and one node for DAG node(while using the files under Contiki NG namely <code>udp-server.c</code> and <code>udp-client.c</code>). After CCA I have had an error like <code>!dl-miss TXbeforeTX 2800 2120</code> in the mote output of COOJA. As I get it there was a problem in timing. Therefore, I have changed the CCA offset(default is 1800 us) to 1000 us  and apparently it erased the warning. But this approach did not work on lack of RX in especially sender based unicast and EB slotframes. While seeing TX for mentioned slotframes, RX could not be observed. I could see in the mote output that the node tries to send a packet but it is never acknowledged. Also after sometime I have observed that the nodes were leaving the network. </p>\n\n<p>I expect to have a RX slots for EB and Sender based unicast slotframes as well but actual result is I am getting RX just for Broadcast slotframe.\nWhat should I change in my configuration files? </p>\n"
    }, {
        "tags": ["c#", "raspberry-pi2", "iot", "windows-10-iot-core", "windowsiot"],
        "is_answered": false,
        "view_count": 3909,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1551301394,
        "creation_date": 1474223525,
        "question_id": 39561220,
        "link": "https://stackoverflow.com/questions/39561220/two-rfid-rc522-raspberry-pi-2-windows-iot",
        "title": "Two RFID RC522 Raspberry PI 2 Windows IOT",
        "body": "<p>What should I change in a class from topic <a href=\"https://stackoverflow.com/questions/34284498/rfid-rc522-raspberry-pi-2-windows-iot?answertab=oldest#tab-top\">RFID RC522 Raspberry PI 2 Windows IOT</a> if I want to connect second rfid reader via SPI?</p>\n\n<p>I connected the second \"ss line\" to SPI_CE1_N pin and \"reset line\" to GPIO12 pin.</p>\n\n<p>I added a constructor in class Mfrc522 and I used SPI_CONTROLLER_NAME, SPI_CHIP_SELECT_LINE, RESET_PIN as a parameters but without success.</p>\n"
    }, {
        "tags": ["ios", "swift", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 432,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1551265742,
        "creation_date": 1526624114,
        "last_edit_date": 1526625356,
        "question_id": 50404878,
        "link": "https://stackoverflow.com/questions/50404878/mqtt-in-ios-mqttdiddisconnect-socket-closed-by-remote-peer",
        "title": "MQTT-in-iOS - mqttDidDisconnect: Socket closed by remote peer",
        "body": "<p>I have tried implementing mqtt in ios but i am receiving an error in publishing mqttDidDisconnect: \"Socket closed by remote peer\". Is the problem on the server or on sending the request?</p>\n\n<p>deletegate code</p>\n\n<pre><code>func mqttDidPing(_ mqtt: CocoaMQTT) {\n    print(\"mqttDidPing\")\n}\n\nfunc mqttDidReceivePong(_ mqtt: CocoaMQTT) {\n    print(\"mqttDidReceivePong\")\n\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didPublishAck id: UInt16) {\n    print(\"didPublishAck : \\(id)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didPublishComplete id: UInt16) {\n    print(\"didPublishComplete: \\(id)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didSubscribeTopic topic: String) {\n    print(\"didSubscribeTopic: \\(topic)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didUnsubscribeTopic topic: String) {\n    print(\"didUnsubscribeTopic: \\(topic)\")\n}\n\nfunc mqttDidDisconnect(_ mqtt: CocoaMQTT, withError err: Error?) {\n    print(\"mqttDidDisconnect: \\(err?.localizedDescription ?? \"\")\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didConnectAck ack: CocoaMQTTConnAck) {\n    print(\"didConnectAck: \\(ack)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didPublishMessage message: CocoaMQTTMessage, id: UInt16) {\n    print(\"didPublishMessage: \\(message) and \\(id)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didReceiveMessage message: CocoaMQTTMessage, id: UInt16) {\n    print(\"didReceiveMessage: \\(message) and \\(id)\")\n}\n\nfunc mqtt(_ mqtt: CocoaMQTT, didReceive trust: SecTrust, completionHandler: @escaping (Bool) -&gt; Void) {\n    print(\"didReceive trust\")\n}\n</code></pre>\n"
    }, {
        "tags": ["c#", "iot", "rfid", "windows-10-iot-core"],
        "is_answered": false,
        "view_count": 1644,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1550692257,
        "creation_date": 1483112066,
        "last_edit_date": 1495541330,
        "question_id": 41398716,
        "link": "https://stackoverflow.com/questions/41398716/using-rfid-rc522-library-for-windows-iot-core",
        "title": "Using RFID RC522 Library for Windows IOT Core",
        "body": "<p>I used Raspberry Pi 2 Model B with Windows 10 IOT Core Operating System.</p>\n\n<p>I used the library provided in <a href=\"https://stackoverflow.com/questions/34284498/rfid-rc522-raspberry-pi-2-windows-iot\">RFID RC522 Raspberry PI 2 Windows IOT</a></p>\n\n<p>the problem is when I put this code in the MainPage.xaml.cs</p>\n\n<pre><code>var mfrc = new Mfrc522();\n    await mfrc.InitIO();\n\n    while (true)\n    {\n        if (mfrc.IsTagPresent())\n        {\n            var uid = mfrc.ReadUid();\n\n            mfrc.HaltTag();\n        }\n\n    }\n</code></pre>\n\n<p>visual studio says that await operator can only be used within an async method. I don't have any idea on where to start. I only need the RFID to read tags and then show the RFID no/UID in a textbox </p>\n"
    }, {
        "tags": ["python", "iot", "sensors", "payload"],
        "is_answered": true,
        "view_count": 50,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1550560061,
        "creation_date": 1550559014,
        "last_edit_date": 1550560049,
        "question_id": 54760311,
        "link": "https://stackoverflow.com/questions/54760311/handling-of-byte-data-after-converting-it-to-bits-in-python",
        "title": "Handling of byte data after converting it to bits in Python",
        "body": "<p>Could somebody help me with converting <code>7 byte</code> of data into binary value in Python?</p>\n\n<p>The server receives a <code>7 byte</code> data using <code>MQTT</code> and I want to convert this data into binary, break it down and extract specific lengths of bits from this data in Python for further handling.</p>\n\n<p>If I received: </p>\n\n<pre><code>810be320cab3d\n</code></pre>\n\n<p>I want to convert it to:</p>\n\n<pre><code>1000000100001011111000110010000011001010101100111101\n</code></pre>\n\n<p>store this in a variable, then later break this value down into a couple of piece so I can slice the value using <code>str()</code> or <code>truncate()</code>, I hope.</p>\n"
    }, {
        "tags": ["python", "json", "file", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 120,
        "favorite_count": 1,
        "score": -1,
        "last_activity_date": 1549757294,
        "creation_date": 1549720193,
        "last_edit_date": 1549720522,
        "question_id": 54606843,
        "link": "https://stackoverflow.com/questions/54606843/sending-script-files-through-json-format-in-python",
        "title": "sending script files through json format in Python",
        "body": "<p>I'm working on IMB IOT application.It basically allow to sends command or data from one device to another in json format. I have developed python script which sends an string from one system and gets received on another system. And it's working well. Now I want to deal with script file in place of string. But the thing is IBM IOT supports only json format to dump payloads. Is there any way to convert files to json format ?</p>\n\n<pre><code>   i wrote a script which tries converting files to json format, doesn't work that perfect ! is there any other way to do that?\n</code></pre>\n\n<p>code to convert a script file to json</p>\n\n<p><a href=\"https://i.stack.imgur.com/lx93y.png\" rel=\"nofollow noreferrer\">code</a>\n<a href=\"https://i.stack.imgur.com/gwXWr.png\" rel=\"nofollow noreferrer\">output of code</a></p>\n\n<pre><code>Is there any way to make it work better?\n</code></pre>\n\n<p>here is the code which try sending the file to another system through json format</p>\n\n<pre><code>act =input(\"Enter the key-&gt;\")\nfile_path = input(\"\\nPlease enter the file path-&gt;\")\npayload1 ={\"computer1\" : act}\nupdate_file= open(file_path,'rb')\npayload ={}\npayload['context'] = base64.b64decode( update_file.read())\nclient.publishEvent(\"status\",json,payload1,payload)\n\nprint(act)\n\nprint(\"command sent\")\ntime.sleep(2)\n</code></pre>\n\n<p>and on the other another computer</p>\n\n<pre><code> def commandcallback(event):\n   filename = payload['recieved_one]\n   filedata = base64.base64decode(payload['context'])\n   update_file =open(filename,'wb')\n   update_file.write(filedata)\n   update_file.close()\n</code></pre>\n"
    }, {
        "tags": ["iot", "thingworx"],
        "is_answered": false,
        "view_count": 214,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1549437873,
        "creation_date": 1549436539,
        "question_id": 54548229,
        "link": "https://stackoverflow.com/questions/54548229/display-an-info-table-without-data-shape-in-a-grid",
        "title": "Display an info table without data shape in a grid",
        "body": "<p>I have a service that returns an info table with two columns: code and emirate. But for some reason, I don't want to give a data shape in the service returned data shape field, so I gave it in the code, the problem is that I can't display the returned info table in a grid, please advice me to solve this problem.</p>\n\n<pre><code>var params = {infoTableName: \"myinfoTable\"};\n\n\nvar result = Resources[\"InfoTableFunctions\"].CreateInfoTable(params);\n\nresult.AddField({ name: \"code\", baseType: \"STRING\" });\nresult.AddField({name: \"emirate\", baseType: \"STRING\" });\n\n\nvar newEntry = new Object();\nnewEntry.emirate = \"Abu Dhabi\";\nnewEntry.code = \"AUH\";\nresult.AddRow(newEntry);\n\nvar newEntry = new Object();\nnewEntry.emirate = \"Ajman\";\nnewEntry.code = \"AJM\";\nresult.AddRow(newEntry);\n</code></pre>\n"
    }, {
        "tags": ["sqlite", "raspberry-pi", "iot", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 154,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1548953160,
        "creation_date": 1548338856,
        "last_edit_date": 1548953160,
        "question_id": 54348519,
        "link": "https://stackoverflow.com/questions/54348519/how-to-create-table-in-sqlite-on-raspberry",
        "title": "How to Create Table in SQLite on Raspberry",
        "body": "<p>I'm getting error {SQLite.Net.SQLiteException: disk I/O error, when trying to create a table in sqllite database on a raspberry pi 3, with WIN IOT is the OS. I'm using the SQLite.Net-PCL ver 3.1.1 implementation of SQLite. This is a UWP application. Here is the full error;</p>\n\n<pre><code>{SQLite.Net.SQLiteException: disk I/O error\n   at SQLite.Net.Platform.WinRT.SQLiteApiWinRT.Prepare2(IDbHandle db, String query)\n   at SQLite.Net.SQLiteCommand.Prepare()\n   at SQLite.Net.SQLiteCommand.ExecuteNonQuery()\n   at SQLite.Net.SQLiteConnection.Execute(String query, Object[] args)\n   at SQLite.Net.SQLiteConnection.CreateTable(Type ty, CreateFlags createFlags)\n   at SQLite.Net.SQLiteConnection.CreateTable[T](CreateFlags createFlags)\n   at InternetRadio.SQLite_Raspberry.GetConnection()}\n</code></pre>\n\n<p>Second is there a datareader for this particular implementation of SQLite? I've used SQLite on Android before with no problem, but some commands I used there are not available here.</p>\n\n<pre><code>var documentsPath = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);    \nvar fileName2 = \"Storage.db\";\nvar path2 = Path.Combine(documentsPath, fileName2);     \n\ntry\n    {\n        using (var connection = new SQLiteConnection(new SQLite.Net.Platform.WinRT.SQLitePlatformWinRT(), path2))\n        {\n               md.CreateTable&lt;RaspTables.Category&gt;();\n        }\n    }\n    catch (Exception ex)\n    {\n        string m_er = ex.ToString();\n    }\n</code></pre>\n\n<p>my table implementation is;</p>\n\n<pre><code>    public class Category\n    {\n            [PrimaryKey, AutoIncrement]\n            public int _id { get; set; }\n            public int Cat_order { get; set; }\n            public string Name { get; set; }\n            public string Keywords { get; set; }\n            public string Sub_Cat { get; set; }\n\n        public Category()\n        { }\n\n\n    }\n</code></pre>\n\n<p>I see files, Storage.db and Storage.db-journal have been created. They both have read write rights on the disk. I read that I need to set tags SQLiteOpenFlags.ReadWrite | SQLiteOpenFlags.Create | SQLiteOpenFlags.FullMutex but don't know how to do that. I've tried,</p>\n\n<pre><code>md = new SQLite.Net.SQLiteConnection(new SQLite.Net.Platform.WinRT.SQLitePlatformWinRT(), path, SQLiteOpenFlags.ReadWrite | SQLiteOpenFlags.Create | SQLiteOpenFlags.FullMutex);\n</code></pre>\n\n<p>which gives an error. I also tried;</p>\n\n<pre><code>md = new SQLite.Net.SQLiteConnection(new SQLite.Net.Platform.WinRT.SQLitePlatformWinRT(), path, true);\n</code></pre>\n\n<p>which doesn't help. I still receive the disk I/O error. </p>\n\n<p>Through the course of trying things I had change the using line to;</p>\n\n<pre><code>using (SQLite.Net.SQLiteConnection md = new SQLite.Net.SQLiteConnection(new SQLite.Net.Platform.WinRT.SQLitePlatformWinRT(), path)) ;\n</code></pre>\n\n<p>I'm not sure what the difference between SQLite.Net.SQLiteConnection and SQLiteConnection, but the SQLite.Net.SQLiteConnection closes the connection and SQLiteConnection leaves it open. So that was the last problem.</p>\n\n<p>One more thing I put this in a class by itself so it would stay open and be usable at anytime in the rest of the code. This required taking it out of the using statement so the connection would stay open.</p>\n\n<p>Thanks for the help.</p>\n"
    }, {
        "tags": ["java", "node.js", "aes", "iot", "lora"],
        "is_answered": false,
        "view_count": 874,
        "favorite_count": 0,
        "score": -3,
        "last_activity_date": 1548818640,
        "creation_date": 1485335537,
        "last_edit_date": 1513229654,
        "question_id": 41847506,
        "link": "https://stackoverflow.com/questions/41847506/lora-iot-aes-128-decryption",
        "title": "LORA IOT AES-128 decryption",
        "body": "<p>I would like to ask you, have you ever coded AES-128 encrypt or decrypt for LORA IOT sensor with javascript or node js?\nI have a payload (encrypted) and kay value pair in HEX. Could you help me which method shoud I use to the payload to I got the original payload?</p>\n"
    }, {
        "tags": ["sqlite", "raspberry-pi", "iot", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 414,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1548214467,
        "creation_date": 1548184950,
        "last_edit_date": 1548203321,
        "question_id": 54315079,
        "link": "https://stackoverflow.com/questions/54315079/connect-to-sqlite-database-on-win-iot",
        "title": "Connect to sqlite database on win IOT",
        "body": "<p>I'm getting error {SQLite.Net.SQLiteException: Could not open database file: C:\\Data\\Users\\DefaultAccount\\Documents\\Storage.db (CannotOpen) when trying to connect to sqllite database on a raspberry pi 3, with WIN IOT is the OS. I'm using the SQLite.Net-PCL ver 3.1.1 implementation of SQLite.</p>\n\n<pre><code>var documentsPath = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);    var fileName2 = \"Storage.db\";\nvar path2 = Path.Combine(documentsPath, fileName2);     \n\ntry\n        {\n            using (var connection = new SQLiteConnection(new SQLite.Net.Platform.WinRT.SQLitePlatformWinRT(), path2))\n            {\n\n            }\n        }\n        catch (Exception ex)\n        {\n            string m_er = ex.ToString();\n        }\n</code></pre>\n"
    }, {
        "tags": ["php", "curl", "iot"],
        "is_answered": false,
        "view_count": 192,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1544911901,
        "creation_date": 1544418672,
        "question_id": 53699837,
        "link": "https://stackoverflow.com/questions/53699837/display-requestbin-data-on-my-webpage-index",
        "title": "Display requestbin data on my webpage index",
        "body": "<p>I connected my sensor device on requestbin, now this requestbin is working and accepting and display the data. Now I want to display the data in my index.php website</p>\n\n<p>Here is the requestbin url : <a href=\"https://requestbin.co/r/enbh3gv751la/1E9GvdfMpWVS2U789k0AWXp5UeA\" rel=\"nofollow noreferrer\">https://requestbin.co/r/enbh3gv751la/1E9GvdfMpWVS2U789k0AWXp5UeA</a></p>\n\n<p>As you will see, it is accepting data. But I dont know how to call this data in my index.php.</p>\n\n<p>All I know is how to send a request:</p>\n\n<pre><code>&lt;?php\n$handle = curl_init('https://enbh3gv751la.x.pipedream.net/');\n$data = [\n  'key'=&gt;'value'\n];\n$encodedData = json_encode($data);\ncurl_setopt($handle, CURLOPT_POST, 1);\ncurl_setopt($handle, CURLOPT_POSTFIELDS, $encodedData);\ncurl_setopt($handle, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);\n$result = curl_exec($handle);\n?&gt;\n</code></pre>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["c#", "raspberry-pi", "iot", "windowsiot", "windows-iot-core-10"],
        "is_answered": true,
        "view_count": 832,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1544650198,
        "creation_date": 1544582389,
        "last_edit_date": 1544650198,
        "question_id": 53735301,
        "link": "https://stackoverflow.com/questions/53735301/uart-raspberry-pi-windows-iot-core-arduino",
        "title": "UART Raspberry pi Windows IoT Core Arduino",
        "body": "<p>UART data transmission Raspberry pi UART (RX TX) Arduino\nI know should avoid async void. They are only used for event handling. For other methods return Task. async and await\nWhere can there be a mistake? Why the data does not come?</p>\n\n<p>Who knows the link where it is shown how to receive data on the UART?</p>\n\n<pre><code>using Windows.Storage.Streams;\nusing Windows.Devices.Enumeration;\nusing Windows.Devices.SerialCommunication;\n\npublic async void Serial()\n{\nstring aqs = SerialDevice.GetDeviceSelector(\"UART0\");                   /* Find the selector string for the serial device   */\nvar dis = await DeviceInformation.FindAllAsync(aqs);                    /* Find the serial device with our selector string  */\nSerialDevice SerialPort = await SerialDevice.FromIdAsync(dis[0].Id);    /* Create an serial device with our selected device */\n\n/* Configure serial settings */\nSerialPort.WriteTimeout = TimeSpan.FromMilliseconds(1000);\nSerialPort.ReadTimeout = TimeSpan.FromMilliseconds(1000);\nSerialPort.BaudRate = 9600;                                             /* mini UART: only standard baudrates */\nSerialPort.Parity = SerialParity.None;                                  /* mini UART: no parities */  \nSerialPort.StopBits = SerialStopBitCount.One;                           /* mini UART: 1 stop bit */\nSerialPort.DataBits = 8;\n\n/* Write a string out over serial */\nstring txBuffer = \"Hello Serial\";\nDataWriter dataWriter = new DataWriter();\ndataWriter.WriteString(txBuffer);\nuint bytesWritten = await SerialPort.OutputStream.WriteAsync(dataWriter.DetachBuffer());\n\n/* Read data in from the serial port */\nconst uint maxReadLength = 1024;\nDataReader dataReader = new DataReader(SerialPort.InputStream);\nuint bytesToRead = await dataReader.LoadAsync(maxReadLength);\nstring rxBuffer = dataReader.ReadString(bytesToRead);\n</code></pre>\n\n<p>}</p>\n"
    }, {
        "tags": ["database", "go", "nosql", "iot", "in-memory"],
        "is_answered": false,
        "view_count": 49,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1544079567,
        "creation_date": 1544050984,
        "last_edit_date": 1544079567,
        "question_id": 53642122,
        "link": "https://stackoverflow.com/questions/53642122/the-griddb-go-client-is-not-letting-me-build-my-project",
        "title": "The GridDB Go client is not letting me build my project",
        "body": "<p>I'm trying to test the GridDB Go client with just a simple creation of a users container on my test website. My issue is I keep getting the following error:</p>\n\n<pre><code>main.go:28:2: no Go files in /home/gopheritis/go/src/github.com/griddb/go_client\n</code></pre>\n\n<p>Here's my Go env... everything is normal and works:</p>\n\n<pre><code>GOARCH=\"amd64\"\nGOBIN=\"/home/gopheritis/go/bin\"\nGOCACHE=\"/home/gopheritis/.cache/go-build\"\nGOEXE=\"\"\nGOHOSTARCH=\"amd64\"\nGOHOSTOS=\"linux\"\nGOOS=\"linux\"\nGOPATH=\"/home/gopheritis/go\"\nGORACE=\"\"\nGOROOT=\"/usr/local/go\"\nGOTMPDIR=\"\"\nGOTOOLDIR=\"/usr/local/go/pkg/tool/linux_amd64\"\nGCCGO=\"gccgo\"\nCC=\"gcc\"\nCXX=\"g++\"\nCGO_ENABLED=\"1\"\nCGO_CFLAGS=\"-g -O2\"\nCGO_CPPFLAGS=\"\"\nCGO_CXXFLAGS=\"-g -O2\"\nCGO_FFLAGS=\"-g -O2\"\nCGO_LDFLAGS=\"-g -O2\"\nPKG_CONFIG=\"pkg-config\"\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build238154447=/tmp/go-build -gno-record-gcc-switches\"\n</code></pre>\n\n<p>I was following along with the instructions and they mentioned running </p>\n\n<pre><code>export GODEBUG=cgocheck=0 \n</code></pre>\n\n<p>which I already did. I'm obviously missing something else, but what can it be?</p>\n"
    }, {
        "tags": ["python-3.x", "amazon-web-services", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 174,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1543581464,
        "creation_date": 1542837646,
        "question_id": 53421064,
        "link": "https://stackoverflow.com/questions/53421064/aws-iot-basicpubsub-py-example-clarification-on-certificates-cli",
        "title": "AWS IoT basicPubSub.py example - clarification on certificates (CLI)",
        "body": "<p>I am been trying to get AWS IoT working and just keep hitting problems, errors and not getting anywhere. I am trying to use the AWS IoT basicPubSub.py script to test the connection, but getting an error:</p>\n\n<pre><code> ssl.SSLError: unknown error (_ssl.c:3946)\n</code></pre>\n\n<p>I have been through all the certificates several times, but want to check/fully understand if I can pull the rootCAFile, certfile and privatekey from the command line utility and/or from the IAM interface? I have download each piece of information and stored in local files. </p>\n\n<pre><code>python basicPubSub.py -e &lt;endpoint&gt; -r &lt;rootCAFilePath&gt; -c &lt;certFilePath&gt; -k &lt;privateKeyFilePath&gt; \n</code></pre>\n\n<p>The main aim is just to ensure everything is correct or I have another problem something else? Is there a way to test each certificate to ensure each file is correct and has the right information?</p>\n"
    }, {
        "tags": ["c", "http", "http-headers", "iot"],
        "is_answered": true,
        "view_count": 1619,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1543331264,
        "creation_date": 1543328084,
        "last_edit_date": 1543328752,
        "question_id": 53501658,
        "link": "https://stackoverflow.com/questions/53501658/raw-http-server-send-image-issue",
        "title": "Raw http server: send image issue",
        "body": "<p>I'am working with kind of IoT device. Finaly I've got simple httpd server to work, and simple html pages works like a charm, but browser does not recognise images. I think this is http header issue, but i do not know what is exacly wrong.</p>\n\n<p>For example, my test page look like this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;&lt;title&gt;test page&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\nhello world!\n&lt;img src=\"img.png\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>If i go to <a href=\"http://de.vi.ce.ip/\" rel=\"nofollow noreferrer\">http://de.vi.ce.ip/</a> 2 reqests are generated:</p>\n\n<pre><code>GET / HTTP/1.1\\r\\n\nAccept text/html, application/xhtml+xml, */*\\r\\n\nAccept-Language: en-EN\\r\\n\n...\n\nGET /img.png HTTP/1.1\\r\\n\nAccept image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5\\r\\n\nAccept-Language: en-EN\\r\\n\n...\n</code></pre>\n\n<p>To witch my server responds with:</p>\n\n<pre><code>HTTP/1.0 200 OK\\r\\n\nContent-Type: text/html\\r\\n\nContent-Length: 131\\r\\n\n\\r\\n\n&lt;page data&gt;\n\nHTTP/1.0 200 OK\\r\\n\nContent-Type: image/png\\r\\n\nContent-Length: 5627\\r\\n\n\\r\\n\n&lt;image binary data&gt;\n</code></pre>\n\n<p>As the result i can see the text, but images are broken.\nI've tryed few more parameters like <code>Connection: close, Accept-Ranges: bytes, Content-Location (path)</code>.\nI've tryed jpeg image under <code>Content-Type: image/jpeg</code> with no luck. I'am certain that image sent correctly.</p>\n"
    }, {
        "tags": ["highcharts", "iot"],
        "is_answered": false,
        "view_count": 36,
        "favorite_count": 1,
        "score": -1,
        "last_activity_date": 1540735697,
        "creation_date": 1540454951,
        "last_edit_date": 1540461491,
        "question_id": 52984367,
        "link": "https://stackoverflow.com/questions/52984367/a-different-suffix-for-each-line-on-highstock-highcharts-with-thingspeak-source",
        "title": "A different suffix for each line on Highstock/Highcharts with Thingspeak source",
        "body": "<p>I've got the code for Highcharts in combination with Thingspeak from here:</p>\n\n<pre><code>https://forum.arduino.cc/index.php?topic=213058.0\n</code></pre>\n\n<p>My problem is, I am not able to implement the different suffix into the code :-(. I've tried a lot, but I dont understand the mechanism behind the Java code.</p>\n\n<p>I've tried some things, but result is, I only have one datafield for the first series but not for the other series...</p>\n\n<p>Formatter function is on line 246.\nMy different yAxies on line 286.\nHow can formatter decide which yAxies do actual series use?</p>\n\n<p>Maybe somebody have fun to help me?</p>\n\n<pre><code>http://jsfiddle.net/cbmj8rku/\n</code></pre>\n\n<p>Best regards, David</p>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-dynamodb", "iot", "aws-iot", "payload"],
        "is_answered": false,
        "view_count": 60,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1538330665,
        "creation_date": 1538330665,
        "question_id": 52580679,
        "link": "https://stackoverflow.com/questions/52580679/payload-to-dynamodb-weird-numbers",
        "title": "Payload to DynamoDB - weird numbers",
        "body": "<p>I am trying to take a payload from an IoT sensor (I can edit the embedded code in the sensor) and put it in a DynamoDB in AWS.</p>\n\n<p>This is what I get:</p>\n\n<pre><code>Payload: \"{ \"state\" : { \"M\" : { \"reported\" : { \"M\" : { \"Watt\" : { \"N\" : \"999\" } } }, \"SensorNo\" : { \"N\" : \"1\" } } } }\"\n</code></pre>\n\n<p>In the DynamoDB I get proper values written as SensorNo: 1, but Watt is set to 1538330043128. </p>\n\n<p>I have tried to configure them as both Number and String, but with same result.</p>\n\n<p>Any suggestions what might cause this? I want it to write 999 as the Payload say.</p>\n"
    }, {
        "tags": ["javascript", "python", "iot", "pyv8"],
        "is_answered": true,
        "view_count": 288,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1537450401,
        "creation_date": 1537300895,
        "last_edit_date": 1537450242,
        "question_id": 52393823,
        "link": "https://stackoverflow.com/questions/52393823/run-python-from-javascript",
        "title": "Run python from javascript",
        "body": "<p>I have implemented an accelerometer Reader in python and I want to execute a function in a javascript file when a new value is read that will:<br>\n1 - update the value in a database<br>\n2 - broadcast the new value to all connected client ( via Socket.io)  </p>\n\n<p>I was wondering how to do it? I checked PyV8 but it seems not maintained and only working with Python 2.7.\nMy files structure looks like</p>\n\n<pre><code>--JScode\n----MyJSCode\n--PythonCode\n----MyPythonCode\n</code></pre>\n"
    }, {
        "tags": ["node.js", "iot", "gateway", "xiaomi"],
        "is_answered": true,
        "view_count": 146,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1536747767,
        "creation_date": 1536647562,
        "last_edit_date": 1592644375,
        "question_id": 52269938,
        "link": "https://stackoverflow.com/questions/52269938/how-is-xiaomi2mqtt-connected-to-aquara-hardware-device",
        "title": "How is Xiaomi2mqtt connected to Aquara hardware device",
        "body": "<p>I've already read the <strong>xiaomi2mqt</strong>t <a href=\"https://github.com/svrooij/node-xiaomi2mqtt\" rel=\"nofollow noreferrer\">documentation</a>. What I want to know is that how <strong>xiaomi2mqtt</strong> is connected to the actual hardware device (Aquara) over the Internet? In another world, I don't understand this part of the documentation:</p>\n<pre><code>//Device list:\n\n{\n  &quot;device_id&quot;: &quot;Nice name&quot;,\n  &quot;158d000aaa2888&quot;: &quot;Bedroom window&quot;,\n  &quot;158d000aaa5b35&quot;: &quot;Frontdoor&quot;,\n  &quot;gateways&quot;: {\n    &quot;gateway_id&quot;: &quot;password&quot;\n  }\n}\n</code></pre>\n<blockquote>\n<p>&quot;158d000aaa2888&quot;, &quot;158d000aaa5b35, &quot;gateway_id&quot;, &quot;password&quot;</p>\n</blockquote>\n<p>What are these? Where do they from ? What are they used for?</p>\n"
    }, {
        "tags": ["android", "bluetooth-lowenergy", "android-bluetooth", "iot", "gatt"],
        "is_answered": false,
        "view_count": 1032,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1535500736,
        "creation_date": 1478522226,
        "question_id": 40465373,
        "link": "https://stackoverflow.com/questions/40465373/android-ble-gatt-error-133-getting-often-with-samsung-devices",
        "title": "Android Ble GATT_ERROR 133 getting often with samsung devices",
        "body": "<p>I am working on BLE Applications, I have tested with different devices like Nexus, Moto, Samsung, LG. I am getting the GATT Error 133 in Samsung Devices alone(Samsung A5 2016). Trying to connect 10 times it gets connected only 2 or 3 times.Please Help me out. </p>\n"
    }, {
        "tags": ["c++", "iot", "esp8266", "platformio"],
        "is_answered": true,
        "view_count": 703,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1533651693,
        "creation_date": 1533650769,
        "last_edit_date": 1533651011,
        "question_id": 51728761,
        "link": "https://stackoverflow.com/questions/51728761/how-we-can-reduce-code-size-on-program-memory-on-esp8266",
        "title": "How we can reduce code size on program memory on ESP8266",
        "body": "<p>We develop an iot door access control system with ESP8266 on <a href=\"https://github.com/omersiar/esp-rfid/blob/dev/src/main.cpp\" rel=\"nofollow noreferrer\">Platfromio IDE</a>.\nYou can see all our works on <a href=\"https://github.com/omersiar/esp-rfid\" rel=\"nofollow noreferrer\">esp-rfid GitHub repository</a>.\nWe want to use ota updates on our systems but the code cover almost half of the memory sometimes bigger then half. If the code cover bigger than half of the memory we can't use ota update. How we can reduce code size? </p>\n\n<p>Thank for your answers.</p>\n\n<p>You can find the code from <a href=\"https://github.com/omersiar/esp-rfid/blob/dev/src/main.cpp\" rel=\"nofollow noreferrer\">there</a>.</p>\n\n<p>The build results:</p>\n\n<p><code>DATA:    [====      ]  43.4% (used 35592 bytes from 81920 bytes)\nPROGRAM: [=====     ]  48.6% (used 507732 bytes from 1044464 bytes)</code> </p>\n"
    }, {
        "tags": ["node.js", "aws-lambda", "iot", "alexa", "smarthomeskill"],
        "is_answered": false,
        "view_count": 65,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1531734642,
        "creation_date": 1530020923,
        "last_edit_date": 1531734642,
        "question_id": 51044519,
        "link": "https://stackoverflow.com/questions/51044519/how-does-smart-devices-know-which-task-to-perform",
        "title": "How does smart devices know which task to perform?",
        "body": "<p>I have been trying to build an Alexa skill for the smart device but thing I don't understand if I send a request to the smart device using my Alexa then how does it know which task to perform. \nI understand till Alexa made a call to the lambda function then it make an api call to the smart device server but what I don't understand how does the device know that it has to it has to turn itself off or change the color of the light etc. Do we have to write special programming for that?\nPlease, someone, explain how does it works as I am new here I am unable to understand it.\nThank you in advance.</p>\n"
    }, {
        "tags": ["java", "precision", "iot", "data-conversion"],
        "is_answered": true,
        "view_count": 72,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1531378619,
        "creation_date": 1531339425,
        "last_edit_date": 1531340792,
        "question_id": 51293429,
        "link": "https://stackoverflow.com/questions/51293429/transform-a-double-into-a-32-bit-representation-and-reverse-procedure",
        "title": "Transform a double into a 32-bit representation (and reverse procedure)",
        "body": "<p><strong>[Context]</strong><br>\nI am currently working on a probe balloon. My communication is restricted to messages of the 12 bytes in which I have to transmit several pieces of information. (Altitude, max temperature, longitude, latitude, average acceleration).<br>\nThe probe is based on a raspberry pi 2 b.</p>\n\n<p><strong>[Question]</strong><br>\nI am currently building my datagram and want to store my latitude and longitude as a 32-bit double (lossy). Storage can be done with floating point or fixed point\nAre there tools to do this kind of conversion? How else can I do that? (in particular on the rounded party)<br>\nI initially planned to work in Java but I can migrate to python.</p>\n\n<p>Thank you in advance</p>\n"
    }, {
        "tags": ["node.js", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 398,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1531295192,
        "creation_date": 1531289040,
        "question_id": 51278248,
        "link": "https://stackoverflow.com/questions/51278248/mqtt-js-does-not-queue-more-than-65535-publish-messages",
        "title": "mqtt.js does not queue more than 65535 publish messages",
        "body": "<p>I've been trying to use  <a href=\"https://www.npmjs.com/package/mqtt\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/mqtt</a> to simulate a large number of publishes and found that the queue does not hold more than 65535 messages at a time. (If I try to send more, the remaining are discarded) Is there a reason for this and are there any workarounds?</p>\n"
    }, {
        "tags": ["c", "iot", "uart", "at-command", "nrf52"],
        "is_answered": false,
        "view_count": 351,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1530813277,
        "creation_date": 1530784536,
        "last_edit_date": 1530784908,
        "question_id": 51188339,
        "link": "https://stackoverflow.com/questions/51188339/at-commands-in-a-for-loop",
        "title": "AT commands in a for loop",
        "body": "<p>I am trying to execute AT commands from a <a href=\"https://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF52-DK\" rel=\"nofollow noreferrer\">Nordic NRF52</a>. I am using the <a href=\"https://infocenter.nordicsemi.com/index.jsp?topic=%2Fcom.nordic.infocenter.sdk5.v14.0.0%2Fstructapp__uart__comm__params__t.html\" rel=\"nofollow noreferrer\">Nordic UART module</a> with a built-in function called <code>app_uart_put(uint8_t byte)</code> to put AT commands on the UART. The node that receiving the AT commands is a <a href=\"https://shop.exploratory.engineering/products/ee-nbiot-01-v1-1-breakout-module\" rel=\"nofollow noreferrer\">EE-NBIoT module</a> and it triggers on a postfix <code>\\r\\n</code>. When I run the following code, I get OK.</p>\n\n<pre><code>while (app_uart_put('A') != NRF_SUCCESS);\nwhile (app_uart_put('T') != NRF_SUCCESS);\nwhile (app_uart_put('+') != NRF_SUCCESS);\nwhile (app_uart_put('C') != NRF_SUCCESS);\nwhile (app_uart_put('F') != NRF_SUCCESS);\nwhile (app_uart_put('U') != NRF_SUCCESS);\nwhile (app_uart_put('N') != NRF_SUCCESS);\nwhile (app_uart_put('=') != NRF_SUCCESS);\nwhile (app_uart_put('1') != NRF_SUCCESS);\nwhile (app_uart_put('\\r') != NRF_SUCCESS);\nwhile (app_uart_put('\\n') != NRF_SUCCESS);\n</code></pre>\n\n<p>But I want to make a more reusable code, so I wrote the following writeCommand function.</p>\n\n<pre><code>void writeCommand(char cmd[])\n{   \n while (app_uart_put('A') != NRF_SUCCESS);\n while (app_uart_put('T') != NRF_SUCCESS);\n while (app_uart_put('+') != NRF_SUCCESS);\n\n uint8_t i;\n for(i = 0; cmd[i] != '\\0'; i++){\n     while (app_uart_put(cmd[i]) != NRF_SUCCESS);\n }\n\n while (app_uart_put('\\r') != NRF_SUCCESS);\n while (app_uart_put('\\n') != NRF_SUCCESS);\n nrf_delay_ms(100);\n}\n</code></pre>\n\n<p>When I run this function as shown below, I get ERROR.</p>\n\n<pre><code>char cmd[] = \"CFUN=1\";\nnrf_delay_ms(1000);\nwriteCommand(cmd);\n</code></pre>\n\n<p>Why does not this work? When I look at the outgoing commands, they are equal. </p>\n"
    }, {
        "tags": ["iot", "apache-edgent"],
        "is_answered": true,
        "view_count": 60,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1530110228,
        "creation_date": 1529322457,
        "question_id": 50908840,
        "link": "https://stackoverflow.com/questions/50908840/how-can-i-shutdown-an-apache-edgent-background-task",
        "title": "How can I shutdown an Apache Edgent background task?",
        "body": "<p>Asume the following code snippet:</p>\n\n<pre><code>TStream&lt;Integer&gt; stream = top.generate(() -&gt; {            \n  try{\n    Thread.sleep(1500);\n  }catch(InterruptedException ex){\n    //DO NOTHING\n  }\n  return (int)(Math.random() * 100);\n});\n\nTWindow&lt;Integer, Integer&gt; window = stream.last(5, TimeUnit.SECONDS, zero());\n\nTStream&lt;Double&gt; average = window.batch((values, key) -&gt; {\n  int sum = values.stream().mapToInt(Integer::intValue).sum();\n  return (double)sum / values.size();\n});\n\naverage.peek(average1 -&gt; LOGGER.info(\"Calculated average : \" + average1));\njob = dp.submit(top);\n</code></pre>\n\n<p>After calling <code>job = dp.submit(top)</code>, the threads executing the topology will continu to run in the background until the JVM is stopped. </p>\n\n<p>How can I stop this background process programmatically? This is specifically usefull when an Edgent topology is running as a separate process with other tasks in the same JVM. I tried to call <code>job.cancel(true)</code>, but this does not solve the problem. The task keeps on running...</p>\n"
    }, {
        "tags": ["iot", "sensors", "influxdb"],
        "is_answered": false,
        "view_count": 157,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1529577535,
        "creation_date": 1529577535,
        "question_id": 50966468,
        "link": "https://stackoverflow.com/questions/50966468/influxdb-query-for-distinct-values",
        "title": "Influxdb: Query for distinct values",
        "body": "<p>First: I am aware of the distinct() function, but that's not what I want.</p>\n\n<p>My problem: Imagine a series with sensor readings that barely change like e.g:</p>\n\n<p><code>[2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 3, 3, 5, 5, 2]</code></p>\n\n<p>In my application this series is very long (thousands of entries) and I would like to visualize it in a Diagram (on Android, but that doesn't matter).</p>\n\n<p>What I'd like to achieve:</p>\n\n<p>I would like to get the values, where the series changes e.g:</p>\n\n<p><code>[2,       3,       4,             3,    5,    2]</code></p>\n\n<p>of course with their respective timestamps and tags.</p>\n\n<p>With the distinct() function the result would look like this:</p>\n\n<p><code>[2,       3,       4,                   5,     ]</code></p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["mongodb", "iot", "kaa", "data-collection"],
        "is_answered": true,
        "view_count": 104,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1529244384,
        "creation_date": 1528195167,
        "last_edit_date": 1528196364,
        "question_id": 50698045,
        "link": "https://stackoverflow.com/questions/50698045/kaa-data-collection-doesnt-retrieve-data-mongodb",
        "title": "kaa data collection doesn&#39;t retrieve data mongodb",
        "body": "<p>I installed kaa iot server manually on ubuntu 16.04, and use <a href=\"https://kaaproject.github.io/kaa/docs/v0.10.0/Programming-guide/Your-first-Kaa-application/\" rel=\"nofollow noreferrer\">data collection sample</a> to test how it works.\nthe code run without any errors, but when I run these commands below nothing happens:</p>\n\n<pre><code>mongo kaa\ndb.logs_$my_app_token$.find()\n</code></pre>\n\n<p>I even comment out <strong>bind_ip</strong> of <em>mongodb.conf</em> and restart mongodb, zookeeper and kaa-node services, but nothings changed.\nI also regenerated SDK and rebuild project but that wouldn't help either.</p>\n\n<p>finally this is the kaa log:</p>\n\n<pre><code>2018-06-05 15:03:53,899 [Thread-3] TRACE \no.k.k.s.c.s.l.DynamicLoadManager - DynamicLoadManager recalculate() got 0 redirection rules\n2018-06-05 15:03:59,472 [EPS-core-dispatcher-6] DEBUG \no.k.k.s.o.s.a.a.c.OperationsServerActor - Received: org.kaaproject.kaa.server.operations.service.akka.messages.core.stats.StatusRequestMessage@30d61bb1\n2018-06-05 15:03:59,472 [EPS-core-dispatcher-6] DEBUG o.k.k.s.o.s.a.a.c.OperationsServerActor - [14fc1a87-8b34-47f6-8f39-d91aff7bfff7] Processing status request\n2018-06-05 15:03:59,475 [pool-5-thread-1] INFO  o.k.k.s.o.s.l.DefaultLoadBalancingService - Updated load info: {\"endpointCount\": 0, \"loadAverage\": 0.02}\n2018-06-05 15:03:59,477 [Curator-PathChildrenCache-0] INFO  o.k.k.s.c.s.l.DynamicLoadManager - Operations server [-1835393002][localhost:9090] updated\n2018-06-05 15:03:59,477 [Curator-PathChildrenCache-4] DEBUG o.k.k.s.o.s.c.DefaultClusterService - Update of node [localhost:9090:1528181889050]-[{\"endpointCount\": 0, \"loadAverage\": 0.02}] is pushed to resolver org.kaaproject.kaa.server.hash.ConsistentHashResolver@1d0276a4\n2018-06-05 15:04:03,899 [Thread-3] INFO  o.k.k.s.c.s.l.LoadDistributionService - Load distribution service recalculation started...\n2018-06-05 15:04:03,899 [Thread-3] INFO  o.k.k.s.c.s.l.DynamicLoadManager - DynamicLoadManager recalculate() started... lastBootstrapServersUpdateFailed false\n2018-06-05 15:04:03,899 [Thread-3] DEBUG o.k.k.s.c.s.l.d.EndpointCountRebalancer - No rebalancing in standalone mode\n2018-06-05 15:04:03,899 [Thread-3] TRACE o.k.k.s.c.s.l.DynamicLoadManager - DynamicLoadManager recalculate() got 0 redirection rules\n</code></pre>\n\n<p>thank you for your help to fix this problem...</p>\n"
    }, {
        "tags": ["python", "iot", "lan", "lifx"],
        "is_answered": false,
        "view_count": 85,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1528916129,
        "creation_date": 1528839395,
        "question_id": 50826174,
        "link": "https://stackoverflow.com/questions/50826174/lifx-z-lan-lights-dont-respond-when-packets-are-sent-quickly",
        "title": "LIFX Z LAN - Lights don&#39;t respond when packets are sent quickly",
        "body": "<p>So I've been trying to make a music visualizer that actually works in real-time. I've struggled a lot to get it to work, but then, yesterday, out of nowhere, it started working when I added a small delay after sending packets. I took it off and <em>voila</em>, it was working in real-time. </p>\n\n<p>So I brought them home later to find them still not working on my home network, which I thought was weird. Then I bring them back to school today to find that they are not even working at school anymore! What gives? I'm so stumped on why these things work like a charm out of nowhere, and then stop working again out of nowhere.</p>\n\n<p>I try adding a delay, and it works, but the delay is so bad that it's hard to tell that it's even reacting to the microphone at all.</p>\n\n<p>I've my GitHub here: <a href=\"https://github.com/HoldenGs/LIFX_controller\" rel=\"nofollow noreferrer\">https://github.com/HoldenGs/LIFX_controller</a></p>\n\n<p>and also here's the relevant code:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport time\nimport socket\nimport argparse\nimport random\nimport queue\nimport sys\nfrom tools import get_colour_zones_packet, APPLY\n\nRETRIES = 1\nUDP_PORT = 56700\nSEQ_NUM = random.randint(0, 255)\n\n\ndef int_or_str(text):\n    \"\"\"Helper function for argument parsing.\"\"\"\n    try:\n        return int(text)\n    except ValueError:\n        return text\n\n\nparser = argparse.ArgumentParser(description=__doc__)\nparser.add_argument(\n    '-l', '--list-devices', action='store_true',\n    help='show list of audio devices and exit')\nparser.add_argument(\n    '-d', '--device', type=int_or_str,\n    help='input device (numeric ID or substring)')\nparser.add_argument(\n    '-w', '--window', type=float, default=200, metavar='DURATION',\n    help='visible time slot (default: %(default)s ms)')\nparser.add_argument(\n    '-i', '--interval', type=float, default=30,\n    help='minimum time between plot updates (default: %(default)s ms)')\nparser.add_argument(\n    '-b', '--blocksize', type=int, help='block size (in samples)')\nparser.add_argument(\n    '-r', '--samplerate', type=float, help='sampling rate of audio device')\nparser.add_argument(\n    '-n', '--downsample', type=int, default=10, metavar='N',\n    help='display every Nth sample (default: %(default)s)')\nparser.add_argument(\n    'channels', type=int, default=[1], nargs='*', metavar='CHANNEL',\n    help='input channels to plot (default: the first)')\nargs = parser.parse_args()\nif any(c &lt; 1 for c in args.channels):\n    parser.error('argument CHANNEL: must be &gt;= 1')\n\nmapping = [c - 1 for c in args.channels]  # Channel numbers start with 1\nq = queue.Queue(64)\n\n\n\n\ndef audio_callback(indata, frames, time, status):\n    \"\"\"This is called (from a separate thread) for each audio block.\"\"\"\n    if status:\n        print(status, file=sys.stderr)\n    # Fancy indexing with mapping creates a (necessary!) copy:\n    q.put(indata[::args.downsample, mapping])\n\n\ndef update_lights(hue):\n    \"\"\"This is called by matplotlib for each plot update.\n    Typically, audio callbacks happen more frequently than plot updates,\n    therefore the queue tends to contain multiple blocks of audio data.\n    \"\"\"\n    while True:\n        try:\n            data = q.get_nowait()\n        except queue.Empty:\n            break\n        max_amp = max(data)[0] * 500\n        if max_amp &gt; 100:\n            max_amp = 100\n        if max_amp &lt; 1:\n            max_amp = 1\n        print(\"amp: {}                 \".format(int(max_amp)), end=\"\\r\")\n        bulb_ip = \"192.168.1.5\"\n        start_index = 0\n        end_index = 11\n        sat = 0\n        kel = 3500\n        packet = get_colour_zones_packet(start_index, end_index,\n                                        hue, sat, int(max_amp), kel, APPLY, SEQ_NUM)\n        sock.sendto(packet, (bulb_ip, UDP_PORT))\n\n\n\n\n\nif len(sys.argv) &gt; 0:\n    import numpy as np\n    import sounddevice as sd\n    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n\n    if args.list_devices:\n        print(sd.query_devices())\n        parser.exit(0)\n    if args.samplerate is None:\n        device_info = sd.query_devices(args.device, 'input')\n        args.samplerate = device_info['default_samplerate']\n\n    print(\"Starting...\")\n    # start stream\n    stream = sd.InputStream(\n        device=args.device, channels=max(args.channels),\n        samplerate=args.samplerate, callback=audio_callback)\n    try:\n        with stream:\n            hue = 0\n            add = 1\n            while True:\n                # if add:\n                #     hue += 0.00005\n                #     if hue &gt;= 255:\n                #         add = 0\n                #         hue = 255\n                # else:\n                #     hue -= 0.00005\n                #     if hue &lt;= 0:\n                #         add = 1\n                #         hue = 0\n                update_lights(int(hue))\n    except KeyboardInterrupt as e:\n        parser.exit(type(e).__name__ + ': ' + str(e))\nelse:\n    print(\"No lights with MultiZone capability detected.\")\n</code></pre>\n\n<p>I'm a bit lost on how to handle this elusive problem. Any tips are much appreciated!</p>\n"
    }, {
        "tags": ["python", "raspberry-pi", "iot", "python-multithreading"],
        "is_answered": true,
        "view_count": 2666,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1528868008,
        "creation_date": 1528526729,
        "question_id": 50771671,
        "link": "https://stackoverflow.com/questions/50771671/assertionerror-group-argument-must-be-none-for-now-python",
        "title": "AssertionError: group argument must be None for now python",
        "body": "<p>i m using PIR sensor to find out intruder is present or not. if intruder is present it will go to sleep for 1 min now i have to reset sleep time, for this i m using thread but it shows assertion error, help me out, below is my code.</p>\n\n<pre><code>from threading import Thread, Event\nimport time\n\nimport RPi.GPIO as GPIO\n\n\nclass MyThread(Thread):\n    def __ini(self, timeout=60):\n        self.intruder_spotted = Event()\n        self.timeout = timeout\n\n        self.daemon = True\n\n    def run(self):\n        while True:\n            if self.intruder_spotted.wait(self.timeout):\n                self.intruder_spotted.clear()\n                print(\"Intruder\")\n            else:\n                print(\"No intruder\")\n\n\n\nt = MyThread(60)\n\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(18,GPIO.IN)\n\ntry:\n    t.start()\n    while True:\n        i=GPIO.input(18)\n        if i==1:\n            t.intruder_spotted.set()\n\n        time.sleep(1)\n\nexcept KeyboardInterrupt:\n    GPIO.cleanup()\n    exit(0)\n</code></pre>\n"
    }, {
        "tags": ["python", "raspberry-pi", "iot"],
        "is_answered": true,
        "view_count": 493,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1528794877,
        "creation_date": 1527843885,
        "last_edit_date": 1527846629,
        "question_id": 50639809,
        "link": "https://stackoverflow.com/questions/50639809/reset-sleep-time-after-every-interrupt-in-python",
        "title": "Reset sleep time after every interrupt in python",
        "body": "<p>Basically I am working on PIR sensor, when intruder is detected it goes to 1 min of sleep time. I want to reset this sleep time when  the intruder is detected during sleep time.\nBelow is the code:  </p>\n\n<pre><code>`import RPi.GPIO as GPIO\nimport time\n\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(18,GPIO.IN)\n\ntry:\n    while True:\n        i=GPIO.input(18)\n        if i==1:\n            print(\"Intruder\")\n            time.sleep(60)\n        elif i==0:\n            print(\"No intruder\")\n            time.sleep(60)\nexcept KeyboardInterrupt:\n    GPIO.cleanup()\n    exit(0)`\n</code></pre>\n"
    }, {
        "tags": ["sqlite", "arm", "embedded", "iot", "atmel"],
        "is_answered": true,
        "view_count": 1488,
        "favorite_count": 1,
        "score": 4,
        "last_activity_date": 1525809382,
        "creation_date": 1525803974,
        "last_edit_date": 1525804286,
        "question_id": 50240055,
        "link": "https://stackoverflow.com/questions/50240055/sqlite-on-embedded-system",
        "title": "SQLite on Embedded System",
        "body": "<p>I am trying to configure SQLite to run on an embedded system (ARM\u00ae Cortex\u00ae-M7). I have downloaded the amalgamation from the SQLite website, imported it into the project, and added the following symbols: SQLITE_THREADSAFE=0, SQLITE_OS_OTHER=1, SQLITE_OMIT_WAL=1 to allow it to compile.</p>\n\n<p>I then downloaded test_onefile.c (available here: <a href=\"http://www.sqlite.org/vfs.html\" rel=\"nofollow noreferrer\">http://www.sqlite.org/vfs.html</a>) which is supposed to allow SQLite to operate directly on embedded media without using an intermediate filesystem and imported it into the project (I was also sure to provide an sqlite3_os_init() function to register the VFS).</p>\n\n<pre><code>SQLITE_API int sqlite3_os_init(void)\n{\n    extern int fs_register(void);\n    return fs_register();\n}\n</code></pre>\n\n<p>In a separate file fs_register() looks like this:</p>\n\n<pre><code>/*\n** This procedure registers the fs vfs with SQLite. If the argument is\n** true, the fs vfs becomes the new default vfs. It is the only publicly\n** available function in this file.\n*/\nint fs_register(void)\n{\n    if (fs_vfs.pParent) return SQLITE_OK;\n\n    fs_vfs.pParent = sqlite3_vfs_find(0);\n    fs_vfs.base.mxPathname = fs_vfs.pParent-&gt;mxPathname;\n    fs_vfs.base.szOsFile = MAX(sizeof(tmp_file), sizeof(fs_file));\n    return sqlite3_vfs_register(&amp;fs_vfs.base, 0);\n}\n</code></pre>\n\n<p>I can successfully register a filesystem, open a database, and prepare SQL statements using sqlite3_register_vfs(), sqlite3_open(), and sqlite3_prepare().\nWhen opening a database I am sure to use the \":memory:\" string to create the database in memory rather than as a file. </p>\n\n<pre><code>static void TestSQLiteOpenDB(void)\n{\n    /******** setup ********************************/\n    sqlite3 *db;\n    int rc;\n\n    /******** run element/component under test *****/\n    rc = sqlite3_open(\":memory:\", &amp;db);\n    sqlite3_close(db);\n\n    /******** assertion test ***********************/\n    TEST_ASSERT_EQUAL_INT(SQLITE_OK, rc);\n}\n</code></pre>\n\n<p>My issue is when trying to run sqlite3_exec(). The program crashes when the following piece of code from test_onefile.c is called:</p>\n\n<pre><code>/*\n** Populate the buffer pointed to by zBufOut with nByte bytes of\n** random data.\n*/\nstatic int fsRandomness(sqlite3_vfs *pVfs, int nByte, char *zBufOut)\n{\n   sqlite3_vfs *pParent = ((fs_vfs_t *)pVfs)-&gt;pParent;\n   return pParent-&gt;xRandomness(pParent, nByte, zBufOut);\n}\n</code></pre>\n\n<p>If I change this function to simply return 0, it appears to work. I can then create tables, insert data into tables etc...</p>\n\n<p>My question is this: Is there a need in SQLite to populate this buffer with random data or is this workaround ok? I do not want to create further headaches for myself but it was a nightmare to track this down as the point of failure and I can not quite wrap my head around what is happening. </p>\n"
    }, {
        "tags": ["iot", "node-red"],
        "is_answered": false,
        "view_count": 153,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1525149533,
        "creation_date": 1525064845,
        "last_edit_date": 1525149533,
        "question_id": 50094262,
        "link": "https://stackoverflow.com/questions/50094262/how-to-siimulate-thousands-of-devices-in-node-red",
        "title": "How to siimulate thousands of devices in Node-red",
        "body": "<p>I have created a simulation of a device using Node red . Basically the device send UDP packets every second until it receives an acknowledgement. I have done that successfully</p>\n\n<p>The problem is am trying to simulate 10000 of such devices. Hence I would need to automate the device creation/enrollment process. Is there a way I can achieve this in Node-red</p>\n\n<p>The json below shows how one device is supposed to behave. it sends a UDP packet to a server and waits for an ACK . If the ACK is not received within a time period, It resends the packet.</p>\n\n<p>Here is the node-red JSON of one device. </p>\n\n<p>[{\"id\":\"a53cc152.31f27\",\"type\":\"comment\",\"z\":\"d51aa60c.64d028\",\"name\":\"Listener\",\"info\":\"\",\"x\":106,\"y\":134,\"wires\":[]},{\"id\":\"a972f44d.eaa9e8\",\"type\":\"comment\",\"z\":\"d51aa60c.64d028\",\"name\":\"Sender\",\"info\":\"\",\"x\":136,\"y\":332,\"wires\":[]},{\"id\":\"ff1376ae.e08a58\",\"type\":\"function\",\"z\":\"d51aa60c.64d028\",\"name\":\"stringToBytes \",\"func\":\"//var binary = msg.payload.toString(2);\\n// 6 because it's zero based count\\n//var bit7 = binary.charAt(6);\\n//msg.payload = bit7;\\n//return msg;\\n  str=msg.payload\\n  var ch, st, re = [];\\n  for (var i = 0; i &lt; str.length; i++ ) {\\n    ch = str.charCodeAt(i);  // get char \\n    st = [];                 // set up \\\"stack\\\"\\n    do {\\n      st.push( ch &amp; 0xFF );  // push byte to stack\\n      ch = ch >> 8;          // shift value down by 1 byte\\n    }  \\n    while ( ch );\\n    // add stack contents to result\\n    // done because chars have \\\"wrong\\\" endianness\\n    re = re.concat( st.reverse() );\\n  }\\n  msg.payload=re\\n  // return an array of bytes\\n  return msg;\\n\\n\",\"outputs\":1,\"noerr\":0,\"x\":566,\"y\":381,\"wires\":[[\"98c6c5a8.aaf1c8\"]]},{\"id\":\"85d26758.5ee0f8\",\"type\":\"function\",\"z\":\"d51aa60c.64d028\",\"name\":\"ConfigMessge\",\"func\":\"msg.payload='830546613660520101010201225A8622475A862247E96665D15684EF030000242D0000000000E308000001FFA94F0A1F00FF0B08000000000000002E50000000000000000000000000000000000000000000000000'\\nmsg.ip = '127.0.0.1'\\nmsg.port='57920'\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":353,\"y\":375,\"wires\":[[\"ff1376ae.e08a58\"]]},{\"id\":\"c83f781f.ae3428\",\"type\":\"debug\",\"z\":\"d51aa60c.64d028\",\"name\":\"\",\"active\":true,\"tosidebar\":true,\"console\":false,\"tostatus\":false,\"complete\":\"true\",\"x\":919,\"y\":632,\"wires\":[]},{\"id\":\"98c6c5a8.aaf1c8\",\"type\":\"http request\",\"z\":\"d51aa60c.64d028\",\"name\":\"ParserAPIRequest\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"http:/api\",\"tls\":\"\",\"x\":590,\"y\":529,\"wires\":[[\"eac23a48.b479d8\",\"66759bdf.7fd864\"]]},{\"id\":\"4a724471.e5158c\",\"type\":\"inject\",\"z\":\"d51aa60c.64d028\",\"name\":\"TimerTrigger\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"onceDelay\":0.1,\"x\":148,\"y\":377,\"wires\":[[]]},{\"id\":\"eac23a48.b479d8\",\"type\":\"http response\",\"z\":\"d51aa60c.64d028\",\"name\":\"ParserAPIResponse\",\"statusCode\":\"200\",\"headers\":{\"content-type\":\"application/json\"},\"x\":602,\"y\":614,\"wires\":[]},{\"id\":\"66759bdf.7fd864\",\"type\":\"function\",\"z\":\"d51aa60c.64d028\",\"name\":\"CheckForAck?\",\"func\":\"// Loop function\\n\\ncontext.loops = context.loops || 0;\\nmsg\\nif (context.loops!==0)\\n{\\n\\n\\ncontext.ACK =0\\ncontext.ACK=flow.get('ACK')|| 0;\\n//msg.payload=context.ACK\\nif(context.ACK === 1 ) \\n  {  \\n  //\\n//return msg;\\n    return [null, null];\\n        }\\nelse\\n{\\n    //  msg.payload='No ACK triggered'+ context.ACK\\n    context.loops = context.loops + 1\\n   \\n}\\n    \\n    \\n}\\n     return [msg, msg];\\n\",\"outputs\":\"2\",\"noerr\":0,\"x\":857,\"y\":364,\"wires\":[[\"faa8c055.7dd7d\",\"f8eb8444.61e8f8\",\"a3286965.3120d8\"],[]]},{\"id\":\"a3286965.3120d8\",\"type\":\"udp out\",\"z\":\"d51aa60c.64d028\",\"name\":\"Resend Packet\",\"addr\":\"127.0.0.1\",\"iface\":\"\",\"port\":\"\",\"ipv\":\"udp4\",\"outport\":\"13500\",\"base64\":false,\"multicast\":\"false\",\"x\":1116,\"y\":230,\"wires\":[]},{\"id\":\"faa8c055.7dd7d\",\"type\":\"debug\",\"z\":\"d51aa60c.64d028\",\"name\":\"Console.log\",\"active\":true,\"tosidebar\":true,\"console\":false,\"tostatus\":false,\"complete\":\"payload\",\"x\":1095,\"y\":494,\"wires\":[]},{\"id\":\"f8eb8444.61e8f8\",\"type\":\"delay\",\"z\":\"d51aa60c.64d028\",\"name\":\"\",\"pauseType\":\"delay\",\"timeout\":\"5\",\"timeoutUnits\":\"seconds\",\"rate\":\"1\",\"nbRateUnits\":\"1\",\"rateUnits\":\"second\",\"randomFirst\":\"1\",\"randomLast\":\"5\",\"randomUnits\":\"seconds\",\"drop\":false,\"x\":848,\"y\":420,\"wires\":[[\"66759bdf.7fd864\"]]},{\"id\":\"637d9a4c.1182d4\",\"type\":\"udp in\",\"z\":\"d51aa60c.64d028\",\"name\":\"RecieveAck\",\"iface\":\"\",\"port\":\"13501\",\"ipv\":\"udp4\",\"multicast\":\"false\",\"group\":\"\",\"datatype\":\"utf8\",\"x\":173,\"y\":177,\"wires\":[[\"8b85adf3.38d6d\"]]},{\"id\":\"8b85adf3.38d6d\",\"type\":\"switch\",\"z\":\"d51aa60c.64d028\",\"name\":\"AssignAck\",\"property\":\"payload\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"'ACK'\",\"vt\":\"str\"}],\"checkall\":\"true\",\"repair\":false,\"outputs\":1,\"x\":384,\"y\":193,\"wires\":[[\"1d63307c.82e67\"]]},{\"id\":\"66ffd66c.b3c118\",\"type\":\"function\",\"z\":\"d51aa60c.64d028\",\"name\":\"StoreAckInContext\",\"func\":\"context.ACK=0\\nflow.set('ACK',1);\\nmsg.payload=flow.get('ACK')\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":717,\"y\":178,\"wires\":[[\"be667fba.f6701\"]]},{\"id\":\"be667fba.f6701\",\"type\":\"debug\",\"z\":\"d51aa60c.64d028\",\"name\":\"Console.log\",\"active\":true,\"tosidebar\":true,\"console\":false,\"tostatus\":false,\"complete\":\"payload\",\"x\":909,\"y\":155,\"wires\":[]},{\"id\":\"1d63307c.82e67\",\"type\":\"change\",\"z\":\"d51aa60c.64d028\",\"name\":\"Reset\",\"rules\":[{\"t\":\"set\",\"p\":\"ACK\",\"pt\":\"flow\",\"to\":\"0\",\"tot\":\"str\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":510,\"y\":165,\"wires\":[[\"66ffd66c.b3c118\"]]},{\"id\":\"68ded0.44db513\",\"type\":\"status\",\"z\":\"d51aa60c.64d028\",\"name\":\"\",\"scope\":[\"66759bdf.7fd864\"],\"x\":667,\"y\":282,\"wires\":[[\"a3286965.3120d8\"]]}]</p>\n"
    }, {
        "tags": ["c", "embedded", "iot", "bit-fields"],
        "is_answered": false,
        "view_count": 414,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1523259185,
        "creation_date": 1523059169,
        "question_id": 49702461,
        "link": "https://stackoverflow.com/questions/49702461/c-c-bitfields-as-booleans",
        "title": "C/C++ -- Bitfields as booleans?",
        "body": "<p>I'm currently dealing with a SigFox-based IoT device which can send messages with a payload up to 12 bytes in size. This means that the chip manufacturer usually has to get creative. I'm currently dealing with a message that looks like this: </p>\n\n<pre><code>typedef struct {\n    byte MsgId; // Message Identification Value = 0x01\n    unsigned int Start :1; // Start Message\n    unsigned int Move :1; // Object Moving\n    unsigned int Stop :1; // Object Stopped\n    unsigned int Vibr :1; // Vibration Detected\n    int16 Temp; // Temperature in 0,01 degC\n    byte GPSFixAge; // bit 0..7 = Age of last GPS Fix in Minutes,\n    byte SatCnt_HiLL; // bit 0..4 = SatInFix, bit5 Latitude 25 bit 6,7 = Longitude 25,26\n    byte Lat[3]; // bit 0..23 = latitude bit 0..23\n    byte Lon[3]; // bit 0..23 = longitude bit 0..23\n}\n</code></pre>\n\n<p>I suppose that the Start-Move-Stop-Vibr data is probably supposed to be interpreted as a boolean, but it's encoded as a bitfield nibble to save space. The only thing I don't know is whether I should consider start to be the least significant or most significant bit. F.e:</p>\n\n<p><code>0x 00 8 ...</code></p>\n\n<p>The 8 here represents the Start-Move-Stop-Vibr data, where the most significant bit is the highest. But does this mean the message is of a Start type or rather a Vibr?</p>\n"
    }, {
        "tags": ["android", "sockets", "tcp", "inputstream", "iot"],
        "is_answered": true,
        "view_count": 900,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1522797270,
        "creation_date": 1487771998,
        "last_edit_date": 1487933343,
        "question_id": 42393586,
        "link": "https://stackoverflow.com/questions/42393586/android-tcp-socket-inputstrem-intermittent-read-or-too-slow",
        "title": "Android TCP Socket InputStrem Intermittent Read or too Slow",
        "body": "<p>I need to implement a TCP comunication between an IoT device(custom) and an Android App. \nFor the Wifi device we have a <strong>Server</strong> <strong>Socket</strong>, while in Android i have an AsyncTask as a Client Socket. Both the device and the smarthone are connected to the same network. </p>\n\n<p>Here is the Android <strong>Client</strong> <strong>Socket</strong> code for the initialization/socket-read and socket-write:</p>\n\n<p><strong>Variables</strong>:</p>\n\n<pre><code>static public Socket nsocket; //Network Socket\nstatic public DataInputStream nis; //Network Input Stream\nstatic private OutputStream nos; //Network Output Stream\n</code></pre>\n\n<p><strong>AsyncTask method doInBackgroud</strong>:</p>\n\n<pre><code>@Override\nprotected Boolean doInBackground(Void... params) { //This runs on a different thread\n    boolean result = false;\n\n    try {\n        //Init/Create Socket\n        SocketInit(IP, PORT);\n\n        // Socket Manager\n        SocketUpdate();\n    } catch (IOException e) {\n        e.printStackTrace();\n        Log.i(\"AsyncTask\", \"doInBackground: IOException\");\n        clearCmdInStack();\n        MainActivity.SocketDisconnectAndNetworkTaskRestart();\n        result = true;\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.i(\"AsyncTask\", \"doInBackground: Exception\");\n        result = true;\n    } finally {\n        try {\n            SocketDisconnect();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        Log.i(\"AsyncTask\", \"doInBackground: Finished\");\n    }\n    return result;\n}\n</code></pre>\n\n<p><strong>Socket Initializzation</strong>:</p>\n\n<pre><code>public void SocketInit(String ip, int port) throws IOException {\n    InetAddress addr = InetAddress.getByName(ip);\n    SocketAddress sockaddr = new InetSocketAddress(addr, port);\n    nsocket = new Socket();\n    nsocket.setReuseAddress(false);      \n    nsocket.setTcpNoDelay(true);           \n    nsocket.setKeepAlive(true);          \n    nsocket.setSoTimeout(0);\n    nsocket.connect(sockaddr, 0);     \n    StartInputStream();\n    StartOutputStream();\n}\n</code></pre>\n\n<p><strong>Read from Socket</strong>:</p>\n\n<pre><code>private void SocketUpdate() throws IOException, ClassNotFoundException {\n    int read = 0;\n    // If connected Start read\n    if (socketSingleton.isSocketConnected()) {\n        // Print \"Connected!\" to UI\n        setPublishType(Publish.CONNECTED);\n        publishProgress();\n\n        if(mConnectingProgressDialog != null)\n            mConnectingProgressDialog.dismiss();  //End Connecting Progress Dialog Bar\n\n        //Set Communications Up\n        setCommunicationsUp(true);\n\n        Log.i(\"AsyncTask\", \"doInBackground: Socket created, streams assigned\");\n        Log.i(\"AsyncTask\", \"doInBackground: Waiting for inital data...\");\n        byte[] buffer = new byte[3];\n\n        do{\n            nis.readFully(buffer, 0, 3);\n            setPublishType(Publish.READ);\n\n            publishProgress(buffer);\n        }while(!isCancelled());\n        SocketDisconnect();\n    }\n}\n</code></pre>\n\n<p><strong>Streams init</strong>:</p>\n\n<pre><code>public void StartInputStream() throws IOException{\n    nis = new DataInputStream(nsocket.getInputStream());\n}\n\npublic void StartOutputStream() throws IOException{\n    nos = nsocket.getOutputStream();\n}\n</code></pre>\n\n<p><strong>Read and Write methods</strong>:</p>\n\n<pre><code>public int Read(byte[] b, int off, int len) throws  IOException{\n    return nis.read(b, off, len); //This is blocking\n}\n\npublic void Write(byte b[]) throws IOException {\n    nos.write(b);\n    nos.flush();\n}\n\npublic boolean sendDataToNetwork(final String cmd)\n{\n    if (isSocketConnected())\n    {\n        Log.i(\"AsyncTask\", \"SendDataToNetwork: Writing message to socket\");\n        new Thread(new Runnable()\n        {\n            public void run()\n            {\n                try\n                {\n                    Write(cmd.getBytes());\n                }\n                catch (Exception e)\n                {\n                    e.printStackTrace();\n                    Log.i(\"AsyncTask\", \"SendDataToNetwork: Message send failed. Caught an exception\");\n                }\n            }\n        }).start();\n\n        return true;\n    }\n\n    Log.i(\"AsyncTask\", \"SendDataToNetwork: Cannot send message. Socket is closed\");\n    return false;\n}\n</code></pre>\n\n<hr>\n\n<p>The application is very simple, the android app sends a command(via sendDataToNetwork method) to the IoT device and the latter sends back an \"ACK\" Command string. </p>\n\n<hr>\n\n<p><strong>The problem</strong></p>\n\n<p>The problem is that while the IoT device always receives the command, the smartphone rarely gets the ACK back. Sometimes i get something like \"ACKACKACKACK\". By debugging the IoT device i'm sure that it successfully sends back the ACK, so the problem lies in the InputStream read() method which doesn't retrieve the string right away. </p>\n\n<p><em>Is there a way to empty the InputStream buffer right away, so that i get an \"ACK\" string back from the IoT device every time i send a command?</em></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>I've updated the socket config so that there are no more buffer limitations and i've replaced read() method with readFully. It greatly improved, but still make some mistakes. For istance one out of 2-3 times no ack is received and i get 2 ack the next turn. Is this perhaps the computational limit of the IoT device? Or is there still margin for a better approach?</p>\n"
    }, {
        "tags": ["authentication", "arduino", "nfc", "iot", "arduino-uno"],
        "is_answered": true,
        "view_count": 1268,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1521811176,
        "creation_date": 1521628966,
        "last_edit_date": 1521710855,
        "question_id": 49404170,
        "link": "https://stackoverflow.com/questions/49404170/cant-authenticate-block-with-pn532",
        "title": "Can&#39;t authenticate block with PN532",
        "body": "<p>I am new to Arduino. I am trying to write an ID to my NFC card. I used the PN532 library and code from the example. I can't go further than <code>authenticateBlock()</code>. Also which block is trying to authenticate? I can't see it in output.</p>\n\n<p>Output:</p>\n\n<ul>\n<li>Found 1 tag</li>\n<li>Sens Response: 0x44</li>\n<li>Sel Response: 0x0</li>\n<li>0x4 0xB9 0xC9 0xBA 0x20 0x4B 0x80</li>\n<li>Read card #3122678656</li>\n</ul>\n\n<p>Code is:</p>\n\n<pre><code>// This example writes a MIFARE memory block 0x08. It is tested with a new MIFARE 1K cards. Uses default keys.\n// Note: Memory block 0 is readonly and contains manufacturer data. Do not write to Sector Trailer block\n// unless you know what you are doing. Otherwise, the MIFARE card may be unusable in the future.\n\n//Contributed by Seeed Technology Inc (www.seeedstudio.com)\n\n#include &lt;PN532.h&gt;\n#include &lt;SPI.h&gt;\n\n/*Chip select pin can be connected to D10 or D9 which is hareware optional*/\n/*if you the version of NFC Shield from SeeedStudio is v2.0.*/\n#define PN532_CS 10\nPN532 nfc(PN532_CS);\n\nuint8_t written = 0;\n#define  NFC_DEMO_DEBUG 1\n\nvoid setup(void) {\n#ifdef NFC_DEMO_DEBUG\n  Serial.begin(9600);\n  Serial.println(\"Hello!\");\n#endif\n  nfc.begin();\n\n  uint32_t versiondata = nfc.getFirmwareVersion();\n  if (! versiondata) {\n#ifdef NFC_DEMO_DEBUG\n    Serial.print(\"Didn't find PN53x board\");\n#endif\n    while (1); // halt\n  }\n#ifdef NFC_DEMO_DEBUG\n  // Got ok data, print it out!\n  Serial.print(\"Found chip PN5\");\n  Serial.println((versiondata &gt;&gt; 24) &amp; 0xFF, HEX);\n  Serial.print(\"Firmware ver. \");\n  Serial.print((versiondata &gt;&gt; 16) &amp; 0xFF, DEC);\n  Serial.print('.');\n  Serial.println((versiondata &gt;&gt; 8) &amp; 0xFF, DEC);\n  Serial.print(\"Supports \");\n  Serial.println(versiondata &amp; 0xFF, HEX);\n#endif\n  // configure board to read RFID tags and cards\n  nfc.SAMConfig();\n}\n\nvoid loop(void) {\n  uint32_t id;\n  // look for MiFare type cards\n  id = nfc.readPassiveTargetID(PN532_MIFARE_ISO14443A);\n  if (id != 0) {\n#ifdef NFC_DEMO_DEBUG\n    Serial.print(\"Read card #\");\n    Serial.println(id);\n    Serial.println();\n#endif\n    uint8_t keys[] = {\n      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF\n    };\n    uint8_t writeBuffer[16];\n    for (uint8_t i = 0; i &lt; 16; i ++) {\n      writeBuffer[i] = i; //Fill buffer with 0,1,2....F\n    }\n    if (nfc.authenticateBlock(1, id , 0x08, KEY_A, keys)) {\n      //authenticate block 0x08\n      //if authentication successful\n      if (written == 0) {\n        //Not written\n        written = nfc.writeMemoryBlock(1, 0x08, writeBuffer); // Write writeBuffer[] to block 0x08\n        if (written)\n#ifdef NFC_DEMO_DEBUG\n          Serial.println(\"Write Successful\");\n#endif\n      }\n      uint8_t block[16];\n      //read memory block 0x08\n      if (nfc.readMemoryBlock(1, 0x08, block)) {\n#ifdef NFC_DEMO_DEBUG\n        Serial.println(\"Read block 0x08:\");\n        //if read operation is successful\n        for (uint8_t i = 0; i &lt; 16; i++) {\n          //print memory block\n          Serial.print(block[i], HEX);\n          Serial.print(\" \");\n        }\n        Serial.println();\n#endif\n      }\n    }\n  }\n  delay(500);\n}\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "verification", "rfid", "nodemcu"],
        "is_answered": false,
        "view_count": 75,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1520994449,
        "creation_date": 1520744015,
        "last_edit_date": 1520994161,
        "question_id": 49216765,
        "link": "https://stackoverflow.com/questions/49216765/function-doesnt-return-the-right-value",
        "title": "Function doesn&#39;t return the right value",
        "body": "<p>To begin with, I'm doing a mini project on the verification of RFID card using NodeMCU. I set up a database and a server to handle all the requests from the client. The problem is, whenever I try to verify a valid card, the function that handles it keeps returning the wrong value.</p>\n\n<p>To be clear, here is my main loop:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void loop() {\n  connectToHost();\n  key = kpd.getKey();\n  card = readCard();\n  delay(200);\n  //check for card status\n  if(verifyCard(card)){\n    Serial.println(\"Card is valid\");\n  } else {\n    Serial.println(\"Invalid Card\");\n  }\n  //check connection status\n  if(WiFi.status() == WL_CONNECTION_LOST){\n    connectToWiFi();\n  }\n}\n</code></pre>\n\n<p>The main loop calls this function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>boolean verifyCard(String uid){\n  String url = \"/ECafe/terminal_verify.php?uid=\";\n  url += uid;\n  // This will send the request to the server\n  Serial.print(\"Requesting URL: \");\n  Serial.println(url);\n  client.print(String(\"GET \") + url + \" HTTP/1.1\\r\\n\" +\n    \"Host: \" + host + \"\\r\\n\" +\n    \"Connection: close\\r\\n\\r\\n\");\n  unsigned long timeout = millis();\n  while (client.available() == 0) {\n    if (millis() - timeout &gt; 5000) {\n      Serial.println(\"&gt;&gt;&gt; Client Timeout !\");\n      client.stop();\n    }\n    yield();\n  }\n  // Read all the lines of the reply from server and print them to Serial\n  while (client.available()) {\n    String line = client.readStringUntil('\\r');\n    //if string contains echo from php file\n    if(line.indexOf(\"Valid\")&gt;0){\n      return true;\n    } else {\n      return false;\n    }\n    yield();\n  }\n  Serial.println();\n  Serial.println(\"Closing connection\");\n}\n</code></pre>\n\n<p>I intentionally put a valid card UID in the database just to test this function. Yet, it keeps returning false. I'm sure that the response from the server is \"Valid\". I suspect that the function doesn't even wait for the response from the server and returns a false value because the interval between the GET request is sent and the response is returned is too short. Is that because of the if condition in the main loop? See the attachment for the serial monitor output.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UTHl3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTHl3.png\" alt=\"\"></a></p>\n"
    }, {
        "tags": ["linux", "mips", "iot", "exploit"],
        "is_answered": false,
        "view_count": 66,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1518156238,
        "creation_date": 1518137997,
        "last_edit_date": 1518156238,
        "question_id": 48697214,
        "link": "https://stackoverflow.com/questions/48697214/any-mechanism-prevent-execv-from-service",
        "title": "Any mechanism prevent execv from service",
        "body": "<p>I am developing POC of chimay red exploit from Vault 7 CIA Leaks.\nI can run any shell code at target router except execv.\nWhen executes excecv system call, the www service dies(or is killed?) immediately.\nI don't know why this happens, and how to overcome it.\nSomeone told me, \"My guess is that there was a mechanism which monitor the service and kills it when it does not responds.\"\nI'm not sure if such mechanism exists in linux or not.\nCan anyone explain the correct reason this happens?</p>\n"
    }, {
        "tags": ["c", "arduino", "iot", "esp8266", "influxdb"],
        "is_answered": false,
        "view_count": 1794,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1517178175,
        "creation_date": 1467383215,
        "last_edit_date": 1467394078,
        "question_id": 38147929,
        "link": "https://stackoverflow.com/questions/38147929/passing-post-request-through-esp8266-to-influxdb",
        "title": "Passing POST request through ESP8266 to InfluxDB",
        "body": "<p>I'm trying to transition from dweet.io to my own InfluxDB database.</p>\n\n<p>The request i was doing to dweet.io looked like this:</p>\n\n<pre><code>client.print(String(\"GET /dweet/for/nJLDK4mm3Xl6TcT8Yr06?key=7hHa9AhSGp6u684LGfya4Y&amp;temperature=\") + String(t) + \"&amp;humidity=\" + String(h) + \" HTTP/1.1\\r\\n\" +\n    \"Host: \" + host + \"\\r\\n\" +\n    \"Connection: close\\r\\n\\r\\n\");\ndelay(10);\n</code></pre>\n\n<p>So i though i could just edit that to work on the database, i tried this:</p>\n\n<pre><code>client.print(String(\"GET /write?db=mydb' --data-binary 'temperature,host=ESP826601 value=\") + String(t) + \"' HTTP/1.1\\r\\n\" + \n    \"Host: \" + host + \"\\r\\n\" + \n    \"Connection: close\\r\\n\\r\\n\");\ndelay(10);\n</code></pre>\n\n<p>It wasn't working, it was able to connect to server, though could not make the request. My code is based on this: <a href=\"https://www.openhomeautomation.net/cloud-temperature-logger-esp8266/\" rel=\"nofollow\">https://www.openhomeautomation.net/cloud-temperature-logger-esp8266/</a></p>\n"
    }, {
        "tags": ["ios", "objective-c", "sockets", "ios11", "iot"],
        "is_answered": true,
        "view_count": 971,
        "favorite_count": 2,
        "score": 15,
        "last_activity_date": 1516513998,
        "creation_date": 1513591060,
        "last_edit_date": 1513773055,
        "question_id": 47865874,
        "link": "https://stackoverflow.com/questions/47865874/tcp-based-client-communication-doesnt-work-in-ios-11",
        "title": "TCP-Based Client communication doesn&#39;t work in iOS 11?",
        "body": "<p>I have an IoT application that uses <a href=\"https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/NetworkingTopics/Articles/UsingSocketsandSocketStreams.html\" rel=\"noreferrer\">Socket Programming</a> to communicate with the device. All good up until iOS 11 released. It doesn't communicate in iOS 11 and above but it works in earlier versions ( Up to 10). Here is the code.</p>\n\n<p><strong>Establishing Socket Connection</strong>         </p>\n\n<pre><code>(void)setUpSocketConnection {\n    @try {\n        CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (__bridge CFStringRef) VeranoHost,VeranoPort , &amp;readStream, &amp;writeStream);\n        [self open];\n    }\n    @catch (NSException *exception) {\n        NSLog(@\"Open Exception:%@\", exception.reason);\n    }   \n}\n</code></pre>\n\n<p><strong>Opening Streams</strong></p>\n\n<pre><code>(void)open {\n    //NSLog(@\"Opening streams.\");\n    _outputStream = (__bridge  NSOutputStream *)writeStream;\n    _inputStream = (__bridge  NSInputStream *)readStream;\n    [_outputStream setDelegate:self];\n    [_inputStream setDelegate:self];\n\n    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0);\n    dispatch_async(queue, ^ {\n            [_outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];\n            [_inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];\n            [[NSRunLoop currentRunLoop] run];\n    });\n\n    [_outputStream open];\n    [_inputStream open];\n\n    //[self disableNaglesAlgorithmForStream:_inputStream];\n   // NSLog(@\"Connected\");\n//    self.timeOutTimer = [NSTimer scheduledTimerWithTimeInterval:10.0\n//                                                         target:self\n//                                                       selector:@selector(timerTimeOutAction:)\n//                                                       userInfo:nil\n//                                                        repeats:NO];\n}\n</code></pre>\n\n<p><strong>Writing to Output Stream</strong></p>\n\n<pre><code>(void)writeData:(NSString *)message forSocketType:(SOCKETTTYPE)socketType {\n    self.socketType = socketType;\n    NSData *data = [[NSData alloc] initWithData:[message dataUsingEncoding:NSASCIIStringEncoding]];\n    [_outputStream write:[data bytes] maxLength:[data length]];\n    [_outputStream close];\n\n}\n</code></pre>\n\n<p><strong>Event Handler</strong></p>\n\n<pre><code>(void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {\n   // NSLog(@\"stream event %lu\", (unsigned long)streamEvent);\n    switch (streamEvent) {\n        case NSStreamEventOpenCompleted:{\n\n           // NSLog(@\"NSStreamEventOpenCompleted :::: Stream opened and connected\");\n        }\n            break;\n        case NSStreamEventHasBytesAvailable:\n            // NSLog(@\"NSStreamEventHasBytesAvailable :::: Stream opened and connected\");\n            if (theStream == _inputStream) {\n                uint8_t buffer[1024];\n                NSInteger len;\n\n                while ([_inputStream hasBytesAvailable])\n                {\n                    len = [_inputStream read:buffer maxLength:sizeof(buffer)];\n                    if (len &gt; 0)\n                    {\n                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];\n\n                        if (nil != output)\n                        {\n                            NSLog(@\"server said: %@\", output);\n                            [self messageReceived:output];\n                        }\n                    }\n                }\n            }\n            break;\n        case NSStreamEventHasSpaceAvailable:\n           // NSLog(@\"NSStreamEventHasSpaceAvailable :::: Stream has space available now\");\n            break;\n\n        case NSStreamEventErrorOccurred:{\n           NSError *theError = [theStream streamError];\n            NSLog(@\"Error Description:%@\",theError.localizedDescription);\n            [self close];\n            if(self.delegate &amp;&amp;[self.delegate respondsToSelector:@selector(socketHandlerItem:failureWithError:forSocketType:)]){\n                [self.delegate socketHandlerItem:self failureWithError:[theStream streamError] forSocketType:self.socketType];\n            }\n             //NSLog(@\"NSStreamEventErrorOccurred :::: %@\",[theStream streamError].localizedDescription);\n        }\n            break;\n\n        case NSStreamEventEndEncountered:\n            [theStream close];\n            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];\n            if(self.delegate &amp;&amp;[self.delegate respondsToSelector:@selector(socketHandlerItem:eventStopedWithstatus:forSocketType:)]){\n                [self.delegate socketHandlerItem:self eventStopedWithstatus:YES forSocketType:self.socketType];\n            }\n           // NSLog(@\"NSStreamEventEndEncountered :::: close stream Disconnected\");\n            break;\n        default:\n           // NSLog(@\"Unknown event\");\n            break;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>So, when connecting to the socket it enters to the\n  <code>NSStreamEventErrorOccurred</code> in the event handler and logs - <code>The operation couldn\u2019t be completed. No route to host</code></p>\n</blockquote>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p><strong>Update Dec 19, 2017</strong></p>\n\n<ul>\n<li>Got a <a href=\"http://apple.co/2By9Lhl\" rel=\"noreferrer\">Reachability</a> wrapper that allows to discover host address and I can confirm that it returns the NetworkStatus <code>ReachableViaWiFi</code></li>\n<li>Socket communication works fine, I tried by creating a sample server socket, able to send and receive data.</li>\n</ul>\n\n<p><strong>Update Dec 20, 2017 (1)</strong></p>\n\n<blockquote>\n  <p>IoT device Details - <code>USR-WIFI232-S</code> Low Power WiFi Module</p>\n  \n  <p>User Manual <a href=\"https://www.elecrow.com/download/USR-WIFI232%20Low%20Power%20WiFi%20Module%20User%20Manual%20V2.2.pdf\" rel=\"noreferrer\">Here</a></p>\n</blockquote>\n\n<p><strong>Update Dec 20, 2017 (2)</strong></p>\n\n<p>Eurekaa, but the solution can't be applied in real time. While setting a nearest range of static IP address in iOS 11 corresponding to IoT module's host address the communication works fine. but it doesn't work with the dynamically allocated IP address.</p>\n"
    }, {
        "tags": ["node.js", "aws-lambda", "mqtt", "iot", "aws-iot"],
        "is_answered": true,
        "view_count": 1161,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1511743855,
        "creation_date": 1511722255,
        "question_id": 47499763,
        "link": "https://stackoverflow.com/questions/47499763/need-help-publishing-to-iot-topic-using-lambda-and-node-js",
        "title": "Need help publishing to IoT topic using Lambda and node Js",
        "body": "<p>I'm trying to control my raspberry using Amazon Alexa, IoT and Lambda.\nWhat I got working so far:</p>\n\n<ul>\n<li>Setting up raspberry as IoT device and being able to publish and subscribe to a topic (Testes using the IoT Client)</li>\n<li>Setting up a test lambda node.js script</li>\n<li>Setting up a test Alexa Skill that triggers an intent in my lambda script</li>\n</ul>\n\n<p>Here's the intent handling in my node.js script:</p>\n\n<pre><code>switch(event.request.intent.name) {\n      case \"testone\":\n        var config = {};\n        config.IOT_BROKER_ENDPOINT      = \"restAPILinkFromIoT\".toLowerCase();\n        config.IOT_BROKER_REGION        = \"us-east-1\";\n\n        //Loading AWS SDK libraries\n        var AWS = require('aws-sdk');\n        AWS.config.region = config.IOT_BROKER_REGION;\n        var iotData = new AWS.IotData({endpoint: config.IOT_BROKER_ENDPOINT});\n        var topic = \"/test\";\n        var output = \"test output without publish\"\n        var params = {\n            topic: topic,\n            payload: \"foo bar baz\",\n            qos:0\n        };\n        iotData.publish(params, (err, data) =&gt; {\n            if (!err){\n               output = \"publish without error\"\n                this.emit(':tell', tell);\n            } else {\n                output = err\n            }\n        });\n        context.succeed(\n              generateResponse(\n                buildSpeechletResponse(output, true),\n                {}\n              )\n            )\n        break;\n        ...\n</code></pre>\n\n<p>Basically the script should either return \"publish without error\" or the error message. The Problem it always returns \"test output without publish\". It seems like the publish function (or at least the callback function) is never triggered. I also don't see a message in the topic.</p>\n\n<p>Am I doing something wrong? </p>\n\n<p>Thanks in advance!</p>\n"
    }, {
        "tags": ["java", "iot", "rfid", "indoor-positioning-system", "google-indoor-maps"],
        "is_answered": false,
        "view_count": 140,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1507205096,
        "creation_date": 1507205096,
        "question_id": 46585194,
        "link": "https://stackoverflow.com/questions/46585194/how-to-store-the-rfid-detailsepc-reader-id-powerlevel-through-mqtt-in-database",
        "title": "How to store the RFID details(EPC,Reader_id,powerlevel) through MQTT in database..?",
        "body": "<p>I am using IMPINJ reader and tags to carryout this experiment.I need to store the identified TAG details in to postgres through MQTT.</p>\n"
    }, {
        "tags": ["javascript", "iot", "contiki"],
        "is_answered": false,
        "view_count": 249,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1501684697,
        "creation_date": 1501679912,
        "last_edit_date": 1501684697,
        "question_id": 45462026,
        "link": "https://stackoverflow.com/questions/45462026/cant-add-multiple-motes-in-simulation-script-in-cooja",
        "title": "Can&#39;t add multiple motes in simulation script in Cooja",
        "body": "<p>I am working on a modification to RPL algorithm in Contiki. I am using Cooja for simulations.\nI am trying to assess efficiency of my algorithm by adding nodes to the network randomly by a certain distribution (like Gamma distribution). To do this I have to write a script. The problem is, I can't add more than one mote using this script. Here is what I have so far:</p>\n\n<pre><code>var motes_array = new Array(); \nmoteType = mote.getType();\nfor (i = 0; i &lt; 5; i++) {\n    motes_array[i] = moteType.generateMote(mote.getSimulation());\n    mote.getSimulation().addMote(motes_array[i]);\n} \nlog.testOK();\n</code></pre>\n\n<p>The above code adds only one mote, although the loop is executed 5 times as expected.</p>\n\n<p>I would be very grateful for your help.</p>\n"
    }, {
        "tags": ["java", "android", "hex", "iot"],
        "is_answered": true,
        "view_count": 1221,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1500271000,
        "creation_date": 1500267652,
        "last_edit_date": 1500267776,
        "question_id": 45136264,
        "link": "https://stackoverflow.com/questions/45136264/how-to-convert-date-time-in-hex-in-android",
        "title": "How to convert date time in hex in android",
        "body": "<p>I need to convert date and time in hex code for writing it on IOT device. \nHere is my code</p>\n\n<pre><code>private String getDateTimeToHexa() { \n\nCalendar mCalendar = Calendar.getInstance();\nTimeZone gmtTime =  TimeZone.getTimeZone(TimeZone.getDefault().getDisplayName());\n\n    mCalendar.setTimeZone(gmtTime);\n    final Date date = mCalendar.getTime();\n    return Long.toHexString(date.getTime());\n}\n</code></pre>\n\n<p>It is returning 11 digits hex code I need 8 digits, just like date and time in hex is <code>47C7EDE0</code> for this date <code>12:34:56 29/Feb/2008</code></p>\n\n<p>Please help</p>\n"
    }, {
        "tags": ["c#", "azure", "iot", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 3196,
        "favorite_count": 0,
        "closed_date": 1466649943,
        "score": 0,
        "last_activity_date": 1500062245,
        "creation_date": 1466606542,
        "last_edit_date": 1466678350,
        "question_id": 37971353,
        "link": "https://stackoverflow.com/questions/37971353/c-how-to-check-if-iot-device-is-able-to-send-to-iothub",
        "title": "(C#) How to check if iot device is able to send to IoTHub",
        "body": "<p>I'm using amqp to send messages from my iot devices to Azure IoTHub. I'm writing a program in C# and I want to check if the devices are able to establish a connection with iot hub. \nWhat would be the best way of achieving this? Is it possible to create a callback function?</p>\n\n<p>I noticed that one of my devices are on a closed network, that is the amqp port is blocked. But the device logs that It's sending messages to IoT Hub (no exceptions thrown) and when I check Iot Hub no messages have been received. This is why I want to check if the device is able to establish a connection with IoT Hub</p>\n\n<p>The java sdk has a eventcallback class but not C#, or am I missing something?</p>\n\n<p><code>protected static class EventCallback implements IotHubEventCallback { \n    public void execute(IotHubStatusCode status, Object context) { \n        System.out.println(\"IoT Hub responded to message with status \" + status.name()); \n    } \n}</code></p>\n\n<p>Edit: \nWould this be a good implementation?</p>\n\n<p><code>\n    try {\n        client = DeviceClient.CreateFromConnectionString(\"***\", TransportType.Amqp);\n        var task = client.OpenAsync();\n        task.Wait(30000); // wait for 30 sec \n        if (task.IsCompleted) {\n            Console.WriteLine(\"Connected\");\n            await client.CloseAsync();\n        }\n        else {\n            throw new Exception(\"Time out\");\n        }\n    }\n    catch (Exception e) {\n        Console.WriteLine(\"Error\");\n    }\n</code></p>\n"
    }, {
        "tags": ["middleware", "iot", "platform", "kaa"],
        "is_answered": false,
        "view_count": 64,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1499423374,
        "creation_date": 1496688354,
        "question_id": 44375662,
        "link": "https://stackoverflow.com/questions/44375662/kaa-changing-sampling-period",
        "title": "Kaa Changing sampling period",
        "body": "<p>I was trying the kaa tutorial \"Your first kaa application\" and in the step \"Change sampling period\",\n<a href=\"https://i.stack.imgur.com/DKkJc.png\" rel=\"nofollow noreferrer\">the highlighted output is supposed to happen</a></p>\n\n<p>But it does not, despite the other values still appear.</p>\n"
    }, {
        "tags": ["php", "automation", "iot"],
        "is_answered": true,
        "view_count": 2185,
        "favorite_count": 0,
        "closed_date": 1342373152,
        "score": 2,
        "last_activity_date": 1499275564,
        "creation_date": 1342372020,
        "last_edit_date": 1499275564,
        "question_id": 11493901,
        "link": "https://stackoverflow.com/questions/11493901/home-automation-with-php",
        "title": "Home automation with php",
        "body": "<p>I want to do simple automation in my home like on/off lights to explore more about automation. I am a software engineer so I don't know much about hardware to use in this process. I want to do this task in php. It would be very great for me if anybody can help me to achieve this task. Please suggest me any other language if PHP is not suitable for this task.</p>\n"
    }, {
        "tags": ["amazon-web-services", "arduino", "iot"],
        "is_answered": false,
        "view_count": 68,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1497971395,
        "creation_date": 1497971395,
        "question_id": 44656826,
        "link": "https://stackoverflow.com/questions/44656826/arduino-yun-aws-shadow-update-timeout-error",
        "title": "Arduino Yun AWS Shadow update timeout error",
        "body": "<p>I am currently using the AWS IoT SDK for the Arduino Yun, and I am running the example sketches (specifically the Thermostat simulator).</p>\n\n<p>I modified the loop slightly (just changed the delay at the end) such that it looks like this:</p>\n\n<pre><code>void loop() {\n  if(success_connect) {\n    // If the desired temperature is set to a higher value, start heating.\n    if(desiredTemp - reportedTemp &gt; 0.001) {reportedTemp += 0.1;}\n    // If the desired temperature is set to a lower value, start cooling.\n    else if(reportedTemp - desiredTemp &gt; 0.001) {reportedTemp -= 0.1;}\n    dtostrf(reportedTemp, 4, 1, float_buf);\n    float_buf[4] = '\\0';\n    sprintf_P(JSON_buf, PSTR(\"{\\\"state\\\":{\\\"reported\\\":{\\\"Temp\\\":%s}}}\"), float_buf);\n    print_log(\"shadow update\", myClient.shadow_update(AWS_IOT_MY_THING_NAME, JSON_buf, strlen(JSON_buf), NULL, 5));\n    if(myClient.yield()) {\n      Serial.println(\"Yield failed.\");\n    }\n    delay(10000); // CHANGED TO 10 SECONDS INSTEAD OF 1\n  }\n}\n</code></pre>\n\n<p>For some reason, when the loop is delayed for less than 10 seconds, the shadow update has no problem repeating. But as soon as the delay is 10 seconds or more, I get this error:</p>\n\n<blockquote>\n  <p>Exception in thread Thread-4 (most likely raised during interpr \n  [ERR] command: shadow update code: -1</p>\n</blockquote>\n\n<p>I changed the CMD_TIME_OUT to a higher value in the aws_iot_config_SDK.h file, but it still seems to have no effect. The reason why I'd like the timeout delay to be larger than 10 seconds is because I want to ideally have a trigger mechanism in the arduino that would update the shadow.</p>\n"
    }, {
        "tags": ["python", "iot", "nodemcu", "zeroconf", "mdns"],
        "is_answered": true,
        "view_count": 688,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1497736858,
        "creation_date": 1475688221,
        "last_edit_date": 1475703968,
        "question_id": 39880204,
        "link": "https://stackoverflow.com/questions/39880204/zeroconf-not-found-any-service",
        "title": "Zeroconf not found any service",
        "body": "<p>I started to test zeroconf to implement the discovery feature in a plugin I'm developing. At the beginning it was working good, but a few weeks ago it isn't showing any available service.</p>\n\n<p>I thought it was problem of my device, but Arduino IDE is showing the mDNS service (I'm using few nodemcu devices).</p>\n\n<p>So now I don't know where is the problem. In the zeroconf github recommended me to use wireshark to know what happen in the traffic, however I don't see anything unusual on it. <a href=\"http://txt.do/dantz\" rel=\"nofollow\">Here</a> is the full log. </p>\n\n<p>I've test in differents environments (windows and linux) and both shows me the same results (not services)</p>\n\n<p>So now I'm thinking it could be problem of zeroconf. There someone who can point me what could be the nexts steps to debug this problem?</p>\n"
    }, {
        "tags": ["c", "iot", "contiki"],
        "is_answered": false,
        "view_count": 415,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1497626734,
        "creation_date": 1493906856,
        "last_edit_date": 1493970557,
        "question_id": 43785186,
        "link": "https://stackoverflow.com/questions/43785186/how-to-implement-collect-view-in-cooja-for-rpl-skymote",
        "title": "How to implement collect view in cooja for RPL skymote",
        "body": "<p>Can anybody tell me how to implement <code>collect-view</code> for \n<code>contiki-2.7/examples/ipv6/simple-udp-rpl/unicast-receiver.c</code> ?</p>\n\n<p>Do I have to refer to  </p>\n\n<blockquote>\n  <p>contiki-2.7/examples/ipv6/rpl-collect/collect-common.c &amp; udp.sink.c</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>contiki-2.7/examples/collect collect-view-shell.c</p>\n</blockquote>\n\n<p>?</p>\n"
    }, {
        "tags": ["spring-boot", "tomcat8", "iot", "freeze"],
        "is_answered": true,
        "view_count": 2675,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1497363835,
        "creation_date": 1497202746,
        "last_edit_date": 1497350122,
        "question_id": 44486788,
        "link": "https://stackoverflow.com/questions/44486788/spring-boot-application-freezes-after-a-day",
        "title": "Spring Boot application freezes after a day",
        "body": "<p>I have a Spring Boot application running on two servers. It accepts file <strong>upload requests</strong> (approx 1 KB) via Controller from 1000s of IOT devices. </p>\n\n<p>Additionally there is a <strong>TCP Listener</strong> which also accepts GPS data as a Stream from these IOT devices.</p>\n\n<p>I have setup the Tomcat max thread count to 3000 on one server and 5000 on a larger VM.</p>\n\n<p>After a day or two my Spring Boot application freezes, i.e. it stops responding to any further API calls.</p>\n\n<p>One reason, I suspect is that the IOT devices are <strong>not closing</strong> the TCP socket connection after sending the data. </p>\n\n<p>Where could I be going wrong? I am running out of threads to handle new incoming requests?</p>\n\n<p><strong>############################</strong></p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>After investigating the thread dump and adding logs during during Socket connection and closure, I have discovered that the IOT device isn't closing connections. Instead the device is creating a new connection every time it wants to send new data without closing the previous one.</p>\n\n<p>Before the app froze, 22500 open connections were automatically closed.</p>\n\n<p>How can I handle this behavior? Should I close the connections forcefully after a certain timeout?</p>\n"
    }, {
        "tags": ["java", "sockets", "tomcat", "iot"],
        "is_answered": false,
        "view_count": 90,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1496690600,
        "creation_date": 1496672311,
        "last_edit_date": 1496690600,
        "question_id": 44371056,
        "link": "https://stackoverflow.com/questions/44371056/how-to-handle-a-non-http-connections-from-the-iot-device-on-tomcat",
        "title": "How to handle a non-HTTP connections from the IoT device on Tomcat?",
        "body": "<p>I'm creating a simple monitoring system. A few devices (atmega8 + GSM modem + a few sensors) sends logs to the server, it stores them to database and shows some statistics on the simple web page. I decided to use a Tomcat as a web server (mostly because I use Java).</p>\n\n<p>The problem is that I'm not able to create HTTP requests and parse the responses at atmega: I do not have enough RAM. Native sockets would solve it, but it looks like Tomcat does not support raw sockets.</p>\n\n<p>I found a <a href=\"https://code.google.com/archive/p/jca-sockets/\" rel=\"nofollow noreferrer\">JCA-Sockets project</a> designed for that, but it looks not finished (and pretty complicated, so I can't fix it in case of any problem). </p>\n\n<p>As far as I know, I can't just create a ServerSocket inside a servlet container.</p>\n\n<p>Are there any standard ways to do this? Maybe I can extend a GenericServlet by some odd method?</p>\n\n<p>Of course, I can create a standalone Java server to handle these connections and send data to Tomcat using JMS, but it's a bit overengineering for a small hobby project.</p>\n"
    }, {
        "tags": ["iot", "service-discovery", "coap"],
        "is_answered": false,
        "view_count": 136,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1495537260,
        "creation_date": 1490862817,
        "question_id": 43112505,
        "link": "https://stackoverflow.com/questions/43112505/iot-coap-node-discovery-packet",
        "title": "IoT/CoAP node discovery packet",
        "body": "<p>How exactly should I discover all nodes that do something useful in my network? </p>\n\n<p>Most CoAP documentation I've seen talks about protocol when connection is already established, but how to know where the endpoints are?</p>\n\n<p>I found <a href=\"https://openconnectivity.org/resources/specifications\" rel=\"nofollow noreferrer\">OIC specification</a> which says that discovery packets should be sent over IPv6 to multicast <code>FF0X:0:0:0:0:0:0:158</code> (<a href=\"https://www.iana.org/assignments/ipv6-multicast-addresses/ipv6-multicast-addresses.xhtml\" rel=\"nofollow noreferrer\">All OCF Nodes</a>) port 5683 (UDP?). The packet should be \"GET /oic/res\" <code>senddiscovery</code> request. What is that <code>senddiscovery</code>?</p>\n\n<p>The OIC spec also says CBOR encoding should be used for response, but doesn't describe what is the meaning of the returned data.</p>\n"
    }, {
        "tags": ["java", "callback", "publish-subscribe", "iot", "pubnub"],
        "is_answered": true,
        "view_count": 36,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1493702415,
        "creation_date": 1493294588,
        "last_edit_date": 1493306910,
        "question_id": 43657235,
        "link": "https://stackoverflow.com/questions/43657235/after-execution-of-my-java-program-getting-correct-published-data-from-pubnub-bu",
        "title": "After execution of my java program getting correct published data from pubnub but later on incorrect",
        "body": "<p>I have created a java file which is getting data after pressing button on IoT modem.\nIoT device publishes the protocol data over the <a href=\"http://pubnub.com\" rel=\"nofollow noreferrer\">PubNub</a> and I am getting data in my java program from PubNub after subscribing onto this.</p>\n\n<p>The received data is hexadecimal value in ASCII representation.</p>\n\n<p>I am getting protocol data as a single string and converting into char array, then from array I am taking some part of array and converting into decimal values.</p>\n\n<p>Just after execution of the program I am getting correct data but later on the data is not correct.</p>\n\n<p>Here is my whole code:</p>\n\n<pre><code>import com.pubnub.api.Callback;\nimport com.pubnub.api.Pubnub;\nimport com.pubnub.api.PubnubException;\n\npublic class SubscribeTest {\n    String PUB_KEY = \"pub-c-a2a1d4ab...\";\n    String SUB_KEY = \"sub-c-0ce5f84a...\";\n    String CHANNEL = \"IOT1\";\n    Pubnub pn = new Pubnub(PUB_KEY,SUB_KEY);\n\n    String receivedData = new String(); //to store the subscribed data\n    char[] receivedDataInArray = new char[50];  //to store the converted string\n\n    int deviceId = 0;\n    int functionCode = 0;\n    int productId =0;\n    int timeHour = 0;\n    int timeMin = 0;\n    int dateDay = 0;\n    int dateMonth = 0;\n    int eventCount = 0;\n\n\n    public void subTest() throws PubnubException {  \n        try {\n\n            System.out.println(\"Subscribed\");\n            pn.subscribe(CHANNEL, new Callback() {\n\n                @Override\n                public void successCallback(String arg0, Object arg1) {\n\n\n                    System.out.println(arg1);\n                    receivedData = (String)arg1;    //subscribed data stored \n                    System.out.println(\"DATA :-\" + receivedData);\n                    System.out.println(\"Message length :  \"+receivedData.length());\n\n                    for(int i=0; i&lt;receivedData.length(); i++) {\n                        receivedDataInArray[i] = receivedData.charAt(i);        //Received data converted into array\n                    }\n\n                    System.out.println(receivedDataInArray);\n\n                    int tmp = 0;\n                    for (int j = 0; j &lt; 4 ; j++) {\n\n                        if (j &lt; 3) {\n                            if(receivedDataInArray[j] &gt; 0x39) {\n                                if(receivedDataInArray[j] == 'A') {\n                                    tmp = 0x0A;\n                                }else if(receivedDataInArray[j] == 'B') {\n                                    tmp = 0x0B;\n                                }else if(receivedDataInArray[j] == 'C') {\n                                    tmp = 0x0C;\n                                }else if(receivedDataInArray[j] == 'D') {\n                                    tmp = 0x0D;\n                                }else if(receivedDataInArray[j] == 'E') {\n                                    tmp = 0x0E;\n                                }else if(receivedDataInArray[j] == 'F') {\n                                    tmp = 0x0F;\n                                }\n\n                                deviceId |= tmp;\n                                deviceId &lt;&lt;= 4;\n\n                            } else {\n                                tmp=receivedDataInArray[j]-0x30;\n                                deviceId |= tmp;\n                                deviceId &lt;&lt;= 4;\n                            }\n                        }else {\n                            if (receivedDataInArray[j] &gt; 0x39) {\n                                if (receivedDataInArray[j] == 'A') {\n                                    tmp = 0x0A;\n                                }else if(receivedDataInArray[j] == 'B') {\n                                    tmp = 0x0B;\n                                }else if(receivedDataInArray[j] == 'C') {\n                                    tmp = 0x0C;\n                                }else if(receivedDataInArray[j] == 'D') {\n                                    tmp = 0x0D;\n                                }else if(receivedDataInArray[j] == 'E') {\n                                    tmp = 0x0E;\n                                }else if(receivedDataInArray[j] == 'F') {\n                                    tmp = 0x0F;\n                                }\n\n                                deviceId |= tmp;\n                            } else {\n                                tmp = receivedDataInArray[j]-0x30;\n                                deviceId |= tmp;\n                            }\n                        }   \n                    }\n                    System.out.println(\"device ID:--\"+deviceId);\n\n                    //for Product Id\n                    tmp = receivedDataInArray[10]-0x30;\n                    productId = tmp;\n                    productId &lt;&lt;= 4;\n                    tmp = receivedDataInArray[11]-0x30;\n                    productId |= tmp;\n\n                    //for Time Hour\n                    tmp = receivedDataInArray[12]-0x30;\n                    timeHour = tmp*10;\n                    //timeHour &lt;&lt;= 4;\n                    tmp = receivedDataInArray[13]-0x30;\n                    timeHour += tmp;\n\n                    //for Time Minute\n                    tmp = receivedDataInArray[14]-0x30;\n                    timeMin = tmp*10;\n                    //timeMin &lt;&lt;= 4;\n                    tmp = receivedDataInArray[15]-0x30;\n                    timeMin += tmp;\n\n                    //for Date Day\n                    tmp = receivedDataInArray[16]-0x30;\n                    dateDay = tmp*10;\n                    //date &lt;&lt;= 4;\n                    tmp = receivedDataInArray[17]-0x30;\n                    dateDay += tmp;\n\n                    //for month\n                    tmp = receivedDataInArray[18]-0x30;\n                    dateMonth = tmp*10;\n                    //dateMonth &lt;&lt;= 4;\n                    tmp = receivedDataInArray[19]-0x30;\n                    dateMonth += tmp;\n\n                    //for event count\n                    for (int j = 20; j &lt; 24 ; j++) {\n\n                        if (j &lt; 23) {\n                            if(receivedDataInArray[j] &gt; 0x39) {\n                                if(receivedDataInArray[j] == 'A') {\n                                    tmp=0x0A;\n                                }else if(receivedDataInArray[j] == 'B') {\n                                    tmp=0x0B;\n                                }else if(receivedDataInArray[j] == 'C') {\n                                    tmp=0x0C;\n                                }else if(receivedDataInArray[j] == 'D') {\n                                    tmp =0x0D;\n                                }else if(receivedDataInArray[j] == 'E') {\n                                    tmp=0x0E;\n                                }else if(receivedDataInArray[j] == 'F') {\n                                    tmp=0x0F;\n                                }\n\n                                eventCount |= tmp;\n                                eventCount &lt;&lt;= 4;\n\n                            } else {\n                                tmp=receivedDataInArray[j]-0x30;\n                                eventCount |= tmp;\n                                eventCount &lt;&lt;= 4;\n                            }\n                        }else {\n                            if (receivedDataInArray[j] &gt; 0x39) {\n                                if (receivedDataInArray[j] == 'A') {\n                                    tmp = 0x0A;\n                                }else if(receivedDataInArray[j] == 'B') {\n                                    tmp = 0x0B;\n                                }else if(receivedDataInArray[j] == 'C') {\n                                    tmp = 0x0C;\n                                }else if(receivedDataInArray[j] == 'D') {\n                                    tmp = 0x0D;\n                                }else if(receivedDataInArray[j] == 'E') {\n                                    tmp = 0x0E;\n                                }else if(receivedDataInArray[j] == 'F') {\n                                    tmp = 0x0F;\n                                }\n                                eventCount |= tmp;\n                            } else {\n                                tmp = receivedDataInArray[j]-0x30;\n                                eventCount |= tmp;\n                            }\n                        }   \n\n                    }\n\n\n                    System.out.println(\"***Received data from device***\"+\"\\n\\n\"+\n                            \"Device id : \"+deviceId+\n                            \"\\nProduct Id: \"+productId+\n                            \"\\nTime Hour: \"+timeHour+\n                            \"\\nTime Minutes: \"+timeMin+\n                            \"\\nDate Day: \"+dateDay+\n                            \"\\nDate Month: \"+dateMonth+\n                            \"\\nEvent Count: \"+eventCount);\n                }\n\n            });\n\n        }catch (PubnubException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    public static void main(String[] args) throws PubnubException {\n\n        new SubscribeTest().subTest();\n    }\n\n}\n</code></pre>\n\n<p>If I execute this, after pressing the button of IoT modem I am getting correct data But if I press again then only <strong>device Id</strong> and <strong>event count</strong> get differed.</p>\n\n<p>Here is my output:</p>\n\n<p><strong>1st time after execution</strong></p>\n\n<pre><code>167303080003063001020001\nDATA :-167303080003063001020001\nMessage length :  24\n167303080003063001020001\ndevice ID:--5747\n***Received data from device***\n\nDevice id : 5747\nProduct Id: 3\nTime Hour: 6\nTime Minutes: 30\nDate Day: 1\nDate Month: 2\nEvent Count: 1\n</code></pre>\n\n<p><strong>2nd time after execution</strong></p>\n\n<pre><code>167303080003063001020001\nDATA :-167303080003063001020001\nMessage length :  24\n167303080003063001020001\ndevice ID:--23541363\n***Received data from device***\n\nDevice id : 23541363\nProduct Id: 3\nTime Hour: 6\nTime Minutes: 30\nDate Day: 1\nDate Month: 2\nEvent Count: 4097\n</code></pre>\n\n<p>Here, <strong>167303080003063001020001</strong> is the protocol data getting from the device is same for the both outputs.</p>\n\n<p>Is there any problem with <strong>Callback()</strong>?</p>\n"
    }, {
        "tags": ["rest", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 232,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1492818141,
        "creation_date": 1492722858,
        "last_edit_date": 1492811562,
        "question_id": 43530030,
        "link": "https://stackoverflow.com/questions/43530030/error-400-using-rest-apis-to-ibm-watson-iot-platform",
        "title": "Error 400 using REST APIs to IBM Watson IoT platform",
        "body": "<p>I'm attempting to transmit a json formatted message using the REST APIs from an embedded system to the IBM Watson IoT Platform. I've tested the REST APIs using another program (postman) and it works fine however an identical string transmitted from my embedded system returns an error 400. Is there so \"extra\" security certificate I need in my embedded system to make this work? Or is there something else I am missing?</p>\n\n<p>Here's a link to the REST API for messaging: <a href=\"https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/http-messaging.html\" rel=\"nofollow noreferrer\">https://docs.internetofthings.ibmcloud.com/apis/swagger/v0002/http-messaging.html</a></p>\n\n<p>The following is the string output from my embedded system (via socket connection) where typeID, deviceID, eventName, and orgID are correctly entered and encode64(name token) is the correct authorization string of the concatenation of the name and token encoded in base64. </p>\n\n<pre><code>POST /api/v0002/device/types/typeID/devices/deviceID/events/eventName HTTP/1.1\nHost: orgID.messaging.internetofthings.ibmcloud.com:80\nContent-Type: application/json\nAuthorization: Basic encode64(name token)\n\n{random JSON formatted message}\n</code></pre>\n\n<p>The socket connection is made by first resolving the IP address of the following URI: orgID.messaging.internetofthings.ibmcloud.com \nthen employing standard socket connection function to the IP address and port 80.</p>\n\n<p>While the IoT Platorm API make no mention of using port 80, I can transmit my JSON formatted message to my IoT Platform using port 80 through Postman. </p>\n"
    }, {
        "tags": ["react-native", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 400,
        "favorite_count": 2,
        "score": 5,
        "last_activity_date": 1492622963,
        "creation_date": 1492622963,
        "question_id": 43502400,
        "link": "https://stackoverflow.com/questions/43502400/mqtt-error-after-5-minutes",
        "title": "MQTT error after 5 minutes",
        "body": "<p>I have a React-native app that I need to connect with IoT (AWS), with websockets. I currently use the package <a href=\"https://www.npmjs.com/package/react-native-paho-mqtt\" rel=\"noreferrer\">react-native-paho-mqtt</a> to connect my app. Here is my code : </p>\n\n<pre><code>function getClient(onConnect, onConnectionFailed, onConnectionLost, \n  onMessageArrived) {\n  logger.trace('getClient()');\n  const clientID = uuidV4();\n  // Create a client instance\n  const client = new Paho.MQTT.Client(signedUrl, clientID);  // eslint-disable-line no-undef\n\n  // set callback handlers\n  client.onConnectionLost = onConnectionLost;\n  client.onMessageArrived = onMessageArrived;\n\n  // connect the client\n  client.connect({\n    keepAliveInterval: 15,\n    onSuccess: onConnect,\n    onFailure: onConnectionFailed,\n  });\n\n  return client;\n}\n</code></pre>\n\n<p>5 minute after my main connection, I get an error when I try to connect an other client. I get this error: <code>AMQJS0007E Socket error:{0}.</code>. I do not have any more information about the error. </p>\n\n<p>Does anyone know what is happening or how to solve this problem ? </p>\n"
    }, {
        "tags": ["iot"],
        "is_answered": true,
        "view_count": 386,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1491203719,
        "creation_date": 1448338773,
        "question_id": 33885405,
        "link": "https://stackoverflow.com/questions/33885405/which-rfid-and-rfid-reader-to-use",
        "title": "Which RFID and RFID Reader to use?",
        "body": "<p>I want to make use of RFIDs which will continuously transmit some information and the reader will read it. I want range of RFID reader atleast 10 meter. Which RFID reader can provide this?</p>\n"
    }, {
        "tags": ["c#", "raspberry-pi", "iot", "i2c", "windows-iot-core-10"],
        "is_answered": false,
        "view_count": 146,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1490781553,
        "creation_date": 1490781553,
        "question_id": 43090286,
        "link": "https://stackoverflow.com/questions/43090286/lightning-i2c-picoborg-reverse-with-windows-10-iot-rasbperry-pi-3",
        "title": "Lightning I2C PicoBorg Reverse with Windows 10 IoT Rasbperry Pi 3",
        "body": "<p>I've been working with the PicoBorg Reverse motor board to control a DC motor. My application is written in C# and communicates with the board which is connected to a Raspberry Pi through I2C. The Raspberry Pi has DMAP enabled so I am using the Lightning provider by Microsoft.</p>\n\n<p>The code for controlling the motor is:</p>\n\n<pre><code>private I2cDevice picoBorgRevDevice;  \nI2cController controller = await I2cController.GetDefaultAsync();\npicoBorgRevDevice = controller.GetDevice(new I2cConnectionSettings(0x44));\npicoBorgRevDecive.Write(buffer)\n</code></pre>\n\n<p>Buffer contains two bytes, one with the command and one with the value. These commands can be found here (<a href=\"https://github.com/CodyErekson/picoborgrev/blob/master/lib/constants.js\" rel=\"nofollow noreferrer\">https://github.com/CodyErekson/picoborgrev/blob/master/lib/constants.js</a>)</p>\n\n<p>I am currently using WriteReadPartial but the byte I get back is empty, although the result is FullTransfer. </p>\n\n<pre><code>byte[] command = new byte[1] {I2cCommands.GET_A}; // GET_A is 5\nbyte[] data = new byte[3];\nresult = picoBorgRevDevice.WriteReadPartial(command, data);\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"
    }, {
        "tags": ["python", "azure", "iot", "raspberry-pi3", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 252,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1490172404,
        "creation_date": 1467189901,
        "last_edit_date": 1469152574,
        "question_id": 38094525,
        "link": "https://stackoverflow.com/questions/38094525/advice-about-azure-iot-hub-and-raspberry-pi",
        "title": "Advice about Azure IoT hub and raspberry pi",
        "body": "<p>Currently I'm creating a IoT Hub device that reads a sensor multiple times each second. I would like to achieve 3 to 4 reading each second.</p>\n\n<p>The sensor returns just a true or false and when its true I want a time-stamp and other information send to the Azure IoT hub. The device is a Raspberry Pi 3</p>\n\n<p>I would like some advice. What would be the best language to create this program with? Can i send the messages every time or would this be to slow? </p>\n\n<p>I made a sample program with python and used a GPIO event to detect if the pin is changed. And when it is changed, send a message to IoT hub. But i have a feeling this isn't fast enough?</p>\n\n<p>Thank you for your time in advance! I hope you can give me some advice</p>\n"
    }, {
        "tags": ["docker", "centos", "iot", "fiware"],
        "is_answered": true,
        "view_count": 89,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1489419225,
        "creation_date": 1483115370,
        "last_edit_date": 1483119842,
        "question_id": 41399468,
        "link": "https://stackoverflow.com/questions/41399468/issue-with-telefonica-orchestrator",
        "title": "Issue with telefonica/orchestrator",
        "body": "<p>I am dealing with an issue while trying to use telefonica/orchestrator and I hope anyone can help me with it.\nMy server is CentOS 7.3 and I am trying to build an IoT platform using docker version 1.10.3 and FIWARE. I have successfuly installed all necessary containers (mongodb, orion, mysql, keystone, keypass, pep and orchestrator). Everything works fine except orchestrator. When I am trying to</p>\n\n<pre><code>curl localhost:8084/v1.0/version\n</code></pre>\n\n<p>the response is:</p>\n\n<pre><code>curl: (56) Recv failure: Connection reset by peer\n</code></pre>\n\n<p>Any ideas why this is happening?</p>\n"
    }, {
        "tags": ["counter", "iot", "contiki"],
        "is_answered": true,
        "view_count": 223,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1489308408,
        "creation_date": 1489182924,
        "question_id": 42728370,
        "link": "https://stackoverflow.com/questions/42728370/counter-in-contiki",
        "title": "Counter in contiki",
        "body": "<p>I'm trying to program Zolertia z1 node in Contiki, i need counter to go from 0 to 120, etimer should be set to 1 second delay(etimer_set(&amp;et, CLOCK_SECOND)), and when i try to do counting it's constantly printing out same number (0 or 1), i think i should use PROCESS_WAIT_EVENT_UNTIL(etimer_expired(&amp;et)) and probably etimer_restart,and after each second counter should be incremented and printed out (1, 2 ,3 ...), but obviously I'm not doing something correct in while loop or functions are not good?</p>\n"
    }, {
        "tags": ["python", "flask", "mqtt", "iot", "paho"],
        "is_answered": false,
        "view_count": 887,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1489231889,
        "creation_date": 1484925133,
        "question_id": 41766785,
        "link": "https://stackoverflow.com/questions/41766785/how-to-make-a-response-on-the-web-using-mqtt-and-flask",
        "title": "How to make a response on the web using MQTT and Flask?",
        "body": "<p>I have an issue with MQTT lib ( <a href=\"https://pypi.python.org/pypi/paho-mqtt/1.1\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/paho-mqtt/1.1</a> ).</p>\n\n<p>I want to have async and sync tasks for multiple requests, but it seems I cannot get around an issue to make a response on web, for requested url /mqtt when actual subscribed message is received, because on_message is a callback function.</p>\n\n<pre><code>@app.route('/mqtt', methods=['POST', 'GET'])\ndef main():\n            client = mqtt.Client()\n            client.on_connect = on_connect\n            client.on_message = on_message\n            test = on_message\n            client.username_pw_set('x', 'x')\n            client.connect(\"x\", 1883, 60)\n            client.subscribe(\"/message/1\")\n\n            client.loop_forever()\n\n            # how do I get the message from callback function on_message and then stop loop_forever?\n#I thought about: return msg but it doesn't work.\n\n\ndef on_connect(client, userdata, flags, rc):\n    print(\"Connected with result code \" + str(rc))\n\n# The callback for when a PUBLISH message is received from the server.\ndef on_message(client, userdata, msg):\n    #how to pass this msg to the main function?\n\n\n    print(msg.topic + \" \" + str(msg.payload))\n</code></pre>\n"
    }, {
        "tags": ["android", "bluetooth-lowenergy", "iot"],
        "is_answered": true,
        "view_count": 596,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1489128498,
        "creation_date": 1489065865,
        "last_edit_date": 1489128498,
        "question_id": 42696593,
        "link": "https://stackoverflow.com/questions/42696593/android-ble-oncharacteristicchanged-triggers-before-oncharacteristicwrite-afte",
        "title": "Android BLE : onCharacteristicChanged triggers before onCharacteristicWrite after writeCharacteristic",
        "body": "<p>After successful ble connection, I am writing a Characteristic with DefaultWriteType. </p>\n\n<p>Just after that <code>onCharacteristicChanged</code> triggers and after that <code>onCharacteristicWrite</code> triggers with same Characteristics UUID which was write but with values came as response in that Characteristics are same as response of <code>onCharacteristicChanged</code>. </p>\n\n<p>Summary:</p>\n\n<p>How onCharacteristicChanged triggers before onCharacteristicWrite ?</p>\n\n<p>As I believe onCharacteristicWrite indicates that your write operation was successful or not.\nAnd onCharacteristicChanged responds/notify to the command for which we write to ble device.</p>\n\n<p>Is this possible or is it going out of Ble cycle?</p>\n"
    }, {
        "tags": ["javascript", "node.js", "iot", "node-red"],
        "is_answered": true,
        "view_count": 1353,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1488814278,
        "creation_date": 1488804852,
        "question_id": 42626183,
        "link": "https://stackoverflow.com/questions/42626183/make-custom-node-red-tcp-function",
        "title": "Make custom node-red TCP function",
        "body": "<p>I'm working on a node-red v 0.10.40 and i'm trying to make a function which, whenever it receives a msg, opens a connection on a a remote host, sends the payload and then closes the connection. When i use the regular IO TCP node, it opens the connection right away and sits there, which is a behaviour i do not want.</p>\n\n<p>I have tried to use some code i found on the internet but i need to require the 'net' module. I included it in the global context of settings.js on my hardware but i still can't use it. I get the following error message when i try to call new net.Socket() : \"cannot read property 'socket' of undefined\"</p>\n\n<p>Please help, thank you</p>\n"
    }, {
        "tags": ["java", "iot", "coap", "californium"],
        "is_answered": false,
        "view_count": 430,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1487944593,
        "creation_date": 1467822983,
        "question_id": 38229194,
        "link": "https://stackoverflow.com/questions/38229194/proper-way-of-adding-resources-dynamically-to-coap-server",
        "title": "Proper way of adding resources dynamically to CoAP server",
        "body": "<p>I created a method which can be used for adding dynamically URLs into CoAP server.This is the current approach I have implemented. But needs to know is this the proper way of adding resources into the CoAP server? Let's say <strong>coapendpoints/home/room1/sensor1</strong> is the one which needs to be added. </p>\n\n<pre><code>    // endpoint--&gt; coapendpoints/home/room1/sensor1\n    String[] resources = endpoint.split(\"/\");\n    Resource childResource = coapServer.getRoot().getChild(resources[0]);\n    Resource parentResource = childResource;\n    if (parentResource == null &amp;&amp; (resources.length &gt; 1)) {\n        coapServer.add(new CoAPResourcePath(resources));\n    }\n    if (parentResource == null &amp;&amp; (resources.length == 1)) {\n        coapServer.add(new CoAPResourceServlet(resources[0]));\n    } else if (parentResource != null &amp;&amp; resources.length &gt; 1) {\n        int j = 1;\n        for (; j &lt; resources.length; j++) {\n            if (childResource != null) {\n                parentResource = childResource;\n                childResource = childResource.getChild(resources[j]);\n            } else {\n                break;\n            }\n        }\n        String[] coapEndpoint = Arrays.copyOfRange(resources, j - 1, resources.length);\n        if (coapEndpoint.length &gt; 1) {\n            parentResource.add(new CoAPResourcePath(coapEndpoint));\n        } else if (coapEndpoint.length == 1) {\n            parentResource.add(new CoAPResourceServlet(coapEndpoint[0]));\n        }\n    } else if (parentResource != null &amp;&amp; resources.length == 1) {\n        parentResource.add(new CoAPResourceServlet(resources[0]));\n    }\n</code></pre>\n\n<p>Here CoAPResourcePath and CoAPResourceServlet classes are extended from CoapResource.</p>\n\n<p>This is the output after adding resources in this way.<br>\n<a href=\"https://i.stack.imgur.com/YtsDA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YtsDA.png\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "node-red"],
        "is_answered": true,
        "view_count": 144,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1486639457,
        "creation_date": 1486638589,
        "last_edit_date": 1486639457,
        "question_id": 42135095,
        "link": "https://stackoverflow.com/questions/42135095/specify-the-output-on-a-function-node-in-node-red",
        "title": "Specify the output on a function node in Node-Red",
        "body": "<p>I want to know how it is possible to specify on which output a function node can return a message (msg).</p>\n\n<p>For example:</p>\n\n<pre><code>if( msg.eui == \"00:11:22:33:44:55:66:88\"){\n    output1(msg); //return on the output 1 only\n}\nif( msg.eui == \"00:11:22:33:44:55:66:99\"){\n    output2(msg); //return on the output 2 only\n}\n</code></pre>\n\n<p>What needs to be changed?</p>\n"
    }, {
        "tags": ["c#", "sockets", "tcp", "raspberry-pi", "iot"],
        "is_answered": false,
        "view_count": 248,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1486176436,
        "creation_date": 1486176436,
        "question_id": 42035938,
        "link": "https://stackoverflow.com/questions/42035938/issues-with-getting-a-raspberry-pi-to-communicate-to-pc-with-windows-iot",
        "title": "Issues with getting a raspberry pi to communicate to PC with windows IOT",
        "body": "<p>I have been having a horrible problem with trying to get this socket on the raspberry pi to correctly communicate to the PC socket. It is a TCP client-to-server setup. Both are running .net C# applications to do the communication. The main issue is not the connection, but when I send info from the raspberry pi to the computer, the computer only gets the info when I shutdown the raspberry... I believe it has to do with caching, but how would I fix this? Just a fair warning I am not well verse with sockets.</p>\n\n<p>the Raspberry Pi Client Code:</p>\n\n<pre><code>    using System;\n    using System.Collections.Generic;\n    using System.Linq;\n    using System.Net;\n    using System.Text;\n    using System.Threading.Tasks;\n    using System.Net.Sockets;\n    using Windows.UI.ViewManagement;\n    using System.Net.Sockets;\n    using Windows.Web.Http;\n    using Windows.Devices.Gpio;\n    using Windows.Networking;\n    using Windows.Networking.Sockets;\n    using Windows.Storage.Streams;\n    using System.Threading;\n    using System.Runtime.InteropServices;\n\nnamespace raspberrypipad\n{\nclass TCPclient_Client\n{\n\n    private string _ip;\n    private  int _port;\n    private Socket _socket;\n    private DataWriter _writer;\n    private DataReader _reader;\n\n    public delegate void Error(string message);\n    public event Error OnError;\n\n    public delegate void DataRecived(string data);\n    public event DataRecived OnDataRecived;\n\n    public string Ip\n    {\n        get { return _ip; }\n        set { _ip = value; }\n    }\n\n    public int Port\n    {\n        get { return _port; }\n        set { _port = value; }\n    }\n\n    private static ManualResetEvent _clientDone = new ManualResetEvent(false);\n    const int TIMEOUT_MILLISECONDS = 1000;\n    public async void Connect(string devicename, string pin_number, string get_portNumber, string current_ip)\n    {\n        try\n        {\n            if (Port == 0)\n            {\n                _port = 4444;\n            }\n\n            string result = string.Empty;\n\n            DnsEndPoint hostEntry = new DnsEndPoint(Ip, Port);\n            var hostName = new HostName(Ip);\n            _socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();\n            socketEventArg.RemoteEndPoint = hostEntry;\n\n            // Inline event handler for the Completed event.\n            // Note: This event handler was implemented inline in order to make this method self-contained.\n            socketEventArg.Completed += new EventHandler&lt;SocketAsyncEventArgs&gt;(delegate (object s, SocketAsyncEventArgs e)\n            {\n                // Retrieve the result of this request\n                result = e.SocketError.ToString();\n\n                // Signal that the request is complete, unblocking the UI thread\n                _clientDone.Set();\n            });\n\n            _clientDone.Reset();\n\n            // Make an asynchronous Connect request over the socket\n            _socket.ConnectAsync(socketEventArg);\n            _socket.AcceptAsync(socketEventArg);\n            // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.\n            // If no response comes back within this time then proceed\n            _clientDone.WaitOne(TIMEOUT_MILLISECONDS);\n            _socket.NoDelay = true;\n\n\n        }\n        catch (Exception ex)\n        {\n            //ignore\n        }\n    }\n\n\n\n    public string Send(string data)\n    {\n\n\n        string response = \"Operation Timeout\";\n\n        // We are re-using the _socket object initialized in the Connect method\n        if (_socket != null)\n        {\n\n            // Create SocketAsyncEventArgs context object\n            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();\n\n            // Set properties on context object\n            socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;\n            socketEventArg.UserToken = null;\n\n            // Inline event handler for the Completed event.\n            // Note: This event handler was implemented inline in order \n            // to make this method self-contained.\n            socketEventArg.Completed += new EventHandler&lt;SocketAsyncEventArgs&gt;(delegate (object s, SocketAsyncEventArgs e)\n            {\n                response = e.SocketError.ToString();\n                e.Dispose();\n                // Unblock the UI thread\n                _clientDone.Set();\n            });\n\n            // Add the data to be sent into the buffer\n            byte[] payload = Encoding.UTF8.GetBytes(data);\n            socketEventArg.SetBuffer(payload, 0, payload.Length);\n\n\n            // Sets the state of the event to nonsignaled, causing threads to block\n            _clientDone.Reset();\n\n            // Make an asynchronous Send request over the socket\n            _socket.SendBufferSize = payload.Length;\n            _socket.SendToAsync(socketEventArg);\n\n            // _socket.Shutdown(SocketShutdown.Send);\n\n                            // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.\n            // If no response comes back within this time then proceed\n            _clientDone.WaitOne(TIMEOUT_MILLISECONDS);\n        }\n        else\n        {\n            response = \"Socket is not initialized\";\n        }\n\n        return response;\n    }\n\n    public void close()\n    {\n        _socket.Dispose();\n    }\n}\n}\n</code></pre>\n\n<p>The server code for the computer is a little confusing, I know it works because other programs could send data to it in other languages... here is the code:</p>\n\n<pre><code>        public TcpServerCode(int port)\n    {\n        _server = new TcpListener(IPAddress.Any, port);\n        _server.Start();\n\n        _isRunning = true;\n\n        if (!Directory.Exists(Environment.CurrentDirectory + \"\\\\serverCOM\"))\n            Directory.CreateDirectory(Environment.CurrentDirectory + \"\\\\serverCOM\");\n\n\n        var th = new Thread(LoopClients);\n        th.Start();\n    }\n\n    public void LoopClients()\n    {\n        while (_isRunning)\n            try\n            {\n                // wait for client connection\n                var newClient = _server.AcceptTcpClient();\n\n\n                // client found.\n                // create a thread to handle communication\n                var t = new Thread(HandleClient);\n                var ch = new clientHolder();\n                ch.generateRandomName();\n                ch._tcp = newClient;\n                clientHolderList.Add(ch);\n                t.Start(ch);\n            }\n            catch (Exception i)\n            {\n                Log.handleException(i);\n            }\n    }\n\n    public void HandleClient(object obj)\n    {\n        // retrieve client from parameter passed to thread\n        var client = (clientHolder) obj;\n\n        // sets two streams\n        //StreamWriter sWriter = new StreamWriter(client._tcp.GetStream(), Encoding.ASCII);\n        var ns = client._tcp.GetStream();\n        client._tcp.GetStream().ReadTimeout = 100;\n        var sReader = new StreamReader(client._tcp.GetStream(), Encoding.ASCII);\n\n        // you could use the NetworkStream to read and write, \n        // but there is no forcing flush, even when requested\n\n        var bClientConnected = true;\n        string sData = null;\n\n        Task getter = null;\n        Task sender = null;\n        while (bClientConnected)\n            if (getter != null)\n            {\n                if (getter.IsCompleted)\n                    getter = _get(sReader, client.clientName);\n            }\n            else\n            {\n                getter = _get(sReader, client.clientName);\n            }\n    }\n    private static async Task _get(StreamReader reader, string clientName)\n    {\n        string sData = null;\n        sData = await reader.ReadLineAsync();\n        reader.DiscardBufferedData();\n\n\n        Console.WriteLine(sData);\n        // shows content on the console.\n        if (sData != null)\n            try\n            {\n                if (File.Exists(Environment.CurrentDirectory + \"\\\\serverCOM\\\\\" + clientName + \"_get.txt\"))\n                    File.Delete(Environment.CurrentDirectory + \"\\\\serverCOM\\\\\" + clientName + \"_get.txt\");\n                File.WriteAllText(Environment.CurrentDirectory + \"\\\\serverCOM\\\\\" + clientName + \"_get.txt\", sData);\n            }\n            catch (Exception i)\n            {\n                Log.handleException(i);\n            }\n    }\n</code></pre>\n\n<p>I am assuming it is something simple to change on one of the programs, thank you in advance!</p>\n"
    }, {
        "tags": ["lua", "mqtt", "iot", "esp8266", "nodemcu"],
        "is_answered": true,
        "view_count": 955,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1485825733,
        "creation_date": 1450626053,
        "last_edit_date": 1485825733,
        "question_id": 34382676,
        "link": "https://stackoverflow.com/questions/34382676/mqtt-on-esp8266-with-nodemcu-problems-with-publishing",
        "title": "MQTT on ESP8266 with NodeMCU - problems with publishing",
        "body": "<p>I'm building a battery powered IoT device based on ESP8266 with NodeMCU.\nI use mqtt to periodically perform measurements and publish results.\nI know, that to allow network stack running, I should avoid tight loops and rely on callback functions. Therefore it seemed to me that the right organization of my measurement code should be:</p>\n\n<pre><code>interval=60000000\n\nfunction sleep_till_next_sample()\n node.dsleep(interval)\nend\n\nfunction close_after_sending()\n  m:close()\n  sleep_till_next_sample()\nend\n\nfunction publish_meas()\n   m:publish(\"/test\",result,1,0,close_after_sending)\n   print(\"published:\"..result)\nend\n\nfunction measurement()\n   -- The omitted part of the function accesses\n   -- the hardware and places results\n   -- in the \"result\" variable\n   m = mqtt.Client(\"clientid\", 120, \"user\", \"password\")\n   m:connect(\"172.19.1.254\",1883,0, publish_meas)\nend\n</code></pre>\n\n<p>The init.lua ensures, that the node has connected to the WiFi AP (if not, it retries up to 20 times, and if no connection is established, it puts the node on sleep until the next measurement time).\nAfter WiFi connection is done, it calls the measurement function.</p>\n\n<p>The interesting thing is, that the above code doesn't work. There are no errors displayed in the console, but the mqtt broker does not receive published messages.\nTo make it working, i had to add additional idle time, by adding timers in the callback functions.</p>\n\n<p>The finally working code looks like below:</p>\n\n<pre><code>interval=60000000\n\nfunction sleep_till_next_sample()\n node.dsleep(interval)\nend\n\nfunction close_after_sending()\n  m:close()\n  tmr.alarm(1,500,0,function() sleep_till_next_sample() end)\nend\n\nfunction publish_meas()\n   m:publish(\"/test\",result,1,0,function() tmr.alarm(1,500,0,close_after_sending) end)\n   print(\"published:\"..result)\nend\n\nfunction measurement()\n   -- The omitted part of the function accesses\n   -- the hardware and places results\n   -- in the \"result\" variable\n   m = mqtt.Client(\"clientid\", 120, \"user\", \"password\")\n   m:connect(\"172.19.1.254\",1883,0, function() tmr.alarm(1,500,0, publish_meas) end)\nend\n</code></pre>\n\n<p>The above works, but I'm not sure if it is optimal. To conserve the battery power I'd like to minimize the time before the node is put on sleep after the measurement is completed and results published.</p>\n\n<p>Is there any better way to chain the necessary calls to m:connect, m:publish, m:close and finally node.dsleep so, that the results are correctly published in the minimal time?</p>\n"
    }, {
        "tags": ["java", "ibm-cloud", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 422,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1485361917,
        "creation_date": 1485350167,
        "last_edit_date": 1485361917,
        "question_id": 41852603,
        "link": "https://stackoverflow.com/questions/41852603/bluemix-disconnects-at-publish-with-paho-mqtt-client",
        "title": "Bluemix disconnects at publish with Paho MQTT client",
        "body": "<p>I am trying to run the below code I am getting EOFException. The below is my output</p>\n\n<pre><code>Connected to ssl://REMOVED.messaging.internetofthings.ibmcloud.com:8883\n\n.deliveryComplete() entered\nData published on topic iot-2/type/loradevice/id/cdef1234/cmd/cid/fmt/json and the msg is{\"count\":0,\"cmd\":\"reset\",\"time\":\"2017-01-25 18:38:34\"}\nconnection true\n\nConnection lost (32109) - java.io.EOFException\nat org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:146)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.EOFException\nat java.io.DataInputStream.readByte(DataInputStream.java:267)\nat org.eclipse.paho.client.mqttv3.internal.wire.MqttInputStream.readMqttWireMessage(MqttInputStream.java:65)\nat org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:107)\n... 1 more\n</code></pre>\n\n<p>The code is below</p>\n\n<pre><code>package com.ibm.bluemixmqtt;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Properties;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport org.apache.commons.json.JSONException;\nimport org.apache.commons.json.JSONObject;\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.MqttPersistenceException;\n\npublic class AppTest2\n{\n\n    private MqttHandler1 handler;\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args)\n    {\n        new AppTest2().doApp();\n    }\n\n    /**\n     * Run the app\n     */\n    public void doApp()\n    {\n        // Read properties from the conf file\n        Properties props = MqttUtil.readProperties(\"Mydata\\\\app.conf\");\n\n        String org = \"REMOVED\";\n        String id = \"REMOVED\";\n        String authmethod = \"REMOVED\";\n        String authtoken = \"REMOVED\";\n\n        // isSSL property\n        String sslStr = props.getProperty(\"isSSL\");\n        boolean isSSL = false;\n        if (sslStr.equals(\"T\")) {\n            isSSL = true;\n        }\n\n        System.out.println(\"org: \" + org);\n        System.out.println(\"id: \" + id);\n        System.out.println(\"authmethod: \" + authmethod);\n        System.out.println(\"authtoken\" + authtoken);\n        System.out.println(\"isSSL: \" + isSSL);\n\n        // Format: a:&lt;orgid&gt;:&lt;app-id&gt;\n        String clientId = \"a:\" + org + \":\" + id;\n        String serverHost = org + MqttUtil.SERVER_SUFFIX;\n\n        handler = new MqttHandler1();\n        handler.connect(serverHost, clientId, authmethod, authtoken, isSSL);\n        publish();\n    }\n\n    public void publish(){\n        JSONObject jsonObj = new JSONObject();\n        String deviceid = \"cdef1234\";\n        try {\n            jsonObj.put(\"cmd\", \"reset\");\n            jsonObj.put(\"count\", 0);\n            jsonObj.put(\"time\", new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(new Date()));\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        handler.publish(\n                \"iot-2/type/\" + MqttUtil.DEFAULT_DEVICE_TYPE + \"/id/\" + deviceid + \"/cmd/\" + MqttUtil.DEFAULT_CMD_ID + \"/fmt/json\",\n                jsonObj.toString(), false, 0);\n\n    }\n}\n\nclass MqttHandler1 implements MqttCallback\n{\n    private final static String DEFAULT_TCP_PORT = \"1883\";\n    private final static String DEFAULT_SSL_PORT = \"8883\";\n\n    private MqttClient client = null;\n\n    public MqttHandler1()\n    {\n\n    }\n\n    @Override\n    public void connectionLost(Throwable throwable)\n    {\n        if (throwable != null) {\n            System.out.println(\"Error3\");\n            throwable.printStackTrace();\n        }\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken iMqttDeliveryToken)\n    {\n        System.out.println(\".deliveryComplete() entered\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage mqttMessage) throws Exception\n    {\n        String payload = new String(mqttMessage.getPayload());\n        System.out.println(\".messageArrived - Message received on topic \" + topic + \": message is \" + payload);\n    }\n\n    public void connect(String serverHost, String clientId, String authmethod, String authtoken, boolean isSSL)\n    {\n        // check if client is already connected\n        if (!isMqttConnected()) {\n            String connectionUri = null;\n\n            // tcp://&lt;org-id&gt;.messaging.internetofthings.ibmcloud.com:1883\n            // ssl://&lt;org-id&gt;.messaging.internetofthings.ibmcloud.com:8883\n            if (isSSL) {\n                connectionUri = \"ssl://\" + serverHost + \":\" + DEFAULT_SSL_PORT;\n            } else {\n                connectionUri = \"tcp://\" + serverHost + \":\" + DEFAULT_TCP_PORT;\n            }\n\n            if (client != null) {\n                try {\n                    client.disconnect();\n                } catch (MqttException e) {\n                    e.printStackTrace();\n                }\n                client = null;\n            }\n\n            try {\n                client = new MqttClient(connectionUri, clientId);\n            } catch (MqttException e) {\n                e.printStackTrace();\n            }\n\n            client.setCallback(this);\n\n            // create MqttConnectOptions and set the clean session flag\n            MqttConnectOptions options = new MqttConnectOptions();\n            options.setCleanSession(true);\n\n            options.setUserName(authmethod);\n            options.setPassword(authtoken.toCharArray());\n            options.setKeepAliveInterval(2000);\n\n            // If SSL is used, do not forget to use TLSv1.2\n            if (isSSL) {\n                java.util.Properties sslClientProps = new java.util.Properties();\n                sslClientProps.setProperty(\"com.ibm.ssl.protocol\", \"TLSv1.2\");\n                options.setSSLProperties(sslClientProps);\n            }\n\n            try {\n                // connect\n                client.connect(options);\n                System.out.println(\"Connected to \" + connectionUri);\n            } catch (MqttException e) {\n                e.printStackTrace();\n            }\n\n        }\n\n    }\n\n    public void disconnect()\n    {\n\n        // check if client is actually connected\n        if (isMqttConnected()) {\n            try {\n                // disconnect\n                client.disconnect();\n            } catch (MqttException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public void subscribe(String topic, int qos)\n    {\n\n        // check if client is connected\n        if (isMqttConnected()) {\n            try {\n                client.subscribe(topic, qos);\n                System.out.println(\"Subscribed: \" + topic);\n\n            } catch (MqttException e) {\n                e.printStackTrace();\n            }\n        } else {\n            connectionLost(null);\n        }\n    }\n\n    public void unsubscribe(String topic)\n    {\n        // check if client is connected\n        if (isMqttConnected()) {\n            try {\n\n                client.unsubscribe(topic);\n            } catch (MqttException e) {\n                e.printStackTrace();\n            }\n        } else {\n            connectionLost(null);\n        }\n    }\n    public void publish(String topic, String message, boolean retained, int qos)\n    {\n        // check if client is connected\n        if (isMqttConnected()) {\n            // create a new MqttMessage from the message string\n            MqttMessage mqttMsg = new MqttMessage(message.getBytes());\n            // set retained flag\n            mqttMsg.setRetained(retained);\n            // set quality of service\n            mqttMsg.setQos(qos);\n            try {\n                client.publish(topic, mqttMsg);\n                System.out.println(\"Data published on topic \" + topic + \" and the msg is\" + mqttMsg);\n                System.out.println(\"connection \"+client.isConnected());\n            } catch (MqttPersistenceException e) {\n                System.out.println(\"Error1\");\n                e.printStackTrace();\n            } catch (MqttException e) {\n                System.out.println(\"Error1\");\n                e.printStackTrace();\n            }\n        } else {\n            connectionLost(null);\n        }\n    }\n\n    private boolean isMqttConnected()\n    {\n        boolean connected = false;\n        try {\n            if ((client != null) &amp;&amp; (client.isConnected())) {\n                connected = true;\n            }\n        } catch (Exception e) {\n            // swallowing the exception as it means the client is not connected\n        }\n        return connected;\n    }\n\n}\n</code></pre>\n\n<p>Any one help me on this.</p>\n\n<p>Thanks in adavance.</p>\n"
    }, {
        "tags": ["c#", "iot", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 431,
        "favorite_count": 0,
        "closed_date": 1483456520,
        "score": -2,
        "last_activity_date": 1483108655,
        "creation_date": 1483107605,
        "last_edit_date": 1495542829,
        "question_id": 41397758,
        "link": "https://stackoverflow.com/questions/41397758/how-to-use-await-and-async",
        "title": "How to use &#39;await&#39; and &#39;async&#39;?",
        "body": "<p>I used raspberry pi 3 and Windows IoT build an RFID reader.\nWhen I copy this lib <a href=\"https://stackoverflow.com/questions/34284498/rfid-rc522-raspberry-pi-2-windows-iot\">RFID RC522 Raspberry PI 2 Windows IOT</a> and make new class for this lib. I have some problem.</p>\n\n<p>In original namespace, I add a new class 'startmfrc522'.</p>\n\n<p>public class startmfrc522 {</p>\n\n<pre><code>Mfrc522 mfrc = new Mfrc522();\n    public async Task&lt;bool&gt; start() {\n        System.Diagnostics.Debug.WriteLine(\"start RFID\");\n        await mfrc.InitIO();\n        System.Diagnostics.Debug.WriteLine(\"finish Init\");\n        return true;\n    }\n\n    public async Task&lt;string&gt; readtag() {\n        for (int i = 0; i &lt; 5; i++) {\n            System.Diagnostics.Debug.WriteLine(\"start read tag\");\n            if (mfrc.IsTagPresent()) {\n                System.Diagnostics.Debug.WriteLine(\"success\");\n                string uid = mfrc.ReadUid().ToString();\n                mfrc.HaltTag();\n                return uid;\n            }\n            else {\n                mfrc.HaltTag();\n                return \"fail\";\n            }\n            await Task.Delay(1000);\n            System.Diagnostics.Debug.WriteLine(\"Delay for 1 s\");\n        }\n        return \"fail\";\n    }\n}\n</code></pre>\n\n<p>In the mainpage, I use this code to start the rfid reader and read tag</p>\n\n<pre><code>        startmfrc522 rfid = new startmfrc522();\n\n        while (!rfid.start().Result){\n            System.Diagnostics.Debug.Write(\".\");\n        }\n        System.Diagnostics.Debug.WriteLine(rfid.readtag());\n</code></pre>\n\n<p>First problem is VS 2015 told me use 'bool x = await start()', I change it to 'bool result = await start()', still not working.</p>\n\n<p>Second problem is I test read the tag, looks like mfrc.InitIO not finish and immediately read the tag.\nBut I add the 'async' and 'await', shouldn't it will wait the InitIO finish the work and read the tag?</p>\n\n<p>Third problem is 'Task.Sleep' not working, I think it should be wait for five times and total wait for 5s.</p>\n\n<p>I think I'm not really understand the 'await' and 'async'. \nHope someone could tell me what is it and how to change my code to work!</p>\n"
    }, {
        "tags": ["lua", "embedded", "iot", "openwrt"],
        "is_answered": true,
        "view_count": 1349,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1482222503,
        "creation_date": 1482140912,
        "last_edit_date": 1482217146,
        "question_id": 41219768,
        "link": "https://stackoverflow.com/questions/41219768/lua-fifo-queue-file",
        "title": "Lua FIFO / QUEUE file",
        "body": "<p>I'm quite new to Lua and Embedded programming. I'm working on a project: </p>\n\n<p>IoT node that can be abstractedinto two parts: sensor and a board that runs Open WRT with Lua 5.1. I'm writing script that would be called from crontab every minute.</p>\n\n<ol>\n<li>In my script I'm accessing data from the sensor via package written with C. The result of reading data from sensor is 'hexadecimal numbers returned in string:</li>\n</ol>\n\n<hr>\n\n<pre><code>4169999a4180cccd41c9851f424847ae4508e0003ddb22d141700000418e666641c87ae14248147b450800003dc8b439 \n</code></pre>\n\n<ol start=\"2\">\n<li>Then convert it (string) to values I need and POST it to API.</li>\n</ol>\n\n<p><strong>Problem:</strong> </p>\n\n<p>Sometimes API is not reachable due to poor network connection.\nSo I need to implement system where I would read a data from a sensor and then if API is not responding, I would save it to a FIFO queue (buffer). And then next time when script is called to read it would be sending 'old' records first and the newest one and the end.</p>\n"
    }, {
        "tags": ["amazon-web-services", "cloud", "iot", "aws-rds"],
        "is_answered": false,
        "view_count": 156,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1476936725,
        "creation_date": 1476934094,
        "question_id": 40144939,
        "link": "https://stackoverflow.com/questions/40144939/aws-rds-i-o-request",
        "title": "AWS RDS I/O request",
        "body": "<p>I am having a hard time understanding the Read Operations (Count/Second) in AWS RDS monitoring.</p>\n\n<p>I tried to insert around 20000 values to a table using a loop and it gave me a value of 1000 Write Operations (Count/Second) for the last one minute. </p>\n\n<p>When I try to run a select statement 20000 times, I am getting only 1 Read Operation(Count/Second) for the last one minute.</p>\n\n<p>Someone please explain.</p>\n"
    }, {
        "tags": ["c#", "azure", "asynchronous", "async-await", "iot"],
        "is_answered": false,
        "view_count": 140,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1476538503,
        "creation_date": 1476502065,
        "question_id": 40054622,
        "link": "https://stackoverflow.com/questions/40054622/async-await-operation-blocking-ui-on-return-from-another-frame",
        "title": "Async Await operation blocking UI on return from another Frame",
        "body": "<p>I am new to c# and UWP, This is an assignment and I am on a strict deadline so haven't had time to figure things out completely, so excuse the messy code. </p>\n\n<p>I have the below code, which works by creating an AMQP connection and receiving messages from an Azure IOT Hub in a constant while loop.</p>\n\n<p>There are properly allot of problems with it but the main one is that when I return from visiting another page the GUI stops updating the text fields.</p>\n\n<p>Actually it does update them from OnNavigatedTo but the method Receive Messages stops updating them, however in the output window I can can see that debug.write is receiving the message, just not updating the text field.  </p>\n\n<p>I think I need to run the while loop on a separate thread and I dont think I have done that below, I have read into Task.Run etc and tried various ways but couldn't figure it out.   </p>\n\n<pre><code>    public MainPage()\n    {\n        this.InitializeComponent();\n        if (receivedStarted != 1)\n            Receive();\n    }\n\n    private async void Receive()\n    {\n        await ReceiveMessages(\"1\");\n        await ReceiveMessages(\"0\");\n    }\n\n    /// &lt;summary&gt;\n    /// On Navigated to function from other pages\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"e\"&gt;&lt;/param&gt;\n    protected override void OnNavigatedTo(NavigationEventArgs e)\n    {\n        Counter.Text = parsedCounter;\n        TimeText.Text = \"The last activity was at \" + parsedTime;\n        Contact_1.Content = ContactAddPopUp.contact[0, 0];\n        Contact_2.Content = ContactAddPopUp.contact[1, 0];\n        Contact_3.Content = ContactAddPopUp.contact[2, 0];\n\n        if (Settings.timeChanged == true)\n        {\n            if (DelayTimer != null)\n            {\n                DelayTimer.Cancel();\n                Timer();\n            }\n        }\n    }\n    /// &lt;summary&gt;\n    /// Receive messages from specified azure iothub on specified partition. The MessageManager parses the received message and displays it accordingly\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"partition\"&gt;&lt;/param&gt;\n    /// &lt;returns&gt;&lt;/returns&gt;\n    public async Task ReceiveMessages(string partition)\n    {         \n        DateTime offset;\n        offset = DateTime.UtcNow - TimeSpan.FromMinutes(1);\n        String primaryKey = \"fghkfwhihelfihefjw;ojwef\";\n        String sharedAccessPolicy = \"iothubowner\";\n        //String hubName = \"RaspberryPirSensor\";\n        String deviceName = \"PIRSensor\";\n        String eventHubEntity = \"iothub-ehub-raspberryp-70680-20f0331ccb\";\n\n        string port = \"iakugfdkjhkjhaflhlkhalkfhse.servicebus.windows.net\";\n        Address address = new Address(port, 5671, sharedAccessPolicy, primaryKey, \"/\", \"amqps\");\n        Connection connection = await Connection.Factory.CreateAsync(address);\n        Session session = new Session(connection);\n        string totalMilliseconds = ((long)(offset - new DateTime(StartOfEpoch, DateTimeKind.Utc)).TotalMilliseconds).ToString();\n        Map filters = new Map();\n        filters.Add(new Amqp.Types.Symbol(\"apache.org:selector-filter:string\"),\n                                    new DescribedValue(\n                                        new Amqp.Types.Symbol(\"apache.org:selector-filter:string\"),\n                                        \"amqp.annotation.x-opt-enqueuedtimeutc &gt; \" + totalMilliseconds + \"\"));\n        ReceiverLink receiver = new ReceiverLink(session,\n            \"my-receiver\",\n            new global::Amqp.Framing.Source()\n            {\n                Address =\n            eventHubEntity + \"/ConsumerGroups/$Default/Partitions/\" + partition,\n                FilterSet = filters\n            }, null);\n\n        Amqp.Types.Symbol deviceIdKey = new Amqp.Types.Symbol(\"iothub-connection-device-id\");\n        string deviceId = deviceName;\n        while (true)\n        {\n            if (timerCreated == false)\n                Timer();\n            receivedStarted = 1;\n            Amqp.Message m = await receiver.ReceiveAsync(10000);\n            if (m != null)\n            {\n                var id = m.MessageAnnotations.Map[deviceIdKey].ToString();\n                if (id == deviceId)\n                {\n                    Data data = (Data)m.BodySection;\n                    string msg = System.Text.Encoding.UTF8.GetString(data.Binary, 0, data.Binary.Length);\n                    bool isValid = ValidateMessage(msg);\n\n                    if (isValid)\n                    {\n                        receiver.Accept(m);\n                        Counter.Text = parsedCounter;\n                        Debug.Write(\"Receiving Message \" + parsedCounter );\n                        TimeText.Text = \"The last activity was at \" + parsedTime;\n\n                        //Connection String\n                        if (connection != null)\n                            ConnectedTextBox.Text = \"CONNECTED\";\n                        else\n                            ConnectedTextBox.Text = \"DISCONNECTED\";\n\n                        if (DelayTimer != null)\n                            DelayTimer.Cancel();\n                    }\n                    else\n                    {\n                        receiver.Release(m);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "cloudant", "node-red", "watson-iot"],
        "is_answered": true,
        "view_count": 707,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1476468327,
        "creation_date": 1476455989,
        "last_edit_date": 1476468327,
        "question_id": 40045884,
        "link": "https://stackoverflow.com/questions/40045884/how-do-i-select-cloudant-data-from-a-node-red-msg-payload",
        "title": "How do I select Cloudant data from a Node-red msg.payload?",
        "body": "<p>I have to read data from a cloudant db. The resultant msg.payload has values like these:</p>\n\n<pre><code>[{\"_id\":\"0de4df1286119588b8529a01ce7ae88c\",\"_rev\":\"2-6702cf5c73c76536d403caaae37f9f99\",\"payload\":{\"direction\":\"out\",\"count\":\"-1\",\"timestamp\":\"2016-10-06T13:25:24.262Z\"}},{\"_id\":\"1cf44a5241cc413a21920b069942851c\",\"_rev\":\"1-f0f2271864d39b5ca633fe284590ae99\",\"payload\":{\"direction\":\"out\",\"count\":\"-1\",\"timestamp\":\"2016-10-06T14:38:11.920Z\"}},{\"_id\":\"970049cb8ec6e3853d50f65f520ad385\",\"_rev\":\"1-f7642fc0eab3938388138e04ce1d2c26\",\"payload\":{\"direction\":\"IN\",\"count\":\"1\",\"timestamp\":\"2016-10-06T13:25:16.286Z\"}}]\n</code></pre>\n\n<p><strong>I want to select all the _id from the above payload.</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/OhbtH.png\" alt=\"I want to print only the _id from the payload using the debug node\">\nI tried using msg.payload._id but it is not working. It shows the result as just \"{}\"</p>\n"
    }, {
        "tags": ["c#", "exception", "visual-studio-2015", "async-await", "iot"],
        "is_answered": false,
        "view_count": 380,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1475694733,
        "creation_date": 1475666542,
        "last_edit_date": 1475668907,
        "question_id": 39872627,
        "link": "https://stackoverflow.com/questions/39872627/how-to-solve-system-exception-on-button-click-while-trying-to-access-location",
        "title": "How to solve System exception on button click while trying to access location?",
        "body": "<p>I am new to visual studio and developing universal windows applications. My program throws an exception when I click a UI button that should display location information on click. It is a UWP. The location access is turned on from the package manifest.\nThe code looks like this:</p>\n\n<pre><code>private async void myButton_Click(object sender, RoutedEventArgs e)\n    {\n\n        try\n        {\n            var geoLocator = new Geolocator();\n            geoLocator.DesiredAccuracy = PositionAccuracy.High;\n            Geoposition positionInfo = await geoLocator.GetGeopositionAsync();\n            string latitude = \"Latitude: \" + positionInfo.Coordinate.Point.Position.Latitude.ToString();\n            string longitude = \"Longitude: \" + positionInfo.Coordinate.Point.Position.Longitude.ToString();\n        }\n        catch (Exception ex)\n        {\n\n            Debug.WriteLine(ex.Message);\n            Debug.WriteLine(ex.StackTrace);\n        }\n\n\n    }    \n</code></pre>\n\n<p>The exception stacktrace is as below:</p>\n\n<blockquote>\n  <p>Exception thrown: 'System.Exception' in mscorlib.ni.dll\n  Exception from HRESULT: 0x80072EE7\n     at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter<code>1.GetResult()\n     at HelloLocation.MainPage.&lt;getBtn_Click&gt;d__1.MoveNext()\n  Exception thrown: 'System.Exception' in mscorlib.ni.dll\n  Exception from HRESULT: 0x80072EE7\n     at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter</code>1.GetResult()\n     at HelloLocation.MainPage.d__1.MoveNext()\n  Exception thrown: 'System.Exception' in mscorlib.ni.dll\n  Exception from HRESULT: 0x80072EE7\n     at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter<code>1.GetResult()\n     at HelloLocation.MainPage.&lt;getBtn_Click&gt;d__1.MoveNext()\n  Exception thrown: 'System.Exception' in mscorlib.ni.dll\n  Exception from HRESULT: 0x80072EE7\n     at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\n     at System.Runtime.CompilerServices.TaskAwaiter</code>1.GetResult()\n     at HelloLocation.MainPage.d__1.MoveNext()\n  The program '[3032] hellolocation.exe' has exited with code -1 (0xffffffff).</p>\n</blockquote>\n"
    }, {
        "tags": ["arduino", "iot", "arduino-uno"],
        "is_answered": false,
        "view_count": 168,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1475012890,
        "creation_date": 1474968481,
        "last_edit_date": 1474969428,
        "question_id": 39721009,
        "link": "https://stackoverflow.com/questions/39721009/why-do-sketches-take-up-so-much-space-and-memory-in-arduino",
        "title": "Why do sketches take up so much space and memory in arduino?",
        "body": "<p>When I compile my program i get this message</p>\n\n<p>Sketch uses 7,074 bytes (21%) of program storage space. Maximum is 32,256 bytes.\nGlobal variables use 1,033 bytes (50%) of dynamic memory, leaving 1,015 bytes for local variables. Maximum is 2,048 bytes.</p>\n\n<p>What do this message states?</p>\n\n<p>this is my code</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;MFRC522.h&gt;\n\n#define SS_PIN 10\n#define RST_PIN 9\nMFRC522 mfrc522(SS_PIN, RST_PIN);   // Create MFRC522 instance.\n\nvoid setup() {\n    Serial.begin(9600); // Initialize serial communications with the PC\n    SPI.begin();            // Init SPI bus\n    mfrc522.PCD_Init(); // Init MFRC522 card\n    Serial.println(\"Scan PICC to see UID and type...\");\n}\n\nvoid loop() {\n    // Look for new cards\n    if ( ! mfrc522.PICC_IsNewCardPresent()) {\n        return;//go to start of loop if there is no card present\n    }\n\n    // Select one of the cards\n    if ( ! mfrc522.PICC_ReadCardSerial()) {\n        return;//if ReadCardSerial returns 1, the \"uid\" struct (see MFRC522.h lines 238-45)) contains the ID of the read card.\n    }\n\n    // Dump debug info about the card. PICC_HaltA() is automatically called.\n    mfrc522.PICC_DumpToSerial(&amp;(mfrc522.uid));\n}\n</code></pre>\n\n<p>and I'm getting this message on blinking led long pin 13 too</p>\n"
    }, {
        "tags": ["arduino", "iot", "arduino-uno", "pubnub", "freeboard"],
        "is_answered": false,
        "view_count": 141,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1473438042,
        "creation_date": 1473072793,
        "question_id": 39329065,
        "link": "https://stackoverflow.com/questions/39329065/arduino-freeboard-io-connection-via-pubnub",
        "title": "Arduino Freeboard.io connection via PubNub",
        "body": "<p>I am trying to send RGB led values to freeboard.io via PubNub. I am sequentially sending R B G values in loop through Arduino but it always misses the middle one. It sends R but after that goes G value than now its time for R but this time B is sent. There was an answer to a related question that suggests a workaround with changing stop function PubNub.cpp instead of waiting for a return message it directly stops the client but it didn't solve my problem either.How can i fix this situation? Images are below.<br> \n<a href=\"http://i.stack.imgur.com/vA7NJ.png\" rel=\"nofollow\">Arduino side R B G values sent sequentially, Nope means sending is failed</a><br>\n<a href=\"http://i.stack.imgur.com/3GZmH.png\" rel=\"nofollow\">I have changed the stop function with previously answered question</a></p>\n"
    }, {
        "tags": ["python", "json", "parsing", "data-structures", "iot"],
        "is_answered": true,
        "view_count": 6170,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469687621,
        "creation_date": 1469678447,
        "last_edit_date": 1592644375,
        "question_id": 38626883,
        "link": "https://stackoverflow.com/questions/38626883/any-ideas-how-to-parse-this-payload-in-python",
        "title": "Any ideas how to parse this payload in python?",
        "body": "<p>I am using MQTT to subscribe to a topic and receive messages. I have this code written so far and it works fine subscribing and all but I am having problems determining a way to parse through the payload that I receive from the MQTT broker. I have been trying to obtain the numerical values that I see in the payload but I cannot figure out the right approach to parse this data. Any ideas/suggestions? Thanks!</p>\n<h1>My Code:</h1>\n<p>there is more code that is irrelevant. this is just a snippet.</p>\n<pre><code>import paho.mqtt.client as mqtt\nimport json\n\n#Call back functions \n\n# gives connection message\ndef on_connect(client,userdata,rc):\nprint(&quot;Connected with result code:&quot;+str(rc))\n# subscribe for all devices of user\nclient.subscribe('+/devices/+/up')\n\ndef on_connect(client,userdata,rc):\nprint(&quot;Connected with result code:&quot;+str(rc))\n# subscribe for all devices of user\nclient.subscribe('+/devices/+/up')\n\ndef on_message(client,userdata,msg):\nprint&quot;Topic&quot;,msg.topic + &quot;\\nMessage:&quot; + str(msg.payload)\n\nnode_data = str(msg.payload)\nprint '\\r\\n test'\nprint node_data\n\nj = json.loads(node_data)\nprint &quot;\\r\\n after loads: &quot;\nprint j\n</code></pre>\n<p><strong>My Outputs</strong>:</p>\n<pre><code>Message:{&quot;payload&quot;:&quot;Dgv+CggGBCYFAPMLAgc=&quot;,&quot;fields&quot;:{&quot;Light&quot;:58.32,&quot;Pressure&quot;:98569.5,&quot;Temp&quot;:32.4375,&quot;X_accel&quot;:0.6875,&quot;Y_accel&quot;:-0.125,&quot;Z_accel&quot;:0.625},&quot;port&quot;:1,&quot;counter&quot;:8,&quot;dev_eui&quot;:&quot;000000007D9050C1&quot;,&quot;metadata&quot;:[{&quot;frequency&quot;:904.3,&quot;datarate&quot;:&quot;SF7BW125&quot;,&quot;codingrate&quot;:&quot;4/5&quot;,&quot;gateway_timestamp&quot;:2090979635,&quot;gateway_time&quot;:&quot;2016-07-28T02:26:15.386371Z&quot;,&quot;channel&quot;:2,&quot;server_time&quot;:&quot;2016-07-28T02:06:13.075194806Z&quot;,&quot;rssi&quot;:-13,&quot;lsnr&quot;:9.5,&quot;rfchain&quot;:0,&quot;crc&quot;:1,&quot;modulation&quot;:&quot;LORA&quot;,&quot;gateway_eui&quot;:&quot;0080000000009BE6&quot;,&quot;altitude&quot;:911,&quot;longitude&quot;:-93.19677,&quot;latitude&quot;:45.10303}]}\n\n\n test\n{&quot;payload&quot;:&quot;Dgv+CggGBCYFAPMLAgc=&quot;,&quot;fields&quot;:{&quot;Light&quot;:58.32,&quot;Pressure&quot;:98569.5,&quot;Temp&quot;:32.4375,&quot;X_accel&quot;:0.6875,&quot;Y_accel&quot;:-0.125,&quot;Z_accel&quot;:0.625},&quot;port&quot;:1,&quot;counter&quot;:8,&quot;dev_eui&quot;:&quot;000000007D9050C1&quot;,&quot;metadata&quot;:[{&quot;frequency&quot;:904.3,&quot;datarate&quot;:&quot;SF7BW125&quot;,&quot;codingrate&quot;:&quot;4/5&quot;,&quot;gateway_timestamp&quot;:2090979635,&quot;gateway_time&quot;:&quot;2016-07-28T02:26:15.386371Z&quot;,&quot;channel&quot;:2,&quot;server_time&quot;:&quot;2016-07-28T02:06:13.075194806Z&quot;,&quot;rssi&quot;:-13,&quot;lsnr&quot;:9.5,&quot;rfchain&quot;:0,&quot;crc&quot;:1,&quot;modulation&quot;:&quot;LORA&quot;,&quot;gateway_eui&quot;:&quot;0080000000009BE6&quot;,&quot;altitude&quot;:911,&quot;longitude&quot;:-93.19677,&quot;latitude&quot;:45.10303}]}\n\n\n after loads: \n{u'fields': {u'Y_accel': -0.125, u'Temp': 32.4375, u'X_accel': 0.6875, u'Light': 58.32, u'Pressure': 98569.5, u'Z_accel': 0.625}, u'counter': 8, u'port': 1, u'dev_eui': u'000000007D9050C1', u'payload': u'Dgv+CggGBCYFAPMLAgc=', u'metadata': [{u'gateway_time': u'2016-07-28T02:26:15.386371Z', u'server_time': u'2016-07-28T02:06:13.075194806Z', u'datarate': u'SF7BW125', u'gateway_eui': u'0080000000009BE6', u'modulation': u'LORA', u'gateway_timestamp': 2090979635, u'longitude': -93.19677, u'crc': 1, u'frequency': 904.3, u'rfchain': 0, u'codingrate': u'4/5', u'lsnr': 9.5, u'latitude': 45.10303, u'rssi': -13, u'altitude': 911, u'channel': 2}]}\n</code></pre>\n<p>I want to be able to extract the numerical values from this...string?Dict?Json?(payload) for the 'Temp', 'Light', 'Pressure' etc...parameters.Any advice is greatly appreciated.'\nI have tried the following but I receive this error. Doesn't tell me much...</p>\n<pre><code>data = json.loads(node_data)\nPress = data['Pressure']\nprint Press\n</code></pre>\n<p>File &quot;C:\\Python27\\My_Py_27_Codes\\scratch_py_mqtt.py&quot;, line 25, in on_message\nPress = data['Pressure']</p>\n<pre><code>KeyError: 'Pressure'\n</code></pre>\n<p>Apparently 'Pressure' is not a key in this Dictionary?</p>\n"
    }, {
        "tags": ["windows", "sqlite", "iot"],
        "is_answered": false,
        "view_count": 506,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1465978455,
        "creation_date": 1435248771,
        "last_edit_date": 1435389772,
        "question_id": 31055530,
        "link": "https://stackoverflow.com/questions/31055530/windows-10-removablestorage-sqlite-database",
        "title": "Windows 10 removableStorage SQLite database",
        "body": "<p>I am trying to create an external sqlite database, I follow and tested text files in the removable storage and works. So then I try to create a database in the removable Storage:</p>\n\n<pre><code>public static async Task&lt;String&gt; CreateDatabase(string name)\n    {\n        var folder = await FindRemovableStorage();\n        if (folder != null)\n        {\n            var file = await folder.CreateFileAsync(name, CreationCollisionOption.ReplaceExisting);\n            if(file!=null)\n            {\n                var ret = $\"{folder.Name}{file.Name}\";\n                return ret;\n            }\n        }\n        return null;\n\n    }\n\npublic async void ThirdCase()\n    {\n        var path =await DataLoggerService.CreateDatabase(\"db.dat\");\n\n        var connection = new SQLite.Net.SQLiteConnection(new SQLitePlatformWinRT(), path); //Cannot Open\n\n    }\n</code></pre>\n\n<p>I am testing on the desktop, and returns CannotOpen. Does anyone has created a database out from the typical local folder?</p>\n\n<p>More details of what I did here: <a href=\"http://expediteapps.com/blog/data-logger-with-windows-10-iot-in-progress/\" rel=\"nofollow\">datalogger</a></p>\n\n<p>When I finish I want to implement in a Raspberry Pi, theorically is the same code for the Windows IoT or is there any change in the SQLitePlatformWinRT?</p>\n\n<p>EDITION: More analisys:</p>\n\n<p>I have tested a database with the typical, working like a charm:</p>\n\n<pre><code>Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, \"db.dat\");\n</code></pre>\n\n<p>I wanted to create the database in an external storage, to do that I need to add the following steps:</p>\n\n<p>1.- Add Capability to use removablestorage.\n2.- Add file type association in order to have rights to manage that kind of files</p>\n\n<p>(The details here: <a href=\"http://expediteapps.com/blog/data-logger-with-windows-10-iot-in-progress/\" rel=\"nofollow\">http://expediteapps.com/blog/data-logger-with-windows-10-iot-in-progress/</a>)</p>\n\n<p>So then I change the path to the removable storage path like \u201cE:\\db.dat\u201d and it always tells CannotOpen.</p>\n\n<p>The SQLite library PCL It arrives to here:</p>\n\n<p>SQLiteApiWinRT.cs</p>\n\n<pre><code>public Result Open(byte[] filename, out IDbHandle db, int flags, IntPtr zvfs)\n{\n    Sqlite3DatabaseHandle internalDbHandle;\n    var ret = (Result)SQLite3.Open(filename, out internalDbHandle, flags, zvfs);\n    db = new DbHandle(internalDbHandle);\n    return ret;\n}\n</code></pre>\n\n<p>Where Open is</p>\n\n<pre><code>[DllImport(\"sqlite3\", EntryPoint = \"sqlite3_open_v2\", CallingConvention = CallingConvention.Cdecl)]\n</code></pre>\n\n<p>public static extern Result Open(byte[] filename, out IntPtr db, int flags, IntPtr zvfs);</p>\n\n<p>where I am using:</p>\n\n<pre><code>SQLite.UAP.2015, Version=3.8.10\n</code></pre>\n\n<p>MORE Aditions:</p>\n\n<p>I have tested this library <a href=\"https://www.nuget.org/packages/SQLitePortable/\" rel=\"nofollow\">https://www.nuget.org/packages/SQLitePortable/</a> and I finish in the same error, so it is internal.</p>\n\n<p>And here is where the road ends, any help?</p>\n"
    }, {
        "tags": ["iot", "openthread"],
        "is_answered": true,
        "view_count": 577,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1464286204,
        "creation_date": 1464223302,
        "last_edit_date": 1464286204,
        "question_id": 37449796,
        "link": "https://stackoverflow.com/questions/37449796/how-many-hops-does-openthread-support",
        "title": "How many hops does OpenThread support?",
        "body": "<p>As a mesh, a signal can propagate across devices. Naturally there must be a hop limit. How many node hops does OpenThread support? </p>\n"
    }, {
        "tags": ["android", "tcp", "iot", "tcpsocket"],
        "is_answered": false,
        "view_count": 308,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1463570163,
        "creation_date": 1461687382,
        "last_edit_date": 1463570163,
        "question_id": 36870422,
        "link": "https://stackoverflow.com/questions/36870422/tcp-comunication-between-a-wifi-module-and-android-app",
        "title": "TCP Comunication between a WiFi Module and Android App",
        "body": "<p>I need to implement a TCP comunication between the <strong>SPWF01SA Wifi-Module</strong> (from <a href=\"http://www.st.com/web/en/catalog/sense_power/FM1968/CL1976/SC1930/PF258591\" rel=\"nofollow\">ST Microelectronics</a>) and an Android App. For the Wifi-Module firmware i'm using the <strong>X-Cube-WIFI</strong> <a href=\"http://www.st.com/web/en/catalog/tools/PF262298\" rel=\"nofollow\">Middleware library</a> as a Server Socket, while in Android i have an AsyncTask as a Client Socket. The wifi module is controlled by the stm32f103 micro(using an I2C interface) and they are both connected to an access point. Here is the Android Client Socket code for the initialization/socket-read and socket-write:</p>\n\n<pre><code>@Override\nprotected Boolean doInBackground(Void... params) { //This runs on a different thread\n    boolean result = false;\n\n    try {\n        Log.i(\"AsyncTask\", \"doInBackground: Creating socket\");\n        //Get a List of IPs that have a the desired port opened\n\n        SocketAddress sockaddr = new InetSocketAddress(MY_IP, PORT);\n        nsocket = new Socket();\n        nsocket.connect(sockaddr, 5000); //10 second connection timeout\n        if (nsocket.isConnected()) {\n            nsocket.setSendBufferSize(250);\n            nis = nsocket.getInputStream();\n            nos = nsocket.getOutputStream();\n            Log.i(\"AsyncTask\", \"doInBackground: Socket created, streams assigned\");\n            Log.i(\"AsyncTask\", \"doInBackground: Waiting for inital data...\");\n            byte[] buffer = new byte[4096];\n            int read = nis.read(buffer, 0, 4096); //This is blocking\n            publishType = PUBLISH_READ;\n            while(read != -1){\n                byte[] tempdata = new byte[read];\n                System.arraycopy(buffer, 0, tempdata, 0, read);\n                publishProgress(tempdata);\n                Log.i(\"AsyncTask\", \"doInBackground: Got some data\");\n                read = nis.read(buffer, 0, 4096); //This is blocking\n            }\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n        Log.i(\"AsyncTask\", \"doInBackground: IOException\");\n        result = true;\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.i(\"AsyncTask\", \"doInBackground: Exception\");\n        result = true;\n    } finally {\n        try {\n            nis.close();\n            nos.close();\n            nsocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        Log.i(\"AsyncTask\", \"doInBackground: Finished\");\n    }\n    return result;\n}\n\npublic boolean sendDataToNetwork(final String cmd)\n{\n    if (nsocket.isConnected())\n    {\n        Log.i(\"AsyncTask\", \"SendDataToNetwork: Writing received message to socket\");\n        new Thread(new Runnable()\n        {\n            public void run()\n            {\n                try\n                {\n                    nos.write(cmd.getBytes());\n                }\n                catch (Exception e)\n                {\n                    e.printStackTrace();\n                    Log.i(\"AsyncTask\", \"SendDataToNetwork: Message send failed. Caught an exception\");\n                }\n            }\n        }).start();\n\n        return true;\n    }\n\n    Log.i(\"AsyncTask\", \"SendDataToNetwork: Cannot send message. Socket is closed\");\n    return false;\n}\n</code></pre>\n\n<p>For small size socket write(From Android to the module) everything works, the problem rises when i need to send more than 512bytes (witch is the wifi module rx buffer). If i send more than that to the wifi module, its RX buffer goes on overflow. I thought, that the line <strong>nsocket.setSendBufferSize(250)</strong> would make the trick, but doesn't make any difference. How can i stream to the wifi module large amount of data, if the latter has a small receiver buffer?\nI'm new to TCP implementations, thank you for your time.</p>\n\n<hr>\n\n<p>Other info:</p>\n\n<p>The WiFi Module is controlled through the I2C interface by the <strong>STM32F103RB</strong> microcontroller, and the Middlware library is provided directly by ST(I have posted the link at the beginging).</p>\n\n<hr>\n\n<p>After debbuging the software on the micro that comunicates with the wifi module, i saw that there are two malfunctions that occur ramdomply:</p>\n\n<ul>\n<li><p>either the I2C Rx buffer overflows</p></li>\n<li><p>or while it reads the rx buffer it can miss some I2C commands from the wifi modules, wich serves to read the current pending packet on the i2c rx buffer;</p></li>\n</ul>\n\n<p>I2C speed between wifi-module and micro is set at 460800kbps.\nEither of two, the problem seems to be that the TCP stream from android is too fast. Here are some specifications for the wifi module communciation(Provided by the STM team):</p>\n\n<ul>\n<li><p>Wifi Module buffer size is 1Kb(same on the micro);</p></li>\n<li><p>For TCP, the MSS (maximum segment size) is equal to 730B (fixed in the lwip stack options). So, both for TX and for RX, this is the max segment transmittable or receivable by the module.</p></li>\n</ul>\n\n<p>ST Microelectronics affirm that by spliting the data in 100B packets, they reached 60kB/s.\nHow can i slow down the stream from the Android App, and fix an MSS less or equal to 730B?</p>\n"
    }, {
        "tags": ["c#", "logging", "iot", "unauthorizedaccessexcepti"],
        "is_answered": true,
        "view_count": 734,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1462931053,
        "creation_date": 1454707563,
        "question_id": 35233805,
        "link": "https://stackoverflow.com/questions/35233805/windows-iot-logging-activities-in-c",
        "title": "Windows IoT - logging activities in C#",
        "body": "<p>for my schoolproject i tried to communicate from my raspberry with Windows iot to a pc over TCP- sockets. All works fine but i want to log the traffic an also realise if something goes wrong.</p>\n\n<p>So I programmed this LogFilewriter:</p>\n\n<pre><code> public static void write(string message)\n    {           \n\n            using (StreamWriter w = File.AppendText(\"\\\\\" + \"log.txt\"))\n            {\n                logging(message, w);\n            }\n\n    }\n    public static void logging(string logMessage, TextWriter w)\n    {\n        w.Write(\"\\r\\nLog Entry : \");\n        w.WriteLine(\"{0}, {1}\", DateTime.Now.TimeOfDay, DateTime.Now.Date);\n        w.WriteLine(\"  :\");\n        w.WriteLine(\"  :{0}\", logMessage);\n        w.WriteLine(\"-------------------------------\");\n    }\n</code></pre>\n\n<p>The Problem is that if i call Log.write(message)   - (Log is the class) it throws following Exception:</p>\n\n<blockquote>\n  <p>Blockquote\n  Exception thrown: 'System.UnauthorizedAccessException' in System.IO.FileSystem.dll</p>\n</blockquote>\n\n<p>Has somebody an idea why this exception is thrown?</p>\n"
    }, {
        "tags": ["sensors", "contiki", "iot"],
        "is_answered": false,
        "view_count": 1115,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1462619319,
        "creation_date": 1422816847,
        "last_edit_date": 1423019206,
        "question_id": 28266469,
        "link": "https://stackoverflow.com/questions/28266469/what-is-the-use-of-native-border-router-in-contiki-folder",
        "title": "What is the use of `native-border-router` in Contiki folder?",
        "body": "<p>Can anyone explain what is native-border-router example in Contiki and how it is useful where to use it, I used and run rpl-border-router example and understood it but I don't know how this will work. Please help and Thanks.</p>\n"
    }, {
        "tags": ["arduino", "webclient", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 2046,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1462285677,
        "creation_date": 1462277103,
        "last_edit_date": 1462284034,
        "question_id": 37003667,
        "link": "https://stackoverflow.com/questions/37003667/how-to-send-a-data-from-arduino-uno-to-a-webpage-through-esp8266-wifi-module",
        "title": "How to send a data from arduino uno to a webpage through esp8266 wifi module?",
        "body": "<p>i am designing an rfid attendance system with arduino uno, esp8266-01 wifi module, and a rfid reader. The task is to read a rfid card and to send its unique id number to a webpage (coded in php) which stores the data in a database. We sent at commands to the module from arduino ide serial monitor through a uno board. We used <a href=\"http://i.stack.imgur.com/ZgQt1.png\" rel=\"nofollow\">Serial_op</a>http POST method first to send the read rfid number to the webpage. As that attempt was a failure we tried using GET method. But neither of those methods worked.</p>\n\n<pre><code>    &lt;?php\n    error_reporting(E_ALL ^ E_DEPRECATED);\n    $dbhost = 'localhost';\n    $dbuser = 'root';\n    $dbpass = '';\n    $conn = mysql_connect($dbhost, $dbuser, $dbpass);\n    if(! $conn ) {\n    die('Could not connect: ' . mysql_error());\n    }\n    $Data=$_GET['Data'];\n    //$Data='Data test';\n    echo \"Data is :\" . $Data;\n    $sql = \"INSERT INTO test_tab (Data) VALUES ('$Data')\";\n    mysql_select_db('robot');\n    $retval = mysql_query( $sql, $conn );\n    if(! $retval ) {\n    die('Could not enter data: ' . mysql_error());\n    }   \n    echo \"Entered data successfully\\n\";\n    mysql_close($conn);\n    ?&gt;\n</code></pre>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "iot-driver-behavior"],
        "is_answered": false,
        "view_count": 89,
        "favorite_count": 2,
        "score": 0,
        "last_activity_date": 1460559067,
        "creation_date": 1458854597,
        "last_edit_date": 1460559067,
        "question_id": 36210221,
        "link": "https://stackoverflow.com/questions/36210221/what-happens-if-i-submit-the-job-multiple-times-in-ibm-watson-iot-driver-insight",
        "title": "What happens if I submit the job multiple times in IBM Watson IoT Driver Insights?",
        "body": "<p>What happens if I submit the job multiple times in IBM Watson IoT Driver Insights?\nThe older analysis result is overwritten by new analysis result?</p>\n"
    }, {
        "tags": ["c#", "windows", "iot"],
        "is_answered": true,
        "view_count": 52,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1459232884,
        "creation_date": 1459232224,
        "question_id": 36276794,
        "link": "https://stackoverflow.com/questions/36276794/windows-iot-questions-regarding-mac-saving-loading-files",
        "title": "Windows IOT - Questions regarding MAC &amp; saving/loading files",
        "body": "<p>so i'm currently under a internship working on a Raspberry Pi to modulate IO signals yadayadayada.</p>\n\n<p>I've noticed a few weird things when it comes to IoT.\nThe OS is just scrapes of one and lacks lots of stuff that we devs use.\nSuch as, the system.net.networkinformation.networkinterface namespace.\nWhich i'd like to use to get my systems MAC-Adress.\nOne other issue i came across was that i can't really seem to find the right access to save/load and modify files locally on the device.\nAny tips or tricks?</p>\n"
    }, {
        "tags": ["python", "mqtt", "iot", "paho"],
        "is_answered": true,
        "view_count": 1070,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1459156133,
        "creation_date": 1459147279,
        "question_id": 36257291,
        "link": "https://stackoverflow.com/questions/36257291/how-to-append-unique-incoming-messages-to-a-list",
        "title": "How to append unique incoming messages to a list?",
        "body": "<p>I am using a RFID reader to receive messages. I'm trying to avoid duplicated message by appending them to <code>emptylist = []</code> and don't further append them if they exist in the list. Below are my code:</p>\n\n<pre><code>import paho.mqtt.client as mqtt\n\ndef on_connect(client, userdata, flags, rc):\n    print(\"Connected with result code \" + str(rc))\n    client.subscribe(\"/whatver/#\")\n\ndef on_message(client, userdata, msg): # when PUBLISH msg is rcvd frm the server\n    payloadjson = json.loads(msg.payload.decode('utf-8'))\n    line = payloadjson[\"value\"].split(',')\n    epc =  line[1]\n\n\n    payload = {'a': epc[11:35], 'b':payloadjson[\"devicename\"], 'c':payloadjson[\"sensorname\"]}\n\n    emptylist = []\n    emptylist.append(payload)\n\n    if payload not in emptylist:\n        emptylist.append(payload)\n\n    print (emptylist)\n\ntest = mqtt.Client(protocol = mqtt.MQTTv31)\ntest.connect(host=_host, port=1883, keepalive=60, bind_address=\"\")\ntest.on_connect = on_connect\ntest.on_message = on_message\ntest.loop_forever() \n</code></pre>\n\n<p>However I am getting output as below, which shows that <code>payload</code> is appended to the <code>emptylist</code>, but is stored into multiple separated lists.  And it keeps printing the same output if the RFID reader is still reading the same tag. I would like to remove the duplicated messages and retain only one even if the RFID reader reads the same tag.</p>\n\n<pre><code>[{'b': 'READERBASIN.3', 'c': 'ANTENNA.2', 'a': '000000000000130000624462'}] # from Tag A\n[{'b': 'READERBASIN.3', 'c': 'ANTENNA.2', 'a': 'abcxxx000000130000627000'}] # from Tag B\n[{'b': 'READERBASIN.3', 'c': 'ANTENNA.2', 'a': '000000000000130000624462'}] # from Tag A\n[{'b': 'READERBASIN.3', 'c': 'ANTENNA.2', 'a': '000000000000130000624462'}] # from Tag A\n.\n.\n.\n</code></pre>\n\n<p>How can I fix this?</p>\n"
    }, {
        "tags": ["node.js", "mongodb", "iot"],
        "is_answered": true,
        "view_count": 221,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1457935946,
        "creation_date": 1457905684,
        "last_edit_date": 1457906201,
        "question_id": 35976277,
        "link": "https://stackoverflow.com/questions/35976277/mongo-db-connection-issue-cannot-call-method-update-of-undefined",
        "title": "mongo db connection issue &quot;Cannot call method &#39;update&#39; of undefined&quot;",
        "body": "<p>i have set up a mongoldb connection as in this code</p>\n\n<pre><code>client.connect(mongodbURL,function (err,db){\n   if(err) throw err;\n   collection=db.collection(\"accel1\");\n });\n</code></pre>\n\n<p>later in the code, i update documents to a collection inside a function that is repeated in intervals</p>\n\n<pre><code>setInterval(create_doc,db_doc_interval);\n\n function create_doc(){\n console.log(\"writing to db\");\n\n collection.update( &lt;...updates&gt; );\n }\n</code></pre>\n\n<p>the problem is it gives an error </p>\n\n<pre><code>TypeError: Cannot call method 'update' of undefined\n</code></pre>\n\n<p>which makes me think that somehow collection is not being defined correctly or it is not being passed into the function correctly. any help is greatly appreciated. thanks </p>\n\n<p>BTW code works fine if i put the establishing connection part inside the second function were collection is called. but this causes a new connection to be established every time and is very resource intensive</p>\n"
    }, {
        "tags": ["iot", "node-red"],
        "is_answered": true,
        "view_count": 1714,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1457730137,
        "creation_date": 1457654411,
        "last_edit_date": 1457657625,
        "question_id": 35929733,
        "link": "https://stackoverflow.com/questions/35929733/how-can-i-inject-a-boolean-of-value-true-into-a-payload-in-node-red",
        "title": "How can I inject a boolean of value true into a payload in Node-RED",
        "body": "<p>I have 3 sensors set up, I add a timestamp to each of these sensors and then I want to inject a boolean value into their payload.</p>\n\n<p>I have successfully injected the boolean into the payload of my <code>sensordata</code>, but I cannot get the boolean to be <code>true</code> as it should be whenever the inject node is activated.</p>\n\n<p>My code is below:</p>\n\n<pre><code>[{\"id\":\"bca1865d.435e78\",\"type\":\"websocket-listener\",\"z\":\"\",\"path\":\"/ws/iot\",\"wholemsg\":\"false\"},{\"id\":\"981eb056.67e15\",\"type\":\"ibmiot in\",\"z\":\"c645a0e3.39ba6\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"e197b6bd8a80\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"Sensor #1\",\"service\":\"quickstart\",\"allDevices\":false,\"allApplications\":false,\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":false,\"allFormats\":false,\"x\":220,\"y\":120,\"wires\":[[\"e4c932e3.1b36d\",\"58a6047e.a759fc\"]]},{\"id\":\"e4c932e3.1b36d\",\"type\":\"debug\",\"z\":\"c645a0e3.39ba6\",\"name\":\"Sensor data\",\"active\":false,\"console\":\"false\",\"complete\":\"true\",\"x\":482.5,\"y\":83,\"wires\":[]},{\"id\":\"13ce88e9.ec3177\",\"type\":\"websocket out\",\"z\":\"c645a0e3.39ba6\",\"name\":\"WebSocket\",\"server\":\"bca1865d.435e78\",\"client\":\"\",\"x\":903,\"y\":174,\"wires\":[]},{\"id\":\"d0db918a.2f247\",\"type\":\"cloudant out\",\"z\":\"c645a0e3.39ba6\",\"service\":\"gwens-iottrial2-cloudantNoSQLDB\",\"cloudant\":\"\",\"name\":\"\",\"database\":\"iotsensortdata\",\"payonly\":true,\"operation\":\"insert\",\"x\":912.5,\"y\":126,\"wires\":[]},{\"id\":\"6979b2fb.96864c\",\"type\":\"debug\",\"z\":\"c645a0e3.39ba6\",\"name\":\"Sensor JSON\",\"active\":false,\"console\":\"false\",\"complete\":\"true\",\"x\":913,\"y\":230,\"wires\":[]},{\"id\":\"58a6047e.a759fc\",\"type\":\"function\",\"z\":\"c645a0e3.39ba6\",\"name\":\"Add timestamp\",\"func\":\"msg.topic = \\\"Sensor Data\\\";\\nmsg.payload.time = Date.now();\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":483,\"y\":174,\"wires\":[[\"d24cfce6.fed3a\"]]},{\"id\":\"4c4be7e7.b3b418\",\"type\":\"ibmiot in\",\"z\":\"c645a0e3.39ba6\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"64833708ebbf\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"Sensor #2\",\"service\":\"quickstart\",\"allDevices\":false,\"allApplications\":false,\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":false,\"allFormats\":false,\"x\":220,\"y\":174,\"wires\":[[\"58a6047e.a759fc\"]]},{\"id\":\"e5570623.1aa8f8\",\"type\":\"ibmiot in\",\"z\":\"c645a0e3.39ba6\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"00933ded85c4\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"Sensor #3\",\"service\":\"quickstart\",\"allDevices\":false,\"allApplications\":false,\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":false,\"allFormats\":false,\"x\":221,\"y\":227,\"wires\":[[\"58a6047e.a759fc\"]]},{\"id\":\"fd41e3f7.d77f48\",\"type\":\"inject\",\"z\":\"c645a0e3.39ba6\",\"name\":\"Occupancy\",\"topic\":\"OccupancyBool\",\"payload\":\"true\",\"payloadType\":\"bool\",\"repeat\":\"1\",\"crontab\":\"\",\"once\":true,\"x\":485,\"y\":126.5,\"wires\":[[\"d24cfce6.fed3a\"]]},{\"id\":\"d24cfce6.fed3a\",\"type\":\"function\",\"z\":\"c645a0e3.39ba6\",\"name\":\"Occupancy Injection\",\"func\":\"var Occupancy = false;\\n\\nconsole.log(\\\"hi \\\" + msg);\\n\\nif(msg.topic == \\\"OccupancyBool\\\") {\\n    if(msg.payload === true) {\\n        Occupancy = true;\\n    }\\n}\\n\\nelse if(msg.topic == \\\"Sensor Data\\\") {\\n    msg.payload.occupancy = Occupancy;\\n    return msg;\\n}\\n/*\\nswitch(msg.topic) {\\n    case \\\"OccupancyBool\\\":\\n        if(msg.payload === true) {\\n            Occupancy = msg.payload;\\n        }\\n        console.log(\\\"occupancy bool\\\");\\n        break;\\n    case \\\"Sensor Data\\\":\\n        msg.payload.occupancy = Occupancy;\\n        console.log(\\\"sensor data\\\");\\n        return msg;\\n        break;\\n    default:\\n        console.log(\\\"default\\\");\\n        break;\\n}*/\",\"outputs\":1,\"noerr\":0,\"x\":691.5,\"y\":174.5,\"wires\":[[\"d0db918a.2f247\",\"13ce88e9.ec3177\",\"6979b2fb.96864c\",\"76b1bbbe.8f57fc\"]]},{\"id\":\"76b1bbbe.8f57fc\",\"type\":\"debug\",\"z\":\"c645a0e3.39ba6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":844,\"y\":68,\"wires\":[]}]\n</code></pre>\n\n<p>How can I inject a boolean value of true into the payload of my sensor data?</p>\n"
    }, {
        "tags": ["mysql", "node.js", "timer", "socket.io", "iot"],
        "is_answered": false,
        "view_count": 17,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1452784328,
        "creation_date": 1452781935,
        "last_edit_date": 1452784328,
        "question_id": 34792119,
        "link": "https://stackoverflow.com/questions/34792119/changing-database-records-if-no-request-fired",
        "title": "Changing database records if no request fired",
        "body": "<p>I am working on an IoT project. The device will request its state through a webservice/socket. I need to change a device's record if I got no request to get device's data within time slot.</p>\n\n<p>How can I do that?</p>\n"
    }, {
        "tags": ["mqtt", "iot", "paho"],
        "is_answered": true,
        "view_count": 975,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1449437721,
        "creation_date": 1449431240,
        "question_id": 34121846,
        "link": "https://stackoverflow.com/questions/34121846/mqtt-sn-what-is-the-raw-data-format",
        "title": "mqtt-sn what is the raw data format",
        "body": "<p>I am very new to this mqtt-sn stuff. So my question is - how does a mqtt-sn message look like. So I mean the raw data format. I do not clearly understand what octet means. So as I understand an octet is a byte.</p>\n\n<p>So is the data transferred binary?</p>\n\n<p>Or what means octet exact?</p>\n\n<p>Please can someone give me a sample message. It is really bad that there is not example message in the specification.</p>\n\n<p>Thanks,\nMathias</p>\n"
    }, {
        "tags": ["java", "c++", "arduino", "rfid", "iot"],
        "is_answered": true,
        "view_count": 2074,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1449289012,
        "creation_date": 1449285930,
        "last_edit_date": 1449289012,
        "question_id": 34100905,
        "link": "https://stackoverflow.com/questions/34100905/iso-c-forbids-declaration-of-init-with-no-type-fpermissive",
        "title": "ISO C++ forbids declaration of &#39;init&#39; with no type [-fpermissive]",
        "body": "<p>For an IOT project that I'm currently working on, I'm trying to use and rfid sensor with a particle photon in order to read rfid tags. In my doe, I get an error from the compiler that reads:</p>\n\n<pre><code>SeeedRFID.h:88:34: error: ISO C++ forbids declaration of 'init' with no type [-fpermissive]\n     init(int rxPin, int txPin);\n\nSeeedRFID.cpp:55:37: error: ISO C++ forbids declaration of 'init' with no type [-fpermissive]\nSeeedRFID::init(int rxPin, int txPin)\n\nSeeedRFID.cpp: In member function 'int SeeedRFID::init(int, int)':\nSeeedRFID.cpp:70:1: warning: no return statement in function returning non-void [-Wreturn-type]\n</code></pre>\n\n<p>}</p>\n\n<p>To be more specific, I'm using the c++/java particle build ide to develop this code for my particle photon chip. and this combines 3 files (.ino, .cpp, and .h). I denoted what lines of code are cause ing an error with the comment \"//This is where I seem to be getting part of the error\" My files look like this:</p>\n\n<p><strong>RFID_UART.ino</strong></p>\n\n<pre><code>#if defined (SPARK)\n#include \"SeeedRFID.h\"\n#else\n#include &lt;SoftwareSerial.h&gt;\n#include &lt;SeeedRFID.h&gt;\n#endif\n\n#define RFID_RX_PIN RX\n#define RFID_TX_PIN TX\n\n// #define DEBUGRFID\n#define TEST\n\nSeeedRFID RFID;\nRFIDdata tag;\n\nvoid setup() {\n    RFID.init(RFID_RX_PIN, RFID_TX_PIN); //This is where I seem to be getting part of the error\n    Serial1.begin(9600);    //Done here to prevent SeeedRFID constructor system crash\n    //Serial is basically the same thing as System.out.println(); \n    Serial.begin(57600);\n    Serial.println(\"Hello, double bk!\"); //This is so I know that setup() works\n}\nvoid loop() { \n    if(RFID.isAvailable()){\n        tag = RFID.data();\n        Serial.print(\"RFID card number: \");\n        Serial.println(RFID.cardNumber());\n#ifdef TEST\n    Serial.print(\"RFID raw data: \");\n    for(int i=0; i&lt;tag.dataLen; i++){\n        Serial.print(tag.raw[i], HEX);\n        Serial.print('\\t');\n        }\n#endif\n    }\n}\n</code></pre>\n\n<p><strong>SeeedRFID.cpp</strong></p>\n\n<pre><code>#include \"SeeedRFID.h\"\n\nSeeedRFID::init(int rxPin, int txPin)//This is where I seem to be getting part of the error\n{\n#if (PLATFORM_ID == 0) || (PLATFORM_ID == 6)    //Core or Photon (they're both the same platform essentially)\n   _rfidIO = &amp;Serial1;      // Select Serial1 or Serial2\n#else\n   _rfidIO = new SoftwareSerial(rxPin, txPin);\n   _rfidIO-&gt;begin(9600);\n#endif\n   // init RFID data\n   _data.dataLen = 0;\n   _data.chk = 0;\n   _data.valid = false;\n\n   _isAvailable = false;\n_type = RFID_UART;\n}\n\nSeeedRFID::SeeedRFID() //Empty constructor\n{\n}\n\nboolean SeeedRFID::checkBitValidationUART()\n{\n    if( (5 == _data.dataLen) &amp;&amp; (_data.raw[4] == _data.raw[0]^_data.raw[1]^_data.raw[2]^_data.raw[3]))\n    {\n    _data.valid = _isAvailable = true;\n    return true;\n    } else\n    {\n    _data.valid = _isAvailable = false;\n    return false;\n    }\n}\n\nboolean SeeedRFID::read()\n{\n    _isAvailable = false;\n\n    if (_data.dataLen != 0)\n    {\n        _data.dataLen = 0;\n    }\n\n    while (_rfidIO-&gt;available())\n    {\n        _data.raw[_data.dataLen++] = _rfidIO-&gt;read();\n#ifdef DEBUGRFID\n    Serial.println(\"SeeedRFID:read() function, and the RFID raw data: \");\n    for (int i = 0; i &lt; _data.dataLen; ++i)\n    {\n        Serial.println();\n        Serial.print(_data.raw[i], HEX);\n        Serial.print('\\t');\n    }\n    Serial.println();\n#endif\n        delay(10);\n    }\n\n    return SeeedRFID::checkBitValidationUART();\n}\n\nboolean SeeedRFID::isAvailable()\n{\n    switch(_type){\n        case RFID_UART:\n            return SeeedRFID::read();\n            break;\n        case RFID_WIEGAND:\n            return false;\n            break;\n        default:\n            return false;\n            break;\n    }\n}\n\nRFIDdata SeeedRFID::data()\n{\n    if (_data.valid)\n    {\n        return _data;\n    }else{\n        // empty data\n        RFIDdata _tag;\n        return _tag;\n    }\n}\n\nunsigned long SeeedRFID::cardNumber()\n{\n    // unsigned long myZero = 255;\n\n    unsigned long sum = 0;\n    if(0 != _data.raw[0]){\n        // _data.raw[0] =   _data.raw[0] &amp; myZero;\n        sum = sum + _data.raw[0];\n        sum = sum&lt;&lt;24;\n    }\n    // _data.raw[1] =   _data.raw[1] &amp; myZero;\n    sum = sum + _data.raw[1];\n    sum = sum&lt;&lt;16;\n\n    unsigned long sum2 = 0;\n    // _data.raw[2] =   _data.raw[2] &amp; myZero;\n    sum2 = sum2  + _data.raw[2];\n    sum2 = sum2 &lt;&lt;8;\n    // _data.raw[3] =   _data.raw[3] &amp; myZero;\n    sum2 = sum2  + _data.raw[3];\n\n    sum = sum + sum2;\n\n#ifdef DEBUGRFID\n    Serial.print(\"cardNumber(HEX): \");\n    Serial.println(sum, HEX);\n    Serial.print(\"cardNumber: \");\n    Serial.println(sum);\n#endif\n\n    return sum;\n}\n</code></pre>\n\n<p><strong>SeeedRFID.h</strong></p>\n\n<pre><code>#ifndef SeeedRFID_H\n#define SeeedRFID_H\n\n\n#include \"application.h\"\n\nstruct RFIDdata\n{\n    int dataLen;\n    byte chk;\n    boolean valid;\n    unsigned char raw[5];\n};\n\nenum RFIDType\n{ \n    RFID_UART,\n    RFID_WIEGAND\n};\n\nclass SeeedRFID\n{ \nprivate:\n #if (PLATFORM_ID == 0) || (PLATFORM_ID == 6)   //Core or Photon\n    USARTSerial * _rfidIO; // software serial\n #else\n    SoftwareSerial * _rfidIO; // software serial\n #endif\n    RFIDdata _data;\n    boolean _isAvailable;\n    RFIDType _type;\n    boolean checkBitValidationUART();\n    boolean read();\npublic:\n    SeeedRFID(int rxPin, int txPin);\n    SeeedRFID();   // Empty constructor\n    ~SeeedRFID();\n        init(int rxPin, int txPin);//This is where I seem to be getting part of the error\n\n    boolean isAvailable();\nRFIDdata data();\nunsigned long cardNumber();\n};\n\n#endif //__SeeedRFID_H__\n</code></pre>\n\n<p>I'm not quite sure if it's a deceleration issue that's happening, but if anyone can help my, that would be great. Thanks in advance!</p>\n\n<p><strong>Follow up:</strong></p>\n\n<p>After adding void as a valid function type in init, and adding an extra pair of parenthesis in my checkBitValidationUART() function, I get a new error that looks like this:</p>\n\n<pre><code> ../../../build/target/user/platform-6/libuser.a(rfid_uart.o): In function `__static_initialization_and_destruction_0':\n rfid_uart.cpp:17: undefined reference to `SeeedRFID::~SeeedRFID()'\n collect2: error: ld returned 1 exit status\n make: *** [78d90e0fa4198d16c036bc7b90f2e4ec4507eca98981faccb460440188a7.elf] Error 1\n</code></pre>\n\n<p>I don't know why this error comes up, If anyone can help me debug this, that would be great!</p>\n"
    }, {
        "tags": ["c#", "sockets", "uwp", "raspberry-pi2", "iot"],
        "is_answered": true,
        "view_count": 1371,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1448116347,
        "creation_date": 1448110858,
        "last_edit_date": 1448116347,
        "question_id": 33843646,
        "link": "https://stackoverflow.com/questions/33843646/sending-and-receiving-images-via-a-socket",
        "title": "Sending and receiving images via a socket",
        "body": "<p>I have a C# desktop app.  It connects to another PC on my network which is a UWP C# app.</p>\n\n<p>I am trying to send an image or 2 to my listening socket and to test this I get the listening socket to send me the image back.</p>\n\n<p>The trouble is that even though my server recieves all the bytes that were orginally sent the recieved image back to the client is not of the same size.</p>\n\n<p>To make this even more weird is sometimes the returned bytes are correct and I get the whole image and when I attempt to send 2 images the 1st one is OK and the 2nd one is not.</p>\n\n<p>Then it will/can revert back to no images being sent back correctly.</p>\n\n<p>I think is maybe to do with the async/await parts bit I am not sure how.</p>\n\n<p>This is my server code:</p>\n\n<pre><code>using (IInputStream input = args.Socket.InputStream)\n{\n    byte[] data = new byte[BufferSize];\n    IBuffer buffer = data.AsBuffer();\n    uint dataRead = BufferSize;\n    while (dataRead == BufferSize)\n    {\n        await input.ReadAsync(buffer, BufferSize, InputStreamOptions.Partial);\n        requestInBytes.AddRange(data.Take((int) buffer.Length));\n        dataRead = buffer.Length;\n    }\n}\nvar ct = requestInBytes.Count;\n</code></pre>\n\n<p>I then trip out the header info:</p>\n\n<pre><code>int counter = 0;\ncounter = requestCommand[0].Length;\ncounter = counter + requestCommand[1].Length;\ncounter = counter + requestCommand[2].Length;\ncounter = counter + requestCommand[3].Length;\ncounter = counter + requestCommand[4].Length;\ncounter = counter + requestCommand[5].Length;\ncounter = counter + 6;\n</code></pre>\n\n<p>Now I extract the image:</p>\n\n<pre><code>var imgBody = new byte[totalBytes.Length- counter];\nSystem.Buffer.BlockCopy(totalBytes, counter, imgBody, 0, imgBody.Length);\nbyteArray = imgBody;\n</code></pre>\n\n<p>And send just the image back:</p>\n\n<pre><code>using (IOutputStream output = args.Socket.OutputStream)\n{\n    using (Stream response = output.AsStreamForWrite())\n    {\n        MemoryStream stream = new MemoryStream(byteArray);\n        await response.WriteAsync(byteArray, 0, byteArray.Length);\n        await response.FlushAsync();\n    }\n}\n</code></pre>\n\n<p>This is my client code:</p>\n\n<pre><code>StringBuilder sb = new StringBuilder();\nforeach (var gallery in Shared.CurrentJobGallery)\n{\n    try\n    {\n        sb.Clear();\n        sb.Append(GeneralTags.ACTION_ADD);\n        sb.Append(Shared.DLE);\n        sb.Append(\"GALLERY\");\n        sb.Append(Shared.DLE);\n        sb.Append(Shared.CurrentClientId);\n        sb.Append(Shared.DLE);\n        sb.Append(gallery.Title);\n        sb.Append(Shared.DLE);\n        sb.Append(gallery.Description);\n        sb.Append(Shared.DLE);\n        sb.Append(jobRef);\n        sb.Append(Shared.DLE);\n        byte[] galleryHdr = Encoding.UTF8.GetBytes(sb.ToString());\n        byte[] byteArray = new byte[galleryHdr.Length + gallery.ImageData.Length];\n\n        Buffer.BlockCopy(galleryHdr, 0, byteArray, 0, galleryHdr.Length);\n        Buffer.BlockCopy(gallery.ImageData, 0, byteArray, galleryHdr.Length, gallery.ImageData.Length);\n        List&lt;byte&gt; requestInBytes2 = new List&lt;byte&gt;();\n        System.Diagnostics.Debug.WriteLine(\"SENT: \" + gallery.ImageData.Length.ToString());\n        using (TcpClient clientSocket = new TcpClient())\n        {\n            await clientSocket.ConnectAsync(GeneralTags.RASPBERRY_PI_IP_ADDRESS, GeneralTags.RASPBERRY_PI_PORT);\n            using (NetworkStream serverStream = clientSocket.GetStream())\n            {\n                List&lt;byte&gt; requestInBytes = new List&lt;byte&gt;();\n\n                serverStream.Write(byteArray, 0, byteArray.Length);\n                serverStream.Flush();\n                int i;\n                Byte[] bytes = new Byte[1024];\n                do\n                {\n                    i = serverStream.Read(bytes, 0, bytes.Length);\n                    byte[] receivedBuffer = new byte[i];\n                    Array.Copy(bytes, receivedBuffer, i);\n\n                    requestInBytes2.AddRange(receivedBuffer);\n                } while (serverStream.DataAvailable);\n\n            }\n        }\n\n        using (MemoryStream ms = new MemoryStream())\n        {\n            System.Diagnostics.Debug.WriteLine(\"BACK: \" + requestInBytes2.Count.ToString());\n            ms.Write(requestInBytes2.ToArray(), 0, requestInBytes2.ToArray().Length);\n            Shared.ViewImage(Image.FromStream(ms, true));\n        }\n    }\n    catch (Exception ex)\n    {\n        System.Diagnostics.Debug.WriteLine(ex.ToString());\n    }\n}\n</code></pre>\n"
    }, {
        "tags": ["c", "arduino", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 3006,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1444720906,
        "creation_date": 1444641270,
        "last_edit_date": 1444646155,
        "question_id": 33077354,
        "link": "https://stackoverflow.com/questions/33077354/mqtt-callback-handling",
        "title": "MQTT callback handling",
        "body": "<p>I am trying to convert a byte* parameter passed into an mqtt callback function to an int for comparison and I can't seem to get it working. Any help would be welcomed.</p>\n\n<pre><code>int fsrReading;\nvoid callback(char* topic, byte* payload, unsigned int length) {\n\n  for (int i=0;i&lt;length;i++) {\n\n    Serial.print((char)payload[i]); // This works well\n\n    fsrReading = int((char)payload[i]); \n\n    if (fsrReading &lt; 0){\n       ...\n</code></pre>\n"
    }, {
        "tags": ["c#", "windows-phone", "nfc", "win-universal-app", "iot"],
        "is_answered": true,
        "view_count": 3047,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1440989589,
        "creation_date": 1440961824,
        "question_id": 32300173,
        "link": "https://stackoverflow.com/questions/32300173/how-to-build-an-universal-app-to-read-and-write-nfc-tags",
        "title": "How to build an Universal app to read and write NFC tags",
        "body": "<p>I have been searching for how can I build an Universal app to read NFC tags and I not found a clear way to start the code.</p>\n\n<p>Some one knows how to read and write an NFC tag by a Windows Phone??</p>\n"
    }, {
        "tags": ["web-services", "sockets", "embedded", "iot"],
        "is_answered": true,
        "view_count": 1778,
        "favorite_count": 3,
        "score": 8,
        "last_activity_date": 1440393495,
        "creation_date": 1439977133,
        "question_id": 32091826,
        "link": "https://stackoverflow.com/questions/32091826/how-iot-devices-connect-to-servers",
        "title": "How IoT devices connect to servers",
        "body": "<p>I am working on IoT project, and I should keep the embedded device to be connected with a web-service. So, which is better, requesting the webservice every 1 or 2 seconds, or opening a socket with the server to guarantee the real time operations.</p>\n\n<p>Taking into Consideration that working with sockets, may require me to write a lot of bunches of codes, as there's no frameworks for socket over ARM for example.</p>\n\n<p>Thanks</p>\n"
    }, {
        "tags": ["c#", "multithreading", "asynchronous", "win-universal-app", "iot"],
        "is_answered": true,
        "view_count": 5753,
        "favorite_count": 1,
        "score": 4,
        "last_activity_date": 1440013632,
        "creation_date": 1440008553,
        "last_edit_date": 1440008770,
        "question_id": 32102888,
        "link": "https://stackoverflow.com/questions/32102888/how-do-i-keep-my-async-method-thread-safe",
        "title": "How do I keep my Async method thread safe?",
        "body": "<p>I need to write a method in my Windows Universal App to write to the SD card.  How can I ensure two threads do not try to write to the same file at the same time in my method below ?</p>\n\n<pre><code>public async void WriteToCard(string strFileName, IEnumerable&lt;string&gt; listLinesToWrite)\n{\n    IStorageItem item = await folder.GetItemAsync(strFileName);\n    StorageFile file = (StorageFile)item;\n\n    await Windows.Storage.FileIO.WriteLinesAsync(file, listLinesToWrite);\n}\n</code></pre>\n"
    }, {
        "tags": ["c#", "raspberry-pi", "win-universal-app", "iot", "windows-10-iot-core"],
        "is_answered": false,
        "view_count": 208,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1439925587,
        "creation_date": 1439925073,
        "last_edit_date": 1439925587,
        "question_id": 32080781,
        "link": "https://stackoverflow.com/questions/32080781/writing-to-multiple-files-on-raspberry-pi-2-sd-card",
        "title": "Writing to multiple files on Raspberry Pi 2 SD Card",
        "body": "<p>I understand trying to write to the same file from two different methods will cause an exception.  Is it okay to write to two different files on an SD Card at the same time or should I create a method for writing to the SD card and use a lock object to prevent multiple threads from accessing the method ?</p>\n"
    }, {
        "tags": ["c", "contiki", "iot"],
        "is_answered": true,
        "view_count": 294,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1422521527,
        "creation_date": 1422424477,
        "question_id": 28185590,
        "link": "https://stackoverflow.com/questions/28185590/which-files-i-should-refer-for-simulation-in-contiki",
        "title": "Which files i should refer for simulation in contiki",
        "body": "<p>I am working on contiki as my academic work, now i have question which file i should refer specificaly from example folder in contiki for simulating schenario like - 30 node iot having ipv6 node , all these node send data to master / gateway node whenever any request come from outside that is from native linux host machine. So communication series is like any host outside IoT request some data from any of 30 IoT nodes via Gateway node/Border Router.</p>\n"
    }]
}