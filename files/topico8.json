{
    "items": [{
        "tags": ["python", "multithreading", "performance", "iot", "distributed-system"],
        "is_answered": false,
        "view_count": 10,
        "favorite_count": 0,
        "closed_date": 1631607758,
        "score": 0,
        "last_activity_date": 1631604092,
        "creation_date": 1631604092,
        "question_id": 69173477,
        "link": "https://stackoverflow.com/questions/69173477/what-are-different-types-of-clocks-vector-clock",
        "title": "What are different types of clocks - vector clock?",
        "body": "<p>What are different types of clocks - vector clock ?\nAnd what is the use case for vector clock and which one is preferable in IoT</p>\n"
    }, {
        "tags": ["c++", "arduino", "embedded", "iot"],
        "is_answered": false,
        "view_count": 153,
        "favorite_count": 0,
        "score": -4,
        "last_activity_date": 1631451879,
        "creation_date": 1626410827,
        "last_edit_date": 1626460516,
        "question_id": 68403558,
        "link": "https://stackoverflow.com/questions/68403558/how-to-display-user-input-values-on-tm1637-4-digit-seven-segment-display",
        "title": "How to display user input values on TM1637 4 Digit Seven Segment display?",
        "body": "<p>I have some issues with TM1637 4 digit seven segment display . I need to display the 4 digit random integer value given by user into TM1637 display. [For example: I am giving 4 digit integer say 4500 as an input inside a webpage developed by me. I want this 4500 to be displayed in TM1637 rather than displaying it in the Arduino's serial monitor ] The program is working fine incase of Serial monitor. But I don't know how to display it in TM1637. I have gone through many videos and programs in browser regarding it and tried many ways of solving this issue but I am getting this particular error every time . I think I have done some minor mistakes in the program</p>\n<blockquote>\n<p>CODE IS GIVEN HERE</p>\n</blockquote>\n<pre><code>#include &lt;Arduino.h&gt;\n#ifdef ESP32\n  #include &lt;WiFi.h&gt;\n  #include &lt;AsyncTCP.h&gt;\n  #include &lt;TM1637Display.h&gt;\n#else\n  #include &lt;ESP8266WiFi.h&gt;\n  #include &lt;ESPAsyncTCP.h&gt;\n#endif\n#include &lt;ESPAsyncWebServer.h&gt;\n\n// Defining the connections pins\n\n#define CLK 2\n#define DIO 4\n\nint inputmessage = 0;\n\n//Creating the display object for TM1637 \n\nTM1637Display display = TM1637Display(CLK,DIO);\n\n//Creating an array that turns all segments ON\n\nconst uint8_t allON[] = {0xff, 0xff, 0xff, 0xff};\n\n//Creating an segment that turns all segments OFF\n\nconst uint8_t allOFF[] = {0x00, 0x00, 0x00, 0x00};\n\nAsyncWebServer server(80);\n\n// REPLACE WITH YOUR NETWORK CREDENTIALS\nconst char* ssid = &quot;picktolight&quot;;\nconst char* password = &quot;123456789&quot;;\n\nconst char* PARAM_INPUT_1 = &quot;input1&quot;;\nconst char* PARAM_INPUT_2 = &quot;input2&quot;;\nconst char* PARAM_INPUT_3 = &quot;input3&quot;;\n\n// HTML web page to handle 3 input fields (input1, input2, input3)\nconst char index_html[] PROGMEM = R&quot;rawliteral(\n&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt;\n  &lt;title&gt;ESP Input Form&lt;/title&gt;\n  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\n  &lt;/head&gt;&lt;body&gt;\n  &lt;form action=&quot;/get&quot;&gt;\n    input1: &lt;input type=&quot;text&quot; name=&quot;input1&quot;&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n  &lt;/form&gt;&lt;br&gt;\n  &lt;form action=&quot;/get&quot;&gt;\n    input2: &lt;input type=&quot;text&quot; name=&quot;input2&quot;&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n  &lt;/form&gt;&lt;br&gt;\n  &lt;form action=&quot;/get&quot;&gt;\n    input3: &lt;input type=&quot;text&quot; name=&quot;input3&quot;&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n  &lt;/form&gt;\n&lt;/body&gt;&lt;/html&gt;)rawliteral&quot;;\n\nvoid notFound(AsyncWebServerRequest *request) {\n  request-&gt;send(404, &quot;text/plain&quot;, &quot;Not found&quot;);\n}\n\nvoid setup() {\n  Serial.begin(115200);\n  WiFi.mode(WIFI_STA);\n  WiFi.begin(ssid, password);\n  if (WiFi.waitForConnectResult() != WL_CONNECTED) {\n    Serial.println(&quot;WiFi Failed!&quot;);\n    return;\n  }\n  Serial.println();\n  Serial.print(&quot;IP Address: &quot;);\n  Serial.println(WiFi.localIP());\n\n   //Setting brightness level of TM1637 display (0=dimmest, 7=brightest )\n  display.setBrightness(5);\n\n  //Setting all segments ON\n  display.setSegments(allON);\n\n  // Send web page with input fields to client\n  server.on(&quot;/&quot;, HTTP_GET, [](AsyncWebServerRequest *request){\n    request-&gt;send_P(200, &quot;text/html&quot;, index_html);\n  });\n\n  // Send a GET request to &lt;ESP_IP&gt;/get?input1=&lt;inputMessage&gt;\n  server.on(&quot;/get&quot;, HTTP_GET, [] (AsyncWebServerRequest *request) {\n    String inputMessage;\n    String inputParam;\n    // GET input1 value on &lt;ESP_IP&gt;/get?input1=&lt;inputMessage&gt;\n    if (request-&gt;hasParam(PARAM_INPUT_1)) {\n      inputMessage = request-&gt;getParam(PARAM_INPUT_1)-&gt;value();\n      inputParam = PARAM_INPUT_1;\n    }\n    // GET input2 value on &lt;ESP_IP&gt;/get?input2=&lt;inputMessage&gt;\n    else if (request-&gt;hasParam(PARAM_INPUT_2)) {\n      inputMessage = request-&gt;getParam(PARAM_INPUT_2)-&gt;value();\n      inputParam = PARAM_INPUT_2;\n    }\n    // GET input3 value on &lt;ESP_IP&gt;/get?input3=&lt;inputMessage&gt;\n    else if (request-&gt;hasParam(PARAM_INPUT_3)) {\n      inputMessage = request-&gt;getParam(PARAM_INPUT_3)-&gt;value();\n      inputParam = PARAM_INPUT_3;\n    }\n    else {\n      inputMessage = &quot;No message sent&quot;;\n      inputParam = &quot;none&quot;;\n    }\n    display.showNumberDec(inputMessage);\n    request-&gt;send(200, &quot;text/html&quot;, &quot;HTTP GET request sent to your ESP on input field (&quot; \n                                     + inputParam + &quot;) with value: &quot; + inputMessage +\n                                     &quot;&lt;br&gt;&lt;a href=\\&quot;/\\&quot;&gt;Return to Home Page&lt;/a&gt;&quot;);\n  });\n  server.onNotFound(notFound);\n  server.begin();\n}\n\nvoid loop() {\n\n \n  \n  \n}\n\n</code></pre>\n<blockquote>\n<p>ERROR</p>\n</blockquote>\n<pre><code>Arduino: 1.8.9 (Windows 10), Board: &quot;ESP32 Dev Module, Disabled, Default 4MB with spiffs (1.2MB APP/1.5MB SPIFFS), 240MHz (WiFi/BT), QIO, 80MHz, 4MB (32Mb), 921600, None&quot;\n\nWARNING: Spurious .devcontainer folder in 'ArduinoJson' library\nC:\\Users\\RD 1\\Desktop\\SYSTEM1\\Arduino programs\\ESP32 Programs\\TM1637_display_trial\\TM1637_display_trial.ino: In lambda function:\n\nTM1637_display_trial:111:39: error: no matching function for call to 'TM1637Display::showNumberDec(String&amp;)'\n\n     display.showNumberDec(inputMessage);\n\n                                       ^\n\nIn file included from C:\\Users\\RD 1\\Desktop\\ABISHEEK\\Arduino programs\\ESP32 Programs\\TM1637_display_trial\\TM1637_display_trial.ino:5:0:\n\nC:\\Users\\RD 1\\Documents\\Arduino\\libraries\\TM1637-master/TM1637Display.h:82:8: note: candidate: void TM1637Display::showNumberDec(int, bool, uint8_t, uint8_t)\n\n   void showNumberDec(int num, bool leading_zero = false, uint8_t length = 4, uint8_t pos = 0);\n\n        ^\n\nC:\\Users\\RD 1\\Documents\\Arduino\\libraries\\TM1637-master/TM1637Display.h:82:8: note:   no known conversion for argument 1 from 'String' to 'int'\n\nMultiple libraries were found for &quot;WiFi.h&quot;\n Used: C:\\Users\\RD 1\\AppData\\Local\\Arduino15\\packages\\esp32\\hardware\\esp32\\1.0.6\\libraries\\WiFi\n Not used: C:\\Program Files (x86)\\Arduino\\libraries\\WiFi\nexit status 1\nno matching function for call to 'TM1637Display::showNumberDec(String&amp;)'\n\nThis report would have more information with\n&quot;Show verbose output during compilation&quot;\noption enabled in File -&gt; Preferences.\n</code></pre>\n<p>I tried web socket programming in arduino. Can anyone help me in solving this please...</p>\n"
    }, {
        "tags": ["cloud", "iot"],
        "is_answered": false,
        "view_count": 17,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1629973928,
        "creation_date": 1622786012,
        "last_edit_date": 1629973928,
        "question_id": 67832091,
        "link": "https://stackoverflow.com/questions/67832091/how-to-upload-data-from-intel-jetson-nano-to-cloud",
        "title": "How to upload data from intel jetson nano to cloud?",
        "body": "<p>i'm very new to iot, and will need some advice on how to upload data from jetson nano to cloud.</p>\n<p>i have a jetson nano unit, with intel network card and a camera (mounted on a forklift) that will activate a warning light if a moving object is detected within its pre-defined distance. if an object is detected, the jetson nano will register it as an event with timestamp.</p>\n<p>with that, i'd generate a log (event with time stamp) in the jetson nano itself, and at the end of everyday.. i will connect the jetson nano unit to a wifi router and upload the daily logs to cloud server.</p>\n<p>any idea what are the necessary script(s)/ online services that i might require to achieve this?</p>\n<p>scenario:\ndata log from forklift --&gt; upload to cloud (possible to create a server/data repository?) --&gt;external vendor to retrieve data for further analysis (dashboard format)</p>\n<p>Many thanks in advance!!</p>\n"
    }, {
        "tags": ["iot", "esp8266", "i2c", "arduino-esp8266", "esp"],
        "is_answered": false,
        "view_count": 19,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1629807000,
        "creation_date": 1629807000,
        "question_id": 68907324,
        "link": "https://stackoverflow.com/questions/68907324/node-mcu-version-1-0esp-8266-why-doesnt-respond-when-in-slave-mode",
        "title": "Node-MCU Version 1.0(ESP-8266) why doesn&#39;t respond when in Slave mode?",
        "body": "<p>I'M working in project where two ESP8266 communicate over bus using (I2C) they both master so when one of them want to send data it act like master and the other act like slave cause I2C(multi-master, multi-slave). The problem is when one of them act like slave it don't respond to event (on receive()).\ni have searched and some of them say there is bug in (WIRE.H) library for ESP-8266. and some give solution but i didn't try it.so i ask for help who try it and it work. i found this solution <a href=\"https://github.com/suculent/esp8266-I2C-slave\" rel=\"nofollow noreferrer\">here is link of solution of someone</a>. but i didn't try it cause i fear to break other things in other projects. other people say i should update my firmware to latest version for ESP-8266 and it should work fine. but when i try to see my current firmware version by sending(AT+GMR) over serial it didn't respond back. so i want practical and testable solution for multi master for ESP-8266\nHere is my code.</p>\n<pre><code>#include &lt;Wire.h&gt;\n#define LED D5\n#define BUTTON D3\n\n#define MY_ADDRESS 0x2\n#define NODE_1_ADDRESS 0x1\n#define NODE_3_ADDRESS 0x3\nboolean last_state = HIGH;\n\nvoid setup() {\n  Serial.begin(9600);\n  pinMode(LED, OUTPUT);\n  digitalWrite(LED, LOW);\n  \n  pinMode(BUTTON, INPUT);\n  digitalWrite(BUTTON, HIGH);\n  \n  Wire.begin(MY_ADDRESS);\n  Wire.onReceive(receiveEvent);\n  Serial.println(&quot;hi_start&quot;);\n   Serial.println(&quot;trnsmitting started dude from 2 to 1!!!!!!&quot;);\n    Wire.beginTransmission(NODE_1_ADDRESS);\n    Wire.write(last_state);\n    Wire.endTransmission();\n      Serial.print(&quot;end of transmitting&quot;);\n}\n\nvoid loop() {\n  if (digitalRead(BUTTON) != last_state){\n    last_state = digitalRead(BUTTON);\n       Serial.println(&quot;trnsmitting started dude from 2 to 1!!!!!!&quot;);\n    Wire.beginTransmission(NODE_1_ADDRESS);\n    Wire.write(last_state);\n    Wire.endTransmission();\n      Serial.print(&quot;end of transmitting&quot;);\n  }\n}\n\nvoid receiveEvent(int howMany){\n     Serial.println(&quot;start of receiving from 1&quot;);\n  while (Wire.available() &gt; 0){\n    boolean b = Wire.read();\n    Serial.println(&quot;start of Reciving&quot;);\n    digitalWrite(LED, !b);\n    Serial.println(b);\n  }\n  Serial.println(); \n}\n\n    \n</code></pre>\n<p>here is other master code</p>\n<pre><code>#include &lt;Wire.h&gt;  ////FOR NODE MCU THEY USE (D1 FOR CLOCK , D2 FOR DATA)\n\n#define LED D3\n#define BUTTON D6\n\n#define MY_ADDRESS 0x1\n#define NODE_2_ADDRESS 0x2\n#define NODE_3_ADDRESS 0x3\nboolean last_state = HIGH;\nlong interval_ti=2000;\nlong delay_=2000;\nvoid setup() {\n  Serial.begin(9600);\n  pinMode(LED, OUTPUT);\n    Serial.println(&quot;HI FROM START&quot;);\n  digitalWrite(LED, LOW);\n  /// Serial.println(&quot;hi&quot;);\n  pinMode(BUTTON, INPUT);\n  digitalWrite(BUTTON, HIGH);\n  \n  Wire.begin(MY_ADDRESS);\n  Wire.onReceive(receiveEvent);\n  Serial.println(&quot;HI FROM START&quot;);\n    Serial.println(&quot;trnsmitting started dudefrom 1 to 2!!!!!!&quot;);\n    Wire.beginTransmission(NODE_2_ADDRESS);\n    Wire.write(last_state);\n   Wire.endTransmission();\n}\n\nvoid loop() {\n // Serial.println(&quot;hi&quot;);\n/// Serial.println(&quot;hi&quot;);\n \n  if (digitalRead(BUTTON) != last_state){\n    last_state = digitalRead(BUTTON);\n     Serial.println(&quot;trnsmitting started dudefrom 1 to 2!!!!!!&quot;);\n    Wire.beginTransmission(NODE_2_ADDRESS);\n    Wire.write(last_state);\n    Wire.endTransmission();\n   Serial.print(&quot;end of transmitting&quot;);\n  \n  }\n}\n\nvoid receiveEvent(int howMany){\n     Serial.println(&quot;start of Reciving from 2&quot;);\n  while (Wire.available() &gt; 0){\n    boolean b = Wire.read();\n  ///  Serial.print(b, DEC);\n     Serial.println(&quot;start of Reciving&quot;);\n    digitalWrite(LED, !b);\n  Serial.println(b);\n  }\n  Serial.println(); \n}\n</code></pre>\n"
    }, {
        "tags": ["embedded", "embedded-linux", "iot", "esp8266", "esp"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1628593911,
        "creation_date": 1628588450,
        "last_edit_date": 1628593911,
        "question_id": 68724454,
        "link": "https://stackoverflow.com/questions/68724454/how-to-create-homie-node-dynamically",
        "title": "how to create homie node dynamically?",
        "body": "<p>i currently working on project that use ESP8266 and many sensor and ESP8266 uses Homie to send data to Brocker server using MQTT protocol.i want to add new sensors my ESP can detect there is new sensor added but how can i creat Homie Node for them dynamically through code so when new sensor added the ESP create Homie node for it and send it's data to brocker.the method i get it from internet was<code>  Homie* pnode = new HomieNode newnode(ID,Name,Type);</code> this is right?.if this right how the id is changed for every sensor? and how the name of newnode itself  is changed for every new sensor added?and how i can create properties for every sensor added dynamically?</p>\n"
    }, {
        "tags": ["flutter", "dart", "firebase-realtime-database", "iot", "nodemcu"],
        "is_answered": false,
        "view_count": 54,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1628533995,
        "creation_date": 1627496348,
        "last_edit_date": 1628533995,
        "question_id": 68565556,
        "link": "https://stackoverflow.com/questions/68565556/flutter-app-thats-read-real-time-sensor-value-using-firebase",
        "title": "Flutter app thats read real time sensor value using Firebase",
        "body": "<p>I want to make some IoT App (without sign in). The App is reading sensor data from the Firebase realtime database. the database shown below:</p>\n<p><img src=\"https://i.stack.imgur.com/Ze3LU.png\" alt=\"enter image description here\" /></p>\n<p>I want some function to read the value of current and power then convert it into a float value on the flutter app.</p>\n"
    }, {
        "tags": ["c", "embedded", "iot", "contiki", "contiki-ng"],
        "is_answered": true,
        "view_count": 37,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1628255682,
        "creation_date": 1628254718,
        "question_id": 68681978,
        "link": "https://stackoverflow.com/questions/68681978/contiki-ng-how-to-lower-power-consumption",
        "title": "Contiki ng: how to lower power consumption?",
        "body": "<p>Im currently developing a low power IoT node based on Contiki-ng running on a TI CC1350 launchpad board. My problem is that my power consumption is always &gt;6mA.</p>\n<p>Compiling and running the <code>energest</code> example I can see the MCU radio is always listening, no matter if I compile with <code>MAKE_MAC = MAKE_MAC_NULLMAC</code> and <code>MAKE_NET = MAKE_NET_NULLNET</code>. Running\n<code>MAKE_MAC = MAKE_MAC_TSCH</code> or <code>MAKE_MAC = MAKE_MAC_CSMA</code> increases consumption by around 2mA as the CPU is always active, but the radio is never duty cycled.</p>\n<p>Is there a way of reducing current consumption for Contiki-ng on this platform?</p>\n"
    }, {
        "tags": ["flutter", "iot", "flutter-getx"],
        "is_answered": false,
        "view_count": 36,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1627055917,
        "creation_date": 1626959621,
        "last_edit_date": 1627055917,
        "question_id": 68485474,
        "link": "https://stackoverflow.com/questions/68485474/type-futuredynamic-is-not-a-subtype-of-type-futureorint-in-type-cast-whi",
        "title": "type &#39;Future&lt;dynamic&gt;&#39; is not a subtype of type &#39;FutureOr&lt;int&gt;&#39; in type cast while trying to retrive bluetooth state in flutter",
        "body": "<p><a href=\"https://i.stack.imgur.com/VPQ3A.png\" rel=\"nofollow noreferrer\">See error screenshot</a></p>\n<p>I'm trying to monitor the state of the bluetooth device. For example a users bluetooth is turned on before entering the app. I want the bluetooth swtich to be turned on in the app. I am using GetX for state management</p>\n<pre><code>BluetoothState bluetoothState = BluetoothState.UNKNOWN;\n Future&lt;void&gt; enableBluetooth() async {\n// Retrieving the current Bluetooth state\n      bluetoothState = await \nFlutterBluetoothSerial.instance.state.;\n// If the bluetooth is off, then turn it on first\n// and then retrieve the devices that are paired.\nif (bluetoothState == BluetoothState.STATE_OFF) {\n  await FlutterBluetoothSerial.instance.requestEnable();\n  await getPairedDevices();\n  return true;\n} else {\n  await getPairedDevices();\n}\nreturn false;\n</code></pre>\n<p>}</p>\n"
    }, {
        "tags": ["amazon-web-services", "arduino", "mqtt", "iot", "esp32"],
        "is_answered": false,
        "view_count": 51,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1626032463,
        "creation_date": 1626032463,
        "question_id": 68339459,
        "link": "https://stackoverflow.com/questions/68339459/mqtt-error-code-rc-1-connecting-while-esp32-to-aws",
        "title": "mqtt error code RC = -1 connecting while esp32 to aws",
        "body": "<p>I am going to establish a mqtt connection to aws. DHT senstor reading must be sent from esp32 to aws. How can I fix the error  RC = -1 when connecting esp32 to aws. I receive this error in serial monitor :\nAttempting MQTT connection...failed, rc=-1 try again in 5 seconds</p>\n<p>What can be the reaon?</p>\n<p>My code is as follows:</p>\n<pre><code>#include &quot;SPIFFS.h&quot;\n#include &lt;WiFiClientSecure.h&gt;\n#include &lt;PubSubClient.h&gt;\n#include &lt;DHT.h&gt;  // library for getting data from DHT\n\n\n// Enter your WiFi ssid and password\nconst char* ssid = &quot;TP-Link_DBCA&quot;; //Provide your SSID\nconst char* password = &quot;44388027&quot;; // Provide Password\nconst char* mqtt_server = &quot;a3k7086cinb3bt-ats.iot.us-west-2.amazonaws.com&quot;; // Relace with your MQTT END point\nconst int   mqtt_port = 8883;\n\nString Read_rootca;\nString Read_cert;\nString Read_privatekey;\n#define BUFFER_LEN 256\nlong lastMsg = 0;\nchar msg[BUFFER_LEN];\nint Value = 0;\nbyte mac[6];\nchar mac_Id[18];\nint count = 1;\n\nWiFiClientSecure espClient;\nPubSubClient client(espClient);\n\n\n\n#define DHTPIN 4        //pin where the DHT22 is connected \nDHT dht(DHTPIN, DHT11);\n\nvoid setup_wifi() {\n  delay(10);\n  Serial.println();\n  Serial.print(&quot;Connecting to &quot;);\n  Serial.println(ssid);\n\n  WiFi.begin(ssid, password);\n\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(&quot;.&quot;);\n  }\n\n  randomSeed(micros());\n\n  Serial.println(&quot;&quot;);\n  Serial.println(&quot;WiFi connected&quot;);\n  Serial.println(&quot;IP address: &quot;);\n  Serial.println(WiFi.localIP());\n}\n\nvoid callback(char* topic, byte* payload, unsigned int length) {\n  Serial.print(&quot;Message arrived [&quot;);\n  Serial.print(topic);\n  Serial.print(&quot;] &quot;);\n  for (int i = 0; i &lt; length; i++) {\n    Serial.print((char)payload[i]);\n  }\n  Serial.println();\n}\nvoid reconnect() {\n  // Loop until we're reconnected\n  while (!client.connected()) {\n    Serial.print(&quot;Attempting MQTT connection...&quot;);\n    // Create a random client ID\n    String clientId = &quot;ESP32-&quot;;\n    clientId += String(random(0xffff), HEX);\n    // Attempt to connect\n    if (client.connect(clientId.c_str())) {\n      Serial.println(&quot;connected&quot;);\n      // Once connected, publish an announcement...\n      client.publish(&quot;ei_out&quot;, &quot;hello world&quot;);\n      // ... and resubscribe\n      client.subscribe(&quot;ei_in&quot;);\n    } else {\n      Serial.print(&quot;failed, rc=&quot;);\n      Serial.print(client.state());\n      Serial.println(&quot; try again in 5 seconds&quot;);\n      // Wait 5 seconds before retrying\n      delay(5000);\n    }\n  }\n}\n\nvoid setup() {\n  Serial.begin(115200);\n  dht.begin();\n  // initialize digital pin LED_BUILTIN as an output.\n  pinMode(2, OUTPUT);\n  setup_wifi();\n  delay(1000);\n  //=============================================================\n  if (!SPIFFS.begin(true)) {\n    Serial.println(&quot;An Error has occurred while mounting SPIFFS&quot;);\n    return;\n  }\n  //=======================================\n  //Root CA File Reading.\n  File file2 = SPIFFS.open(&quot;/AmazonRootCA1.pem&quot;, &quot;r&quot;);\n  if (!file2) {\n    Serial.println(&quot;Failed to open file for reading&quot;);\n    return;\n  }\n  Serial.println(&quot;Root CA File Content:&quot;);\n  while (file2.available()) {\n    Read_rootca = file2.readString();\n    Serial.println(Read_rootca);\n  }\n  //=============================================\n  // Cert file reading\n  File file4 = SPIFFS.open(&quot;/certificate.pem.crt.txt&quot;, &quot;r&quot;);\n  if (!file4) {\n    Serial.println(&quot;Failed to open file for reading&quot;);\n    return;\n  }\n  Serial.println(&quot;Cert File Content:&quot;);\n  while (file4.available()) {\n    Read_cert = file4.readString();\n    Serial.println(Read_cert);\n  }\n  //=================================================\n  //Privatekey file reading\n  File file6 = SPIFFS.open(&quot;/private.pem.key&quot;, &quot;r&quot;);\n  if (!file6) {\n    Serial.println(&quot;Failed to open file for reading&quot;);\n    return;\n  }\n  Serial.println(&quot;privateKey File Content:&quot;);\n  while (file6.available()) {\n    Read_privatekey = file6.readString();\n    Serial.println(Read_privatekey);\n  }\n  //=====================================================\n\n  char* pRead_rootca;\n  pRead_rootca = (char *)malloc(sizeof(char) * (Read_rootca.length() + 1));\n  strcpy(pRead_rootca, Read_rootca.c_str());\n\n  char* pRead_cert;\n  pRead_cert = (char *)malloc(sizeof(char) * (Read_cert.length() + 1));\n  strcpy(pRead_cert, Read_cert.c_str());\n\n  char* pRead_privatekey;\n  pRead_privatekey = (char *)malloc(sizeof(char) * (Read_privatekey.length() + 1));\n  strcpy(pRead_privatekey, Read_privatekey.c_str());\n\n  Serial.println(&quot;================================================================================================&quot;);\n  Serial.println(&quot;Certificates that passing to espClient Method&quot;);\n  Serial.println();\n  Serial.println(&quot;Root CA:&quot;);\n  Serial.write(pRead_rootca);\n  Serial.println(&quot;================================================================================================&quot;);\n  Serial.println();\n  Serial.println(&quot;Cert:&quot;);\n  Serial.write(pRead_cert);\n  Serial.println(&quot;================================================================================================&quot;);\n  Serial.println();\n  Serial.println(&quot;privateKey:&quot;);\n  Serial.write(pRead_privatekey);\n  Serial.println(&quot;================================================================================================&quot;);\n\n  espClient.setCACert(pRead_rootca);\n  espClient.setCertificate(pRead_cert);\n  espClient.setPrivateKey(pRead_privatekey);\n\n  client.setServer(mqtt_server, mqtt_port);\n  client.setCallback(callback);\n\n  //====================================================================================================================\n  WiFi.macAddress(mac);\n  snprintf(mac_Id, sizeof(mac_Id), &quot;%02x:%02x:%02x:%02x:%02x:%02x&quot;,\n           mac[0], mac[1], mac[2], mac[3], mac[4], mac[5]);\n  Serial.print(mac_Id);\n  //=====================================================================================================================\n  delay(2000);\n}\n\n\nvoid loop() {\n  float h = 80;   // Reading Temperature form DHT sensor\n  float t = 22.5;      // Reading Humidity form DHT sensor\n  float tF = (t * 1.8) + 32;\n  if (isnan(h) || isnan(t))\n  {\n    Serial.println(&quot;Failed to read from DHT sensor!&quot;);\n    return;\n  }\n  if (!client.connected()) {\n    reconnect();\n  }\n  client.loop();\n\n  long now = millis();\n  if (now - lastMsg &gt; 2000) {\n    lastMsg = now;\n    //=============================================================================================\n    String macIdStr = mac_Id;\n    String Temprature = String(t);\n    String Humidity = String(h);\n    snprintf (msg, BUFFER_LEN, &quot;{\\&quot;mac_Id\\&quot; : \\&quot;%s\\&quot;, \\&quot;Temprature\\&quot; : %s, \\&quot;Humidity\\&quot; : \\&quot;%s\\&quot;}&quot;, macIdStr.c_str(), Temprature.c_str(), Humidity.c_str());\n    Serial.print(&quot;Publish message: &quot;);\n    Serial.print(count);\n    Serial.println(msg);\n    client.publish(&quot;temp/&quot;, msg);\n    count = count + 1;\n    //================================================================================================\n  }\n  digitalWrite(2, HIGH);   // turn the LED on (HIGH is the voltage level)\n  delay(1000);                       // wait for a second\n  digitalWrite(2, LOW);    // turn the LED off by making the voltage LOW\n  delay(1000);                       // wait for a second\n}```\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp32", "arduino-ide"],
        "is_answered": false,
        "view_count": 73,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1625896552,
        "creation_date": 1625896088,
        "last_edit_date": 1625896552,
        "question_id": 68325069,
        "link": "https://stackoverflow.com/questions/68325069/iot-based-patient-health-monitoring-on-esp32-web-server",
        "title": "IoT Based Patient Health Monitoring on ESP32 Web Server",
        "body": "<p>I recently came across this project for monitoring a patients health status. I bought all the parts and tested them individually and all of them worked but together the pulse oximeter module MAX 30100 gave no readings i.e, both parameters bpm and spo2 were 0. I also tried opening the serial monitor but there also the values were the same. One of the codes just did not work with my esp32 the other uploaded and the MAX30100 did not work.</p>\n<p>Wiring diagram of my project</p>\n<p><a href=\"https://i.stack.imgur.com/ig76M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ig76M.png\" alt=\"\" /></a></p>\n<p>The first code starts now. This code didn't even get uploaded in my ESP32</p>\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;WebServer.h&gt;\n#include &lt;Wire.h&gt;\n#include &quot;MAX30100_PulseOximeter.h&quot;\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n#include &lt;dht.h&gt;  \n\n#define DHT11_PIN 18\n#define DS18B20 5\n#define REPORTING_PERIOD_MS     1000\n \nfloat temperature, humidity, BPM, SpO2, bodytemperature;\n \n/*Put your SSID &amp; Password*/\nconst char* ssid = &quot;Alexahome&quot;;  // Enter SSID here\nconst char* password = &quot;12345678&quot;;  //Enter Password here\n \ndht DHT;\nPulseOximeter pox;\nuint32_t tsLastReport = 0;\nOneWire oneWire(DS18B20);\nDallasTemperature sensors(&amp;oneWire);\n \n \nWebServer server(80);             \n \nvoid onBeatDetected()\n{\n  Serial.println(&quot;Beat!&quot;);\n}\n \nvoid setup() {\n  Serial.begin(115200);\n  pinMode(19, OUTPUT);\n  delay(100);   \n \n  Serial.println(&quot;Connecting to &quot;);\n  Serial.println(ssid);\n \n  //connect to your local wi-fi network\n  WiFi.begin(ssid, password);\n \n  //check wi-fi is connected to wi-fi network\n  while (WiFi.status() != WL_CONNECTED) {\n  delay(1000);\n  Serial.print(&quot;.&quot;);\n  }\n  Serial.println(&quot;&quot;);\n  Serial.println(&quot;WiFi connected..!&quot;);\n  Serial.print(&quot;Got IP: &quot;);  Serial.println(WiFi.localIP());\n \n  server.on(&quot;/&quot;, handle_OnConnect);\n  server.onNotFound(handle_NotFound);\n \n  server.begin();\n  Serial.println(&quot;HTTP server started&quot;);\n \n  Serial.print(&quot;Initializing pulse oximeter..&quot;);\n \n  if (!pox.begin()) {\n    Serial.println(&quot;FAILED&quot;);\n    for (;;);\n  } else {\n    Serial.println(&quot;SUCCESS&quot;);\n    pox.setOnBeatDetectedCallback(onBeatDetected);\n  }\n \n   pox.setIRLedCurrent(MAX30100_LED_CURR_7_6MA);\n \n  // Register a callback for the beat detection\n \n}\nvoid loop() {\n  server.handleClient();\n  pox.update();\n  sensors.requestTemperatures();\n  int chk = DHT.read11(DHT11_PIN);\n  \n  temperature = DHT.temperature;\n  humidity = DHT.humidity;\n  BPM = pox.getHeartRate();\n  SpO2 = pox.getSpO2();\n  bodytemperature = sensors.getTempCByIndex(0);\n \n  \n  if (millis() - tsLastReport &gt; REPORTING_PERIOD_MS) \n  {\n    Serial.print(&quot;Room Temperature: &quot;);\n    Serial.print(DHT.temperature);\n    Serial.println(&quot;\u00b0C&quot;);\n    \n    Serial.print(&quot;Room Humidity: &quot;);\n    Serial.print(DHT.humidity);\n    Serial.println(&quot;%&quot;);\n    \n    Serial.print(&quot;BPM: &quot;);\n    Serial.println(BPM);\n    \n    Serial.print(&quot;SpO2: &quot;);\n    Serial.print(SpO2);\n    Serial.println(&quot;%&quot;);\n \n    Serial.print(&quot;Body Temperature: &quot;);\n    Serial.print(bodytemperature);\n    Serial.println(&quot;\u00b0C&quot;);\n    \n    Serial.println(&quot;*********************************&quot;);\n    Serial.println();\n \n    tsLastReport = millis();\n  }\n  \n}\n \nvoid handle_OnConnect() {\n  \n  server.send(200, &quot;text/html&quot;, SendHTML(temperature, humidity, BPM, SpO2, bodytemperature)); \n}\n \nvoid handle_NotFound(){\n  server.send(404, &quot;text/plain&quot;, &quot;Not found&quot;);\n}\n \n  String SendHTML(float temperature,float humidity,float BPM,float SpO2, float bodytemperature){\n  String ptr = &quot;&lt;!DOCTYPE html&gt;&quot;;\n  ptr +=&quot;&lt;html&gt;&quot;;\n  ptr +=&quot;&lt;head&gt;&quot;;\n  ptr +=&quot;&lt;title&gt;ESP32 Patient Health Monitoring&lt;/title&gt;&quot;;\n  ptr +=&quot;&lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&quot;;\n  ptr +=&quot;&lt;link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600' rel='stylesheet'&gt;&quot;;\n  ptr +=&quot;&lt;style&gt;&quot;;\n  ptr +=&quot;html { font-family: 'Open Sans', sans-serif; display: block; margin: 0px auto; text-align: center;color: #444444;}&quot;;\n  ptr +=&quot;body{margin: 0px;} &quot;;\n  ptr +=&quot;h1 {margin: 50px auto 30px;} &quot;;\n  ptr +=&quot;.side-by-side{display: table-cell;vertical-align: middle;position: relative;}&quot;;\n  ptr +=&quot;.text{font-weight: 600;font-size: 19px;width: 200px;}&quot;;\n  ptr +=&quot;.reading{font-weight: 300;font-size: 50px;padding-right: 25px;}&quot;;\n  ptr +=&quot;.temperature .reading{color: #F29C1F;}&quot;;\n  ptr +=&quot;.humidity .reading{color: #3B97D3;}&quot;;\n  ptr +=&quot;.BPM .reading{color: #FF0000;}&quot;;\n  ptr +=&quot;.SpO2 .reading{color: #955BA5;}&quot;;\n  ptr +=&quot;.bodytemperature .reading{color: #F29C1F;}&quot;;\n  ptr +=&quot;.superscript{font-size: 17px;font-weight: 600;position: absolute;top: 10px;}&quot;;\n  ptr +=&quot;.data{padding: 10px;}&quot;;\n  ptr +=&quot;.container{display: table;margin: 0 auto;}&quot;;\n  ptr +=&quot;.icon{width:65px}&quot;;\n  ptr +=&quot;&lt;/style&gt;&quot;;\n  ptr +=&quot;&lt;/head&gt;&quot;;\n  ptr +=&quot;&lt;body&gt;&quot;;\n  ptr +=&quot;&lt;h1&gt;ESP32 Patient Health Monitoring&lt;/h1&gt;&quot;;\n  ptr +=&quot;&lt;h3&gt;www.how2electronics.com&lt;/h3&gt;&quot;;\n  ptr +=&quot;&lt;div class='container'&gt;&quot;;\n  \n  ptr +=&quot;&lt;div class='data temperature'&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side icon'&gt;&quot;;\n  ptr +=&quot;&lt;svg enable-background='new 0 0 19.438 54.003'height=54.003px id=Layer_1 version=1.1 viewBox='0 0 19.438 54.003'width=19.438px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink y=0px&gt;&lt;g&gt;&lt;path d='M11.976,8.82v-2h4.084V6.063C16.06,2.715,13.345,0,9.996,0H9.313C5.965,0,3.252,2.715,3.252,6.063v30.982&quot;;\n  ptr +=&quot;C1.261,38.825,0,41.403,0,44.286c0,5.367,4.351,9.718,9.719,9.718c5.368,0,9.719-4.351,9.719-9.718&quot;;\n  ptr +=&quot;c0-2.943-1.312-5.574-3.378-7.355V18.436h-3.914v-2h3.914v-2.808h-4.084v-2h4.084V8.82H11.976z M15.302,44.833&quot;;\n  ptr +=&quot;c0,3.083-2.5,5.583-5.583,5.583s-5.583-2.5-5.583-5.583c0-2.279,1.368-4.236,3.326-5.104V24.257C7.462,23.01,8.472,22,9.719,22&quot;;\n  ptr +=&quot;s2.257,1.01,2.257,2.257V39.73C13.934,40.597,15.302,42.554,15.302,44.833z'fill=#F29C21 /&gt;&lt;/g&gt;&lt;/svg&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side text'&gt;Room Temperature&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side reading'&gt;&quot;;\n  ptr +=(int)temperature;\n  ptr +=&quot;&lt;span class='superscript'&gt;&amp;deg;C&lt;/span&gt;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  \n  ptr +=&quot;&lt;div class='data humidity'&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side icon'&gt;&quot;;\n  ptr +=&quot;&lt;svg enable-background='new 0 0 29.235 40.64'height=40.64px id=Layer_1 version=1.1 viewBox='0 0 29.235 40.64'width=29.235px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink y=0px&gt;&lt;path d='M14.618,0C14.618,0,0,17.95,0,26.022C0,34.096,6.544,40.64,14.618,40.64s14.617-6.544,14.617-14.617&quot;;\n  ptr +=&quot;C29.235,17.95,14.618,0,14.618,0z M13.667,37.135c-5.604,0-10.162-4.56-10.162-10.162c0-0.787,0.638-1.426,1.426-1.426&quot;;\n  ptr +=&quot;c0.787,0,1.425,0.639,1.425,1.426c0,4.031,3.28,7.312,7.311,7.312c0.787,0,1.425,0.638,1.425,1.425&quot;;\n  ptr +=&quot;C15.093,36.497,14.455,37.135,13.667,37.135z'fill=#3C97D3 /&gt;&lt;/svg&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side text'&gt;Room Humidity&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side reading'&gt;&quot;;\n  ptr +=(int)humidity;\n  ptr +=&quot;&lt;span class='superscript'&gt;%&lt;/span&gt;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  \n  ptr +=&quot;&lt;div class='data Heart Rate'&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side icon'&gt;&quot;;\n  ptr +=&quot;&lt;svg enable-background='new 0 0 40.542 40.541'height=40.541px id=Layer_1 version=1.1 viewBox='0 0 40.542 40.541'width=40.542px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink y=0px&gt;&lt;g&gt;&lt;path d='M34.313,20.271c0-0.552,0.447-1,1-1h5.178c-0.236-4.841-2.163-9.228-5.214-12.593l-3.425,3.424&quot;;\n  ptr +=&quot;c-0.195,0.195-0.451,0.293-0.707,0.293s-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l3.425-3.424&quot;;\n  ptr +=&quot;c-3.375-3.059-7.776-4.987-12.634-5.215c0.015,0.067,0.041,0.13,0.041,0.202v4.687c0,0.552-0.447,1-1,1s-1-0.448-1-1V0.25&quot;;\n  ptr +=&quot;c0-0.071,0.026-0.134,0.041-0.202C14.39,0.279,9.936,2.256,6.544,5.385l3.576,3.577c0.391,0.391,0.391,1.024,0,1.414&quot;;\n  ptr +=&quot;c-0.195,0.195-0.451,0.293-0.707,0.293s-0.512-0.098-0.707-0.293L5.142,6.812c-2.98,3.348-4.858,7.682-5.092,12.459h4.804&quot;;\n  ptr +=&quot;c0.552,0,1,0.448,1,1s-0.448,1-1,1H0.05c0.525,10.728,9.362,19.271,20.22,19.271c10.857,0,19.696-8.543,20.22-19.271h-5.178&quot;;\n  ptr +=&quot;C34.76,21.271,34.313,20.823,34.313,20.271z M23.084,22.037c-0.559,1.561-2.274,2.372-3.833,1.814&quot;;\n  ptr +=&quot;c-1.561-0.557-2.373-2.272-1.815-3.833c0.372-1.041,1.263-1.737,2.277-1.928L25.2,7.202L22.497,19.05&quot;;\n  ptr +=&quot;C23.196,19.843,23.464,20.973,23.084,22.037z'fill=#26B999 /&gt;&lt;/g&gt;&lt;/svg&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side text'&gt;Heart Rate&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side reading'&gt;&quot;;\n  ptr +=(int)BPM;\n  ptr +=&quot;&lt;span class='superscript'&gt;BPM&lt;/span&gt;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  \n  ptr +=&quot;&lt;div class='data Blood Oxygen'&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side icon'&gt;&quot;;\n  ptr +=&quot;&lt;svg enable-background='new 0 0 58.422 40.639'height=40.639px id=Layer_1 version=1.1 viewBox='0 0 58.422 40.639'width=58.422px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink y=0px&gt;&lt;g&gt;&lt;path d='M58.203,37.754l0.007-0.004L42.09,9.935l-0.001,0.001c-0.356-0.543-0.969-0.902-1.667-0.902&quot;;\n  ptr +=&quot;c-0.655,0-1.231,0.32-1.595,0.808l-0.011-0.007l-0.039,0.067c-0.021,0.03-0.035,0.063-0.054,0.094L22.78,37.692l0.008,0.004&quot;;\n  ptr +=&quot;c-0.149,0.28-0.242,0.594-0.242,0.934c0,1.102,0.894,1.995,1.994,1.995v0.015h31.888c1.101,0,1.994-0.893,1.994-1.994&quot;;\n  ptr +=&quot;C58.422,38.323,58.339,38.024,58.203,37.754z'fill=#955BA5 /&gt;&lt;path d='M19.704,38.674l-0.013-0.004l13.544-23.522L25.13,1.156l-0.002,0.001C24.671,0.459,23.885,0,22.985,0&quot;;\n  ptr +=&quot;c-0.84,0-1.582,0.41-2.051,1.038l-0.016-0.01L20.87,1.114c-0.025,0.039-0.046,0.082-0.068,0.124L0.299,36.851l0.013,0.004&quot;;\n  ptr +=&quot;C0.117,37.215,0,37.62,0,38.059c0,1.412,1.147,2.565,2.565,2.565v0.015h16.989c-0.091-0.256-0.149-0.526-0.149-0.813&quot;;\n  ptr +=&quot;C19.405,39.407,19.518,39.019,19.704,38.674z'fill=#955BA5 /&gt;&lt;/g&gt;&lt;/svg&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side text'&gt;Blood Oxygen&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side reading'&gt;&quot;;\n  ptr +=(int)SpO2;\n  ptr +=&quot;&lt;span class='superscript'&gt;%&lt;/span&gt;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n \n  ptr +=&quot;&lt;div class='data Body Temperature'&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side icon'&gt;&quot;;\n  ptr +=&quot;&lt;svg enable-background='new 0 0 19.438 54.003'height=54.003px id=Layer_1 version=1.1 viewBox='0 0 19.438 54.003'width=19.438px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink y=0px&gt;&lt;g&gt;&lt;path d='M11.976,8.82v-2h4.084V6.063C16.06,2.715,13.345,0,9.996,0H9.313C5.965,0,3.252,2.715,3.252,6.063v30.982&quot;;\n  ptr +=&quot;C1.261,38.825,0,41.403,0,44.286c0,5.367,4.351,9.718,9.719,9.718c5.368,0,9.719-4.351,9.719-9.718&quot;;\n  ptr +=&quot;c0-2.943-1.312-5.574-3.378-7.355V18.436h-3.914v-2h3.914v-2.808h-4.084v-2h4.084V8.82H11.976z M15.302,44.833&quot;;\n  ptr +=&quot;c0,3.083-2.5,5.583-5.583,5.583s-5.583-2.5-5.583-5.583c0-2.279,1.368-4.236,3.326-5.104V24.257C7.462,23.01,8.472,22,9.719,22&quot;;\n  ptr +=&quot;s2.257,1.01,2.257,2.257V39.73C13.934,40.597,15.302,42.554,15.302,44.833z'fill=#F29C21 /&gt;&lt;/g&gt;&lt;/svg&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side text'&gt;Body Temperature&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;div class='side-by-side reading'&gt;&quot;;\n  ptr +=(int)bodytemperature;\n  ptr +=&quot;&lt;span class='superscript'&gt;&amp;deg;C&lt;/span&gt;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/div&gt;&quot;;\n  \n  ptr +=&quot;&lt;/div&gt;&quot;;\n  ptr +=&quot;&lt;/body&gt;&quot;;\n  ptr +=&quot;&lt;/html&gt;&quot;;\n  return ptr;\n}\n</code></pre>\n<p>The second code starts now: This got uploaded but MAX30100 did not work</p>\n<pre><code>// IoT Based Patient Health Monitoring on ESP32 Web Server\n#include &lt;WiFi.h&gt;\n#include &lt;WebServer.h&gt;\n#include &lt;Wire.h&gt;\n#include &quot;MAX30100_PulseOximeter.h&quot;\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n#include &quot;DHT.h&quot; \n\n#define DHTTYPE DHT22 \n#define DHTPIN 18\n#define DS18B20 5\n#define REPORTING_PERIOD_MS     1000\n \nfloat temperature, humidity, BPM, SpO2, bodytemperature;\n \n/*Put your SSID &amp; Password*/\nconst char* ssid = &quot;Alsan Air WiFi 1&quot;;  // Enter SSID here\nconst char* password = &quot;&quot;;  //Enter Password here\n \nDHT dht(DHTPIN, DHTTYPE);; \nPulseOximeter pox;\nuint32_t tsLastReport = 0;\nOneWire oneWire(DS18B20);\nDallasTemperature sensors(&amp;oneWire);\n \n \nWebServer server(80);             \n \nvoid onBeatDetected()\n{\n  Serial.println(&quot;Beat!&quot;);\n}\n \nvoid setup() {\n  Serial.begin(115200);\n  pinMode(19, OUTPUT);\n  delay(100);   \n  Serial.println(F(&quot;DHTxx test!&quot;));\n  dht.begin();\n  Serial.println(&quot;Connecting to &quot;);\n  Serial.println(ssid);\n \n  //connect to your local wi-fi network\n  WiFi.begin(ssid, password);\n \n  //check wi-fi is connected to wi-fi network\n  while (WiFi.status() != WL_CONNECTED) {\n  delay(1000);\n  Serial.print(&quot;.&quot;);\n  }\n  Serial.println(&quot;&quot;);\n  Serial.println(&quot;WiFi connected..!&quot;);\n  Serial.print(&quot;Got IP: &quot;);  Serial.println(WiFi.localIP());\n \n  server.on(&quot;/&quot;, handle_OnConnect);\n  server.onNotFound(handle_NotFound);\n \n  server.begin();\n  Serial.println(&quot;HTTP server started&quot;);\n \n  Serial.print(&quot;Initializing pulse oximeter..&quot;);\n \n  if (!pox.begin()) {\n    Serial.println(&quot;FAILED&quot;);\n    for (;;);\n  } else {\n    Serial.println(&quot;SUCCESS&quot;);\n    pox.setOnBeatDetectedCallback(onBeatDetected);\n  }\n \n   pox.setIRLedCurrent(MAX30100_LED_CURR_7_6MA);\n \n  // Register a callback for the beat detection\n \n}\nvoid loop() {\n  server.handleClient();\n  pox.update();\n  sensors.requestTemperatures();\n  float t = dht.readTemperature();\n  String Temperature_Value = String(t);\n  float h = dht.readHumidity();\n  String Humidity_Value = String(h);\n  temperature = t;\n  humidity = h;\n  BPM = pox.getHeartRate();\n  SpO2 = pox.getSpO2();\n  bodytemperature = sensors.getTempCByIndex(0);\n \n  \n  if (millis() - tsLastReport &gt; REPORTING_PERIOD_MS) \n  {\n    Serial.print(&quot;Room Temperature: &quot;);\n    Serial.print(t);\n    Serial.println(&quot;\u00b0C&quot;);\n\n    Serial.print(&quot;Room Humidity: &quot;);\n    Serial.print(h);\n    Serial.println(&quot;%&quot;);\n\n    Serial.print(&quot;BPM: &quot;);\n    Serial.println(BPM);\n\n    Serial.print(&quot;SpO2: &quot;);\n    Serial.print(SpO2);\n    Serial.println(&quot;%&quot;);\n\n    Serial.print(&quot;Body Temperature: &quot;);\n    Serial.print(bodytemperature);\n    Serial.println(&quot;\u00b0C&quot;);\n\n    Serial.println(&quot;*********************************&quot;);\n    Serial.println();\n \n    tsLastReport = millis();\n  }\n  \n}\n \nvoid handle_OnConnect() {\n  \n  server.send(200, &quot;text/html&quot;, SendHTML(temperature, humidity, BPM, SpO2, bodytemperature)); \n}\n \nvoid handle_NotFound(){\n  server.send(404, &quot;text/plain&quot;, &quot;Not found&quot;);\n}\n \n  String SendHTML(float temperature, float humidity, float BPM, float SpO2, float bodytemperature) {\n  String html = &quot;&lt;!DOCTYPE html&gt;&quot;;\nhtml += &quot;&lt;html&gt;&quot;;\nhtml += &quot;&lt;head&gt;&quot;;\nhtml += &quot;&lt;title&gt;Patient Health Monitoring&lt;/title&gt;&quot;;\nhtml += &quot;&lt;meta name='viewport' content='width=device-width, initial-scale=1.0'&gt;&quot;;\nhtml += &quot;&lt;link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/css/all.min.css'&gt;&quot;;\nhtml += &quot;&lt;link rel='stylesheet' type='text/css' href='styles.css'&gt;&quot;;\nhtml += &quot;&lt;style&gt;&quot;;\nhtml += &quot;body { background-color: #fff; font-family: sans-serif; color: #333333; font: 14px Helvetica, sans-serif box-sizing: border-box;}&quot;;\nhtml += &quot;#page { margin: 20px; background-color: #fff;}&quot;;\nhtml += &quot;.container { height: inherit; padding-bottom: 20px;}&quot;;\nhtml += &quot;.header { padding: 20px;}&quot;;\nhtml += &quot;.header h1 { padding-bottom: 0.3em; color: #008080; font-size: 45px; font-weight: bold; font-family: Garmond, 'sans-serif'; text-align: center;}&quot;;\nhtml += &quot;h2 { padding-bottom: 0.2em; border-bottom: 1px solid #eee; margin: 2px; text-align: left;}&quot;;\nhtml += &quot;.header h3 { font-weight: bold; font-family: Arial, 'sans-serif'; font-size: 17px; color: #b6b6b6; text-align: center;}&quot;;\nhtml += &quot;.box-full { padding: 20px; border 1px solid #ddd; border-radius: 1em 1em 1em 1em; box-shadow: 1px 7px 7px 1px rgba(0,0,0,0.4); background: #fff; margin: 20px; width: 300px;}&quot;;\nhtml += &quot;@media (max-width: 494px) { #page { width: inherit; margin: 5px auto; } #content { padding: 1px;} .box-full { margin: 8px 8px 12px 8px; padding: 10px; width: inherit;; float: none; } }&quot;;\nhtml += &quot;@media (min-width: 494px) and (max-width: 980px) { #page { width: 465px; margin 0 auto; } .box-full { width: 380px; } }&quot;;\nhtml += &quot;@media (min-width: 980px) { #page { width: 930px; margin: auto; } }&quot;;\nhtml += &quot;.sensor { margin: 12px 0px; font-size: 2.5rem;}&quot;;\nhtml += &quot;.sensor-labels { font-size: 1rem; vertical-align: middle; padding-bottom: 15px;}&quot;;\nhtml += &quot;.units { font-size: 1.2rem;}&quot;;\nhtml += &quot;hr { height: 1px; color: #eee; background-color: #eee; border: none;}&quot;;\nhtml += &quot;&lt;/style&gt;&quot;;\n\n//Ajax Code Start\n  html += &quot;&lt;script&gt;\\n&quot;;\n  html += &quot;setInterval(loadDoc,1000);\\n&quot;;\n  html += &quot;function loadDoc() {\\n&quot;;\n  html += &quot;var xhttp = new XMLHttpRequest();\\n&quot;;\n  html += &quot;xhttp.onreadystatechange = function() {\\n&quot;;\n  html += &quot;if (this.readyState == 4 &amp;&amp; this.status == 200) {\\n&quot;;\n  html += &quot;document.body.innerHTML =this.responseText}\\n&quot;;\n  html += &quot;};\\n&quot;;\n  html += &quot;xhttp.open(\\&quot;GET\\&quot;, \\&quot;/\\&quot;, true);\\n&quot;;\n  html += &quot;xhttp.send();\\n&quot;;\n  html += &quot;}\\n&quot;;\n  html += &quot;&lt;/script&gt;\\n&quot;;\n  //Ajax Code END\n  \nhtml += &quot;&lt;/head&gt;&quot;;\nhtml += &quot;&lt;body&gt;&quot;;\nhtml += &quot;&lt;div id='page'&gt;&quot;;\nhtml += &quot;&lt;div class='header'&gt;&quot;;\nhtml += &quot;&lt;h1&gt;Health Monitoring System&lt;/h1&gt;&quot;;\nhtml += &quot;&lt;h3&gt;&lt;a href='https://theiotprojects.com'&gt;https://theiotprojects.com&lt;/a&gt;&lt;/h3&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;div id='content' align='center'&gt;&quot;;\nhtml += &quot;&lt;div class='box-full' align='left'&gt;&quot;;\nhtml += &quot;&lt;h2&gt;Sensors Readings&lt;/h2&gt;&quot;;\nhtml += &quot;&lt;div class='sensors-container'&gt;&quot;;\n\n//For Temperature\nhtml += &quot;&lt;div class='sensors'&gt;&quot;;\nhtml += &quot;&lt;p class='sensor'&gt;&quot;;\nhtml += &quot;&lt;i class='fas fa-thermometer-half' style='color:#0275d8'&gt;&lt;/i&gt;&quot;;\nhtml += &quot;&lt;span class='sensor-labels'&gt; Room Temperature &lt;/span&gt;&quot;;\nhtml += (int)temperature;\nhtml += &quot;&lt;sup class='units'&gt;\u00b0C&lt;/sup&gt;&quot;;\nhtml += &quot;&lt;/p&gt;&quot;;\nhtml += &quot;&lt;hr&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\n\n//For Humidity\nhtml += &quot;&lt;div class='sensors'&gt;&quot;;\nhtml += &quot;&lt;p class='sensor'&gt;&quot;;\nhtml += &quot;&lt;i class='fas fa-tint' style='color:#5bc0de'&gt;&lt;/i&gt;&quot;;\nhtml += &quot;&lt;span class='sensor-labels'&gt; Room Humidity &lt;/span&gt;&quot;;\nhtml += (int)humidity;\nhtml += &quot;&lt;sup class='units'&gt;%&lt;/sup&gt;&quot;;\nhtml += &quot;&lt;/p&gt;&quot;;\nhtml += &quot;&lt;hr&gt;&quot;;\n\n//For Heart Rate\nhtml += &quot;&lt;p class='sensor'&gt;&quot;;\nhtml += &quot;&lt;i class='fas fa-heartbeat' style='color:#cc3300'&gt;&lt;/i&gt;&quot;;\nhtml += &quot;&lt;span class='sensor-labels'&gt; Heart Rate &lt;/span&gt;&quot;;\nhtml += (int)BPM;\nhtml += &quot;&lt;sup class='units'&gt;BPM&lt;/sup&gt;&quot;;\nhtml += &quot;&lt;/p&gt;&quot;;\nhtml += &quot;&lt;hr&gt;&quot;;\n\n//For Sp02\nhtml += &quot;&lt;p class='sensor'&gt;&quot;;\nhtml += &quot;&lt;i class='fas fa-burn' style='color:#f7347a'&gt;&lt;/i&gt;&quot;;\nhtml += &quot;&lt;span class='sensor-labels'&gt; Sp02 &lt;/span&gt;&quot;;\nhtml += (int)SpO2;\nhtml += &quot;&lt;sup class='units'&gt;%&lt;/sup&gt;&quot;;\nhtml += &quot;&lt;/p&gt;&quot;;\nhtml += &quot;&lt;hr&gt;&quot;;\n\n//For Body Temperature\nhtml += &quot;&lt;p class='sensor'&gt;&quot;;\nhtml += &quot;&lt;i class='fas fa-thermometer-full' style='color:#d9534f'&gt;&lt;/i&gt;&quot;;\nhtml += &quot;&lt;span class='sensor-labels'&gt; Body Temperature &lt;/span&gt;&quot;;\nhtml += (int)bodytemperature;\nhtml += &quot;&lt;sup class='units'&gt;\u00b0C&lt;/sup&gt;&quot;;\nhtml += &quot;&lt;/p&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;/div&gt;&quot;;\nhtml += &quot;&lt;/body&gt;&quot;;\nhtml += &quot;&lt;/html&gt;&quot;;\nreturn html;\n}\n</code></pre>\n"
    }, {
        "tags": ["firebase", "bluetooth-lowenergy", "mqtt", "iot", "esp32"],
        "is_answered": true,
        "view_count": 116,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1625061240,
        "creation_date": 1625059521,
        "question_id": 68195682,
        "link": "https://stackoverflow.com/questions/68195682/why-use-mqtt-server-for-ble-gateway",
        "title": "Why use mqtt server for BLE gateway?",
        "body": "<p>I have a BLE temperature sensor, which should send measurements to an ESP32 via a BLE connection and my plan was that the ESP32 could send the measurements via WiFi to my database (Firebase Realtime Database). However, I have seen from a few tutorials that a mqtt server would be neccesary (see the screenshot below - link to the video: <a href=\"https://www.youtube.com/watch?v=PBYCG-ypvRY\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=PBYCG-ypvRY</a>). Could someone please explain to me why the mqtt component is neccesary? Currently I am measuring temperatures using my ESP32 (without the BLE temperautre sensors) and sending them directly to the database, so I am confused as to why with BLE I would need a mqtt server.</p>\n<p>Thanks for your help in advance!</p>\n<p><a href=\"https://i.stack.imgur.com/ItDeB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ItDeB.png\" alt=\"enter image description here\" /></a></p>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "mqtt", "iot", "esp8266", "esp32"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "closed_date": 1625093767,
        "score": 2,
        "last_activity_date": 1625040592,
        "creation_date": 1625040592,
        "question_id": 68190833,
        "link": "https://stackoverflow.com/questions/68190833/how-to-get-the-value-of-a-measurement-sent-by-a-ble-device",
        "title": "How to get the value of a measurement sent by a BLE device?",
        "body": "<p>I would like to use a BLE temperature sensor (such as the Inkbird IBS-TH1 Mini BLE Sensor), however, I want to be able to display the temperature measurements in my own website. To do this I am planning to have an ESP32, which would intercept the temperatures sensor's BLE messages (and then send them to Firebase Realtime Database via WiFi). I know how to use the ESP32 to find advertising devices, however, I am not sure how to receive the measurements the sensor is transmitting. I have seen libraries such as the ESPHome or ESP32-mqtt-room, but I was wondering whether there is a way to bypass them? Is it neccesary to use mqtt or mosquito? Or is it possible to achieve this using solely the Arduino BLE library?</p>\n<p>Any help would be appreciated!</p>\n"
    }, {
        "tags": ["c", "http", "iot", "esp8266", "arduino-ide"],
        "is_answered": false,
        "view_count": 243,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1624524686,
        "creation_date": 1624524686,
        "question_id": 68112544,
        "link": "https://stackoverflow.com/questions/68112544/arduino-ide-http-begin-return-false",
        "title": "Arduino IDE-http.begin() return false",
        "body": "<p>I'm reading DHT11 data and trying to send it to my cloud server using nodeMCU ESP32. The problem is I can not run &quot;http.begin()&quot; line. It always returns false. So far, I've tried adding fingerprint,</p>\n<pre><code>const uint8_t fingerprint[20] = &quot;aa bb cc dd&quot;;\nhttp.begin(fingerprint, host);\n</code></pre>\n<p>adding WiFiClient,</p>\n<pre><code>WiFiClient clientt;\nhttp.begin(clientt, host);\n</code></pre>\n<p>and adding WiFiClientSecure;</p>\n<pre><code>WiFiClientSecure client;\n  client.setInsecure(); \n  client.connect(host, 443);\n  http.begin(client, host);\n</code></pre>\n<p>but it won't work. Since http.begin() returns false, my post request returns -1. Here is my full code:</p>\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt; \n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266HTTPClient.h&gt;\n#include &lt;DHT.h&gt;\n#include &lt;WiFiClientSecureBearSSL.h&gt;\n\n\n#define DHTTYPE DHT11 \n\n\n/* Set these to your desired credentials. */\nconst char *ssid = &quot;ssid&quot;;  //ENTER YOUR WIFI SETTINGS\nconst char *password = &quot;password&quot;;\nconst char *userId = &quot;123&quot;;\n//Web/Server address to read/write from \nconst char *host = 'http://api.iot-ms.xyz/api/devices/data/'+userId;   //website or IP address of server\n//DHT pin\nconst int DHTPin = D4;\nDHT dht(DHTPin, DHTTYPE);\n\nstatic char celsiusTemp[7];\nstatic char fahrenheitTemp[7];\nstatic char humidityTemp[7];\n\n//=======================================================================\n//                    Power on setup\n//=======================================================================\n\nvoid setup() {\n  delay(1000);\n  Serial.begin(115200);\n  delay(10);\n  dht.begin();\n  delay(10);\n  WiFi.mode(WIFI_OFF);        //Prevents reconnection issue (taking too long to connect)\n  delay(1000);\n  WiFi.mode(WIFI_STA);        //This line hides the viewing of ESP as wifi hotspot\n  \n  WiFi.begin(ssid, password);     //Connect to your WiFi router\n  Serial.println(&quot;&quot;);\n\n  Serial.print(&quot;Connecting&quot;);\n  // Wait for connection\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(&quot;.&quot;);\n  }\n\n  //If connection successful show IP address in serial monitor\n  Serial.println(&quot;&quot;);\n  Serial.print(&quot;Connected to &quot;);\n  Serial.println(ssid);\n  Serial.print(&quot;IP address: &quot;);\n  Serial.println(WiFi.localIP());  //IP address assigned to your ESP\n}\n\n//=======================================================================\n//                    Main Program Loop\n//=======================================================================\nvoid loop() {\n  HTTPClient http;    //Declare object of class HTTPClient\n\n  String ADCDataTemp, ADCDataHum, station, postData;\n  float temperature = dht.readTemperature();  //Read Analog value of LDR\n  float humidity = dht.readHumidity();\n  Serial.print(&quot;Temperature: &quot;);\n  Serial.println(temperature);\n  Serial.print(&quot;Humidity: &quot;);\n  Serial.println(humidity);\n  \n  if (isnan(humidity) || isnan(temperature)) {\n              Serial.println(&quot;DHT sensoru okunamadi.&quot;);\n              strcpy(celsiusTemp,&quot;HATA!&quot;);\n              strcpy(fahrenheitTemp, &quot;HATA!&quot;);\n              strcpy(humidityTemp, &quot;HATA!&quot;);         \n            } \n\n    //TESTING JSON CREATION\n  String json = &quot;{\\&quot;mac_address\\&quot;: \\&quot;&quot;+WiFi.macAddress()+&quot;\\&quot;,\\&quot;temperature\\&quot;: \\&quot;&quot;+temperature+&quot;\\&quot;,\\&quot;humidity\\&quot;: \\&quot;&quot;+humidity+ &quot;\\&quot;}&quot;;\n  Serial.println(json);\n  Serial.println(&quot;MAC Address: &quot;+WiFi.macAddress());\n  ADCDataTemp = String(temperature);\n  ADCDataHum = String(humidity); //String to interger conversion\n  //Post Data\n  //const uint8_t fingerprint[20] = {};\n\n  WiFiClient clientt;\n  bool isBegin = http.begin(clientt, host);\n  if(isBegin){\n    http.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);    //Specify content-type header\n  http.addHeader(&quot;Accept&quot;,&quot;application/json&quot;);\n\n  int httpCode = http.POST(json);   //Send the request\n  String payload = http.getString();    //Get the response payload\n  \n  Serial.print(&quot;HTTP Code: &quot;);   //Print HTTP return code\n  Serial.println(httpCode);\n  Serial.print(&quot;Request response payload: &quot;);    //Print request response payload\n  Serial.println(payload);\n  }else{\n    Serial.println(&quot;HTTP begin failed!&quot;);\n  }\n  \n\n  http.end();  //Close connection\n  \n  delay(5000);  //Post Data at every 5 seconds\n}\n</code></pre>\n<p>And this is my output:</p>\n<pre><code>01:35:43.596 -&gt; .........\n01:35:48.310 -&gt; Connected to WiFi\n01:35:48.667 -&gt; Temperature: 25.50\n01:35:48.667 -&gt; Humidity: 51.00\n01:35:48.667 -&gt; HTTP begin failed!\n01:35:53.357 -&gt; Temperature: 25.60\n01:35:53.357 -&gt; Humidity: 51.00\n01:35:53.402 -&gt; HTTP begin failed!\n01:35:58.410 -&gt; Temperature: 25.60\n01:35:58.410 -&gt; Humidity: 51.00\n01:35:58.410 -&gt; HTTP begin failed!\n01:36:03.454 -&gt; Temperature: 25.70\n01:36:03.454 -&gt; Humidity: 51.00\n01:36:03.454 -&gt; HTTP begin failed!\n</code></pre>\n<p>I've checked my server url and I validated my json object. I have tried both http and https in my server url. Can you please help me? Thanks in advance...\nP.S: WiFiClient clientt with double &quot;t&quot; was intentional since when I type client it would turn to orange and I'm not very familiar with C, so I wanted to guarantee that I'm not referring to something else.</p>\n"
    }, {
        "tags": ["web-services", "contiki", "iot", "coap"],
        "is_answered": true,
        "view_count": 658,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1624427337,
        "creation_date": 1433244256,
        "question_id": 30594724,
        "link": "https://stackoverflow.com/questions/30594724/observe-multiple-resources-of-a-contiki-device-with-coap",
        "title": "Observe multiple resources of a Contiki device with CoAP",
        "body": "<p>This question concerns the CoAP protocol and the CoRE link format as implemented in Contiki-OS. </p>\n\n<p>Suppose a Contiki device sharing several resources which are: </p>\n\n<ul>\n<li>Sensors\n<ul>\n<li>Temperature</li>\n<li>Humidity</li>\n<li>Motion</li>\n<li>Battery voltage</li>\n<li>Solar panel voltage</li>\n</ul></li>\n</ul>\n\n<p>A client can access these resources with their respective URL like for example: </p>\n\n<p><code>REQ: GET /sensors/humidity</code></p>\n\n<p>Each of these resources is periodic (except Motion obviously) and observable, but the maximum number of allowed observers configured by default is limited to 3 actually.</p>\n\n<p>We could increase this number to be equal to the number of observable resources and create an observer for each of these resource (I don't know what would be the consequences). We may furthermore create a global \"Sensors\" periodic resource and share all resource at once. </p>\n\n<p>But is there a better way to do that? Is the standard providing a mechanism which allow us to combine several periodic resources in one observer?</p>\n\n<p>Thanks.</p>\n"
    }, {
        "tags": ["string", "arduino", "iot", "esp32", "gsm"],
        "is_answered": true,
        "view_count": 47,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1624128288,
        "creation_date": 1624017973,
        "last_edit_date": 1624018606,
        "question_id": 68034888,
        "link": "https://stackoverflow.com/questions/68034888/how-to-concatenate-a-int-float-value-with-a-string-within-double-quotes-using-ar",
        "title": "How to concatenate a int/float value with a string within double quotes using arduino ide",
        "body": "<p>I am trying to send my sensor data through gprs using esp32 and ai thinker a9 gsm module. I want a variable of type int/float (int) to be added between the string as follows:</p>\n<p>post = &quot;&quot;{&quot;nodeId&quot;: &quot;32456781xxxxxxx&quot;, &quot;value&quot;: {&quot;temperature&quot;: int }}&quot;&quot;;</p>\n<p>problem i am facing is i am unable to add my post variable in double quotes as per requirement of AT commands.</p>\n<p>For more info refer my output image and the problem i am facing which i need to be solved</p>\n<p><a href=\"https://i.stack.imgur.com/7S2Hw.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/AtTnr.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>i want that marked text between double quotes as shown in image 2.</p>\n<p>Thanks</p>\n"
    }, {
        "tags": ["iot", "sensors", "esp32", "arduino-ide"],
        "is_answered": false,
        "view_count": 39,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1623411161,
        "creation_date": 1623411161,
        "question_id": 67936261,
        "link": "https://stackoverflow.com/questions/67936261/dust-sensor-dsm501a-gives-illogical-results",
        "title": "Dust sensor (DSM501A) gives illogical results",
        "body": "<p>I used ESP32 To measure air quality using a set of sensors (MQ135, MQ7, DSM501A), dust sensor to measure pm10,pm2.5 . This sensor sometimes gives incorrect readings as shown in the picture.\nNote // The highest reading this sensor can reach is 1000\nDoes anyone have an idea about this issue, please help\n<a href=\"https://i.stack.imgur.com/7A4gF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7A4gF.png\" alt=\"enter image description here\" /></a></p>\n"
    }, {
        "tags": ["iot", "aws-iot-core", "amazon-timestream"],
        "is_answered": true,
        "view_count": 135,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1622119736,
        "creation_date": 1620554351,
        "last_edit_date": 1620569101,
        "question_id": 67456416,
        "link": "https://stackoverflow.com/questions/67456416/writing-data-to-aws-timestream-table-using-iot-timestamp-not-working",
        "title": "Writing data to AWS timestream table using IOT - timestamp not working",
        "body": "<p>I am trying to use iot core rules to define an action which will send a JSON object to a timestream table. the object looks like this:</p>\n<p><code>{ &quot;Time&quot;: 1483715700000, &quot;TimeUnit&quot;: &quot;MILLISECONDS&quot;, &quot;endpointID&quot;: &quot;ahu3&quot;, &quot;Introduction_temperature&quot;: 15.8 }</code></p>\n<p>the sql query:</p>\n<pre><code>SELECT Introduction_temperature FROM topic\n</code></pre>\n<p>I want to use the timestamp in the object:(Defined in the rule)</p>\n<p><code>Value:    ${Time}  </code>\n<code>Unit: MILLISECOND</code></p>\n<p>when I try to use my timestamp, nothing gets ingested into the table! it only works if I don't use my timestamp. has anyone encountered this issue before? thanks</p>\n"
    }, {
        "tags": ["json", "api", "https", "iot"],
        "is_answered": false,
        "view_count": 16,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1621909524,
        "creation_date": 1621909524,
        "question_id": 67680956,
        "link": "https://stackoverflow.com/questions/67680956/automatic-conversion-to-in-json",
        "title": "Automatic conversion [ to { in json",
        "body": "<p>I'm engaged in IOT project and sensors feed json data via API(https, POST) to our website.\nbut &quot;[&quot; in the json has been converted to &quot;{&quot; automatically though sensor seems to send correct json data.\nI'm not totally sure why this has happened.\nPlease let me know how to solve this.</p>\n<p>Expected data is below:</p>\n<blockquote>\n<p>{&quot;{&quot;device_id&quot;:&quot;861479030972354&quot;,&quot;time&quot;:&quot;2021/05/24\n12:29:00&quot;,&quot;sensors&quot;:&quot;=&gt;<strong>[</strong>&quot;\n{&quot;sensor_id&quot;:&quot;c&quot;,&quot;pH&quot;:&quot;7.5&quot;},{&quot;sensor_id&quot;:&quot;a&quot;,&quot;temperature&quot;:&quot;24.2&quot;,&quot;humidity&quot;:&quot;55.5&quot;,&quot;co2&quot;:&quot;1200&quot;},{&quot;sensor_id&quot;:&quot;b&quot;,&quot;solar_radiation&quot;:&quot;0.5&quot;},{&quot;sensor_id&quot;:&quot;d&quot;,&quot;soil_moisture&quot;:&quot;22.2&quot;,&quot;EC&quot;:&quot;22.2&quot;,&quot;temperature&quot;:&quot;22.2&quot;},{&quot;sensor_id&quot;:&quot;e&quot;,&quot;soil_moisture&quot;:&quot;33.3&quot;,&quot;EC&quot;:&quot;33.3&quot;,&quot;temperature&quot;:&quot;33.3&quot;}&quot;=&gt;{&quot;}&quot;=&gt;nil\n<strong>]</strong>}}</p>\n</blockquote>\n<p>Received data is below:</p>\n<blockquote>\n<p>{&quot;{&quot;device_id&quot;:&quot;861479030972354&quot;,&quot;time&quot;:&quot;2021/05/24\n12:29:00&quot;,&quot;sensors&quot;:&quot;=&gt;<strong>{</strong>&quot;{&quot;sensor_id&quot;:&quot;c&quot;,&quot;pH&quot;:&quot;7.5&quot;},{&quot;sensor_id&quot;:&quot;a&quot;,&quot;temperature&quot;:&quot;24.2&quot;,&quot;humidity&quot;:&quot;55.5&quot;,&quot;co2&quot;:&quot;1200&quot;},{&quot;sensor_id&quot;:&quot;b&quot;,&quot;solar_radiation&quot;:&quot;0.5&quot;},{&quot;sensor_id&quot;:&quot;d&quot;,&quot;soil_moisture&quot;:&quot;22.2&quot;,&quot;EC&quot;:&quot;22.2&quot;,&quot;temperature&quot;:&quot;22.2&quot;},{&quot;sensor_id&quot;:&quot;e&quot;,&quot;soil_moisture&quot;:&quot;33.3&quot;,&quot;EC&quot;:&quot;33.3&quot;,&quot;temperature&quot;:&quot;33.3&quot;}&quot;=&gt;{&quot;}&quot;=&gt;nil\n<strong>}</strong>}}</p>\n</blockquote>\n"
    }, {
        "tags": ["c", "iot", "uart", "rs485", "azure-sphere"],
        "is_answered": true,
        "view_count": 45,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1621893992,
        "creation_date": 1621893112,
        "question_id": 67679350,
        "link": "https://stackoverflow.com/questions/67679350/mikroe-rs485-click-with-azure-sphere-issue-sending-and-receiving-byte-arrays-u",
        "title": "Mikroe RS485 Click with Azure Sphere - Issue sending and receiving byte arrays using RS485",
        "body": "<p>I am using Avnet Azure sphere board with RS485 click board connected. In RS485 Click the GPIO PWM is made high to send RS485 signal from Click board and GPIO PWM is made low to receive RS485 signal.\nThe problem here is for sending the request it takes at least 2 seconds but the connected sensor returns the response within milliseconds before we switch back the GPIO PWM to low for receiving. Hence my UART return event is not firing. Any help would be appreciated.</p>\n<p>My send UART message function</p>\n<pre><code>static void SendUartMessage(int uartFd, const char* dataToSend, size_t totalBytesToSend, bool ignoreRx)\n{\n    size_t totalBytesSent = 0;\n    //size_t totalBytesToSend = strlen(dataToSend);\n    int sendIterations = 0;\n    close(r1PinFd);\n    r1PinFd = GPIO_OpenAsOutput(MIKROE_PWM, GPIO_OutputMode_PushPull, GPIO_Value_High);\n    while (totalBytesSent &lt; totalBytesToSend) {\n        sendIterations++;\n\n        // Send as much of the remaining data as possible\n        size_t bytesLeftToSend = totalBytesToSend - totalBytesSent;\n        const char* remainingMessageToSend = dataToSend + totalBytesSent;\n        ssize_t bytesSent = write(uartFd, remainingMessageToSend, bytesLeftToSend);\n        if (bytesSent == -1) {\n            Log_Debug(&quot;ERROR: Could not write to UART: %s (%d).\\n&quot;, strerror(errno), errno);\n            exitCode = ExitCode_SendMessage_Write;\n            return;\n        }\n\n        totalBytesSent += (size_t)bytesSent;\n    }\n    int c, d;\n\n    delay_milliseconds(2000);\n    close(r1PinFd);\n    r1PinFd = GPIO_OpenAsOutput(MIKROE_PWM, GPIO_OutputMode_PushPull, GPIO_Value_Low);\n\n    Log_Debug(&quot;Sent %zu bytes over UART in %d calls.\\n&quot;, totalBytesSent, sendIterations);\n}\n</code></pre>\n<p>My RS485 UART return event</p>\n<pre><code>static void UartEventHandler(EventLoop* el, int fd, EventLoop_IoEvents events, void* context)\n{\n    const size_t receiveBufferSize = 256;\n    uint8_t receiveBuffer[receiveBufferSize + 1]; // allow extra byte for string termination\n    ssize_t bytesRead;\n\n    // Read incoming UART data. It is expected behavior that messages may be received in multiple\n    // partial chunks.\n    bytesRead = read(uartFd, receiveBuffer, receiveBufferSize);\n    if (bytesRead == -1) {\n        Log_Debug(&quot;ERROR: Could not read UART: %s (%d).\\n&quot;, strerror(errno), errno);\n        exitCode = ExitCode_UartEvent_Read;\n        return;\n    }\n\n    if (bytesRead &gt; 0) {\n        receiveBuffer[bytesRead] = 0;\n        Log_Debug(&quot;UART received %d bytes: '%s'.\\n&quot;, bytesRead);\n        char  data_hex_str[sizeof(receiveBuffer) / sizeof(receiveBuffer[0])];\n        get_hex(receiveBuffer, sizeof(receiveBuffer) / sizeof(receiveBuffer[0]), data_hex_str, sizeof(receiveBuffer) / sizeof(receiveBuffer[0]), 16);\n        strcat(returnDataUart, data_hex_str);\n        Log_Debug(&quot;\\s&quot;, returnDataUart);\n    }\n\n    char* pjsonBuffer = (char*)malloc(JSON_BUFFER_SIZE);\n    if (pjsonBuffer == NULL) {\n        Log_Debug(&quot;ERROR: not enough memory to send telemetry&quot;);\n    }\n\n    snprintf(pjsonBuffer, JSON_BUFFER_SIZE,\n        &quot;{\\&quot;gX\\&quot;:%.2lf, \\&quot;gY\\&quot;:%.2lf, \\&quot;gZ\\&quot;:%.2lf, \\&quot;aX\\&quot;: %.2f, \\&quot;aY\\&quot;: &quot;\n        &quot;%.2f, \\&quot;aZ\\&quot;: %.2f, \\&quot;pressure\\&quot;: %.2f, \\&quot;light_intensity\\&quot;: %.2f, &quot;\n        &quot;\\&quot;altitude\\&quot;: %.2f, \\&quot;temp\\&quot;: %.2f,  \\&quot;rssi\\&quot;: %d, \\&quot;RS485\\&quot;: %s}&quot;,\n        acceleration_g.x, acceleration_g.y, acceleration_g.z, angular_rate_dps.x,\n        angular_rate_dps.y, angular_rate_dps.z, pressure_kPa, light_sensor, altitude,\n        lsm6dso_temperature, network_data.rssi, returnDataUart);\n\n    Log_Debug(&quot;\\n[Info] Sending telemetry: %s\\n&quot;, pjsonBuffer);\n    SendTelemetry(pjsonBuffer, true);\n    free(pjsonBuffer);\n}\n</code></pre>\n"
    }, {
        "tags": ["c", "iot", "esp32", "esp8266wifi"],
        "is_answered": false,
        "view_count": 56,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1621066184,
        "creation_date": 1620578282,
        "last_edit_date": 1621066184,
        "question_id": 67460106,
        "link": "https://stackoverflow.com/questions/67460106/firebasehttpclient-esp8266-cpp825-fatal-error-esp8266wifi-h-no-such-file-or",
        "title": "FirebaseHttpClient_Esp8266.cpp:8:25: fatal error: ESP8266WiFi.h: No such file or directory",
        "body": "<p>These are the header files I am using</p>\n<pre><code>#include &lt;FirebaseArduino.h&gt; // firebase library\n#include &lt;DNSServer.h&gt;\n#include &lt;WiFiManager.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;Servo.h&gt; \n</code></pre>\n<blockquote>\n<p>Error:FirebaseHttpClient_Esp8266.cpp:8:25: fatal error: ESP8266WiFi.h: No such file or directory</p>\n</blockquote>\n<p>I am using esp32 and selected FireBeetle-ESP32</p>\n<p>the code complies properly when I change the board to esp8266(generic) but I want to upload this code on esp32</p>\n<p>I looked through the internet and added wifi.h to see it works or not but again same result</p>\n"
    }, {
        "tags": ["c#", "iot", "gpio", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 1037,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1620949518,
        "creation_date": 1474727389,
        "last_edit_date": 1620949518,
        "question_id": 39677458,
        "link": "https://stackoverflow.com/questions/39677458/how-to-get-better-performance-out-of-gpio-pins-on-raspberry-pi-in-windows-iot-co",
        "title": "How to get better performance out of GPIO pins on Raspberry pi in Windows IOT core",
        "body": "<p>I have the following code running on a raspberry pi 3 running windows 10 using C#</p>\n<p>GPIO init ....</p>\n<pre><code>_gpioController = GpioController.GetDefault();\n                _motorPin = _gpioController.OpenPin(Convert.ToInt32(RaspberryGPIOpin);\n                _motorPin.SetDriveMode(GpioPinDriveMode.Output);   \n</code></pre>\n<p>GPIO pin on off</p>\n<pre><code>_motorPin.Write(GpioPinValue.High);\n_motorPin.Write(GpioPinValue.Low);\n</code></pre>\n<p>The problem is that in my application to turn on and off the GPI pin takes 100 milliseconds, but I need this it happen in less that 25 milliseconds to change the direction of a servo.</p>\n<p>Is there a way to speed up the on off of the GPIO pins?</p>\n<p>or should I be looking at a hardware controller of some sort, to control the servo. I would prefer not to do this. My code is also running in a thread as well. should I remove the threading?</p>\n<p>I have a much simpler application where the code does work...\n<a href=\"https://github.com/StuartSmith/RaspberryPi-Control-Sg90-Example\" rel=\"nofollow noreferrer\">https://github.com/StuartSmith/RaspberryPi-Control-Sg90-Example</a></p>\n"
    }, {
        "tags": ["firebase-realtime-database", "arduino", "iot", "nodemcu", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 72,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620748641,
        "creation_date": 1620748641,
        "question_id": 67490343,
        "link": "https://stackoverflow.com/questions/67490343/connect-humidity-and-temperature-sensor-neo-6m-gps-module-and-heart-rate-sensor",
        "title": "Connect Humidity and Temperature Sensor, NEO-6M GPS Module and Heart Rate Sensor to Google firebase through Nodemcu",
        "body": "<p>I'm making a device by connecting <strong>Heart Rate Pulse Sensor, DHT22/11 Humidity and Temperature Sensor and Ublox NEO-6M GPS Module</strong> to the firebase through <strong>Node MCU 1.0V</strong> I connected the each module to the firebase through <strong>Node MCU</strong> but the 3 module has 3 separate codes. But my objective is to combined all those modules and connects it to firebase by connecting all these 3 codes.</p>\n<p><em>These are the 3 separate codes.</em></p>\n<p><strong>2. For Humidity and Temperature Sensor</strong></p>\n<pre><code>#include &lt;FirebaseArduino.h&gt;   \n#include &lt;ESP8266WiFi.h&gt;   \n#include &lt;DHT.h&gt;              \n \n#define FIREBASE_HOST &quot;arduino-demo-817b5-default-rtdb.firebaseio.com&quot;      \n#define FIREBASE_AUTH &quot;Tq6Hrig4DhHLX8rtCwT3EA5Tx897PIr9TbaqVUT6&quot;            \n#define WIFI_SSID &quot;***********&quot;                                  \n#define WIFI_PASSWORD &quot;**************&quot;            \n \n#define DHTPIN D2                                            // Digital pin connected to DHT11\n#define DHTTYPE DHT11                                        // Initialize dht type as DHT 11\nDHT dht(DHTPIN, DHTTYPE);                                                    \n \nvoid setup() \n{\n  Serial.begin(115200);\n  dht.begin();                                                  //reads dht sensor data \n               \n  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);                                  \n  Serial.print(&quot;Connecting to &quot;);\n  Serial.print(WIFI_SSID);\n  while (WiFi.status() != WL_CONNECTED) {\n    Serial.print(&quot;.&quot;);\n    delay(500);\n  }\n \n  Serial.println();\n  Serial.print(&quot;Connected&quot;);\n  Serial.print(&quot;IP Address: &quot;);\n  Serial.println(WiFi.localIP());                               //prints local IP address\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);                 // connect to the firebase\n \n}\n \nvoid loop() \n{\n  float h = dht.readHumidity();                                 // Read Humidity\n  float t = dht.readTemperature();                              // Read temperature\n  \n  if (isnan(h) || isnan(t))                                     // Checking sensor working\n  {                                   \n    Serial.println(F(&quot;Failed to read from DHT sensor!&quot;));\n    return;\n  } \n  Serial.print(&quot;Humidity: &quot;);  \n  Serial.print(h);\n  String fireHumid = String(h) + String(&quot;%&quot;);                   //Humidity integer to string conversion\n  \n  Serial.print(&quot;%  Temperature: &quot;);  \n  Serial.print(t);  \n  Serial.println(&quot;\u00b0C &quot;);\n  String fireTemp = String(t) + String(&quot;\u00b0C&quot;);                  //Temperature integer to string conversion\n  delay(5000);\n \n \n  Firebase.pushString(&quot;/DHT11/Humidity&quot;, fireHumid);            //setup path to send Humidity readings\n  Firebase.pushString(&quot;/DHT11/Temperature&quot;, fireTemp);         //setup path to send Temperature readings\n    if (Firebase.failed()) \n    {\n \n      Serial.print(&quot;pushing /logs failed:&quot;);\n      Serial.println(Firebase.error()); \n      return;\n  }\n} \n</code></pre>\n<p><strong>1. For Heart Rate Pulse Sensor</strong></p>\n<pre><code>#define heartratePin 32\n#include &quot;DFRobot_Heartrate.h&quot;\n#include &lt;WiFi.h&gt;  //1. Include WiFi.h\n#include &quot;FirebaseESP32.h&quot;  //2. Include Firebase ESP32 library (this library)\n\n\n\n// Set these to run example.\n#define FIREBASE_HOST &quot;test.firebaseio.com&quot;  \n#define FIREBASE_AUTH &quot;hW8qlM48dGkxxxxxxxx1Pq5UD21YgPq2E0c&quot;\n#define WIFI_SSID &quot;Gummya&quot;\n#define WIFI_PASSWORD &quot;testtest1&quot;\n\nDFRobot_Heartrate heartrate(DIGITAL_MODE); ///&lt; ANALOG_MODE or DIGITAL_MODE\nFirebaseData firebaseData;  //3. Declare the Firebase Data object in the global scope\n\n\n\nvoid setup() {\n  Serial.begin(115200);\n  initWifi();\n}\n\nvoid loop() {\n  uint8_t rateValue;\n  heartrate.getValue(heartratePin); ///&lt; A1 foot sampled values\n  rateValue = heartrate.getRate(); ///&lt; Get heart rate value\n    if(Firebase.setInt(firebaseData,&quot;HeartBeat/BPM_data&quot;, rateValue)){\n    //if (firebaseData.dataType()== &quot;Int&quot;)\n    Serial.println(rateValue);\n  }\n\n  delay(20);\n}\n\n void initWifi(){\n    WiFi.begin(WIFI_SSID, WIFI_PASSWORD);\n  Serial.print(&quot;Connecting to Wi-Fi&quot;);\n  while (WiFi.status() != WL_CONNECTED)\n  {\n    Serial.print(&quot;.&quot;);\n    delay(300);\n  }\n  Serial.println();\n  Serial.print(&quot;Connected with IP: &quot;);\n  Serial.println(WiFi.localIP());\n  Serial.println();\n\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);\n  Firebase.reconnectWiFi(true);\n  \n  //Set database read timeout to 1 minute (max 15 minutes)\n  Firebase.setReadTimeout(firebaseData, 1000 * 60);\n  //tiny, small, medium, large and unlimited.\n  //Size and its write timeout e.g. tiny (1s), small (10s), medium (30s) and large (60s).\n  Firebase.setwriteSizeLimit(firebaseData, &quot;tiny&quot;);\n }\n</code></pre>\n<p><strong>3. For NEO-6M GPS Module</strong></p>\n<pre><code>#include &lt;WiFi.h&gt; // esp32 library\n\n#include &lt;IOXhop_FirebaseESP32.h&gt;  // firebase library\n\n#define FIREBASE_HOST &quot;led-control-4631d.firebaseio.com&quot;// the project name address from firebase id\n\n#define FIREBASE_AUTH &quot;Your Firebase secret key&quot; // the secret key generated from firebase\n\n#define WIFI_SSID &quot;Your SSID&quot;  // input your home or public wifi name\n\n#define WIFI_PASSWORD &quot;Your Passcode&quot;   //password of wifi ssid\n\nString fireStatus = &quot;&quot;; // led status received from firebase\n\nvoid setup() {\n\n  Serial.begin(9600);\n\n  delay(1000);\n           \n\n  WiFi.begin(WIFI_SSID, WIFI_PASSWORD); //try to connect with wifi\n\n  Serial.print(&quot;Connecting to &quot;);\n\n  Serial.print(WIFI_SSID);\n\n  while (WiFi.status() != WL_CONNECTED) {\n\n    Serial.print(&quot;.&quot;);\n\n    delay(500);\n\n  }\n\n  Serial.println();\n\n  Serial.print(&quot;Connected to &quot;);\n\n  Serial.println(WIFI_SSID);\n\n  Serial.print(&quot;IP Address is : &quot;);\n\n  Serial.println(WiFi.localIP());      //print local IP address\n\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);   // connect to firebase\n\n  Firebase.setString(&quot;Your feedname&quot;, &quot;your value&quot;);     //send initial string of led status\n\n}\n</code></pre>\n<p>In this situation time is against me, so I need this code before 16/05/2021 \ud83d\ude25\ud83d\ude23</p>\n<p><em>If anyone can connect these 3 codes into a 1 code ,Thank you won\u2019t be enough for what you\u2019ve doing for me. But, let me try a little. Thanks a lot for your support!</em> \u2665\u2665</p>\n"
    }, {
        "tags": ["http", "arduino", "cloud", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 70,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620734317,
        "creation_date": 1620677642,
        "last_edit_date": 1620734317,
        "question_id": 67477117,
        "link": "https://stackoverflow.com/questions/67477117/problem-reading-from-thingspeak-from-arduino",
        "title": "Problem Reading From Thingspeak from Arduino",
        "body": "<p>I am using this code to retrieve data from a Thingspeak channel in a JSON format. I am using an ESP8266 along with an Arduino Nano 33 BLE. The Nono 33 BLE Arduino board is not compatible with Thingspeak library and it doesn\u2019t support SoftwareSerial. Alternatively, I am using serial1 to communicate with the ESP8266 and REST API method to get the data from Thingspeak as it is shown in the code. However, I cannot get it to work. It is worth noting that Serial1.available() always gives zero even after adding delays.</p>\n<p>I have used the same code to send data to the same Thingspeak channel and it works perfectly. I have no clue why it is not reading from the channel. I would really appreciate any help with this problem</p>\n<p>Thanks in advance.</p>\n<pre class=\"lang-c prettyprint-override\"><code>String AP =&quot;xxxxxxxxxxx&quot;; \nString PASS =&quot;xxxxxxxxxxxxxx&quot;; \nString PORT = &quot;80&quot;;\nString field = &quot;Id&quot;;\nint countTrueCommand;\nint countTimeCommand; \nboolean found = false; \n\n \nString Data =&quot;&quot;;\nvoid setup() {\n  Serial.begin(9600);\n  Serial1.begin(115200);\n  sendCommand(&quot;AT&quot;,5,&quot;OK&quot;,false);\n  Serial1.println(&quot;AT+UART_DEF=9600,8,1,0,0&quot;);\n  delay(1000);\n  Serial1.end();\n  Serial1.begin(9600);\n  ConnectToWifi();\n}\nvoid loop() {\n  \n\nString getData=&quot;GET https://api.thingspeak.com/channels/1335558/fields/1?api_key=7XFZKXEGOV5HY4TQ&quot;;\n\n sendCommand(&quot;AT+CIPMUX=1&quot;,5,&quot;OK&quot;,false);\n sendCommand(&quot;AT+CIPSTART=4,\\&quot;TCP\\&quot;,\\&quot;&quot;+ HOST +&quot;\\&quot;,&quot;+ PORT,15,&quot;OK&quot;,false);\n sendCommand(&quot;AT+CIPSEND=4,&quot; +String(getData.length()+4),4,&quot;&gt;&quot;,false);\n\n\n sendCommand(getData,20,&quot;OK&quot;,true);\n delay(1500);\n countTrueCommand++;\n sendCommand(&quot;AT+CIPCLOSE=0&quot;,5,&quot;OK&quot;,false);\n}\n\nbool ConnectToWifi(){\n  for (int a=0; a&lt;15; a++)\n  {\n    sendCommand(&quot;AT&quot;,5,&quot;OK&quot;,false);\n    sendCommand(&quot;AT+CWMODE=1&quot;,5,&quot;OK&quot;,false);\n    boolean isConnected = sendCommand(&quot;AT+CWJAP=\\&quot;&quot;+ AP +&quot;\\&quot;,\\&quot;&quot;+ PASS +&quot;\\&quot;&quot;,20,&quot;OK&quot;,false);\n    if(isConnected)\n    {\n      return true;\n    }\n  }\n}\n\nbool sendCommand(String command, int maxTime, char readReplay[],boolean isGetData) {\n  boolean result=false;\n\n  //Test Purpose\n  Serial.print(countTrueCommand);\n  Serial.print(&quot;. at command =&gt; &quot;);\n  Serial.print(command);\n  Serial.print(&quot; &quot;);\n  while(countTimeCommand &lt; (maxTime*1))\n  {\n    Serial1.println(command);\n    if(Serial1.find(readReplay))//ok\n    {   \n      if(isGetData)\n      {      \n        if(Serial1.find(readReplay))\n        {\n          Serial.println(&quot;Success : Request is taken from the server&quot;);\n        }\n        while(Serial1.available())\n        {\n          char character = Serial1.read()\n          Data.concat(character); /\n          if (character == '\\n')\n          {\n            Serial.print(&quot;Received: &quot;);\n            Serial.println(Data);\n            delay(50);\n            Data = &quot;&quot;;\n          }\n        }                 \n      }\n      result = true;\n      break;\n    }\n    countTimeCommand++;\n  }\n  \n  if(result == true)\n  {\n    Serial.println(&quot;Success&quot;);\n    countTrueCommand++;\n    countTimeCommand = 0;\n  }\n  \n  if(result == false)\n  {\n    Serial.println(&quot;Fail&quot;);\n    countTrueCommand = 0;\n    countTimeCommand = 0;\n  }\n  \n  found = false;\n  return result;\n</code></pre>\n"
    }, {
        "tags": ["iot", "esp8266", "nodemcu", "micropython"],
        "is_answered": true,
        "view_count": 6810,
        "favorite_count": 0,
        "score": 6,
        "last_activity_date": 1620532056,
        "creation_date": 1488698987,
        "last_edit_date": 1488785718,
        "question_id": 42605717,
        "link": "https://stackoverflow.com/questions/42605717/how-can-i-reset-esp8266-micropython-after-main-py-crashes",
        "title": "How can I reset ESP8266 MicroPython after main.py crashes?",
        "body": "<p>I have a NodeMCU ESP8266 board running MicroPython. I'm running a web server on my ESP8266. This is my first IoT project based on one of these boards.</p>\n\n<p>The below is a snippet of the code. </p>\n\n<p>This is being executed within <code>main.py</code>. Every now and then, something causes the code to crash (perhaps timing and request based). When <code>main.py</code> exits, for whatever reason, I'm dropped back at the python CLI.</p>\n\n<p>I'd like for the board to reset when this happens (if there isn't a better way).</p>\n\n<p>What is the best method of restarting/reseting the ESP8266?</p>\n\n<pre><code>addr = socket.getaddrinfo('0.0.0.0', 80)[0][-1]\n\ns = socket.socket()\ns.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\ns.bind(addr)\ns.listen(5)\nprint('listening on', addr)\n\nwhile True:\n    cl, addr = s.accept()\n    print('client connected from', addr)\n    cl_file = cl.makefile('rwb', 0)\n    print(\"Request:\")\n    while True:\n        line = cl_file.readline()\n        print(\"Line:\" , line)\n        if not line or line == b'\\r\\n':\n            print(\"breaking\")\n            break\n        if line == b'GET /active HTTP/1.1\\r\\n':\n</code></pre>\n"
    }, {
        "tags": ["arduino", "mqtt", "iot"],
        "is_answered": true,
        "view_count": 53,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620452265,
        "creation_date": 1620368124,
        "last_edit_date": 1620452265,
        "question_id": 67429848,
        "link": "https://stackoverflow.com/questions/67429848/best-way-to-split-arduino-files",
        "title": "Best way to split arduino files",
        "body": "<p>I\u00b4m looking for the best way to split arduino files, the code that I had pasted below it just for compiled test is only to understand how this works. In this example I try to split my MQTT code.</p>\n<p>This the enviroment:</p>\n<p><strong>main.ino file:</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>        #include &quot;file.h&quot;\n        //and more libraries\n        void setup() {\n          // put your setup code here, to run once:\n          Serial.begin(115200);\n          setup_mqtt(); //declared in file.h\n        }\n       \n        // a lot of code here\n    \n        void loop() {\n          // put your main code here, to run repeatedly:\n            if (!client.connected()) {\n            reconnect(); //declared in file.h\n            mqtt_mensaje(); //declared in file.h\n          }\n        }\n</code></pre>\n<p><strong>file.h file:</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>    void setup_mqtt();\n    void callback(char* topic, byte* payload, unsigned int length);\n    void reconnect();\n    void mqtt_mensaje();\n</code></pre>\n<p><strong>file.cpp file</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>    #include &lt;Arduino.h&gt;\n    #include &lt;WiFiClient.h&gt;\n    #include &lt;PubSubClient.h&gt;\n    #define LED_BUILTIN 4   \n    const char* mqtt_server = &quot;192.168.1.18&quot;;\n    // Connecti\u00f3n WiFi +  Broker\n    WiFiClient espClient;\n    PubSubClient client(espClient);\n    \n    // Function MQTT ------------------------\n    void reconnect() {\n     //code\n    }\n    void callback(char* topic, byte* payload, unsigned int length) {\n      //code\n      reconnect();\n    }\n    \n    void mqtt_mensaje() {\n    //code PUB message\n    }\n    //End Functions MQTT-----------------------\n\n    void setup_mqtt(){\n      \n      pinMode(LED_BUILTIN, OUTPUT);      \n      digitalWrite(LED_BUILTIN, LOW);    \n    \n      // Configuraci\u00f3n MQTT\n      client.setServer(mqtt_server, 1883);\n      client.setCallback(callback);\n    }\n</code></pre>\n<p>When I run this code in my Arduino IDE I get :</p>\n<p><strong>/Users/charlysan/Projects/works/arduino/main/main.ino: In function 'void loop()':\nmain:9:10: error: 'client' was not declared in this scope\nif (!client.connected()) {\n^</strong></p>\n<p>Any help will be appreciated</p>\n"
    }, {
        "tags": ["firebase", "arduino", "iot", "sim800l"],
        "is_answered": false,
        "view_count": 93,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1620297209,
        "creation_date": 1618776370,
        "question_id": 67152915,
        "link": "https://stackoverflow.com/questions/67152915/retrieving-data-from-firebase-realtime-database-to-arduino-using-sim800l",
        "title": "Retrieving data From FIrebase Realtime Database to arduino using SIM800l",
        "body": "<p>i tried to retrieve a data from firebase realtime database to arduino. I already success to send the data to firebase from arduino using SIM800l but i dont know how to retrieve the data from the db. Do you have an idea how to solve this problem.</p>\n"
    }, {
        "tags": ["lua", "arduino", "iot", "esp8266", "nodemcu"],
        "is_answered": false,
        "view_count": 2248,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1619184030,
        "creation_date": 1468174314,
        "last_edit_date": 1468691824,
        "question_id": 38295013,
        "link": "https://stackoverflow.com/questions/38295013/esp8266-fatal-exception-0-using-nodemcu",
        "title": "ESP8266 Fatal exception (0) using NodeMCU",
        "body": "<p>When i boot ESP8266 i'm getting on my arduino MEGA serial monitor.</p>\n\n<pre><code>Fatal exception (0): e2= 0d00l(xp00v0xao1,00e0c pe80c00d0x:2= 0d00l(xp00v0xao1,00e0c pe80c00d0x:2= 0d00l(xp00v0xao1,00e0c e 0xp0= 0e)02,0d00a 0e00c00Fic00= 0p0e 0xp0= 0e)02 \n</code></pre>\n\n<p>If i do a hard reset than it prints </p>\n\n<pre><code>Jan 8 2013,rst cause:4, boot mode:(3,6) wdt reset load 0x40100000, len 28740, room 16 tail 4 chksum 0xcd load 0x3ffe8000, len 2888, room 4 tail 4 0xeotail 0 chks \n</code></pre>\n\n<p>I used NodeMcu flasher nodemcu_integer_0.9.5_20150318.bin and NodeMCU 0.9.5 build 20150318 powered by Lua 5.1.4. I'm using arduino UART (serial monitor) to talk to ESP8266. BAUD RATE : 115200 FLASH SIZE : 4MB FLASH SPEED : 40MHz SPI : DIO Module is powered with apt power (separate power supply)</p>\n\n<p>Here's my connections:</p>\n\n<pre><code>//////////////////////////////////////////////////////////////////////////////\n    ///////                         CONNECTIONS              ////////\n    /////////////////////////////////////////////////////////////////////////////\n    /*\n    ESP8266 VCC -&gt; BeagleBone 3.3\n    ESP8266 GND -&gt; Common GND (Arduino &amp; BeagleBone)\n    ESP8266 CH_PD -&gt; 3K resistor -&gt; VCC\n    ESP8266 RST -&gt; VCC or pin 13(arduino)\n    GPIO CAB BE LEFT OPEN OR TIED HIGH\n    ESP8266 Tx -&gt; pin2 (Arduino software serial Rx)\n    ESP8266 Rx &lt;- Voltage Divider &lt;- pin3 (Arduino software serial Tx)\n    */\n</code></pre>\n\n<p>Here's my code</p>\n\n<pre><code>#define esp8266 Serial2\n#define CH_PD Vcc // but needs a narrow low pulse\n#define speed8266 9600 // This is the speed that worked with my ESP8266\nvoid setup()\n{\n esp8266.begin (speed8266);\n Serial.begin(9600);\n reset8266(); // Pin CH_PD need a reset before start communication\n}\nvoid loop()\n{\n while(esp8266.available())\n { Serial.write(esp8266.read()); }\n while(Serial.available())\n { esp8266.write(Serial.read()); }\n}\n/*************************************************/\n// Reset funtion to accept communication\nvoid reset8266 ()\n{\n pinMode(CH_PD, OUTPUT);\ndigitalWrite(CH_PD, LOW);\n delay(300);\n digitalWrite(CH_PD, HIGH);\n}\n</code></pre>\n\n<p>Here are some snaps of the configuration i did in NodeMCU ( i had already tried with different baud rates)</p>\n\n<p><a href=\"http://i.stack.imgur.com/xdcSp.jpg\" rel=\"nofollow\">Advanced Configuration</a>\n<a href=\"http://i.stack.imgur.com/uFZm1.jpg\" rel=\"nofollow\">Configuration</a></p>\n"
    }, {
        "tags": ["macos", "iot", "gravio"],
        "is_answered": false,
        "view_count": 10,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1619066125,
        "creation_date": 1619066125,
        "question_id": 67206831,
        "link": "https://stackoverflow.com/questions/67206831/why-are-some-of-my-gravio-processes-stuck-in-a-restarting-cycle",
        "title": "Why are some of my Gravio processes stuck in a restarting cycle?",
        "body": "<p>My Gravio is stuck in a restarting cycle (i.e. the status is turning yellow and green in the menubar menu) on a Mac. I can see it on the settings view where it says &quot;stopped&quot; next to &quot;Trigger Manager&quot; and &quot;Action Manager&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/okdHP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/okdHP.png\" alt=\"Gravio HubKit status light in menu bar\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/GAlQV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GAlQV.png\" alt=\"Gravio HubKit Mac Settings Screen\" /></a></p>\n"
    }, {
        "tags": ["iot", "contiki", "cooja", "contiki-process"],
        "is_answered": false,
        "view_count": 67,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1617972758,
        "creation_date": 1604684125,
        "last_edit_date": 1617972758,
        "question_id": 64719209,
        "link": "https://stackoverflow.com/questions/64719209/how-to-use-powertrace-in-cooja-for-sky-websense-c-in-cooja",
        "title": "How to use powertrace in cooja for sky-websense.c in cooja?",
        "body": "<p>I want to add powertrace to sky-websense.c but it was giving me an error.<br/>\nSteps I did:<br/></p>\n<ol>\n<li>Include <code>APPS+=powertrace</code> in Makefile.<br/></li>\n<li><code>#include &quot;powertrace.h&quot;</code> in <code>sky-websense.c</code> file.<br/></li>\n<li>Added <code>powertrace_start(CLOCK_SECOND*5);</code> in <code>PROCESS_THREAD(web_sense_process, ev, data)</code> in <code>sky-websense.c</code><br/></li>\n</ol>\n<p>Did I do anything wrong?</p>\n"
    }, {
        "tags": ["stm32", "iot", "esp8266", "cortex-m"],
        "is_answered": false,
        "view_count": 2538,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1617616004,
        "creation_date": 1458050218,
        "last_edit_date": 1458101918,
        "question_id": 36013360,
        "link": "https://stackoverflow.com/questions/36013360/sending-data-from-stm32f401-mcu-to-esp8266-and-getting-response-from-esp8266-to",
        "title": "Sending data from STM32F401 MCU to ESP8266 and getting response from ESP8266 to MCU",
        "body": "<p>I am working on an STM32f401 Nucleo board and ESP8266 wifi module. I am using Eclipse gcc-arm tool chain and cubeMx to generate code. I can transfer and receive data perfectly with USART/UART DMA.</p>\n\n<p>Now I am stuck with ESP8266. I cannot send data from MCU to ESP and I'm not getting  response from ESP to MCU. I already tested the ESP module communication, I can connect TO THE wifi with AT commands through USB and can also receive data in web via socket connection.</p>\n\n<p>I configured USART1_TX/USART1_RX with PA9/PA10</p>\n\n<p>Thanks in advance.</p>\n"
    }, {
        "tags": ["python", "iot"],
        "is_answered": false,
        "view_count": 44,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1617379884,
        "creation_date": 1617308478,
        "question_id": 66911080,
        "link": "https://stackoverflow.com/questions/66911080/reading-the-longitude-280-from-a-4-byte-hexadecimal-number",
        "title": "Reading the longitude [28:0] from a 4 byte hexadecimal number",
        "body": "<p>I am receiving a longitude and accuracy as a 4 byte hexadecimal string: <code>99054840</code>\nI'm trying to extract a longitude from this value.</p>\n<p>The specs tell me the following:</p>\n<ul>\n<li><p>Bits [28:0]: signed value \u03bb, little-endian format, longitude in \u00b0 = \u03bb \u00f7 1,000,000</p>\n</li>\n<li><p>Bits [31:29]: unsigned value \u03b1, range 0-7, a measure for accuracy</p>\n</li>\n</ul>\n<p>My device is located physically at a longitude of 4.7199. So I now what the result of the conversion should be.</p>\n<p>To read the value of the longitude I currently do (with incorrect result):</p>\n<pre><code>def get_longitude(reading):\n    # split in different bytes\n    n=2\n    all_bytes = [reading[i:i+n] for i in range(0, len(reading), n)]\n    \n    # convert to binary\n    long_bytes_binary = list(map(hex_to_binary, all_bytes))\n    \n    # drop the accuracy bits\n    long_bytes_binary[3] = long_bytes_binary[3][0:5]\n\n    # little endian &amp; concatenate bytes\n    longitude_binary = ''.join(list(reversed(long_bytes_binary)))\n\n    # get longitude\n    lon = binary_to_decimal(int(longitude_binary))/1_000_000\n\n</code></pre>\n<p>Which comes to 138.93. So totally different from the 4.7199 (expected outcome)</p>\n<p>Here are the helper methods</p>\n<pre><code>def hex_to_binary(payload):\n    scale = 16\n    num_of_bits = 8\n    binary_payload = bin(int(payload, scale))[2:].zfill(num_of_bits)\n    return binary_payload   \n\ndef binary_to_decimal(binary): \n  binary1 = binary\n  decimal, i, n = 0, 0, 0\n  while(binary != 0):\n    dec = binary % 10\n    decimal = decimal + dec * pow(2, i)\n    binary = binary//10\n    i += 1\n  return decimal \n</code></pre>\n<p>What am I doing wrong? How can I correctly read the value?\nOr is my device broken :)</p>\n"
    }, {
        "tags": ["lua", "sensors", "motion", "iot"],
        "is_answered": true,
        "view_count": 2015,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1615925918,
        "creation_date": 1431767497,
        "question_id": 30273847,
        "link": "https://stackoverflow.com/questions/30273847/domoticz-lua-motion-sensor",
        "title": "Domoticz lua motion sensor",
        "body": "<p>--this script will turn of the light at the second living room when there is x min no movement detected on the Motion Sensor.</p>\n\n<p>--The script does run and it sometime works, like once or twice a day. but it has to work always, I can't figure out why it is not working. </p>\n\n<pre><code>t1 = os.time()\ns = otherdevices_lastupdate['Motion']\n\nyear = string.sub(s, 1, 4)\nmonth = string.sub(s, 6, 7)\nday = string.sub(s, 9, 10)\nhour = string.sub(s, 12, 13)\nminutes = string.sub(s, 15, 16)\nseconds = string.sub(s, 18, 19)\n\ncommandArray = {}\n\nt2 = os.time{year=year, month=month, day=day, hour=hour, min=minutes, sec=seconds}\ndifference = (os.difftime (t1, t2))\nprint(difference)\n\nif (otherdevices['Motion'] == 'On' and difference &gt; 60 and difference &lt; 200) then\n    commandArray['Light']= 'Off'\n    print('2 minutes no movement, turn off Light 2th Living Room')\nend \n\nreturn commandArray\n</code></pre>\n"
    }, {
        "tags": ["iot", "esp8266"],
        "is_answered": false,
        "view_count": 138,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1615391030,
        "creation_date": 1615390113,
        "last_edit_date": 1615391030,
        "question_id": 66567874,
        "link": "https://stackoverflow.com/questions/66567874/esp8266-wifi-control-client-print",
        "title": "ESP8266 WiFi Control Client.print",
        "body": "<p>I am trying to send an integer number from one ESP8266 to another over WiFi. So I set one of them to be Client and another to be Server. Below is the code for my server</p>\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n\nconst char* ssid = &quot;ESP_D54736&quot;;  // SSID of esp8266\nESP8266WebServer server(80);    //Specify port for TCP connection\n\nvoid handleSpecificArg() { \n  String message = &quot;&quot;;\n  if (server.arg(&quot;Temperature&quot;)== &quot;&quot;){     //Parameter not found\n    message = &quot;Temperature Argument not found&quot;;\n    }\n  else{     //Parameter found\n    message = &quot;Temperature Argument = &quot;;\n    message += server.arg(&quot;Temperature&quot;);     //Gets the value of the query parameter\n    }\n  server.send(200, &quot;text/plain&quot;, message);          //Returns the HTTP response\n  Serial.println(server.arg(&quot;Temperature&quot;));\n  }\n  \n\nvoid setup() {\n  delay(200);                           //Stable Wifi\n  Serial.begin(115200);                 //Set Baud Rate\n  pinMode(2, OUTPUT);                   //Led/Solenoid at pin 2\n  WiFi.softAP(ssid);//, password);      //In Access Point Mode\n\n  IPAddress myIP = WiFi.softAPIP();   //Check the IP assigned. Put this Ip in the client host.\n  Serial.print(&quot;AP IP address: &quot;);\n  Serial.println(myIP);     //Print the esp8266-01 IP(Client must also be on the save IP series)\n  server.on(&quot;/specificArgs&quot;, handleSpecificArg);\n  server.begin();                       // Start the server\n  Serial.println(&quot;Server started&quot;);\n}\n\nvoid loop() {\n  // Check if a client has connected. On first connection switch on the Solenoid on next switch off.\n  server.handleClient();\n}\n</code></pre>\n<p>Using my phone browser I can connect to the ESP8266 and then go to 192.168.1.103/specificArgs?Temperature=100. By doing this I can get the value 100 for the temperature. Now for client ESP8266, my code is:</p>\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt; \nconst char* host = &quot;192.168.1.103&quot;; \n\nvoid setup() {\n  Serial.begin(115200);          //Baud Rate for Communication\n  delay(10);                     //Baud rate prper initialization\n  WiFi.mode(WIFI_STA);           //NodeMcu esp12E in station mode\n  WiFi.begin(&quot;ESP_D54736&quot;);      //Connect to this SSID. In our case esp-01 SSID.  \n\n  while (WiFi.status() != WL_CONNECTED) {  //Wait for getting IP assigned by Access Point/ DHCP. \n  //Our case  esp-01 as Access point will assign IP to nodemcu esp12E.\n    delay(500);\n    Serial.print(&quot;.&quot;);\n  }\n  Serial.println(&quot;&quot;);\n  Serial.println(&quot;WiFi connected&quot;);  \n  Serial.println(&quot;IP address: &quot;);\n  Serial.println(WiFi.localIP());             //Check out the Ip assigned by the esp12E\n}\n\nvoid loop() {\n  \n  Serial.print(&quot;connecting to &quot;);\n  Serial.println(host);\n  // Use WiFiClient class to create TCP connections\n  WiFiClient client;\n  const int httpPort = 80;\n    if (!client.connect(&quot;192.168.1.103&quot;, httpPort)) {\n      Serial.println(&quot;connection failed&quot;);\n      return;\n       }    \n  client.print(&quot;/specificArgs?Temperature=500&quot;); \n  delay(10);\n  // Read all the lines of the reply from server and print them to Serial Monitor etc\n  while(client.available()){\n    String line = client.readStringUntil('\\r');\n    Serial.print(line);\n  }\n  //Close the Connection. Automatically\n  Serial.println();\n  Serial.println(&quot;closing connection&quot;);             \n delay(5000);           \n\n}\n</code></pre>\n<p>It seems like the &quot;client.print(&quot;/specificArgs?Temperature=500&quot;);&quot; is not working. What am I doing wrong?</p>\n"
    }, {
        "tags": ["embedded", "iot", "esp32"],
        "is_answered": false,
        "view_count": 16,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1615024940,
        "creation_date": 1615024940,
        "question_id": 66504474,
        "link": "https://stackoverflow.com/questions/66504474/esp32-wroom-32-interfacing-3-5intft-when-i-am-initializing-wifi-begin-touch",
        "title": "esp32 wroom 32 interfacing 3.5intft , when i am initializing wifi.begin() touch is not working",
        "body": "<p>i am using esp32 wroom 32 with 3.5in tft display with touch. When i start wifi.begin() function the touch screen stops working. Is there a way that only when needed i initialized the wifi.begin() and completely stop it once my network job is done so that my other function will not be affected. Need help ?\nThe link for display is given below .</p>\n<p><a href=\"https://www.electronicscomp.com/3.5-inch-tft-lcd-touch-screen-display-shield-for-arduino-uno?gclid=Cj0KCQiA7YyCBhD_ARIsALkj54pxnq5gbIw7nzp1ay5SpwpX0VK0aWm3OPNolWvX0fM0BB1ryCqyM94aAsPVEALw_wcB\" rel=\"nofollow noreferrer\">https://www.electronicscomp.com/3.5-inch-tft-lcd-touch-screen-display-shield-for-arduino-uno?gclid=Cj0KCQiA7YyCBhD_ARIsALkj54pxnq5gbIw7nzp1ay5SpwpX0VK0aWm3OPNolWvX0fM0BB1ryCqyM94aAsPVEALw_wcB</a></p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "esp32"],
        "is_answered": false,
        "view_count": 47,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1614965888,
        "creation_date": 1614226848,
        "last_edit_date": 1614251346,
        "question_id": 66362358,
        "link": "https://stackoverflow.com/questions/66362358/does-ibm-watson-iot-platform-accepts-text-string-value",
        "title": "does IBM Watson IOT platform accepts text/string value?",
        "body": "<p>I've successfully sent value of float number=5 from my esp32 to IBM Watson IoT platform and it got captured or received in the board which I created by selecting number in the board but when I'm sending a string or text value instead of number then it was not able to capture so now im confused because while creating the board I've set to text value for capturing or receiving string/text.\nHere is the code snippet that I used to send my number value but when I change to string value it does not work so any suggestion:</p>\n<p>float number=5;\nString text=&quot;hello&quot;;</p>\n<pre><code>    String payload = &quot;{\\&quot;d\\&quot;:{\\&quot;Name\\&quot;:\\&quot;&quot; DEVICE_ID &quot;\\&quot;&quot;;\n          payload += &quot;,\\&quot;text\\&quot;:&quot;;\n          payload += text;\n          payload += &quot;}}&quot;;\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "arduino-uno", "android-sensors", "arduino-ide"],
        "is_answered": false,
        "view_count": 151,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1613753356,
        "creation_date": 1613753356,
        "question_id": 66281723,
        "link": "https://stackoverflow.com/questions/66281723/arduino-interrupt-getting-triggered-more-than-once-working-with-hall-sensor-fo",
        "title": "Arduino Interrupt getting triggered more than once - Working with Hall Sensor for RPM",
        "body": "<p>I am working with an hall sensor for counting the RPM of my wheel. I am using following sensor :\n<a href=\"https://i.stack.imgur.com/n7RJp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n7RJp.png\" alt=\"enter image description here\" /></a></p>\n<p>My code as follows :</p>\n<pre><code>int hall_pin = 3;  // digital pin\nfloat hall_threshold = 5.0;\nfloat count = 0;\n\nvoid setup() {\n  pinMode(hall_pin,INPUT);// put your setup code here, to run once:\n  Serial.begin(9600);\n  attachInterrupt(digitalPinToInterrupt(hall_pin),hall_ISR,RISING);\n}\n\nvoid loop() {\n  count = 0.0;\n  float start = micros();\n   \n  while(1){\n    \n    if(count &gt;= hall_threshold){\n      break;\n    } \n  }\n   \n  float end_time = micros();\n  float time_passed = (end_time - start)/1000000.0;  // in seconds\n  float rpm = (count/time_passed)*60.0;\n  Serial.println(rpm);\n  delay(10000);\n  \n\n}\n\nvoid hall_ISR()           \n{    \n   count+=1.0;\n}\n</code></pre>\n<p>I am using digital pin 3 to read from sensor and count the number of times it detects magnetic field using interrupt. Since the sensor outputs 1 on detecting, I have used  a <code>RISING</code> interrupt. Once the <code>count</code> is greater than 5 then the control comes out of the infinite loop and calculates the RPM. The problem is this interrupt is getting triggered multiple times. I have tried using <code> detachInterrupt(hall_pin)</code> but it is not working. I also tried to decrease the sensitivity of hall sensor using the trimmer provided.</p>\n<p>I am sure the problem is not with the sensor, it is with the interrupt, I guess. Where am I going wrong?\nAny help is very much appreciated!</p>\n<p>Thank you.</p>\n"
    }, {
        "tags": ["embedded-linux", "iot", "gsm", "esp32", "firmware"],
        "is_answered": false,
        "view_count": 66,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1613652197,
        "creation_date": 1613541114,
        "last_edit_date": 1613652197,
        "question_id": 66236404,
        "link": "https://stackoverflow.com/questions/66236404/not-able-to-do-a-pppos-client-initialisation-for-cavli-c10am-interfaced-with-esp",
        "title": "Not able to do a pppos client initialisation for Cavli C10AM interfaced with ESP WROOM32",
        "body": "<p>OS: Linux (Ubuntu Mate v20.04)\nMCU: ESP WROOM 32\nLTE Module: Cavli C10AM\nInterface type: Typical UART interface\nESP-IDF Version: ESP-IDF v4.3-dev-2586-g526f68239</p>\n<p>I am trying to interface ESP32 with Cavli C10AM LTE module and trying to upload files from ESP32 to server using LTE module. The connections are made (typical UART) and successfully initialised the LTE module using basic AT command. After initialisation, I am trying to initiate ppp connection from ESP32 to LTE module. I am using the inbuilt pppos_client library available in the ESP-IDF. But my DCE(LTE Module) is not been identified. I have also tried the same with SIM 800L GSM module, still no luck. The error screenshot is attached below.\n<a href=\"https://i.stack.imgur.com/yOPWC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have also tried the github code from the following repository.\nLink: <a href=\"https://github.com/loboris/ESP32-PPPOS-EXAMPLE\" rel=\"nofollow noreferrer\">https://github.com/loboris/ESP32-PPPOS-EXAMPLE</a></p>\n<p>For some reason I am not able to get the correct response for the ppp client connection. Without ppp connection I am not able to establish a secured SSL/TSL connection using mbedtls library.</p>\n<p>Still no luck with it.</p>\n<p>If anyone knows any solution to anyone of the above cases, please help me with it. Thanks in advance for any leads.</p>\n<p>The google drive link of entire project is here: <a href=\"https://drive.google.com/drive/u/1/folders/1b6GLJlKufz7iCGBXcEjhz7qi6nf2eM5v\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/u/1/folders/1b6GLJlKufz7iCGBXcEjhz7qi6nf2eM5v</a></p>\n<p>Since it has dependencies I have uploaded entire code.</p>\n<p>components/libGSM.c contains the main library code.(containing the pppos function)</p>\n<p>main-&gt;pppos_client_main.c is the main code, which is the entry point of the code.</p>\n<p>The error related to pppos is:</p>\n<pre><code>    I (6361) [PPPOS CLIENT]: Skip command: [AT..]\n    I (6361) [PPPOS CLIENT]: Skip command: [ATZ..]\n    I (6361) [PPPOS CLIENT]: Skip command: [ATE0..]\nI (6365) [PPPOS CLIENT]: Skip command: [AT+CFUN=1..]\nI (6371) [PPPOS CLIENT]: Skip command: [AT+CNMI=0,0,0,0,0..]\nI (6377) [PPPOS CLIENT]: Skip command: [AT+CPIN?..]\nI (6482) [PPPOS CLIENT]: AT COMMAND: [AT+CREG?..]\nI (6508) [PPPOS CLIENT]: AT RESPONSE: [..+CREG: 2,1,&quot;2036&quot;,&quot;0ada5f17&quot;,7....OK..]\nI (8608) [PPPOS CLIENT]: AT COMMAND: [AT+CGDATA=&quot;&quot;,1..]\nI (8632) [PPPOS CLIENT]: AT RESPONSE: [..CONNECT..]\nI (9632) [PPPOS CLIENT]: GSM initialized.\nI (9664) [HTTPS]: Seeding the random number generator\nI (9675) [HTTPS]: Loading the CA root certificate...\nI (9682) [HTTPS]: Setting hostname for TLS session...\nI (9685) [HTTPS]: Setting up the SSL/TLS structure...\nI (9709) [HTTPS]: ===== HTTPS GET REQUEST =========================================\n\nI (9709) [HTTPS]: Connecting to api.dozee.info:443...\nE (9714) [HTTPS]: mbedtls_net_connect returned -52\nI (9720) [HTTPS]: 0 bytes read, 0 in buffer\nE (9724) [HTTPS]: Last error was: -0x52 - UNKNOWN ERROR CODE (0052)\nI (9731) [HTTPS]: Waiting 300 sec...\nI (9735) [HTTPS]: =================================================================\n</code></pre>\n"
    }, {
        "tags": ["ubuntu", "bluetooth", "embedded", "bluetooth-lowenergy", "iot"],
        "is_answered": true,
        "view_count": 50,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1612883630,
        "creation_date": 1612882725,
        "question_id": 66121467,
        "link": "https://stackoverflow.com/questions/66121467/connecting-an-iot-device-to-ubuntu-using-bluetooth-beacon",
        "title": "Connecting an IoT device to Ubuntu using bluetooth beacon",
        "body": "<p>I have a IOT device that I want to connect to Ubuntu through a bluetooth connection. It has some sort of password on its bluetooth beacon. From my understanding my IoT device will share it's settings and all functions that's already &quot;ready to go&quot; thanks to an app/software on Ubuntu if I connect to it using bluetooth. What app/software do I need that will show me all these functions? What do I need to have this illuminate itself?</p>\n"
    }, {
        "tags": ["loops", "arduino", "iot"],
        "is_answered": true,
        "view_count": 1645,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1612728233,
        "creation_date": 1479839315,
        "last_edit_date": 1612728233,
        "question_id": 40749100,
        "link": "https://stackoverflow.com/questions/40749100/arduino-run-2-commands-at-the-same-time",
        "title": "Arduino run 2 commands at the same time",
        "body": "<p>I have connected 3 devices to my Arduino Uno: Servo Motor, LED and a Distance Sensor. Now when the distance is 10cm or smaller then my led is going off. My led is going on when the distance is larger then 10cm this is working fine. But now when I have added my Servo motor I need to wait when my loop is done before my distance sensor is sending the signal to my led. How can I fix this ?</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;Servo.h&gt;\n\nint servoPin = 9;\n\nconst int trigPin = 7;\nconst int echoPin = 8;\nint led = 13;\nlong duration, cm;\nServo servo;\nint angle = 0;\n\nvoid setup()\n{\n    // initialize serial communication:\n    Serial.begin(9600);\n\n    pinMode(led, OUTPUT);\n    pinMode(echoPin, INPUT);\n\n    servo.attach(servoPin);\n}\n\nvoid loop()\n{\n\n    if (afstandTotmuur() &gt;= 10) {\n        digitalWrite(led, HIGH);\n    }\n    else {\n        digitalWrite(led, LOW);\n    }\n\n    for (angle = 0; angle &lt; 180; angle++) {\n        servo.write(angle);\n        delay(15);\n    }\n}\n\nlong afstandTotmuur()\n{\n    pinMode(trigPin, OUTPUT);\n    // digitalWrite(trigPin, LOW);\n    // delayMicroseconds(2);\n    digitalWrite(trigPin, HIGH);\n    delayMicroseconds(10);\n    digitalWrite(trigPin, LOW);\n\n    duration = pulseIn(echoPin, HIGH);\n\n    // convert the time into a distance\n    cm = microsecondsToCentimeters(duration);\n\n    return cm;\n}\n\nlong microsecondsToCentimeters(long microseconds)\n{\n    return microseconds / 29 / 2;\n}\n</code></pre>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "iot", "temperature", "xiaomi"],
        "is_answered": true,
        "view_count": 85,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1612278147,
        "creation_date": 1612251981,
        "last_edit_date": 1612254566,
        "question_id": 66005510,
        "link": "https://stackoverflow.com/questions/66005510/what-does-the-returned-value-of-ble-thermometer-mean",
        "title": "what does the returned value of BLE thermometer mean?",
        "body": "<p>I am using xiaomi LYWSD03MMC , I have got temperature of this device by BLE characteristics and it shows : <strong>21 0a 17 7e 0b</strong>  , However I know this is hex value but unfortunately i can't understand what does it mean.I only know the number 17, which is the amount of humidity, which is hex, and when I convert it to decimal it returns 23.</p>\n"
    }, {
        "tags": ["amazon-web-services", "amazon-s3", "iot", "esp32", "aws-iot"],
        "is_answered": false,
        "view_count": 95,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1611145306,
        "creation_date": 1605625451,
        "question_id": 64877804,
        "link": "https://stackoverflow.com/questions/64877804/how-can-esp32-retrieve-a-code-stored-in-amazon-s3-database-and-execute-it-instan",
        "title": "How can ESP32 retrieve a code stored in Amazon S3 database and execute it instantly?",
        "body": "<p>As a part of my project, I am trying to integrate ESP32 with some of the AWS services.</p>\n<p>One of the task demands to store certain codes(stored as '.ino' files) of ESP32(in Arduino IDE) in Amazon S3 buckets(cloud storage). Whenever the user(For example: a mobile app) or ESP32 itself sends requests to AWS S3 server to retrieve any .ino file, that particular .ino file should be received and executed instantaneously by ESP32.</p>\n<p>While trying to figure out the solution for the above, I am stuck thinking about how exactly will ESP32  execute the code retrieved from cloud   while maintaining a web-socket connection with AWS Servers.</p>\n<p>One of the possible solutions which I thought was using Dual Core Processing in ESP32 but I am not exactly sure how and where this would be used in my Arduino IDE code</p>\n<p>It would be great if someone could throw some light on the above query!</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 1441,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1609213475,
        "creation_date": 1609213475,
        "question_id": 65487056,
        "link": "https://stackoverflow.com/questions/65487056/connection-error-in-esp-8266-module-does-not-exist-or-your-board-is-not-connect",
        "title": "Connection error in ESP 8266 module (does not exist or your board is not connected)",
        "body": "<p>I get the following error which I try to upload the code. I tried changing the upload speed and changing cable, nothing worked. Thanks in advance. cheers !!</p>\n<p>Arduino: 1.8.13 (Windows 10), Board: &quot;NodeMCU 1.0 (ESP-12E Module), 80 MHz, Flash, Legacy (new can return nullptr), All SSL ciphers (most compatible), 4MB (FS:2MB OTA:~1019KB), 2, v2 Lower Memory, Disabled, None, Only Sketch, 921600&quot;</p>\n<p>Executable segment sizes:</p>\n<p>IROM   : 248548          - code in flash         (default or ICACHE_FLASH_ATTR)</p>\n<p>IRAM   : 27928   / 32768 - code in IRAM          (ICACHE_RAM_ATTR, ISRs...)</p>\n<p>DATA   : 1312  )         - initialized variables (global, static) in RAM/HEAP</p>\n<p>RODATA : 2220  ) / 81920 - constants             (global, static) in RAM/HEAP</p>\n<p>BSS    : 25568 )         - zeroed variables      (global, static) in RAM/HEAP</p>\n<p>Sketch uses 280008 bytes (26%) of program storage space. Maximum is 1044464 bytes.</p>\n<p>Global variables use 29100 bytes (35%) of dynamic memory, leaving 52820 bytes for local variables. Maximum is 81920 bytes.</p>\n<p>esptool.py v2.8</p>\n<p>Serial port COM6</p>\n<p>Connecting........</p>\n<p>Traceback (most recent call last):</p>\n<p>File &quot;C:\\Users\\Chathura\\AppData\\Local\\Arduino15\\packages\\esp8266\\hardware\\esp8266\\2.7.4/tools/upload.py&quot;, line 65, in </p>\n<pre><code>esptool.main(cmdline)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 2890, in main</p>\n<pre><code>esp.connect(args.before)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 478, in connect</p>\n<pre><code>last_error = self._connect_attempt(mode=mode, esp32r0_delay=True)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 455, in _connect_attempt</p>\n<pre><code>self.sync()\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 394, in sync</p>\n<pre><code>timeout=SYNC_TIMEOUT)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 337, in command</p>\n<pre><code>self.write(pkt)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/esptool\\esptool.py&quot;, line 300, in write</p>\n<pre><code>self._port.write(buf)\n</code></pre>\n<p>File &quot;C:/Users/Chathura/AppData/Local/Arduino15/packages/esp8266/hardware/esp8266/2.7.4/tools/pyserial\\serial\\serialwin32.py&quot;, line 323, in write</p>\n<pre><code>raise writeTimeoutError\n</code></pre>\n<p>serial.serialutil.SerialTimeoutException: Write timeout</p>\n<p>the selected serial port serial.serialutil.SerialTimeoutException: Write timeout</p>\n<p>does not exist or your board is not connected</p>\n<p>This report would have more information with\n&quot;Show verbose output during compilation&quot;\noption enabled in File -&gt; Preferences.</p>\n"
    }, {
        "tags": ["api", "post", "arduino", "iot", "ethernet"],
        "is_answered": false,
        "view_count": 439,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1609050121,
        "creation_date": 1608533979,
        "last_edit_date": 1609050121,
        "question_id": 65388669,
        "link": "https://stackoverflow.com/questions/65388669/sending-post-json-to-api-using-arduino-mega-and-ethernet-shield-w5100",
        "title": "Sending POST Json to API using Arduino Mega and Ethernet shield W5100",
        "body": "<p>Having this as my sketch, the serial monitor saying that the JSON is successfully sent. But it does not reflect to my Cloud DB.</p>\n<p>I changed my HTTPS to HTTP but no luck. Where could this go wrong?</p>\n<p>My objective is all input in my Arduino will be sent to my server and store to my Cloud DB.</p>\n<p>EDIT: After replacing all suggested Edits, I am getting 400 Bad request.\nIn Postman, the request is working so i know that my request is valid. But I can't make it work in arduino using ethernet shield</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void setup() {\n  Serial.begin(9600);\n  \n  // initialize the Ethernet shield using DHCP:\n    if (Ethernet.begin(mac) == 0) {\n      Serial.println(&quot;Failed to obtaining an IP address using DHCP&quot;);\n      while(true);\n    }\n    \n  delay(1000);\n\n  Serial.println(&quot;connecting...&quot;);\n\n  if (client.connect(HOST_NAME, HTTP_PORT)) {\n    Serial.println(&quot;connected&quot;);\n  } else {\n    Serial.println(&quot;connection failed&quot;);\n  }\n\n   //Create JSON doc and write a &quot;name&quot; attribute\n  const size_t capacity = JSON_OBJECT_SIZE(3);\n  DynamicJsonDocument doc(capacity);\n    doc[&quot;tank_id&quot;] = &quot;2a&quot;;\n    doc[&quot;branch_name&quot;] = &quot;aurora&quot;;\n    doc[&quot;water_level&quot;] = &quot;high level&quot;;\n\n\n  //POST request\n  Serial.println(&quot;Begin POST Request&quot;);\n\n  client.println(&quot;POST /myURL HTTP/1.1&quot;);\n    Serial.println(&quot;POST /myURL HTTP/1.1&quot;);\n\n  client.println(&quot;Host: host.net&quot;);\n    Serial.println(&quot;Host: host.net&quot;);\n  client.println(&quot;User-Agent: Arduino/1.0&quot;);\n    Serial.println(&quot;User-Agent: Arduino/1.0&quot;);\n\n  client.println(&quot;Content-Type: application/json&quot;);\n    Serial.println(&quot;Content-Type: application/json&quot;);\n\n  client.println(&quot;Connection: keep-alive&quot;);\n    Serial.println(&quot;Connection: keep-alive&quot;);\n\n  client.print(&quot;Content-Length: &quot;);\n    Serial.print(&quot;Content-Length: &quot;);\n\n  client.println(measureJson(doc));\n      Serial.println(measureJson(doc));\n\n  client.println();\n  Serial.print(F(&quot;Sending: &quot;));\n  serializeJson(doc, Serial);\n  Serial.println();\n\n\n  //This works like client.println, but prints doc to client\n  serializeJsonPretty(doc, client);\n\n  //To let me know that request has been completed\n  Serial.println(&quot;Sent POST Request&quot;);\n\n  while (client.available()) {\n    char c = client.read();\n    Serial.print(c);\n  }\n}\n\nvoid loop() {\n while(client.connected()) {\n      if(client.available()){\n        // read an incoming byte from the server and print it to serial monitor:\n        char c = client.read();\n        Serial.print(c);\n      }\n    }\n}\n</code></pre>\n"
    }, {
        "tags": ["c", "http", "arduino", "iot", "nodemcu"],
        "is_answered": false,
        "view_count": 500,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1609009855,
        "creation_date": 1584637025,
        "question_id": 60761735,
        "link": "https://stackoverflow.com/questions/60761735/connect-nodemcu-with-000webhost-database",
        "title": "Connect nodemcu with 000webhost database",
        "body": "<p>i want to connect nodemcu with 000webhost database.for that i have built php file on my website file manager. whenerver i make http request through web browser it works properly.means it perform its function properly. but whenever i try to make http request through nodemcu it doesn't works!! </p>\n\n<p>my nodemcu code:</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt; \n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266HTTPClient.h&gt;\n#define WIFI_SSID \"imayank2\"\n#define WIFI_PASSWORD \"123456789\"\n\n\nvoid setup() {\n\nSerial.begin(74880);\n  wifiConnect();\n\n}\n\nvoid loop()\n{ \n\n\n HTTPClient http;  //Declare an object of class HTTPClient\n\nhttp.begin(\"mywebsite address\\dataenter.php\");  //Specify request destination\nint httpCode = http.GET();                                                                  //Send the request\n\nif (httpCode &gt; 0) { //Check the returning code\n\nString payload = http.getString();   //Get the request response payload\nSerial.println(payload);                     //Print the response payload\n\n}\n\nhttp.end();   //Close connection\n\n\n\n  delay(5000);\n\n}\n\n\nvoid wifiConnect()\n{\n  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);             // Connect to the network\n  Serial.print(\"Connecting to \");\n  Serial.print(WIFI_SSID);\n  Serial.println(\" ...\");\n  int teller = 0;\n  while (WiFi.status() != WL_CONNECTED)\n  {                                       // Wait for the Wi-Fi to connect\n    delay(1000);\n    Serial.print(++teller);\n    Serial.print(' ');\n  }\n\n  Serial.println('\\n');\n  Serial.println(\"Connection established!\");  \n  Serial.print(\"IP address:\\t\");\n  Serial.println(WiFi.localIP());         // Send the IP address of the ESP8266 to the computer\n}\n</code></pre>\n\n<p>output:\n<code>nothing only connected with my wifi , not payload</code></p>\n"
    }, {
        "tags": ["wifi", "iot", "esp8266", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 263,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1606998895,
        "creation_date": 1605866131,
        "last_edit_date": 1606998895,
        "question_id": 64927292,
        "link": "https://stackoverflow.com/questions/64927292/sending-data-to-thingspeak-using-esp8266",
        "title": "Sending data to Thingspeak using ESP8266",
        "body": "<p>I am trying to send data to Thingspeak using ESP8266. I am using this code that I downloaded from internet, but I am still unable to connect to WiFi.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;SoftwareSerial.h&gt;\n#define RX 2\n#define TX 3\n\nString AP = &quot;Gladiator&quot;;           // CHANGE ME\nString PASS = &quot;1212ftth&quot;;          // CHANGE ME\nString API = &quot;PDRVGWQZWF6J25LR&quot;;   // CHANGE ME\nString HOST = &quot;api.thingspeak.com&quot;;\nString PORT = &quot;80&quot;;\nString field = &quot;field1&quot;;\nint countTrueCommand;\nint countTimeCommand; \nboolean found = false; \nint valSensor = 1;\nSoftwareSerial esp8266(RX,TX); \n  \nvoid setup() {\n  Serial.begin(9600);\n  esp8266.begin(115200);\n  sendCommand(&quot;AT&quot;,5,&quot;OK&quot;);\n  sendCommand(&quot;AT+CWMODE=1&quot;,5,&quot;OK&quot;);\n  sendCommand(&quot;AT+CWJAP=\\&quot;&quot;+ AP +&quot;\\&quot;,\\&quot;&quot;+ PASS +&quot;\\&quot;&quot;,20,&quot;OK&quot;);\n}\n\nvoid loop() {\n valSensor = getSensorData();\n String getData = &quot;GET /update?api_key=&quot; + API + &quot;&amp;&quot; + field + &quot;=&quot; + String(valSensor);\n sendCommand(&quot;AT+CIPMUX=1&quot;,5,&quot;OK&quot;);\n sendCommand(&quot;AT+CIPSTART=0,\\&quot;TCP\\&quot;,\\&quot;&quot; + HOST + &quot;\\&quot;,&quot; + PORT,15,&quot;OK&quot;);\n sendCommand(&quot;AT+CIPSEND=0,&quot; + String(getData.length()+4),4,&quot;&gt;&quot;);\n esp8266.println(getData);\n delay(1500);\n countTrueCommand++;\n sendCommand(&quot;AT+CIPCLOSE=0&quot;,5,&quot;OK&quot;);\n}\n\nint getSensorData(){\n  return random(1000); // Replace with \n}\n\nvoid sendCommand(String command, int maxTime, char readReplay[]) {\n  Serial.print(countTrueCommand);\n  Serial.print(&quot;. at command =&gt; &quot;);\n  Serial.print(command);\n  Serial.print(&quot; &quot;);\n  while (countTimeCommand &lt; (maxTime*1)) {\n    esp8266.println(command);//at+cipsend\n    if (esp8266.find(readReplay)) {\n      found = true;\n      break;\n    }\n    countTimeCommand++;\n  }\n\n  if (found == true) {\n    Serial.println(&quot;OYI&quot;);\n    countTrueCommand++;\n    countTimeCommand = 0;\n  }\n  \n  if (found == false) {\n    Serial.println(&quot;Fail&quot;);\n    countTrueCommand = 0;\n    countTimeCommand = 0;\n  }\n  found = false;\n}\n</code></pre>\n<p>I checked my circuit several times and everything is in the right place. Can anybody tell me what is the problem or show me a better way to connect to Thingspeak?</p>\n"
    }, {
        "tags": [".net", ".net-core", "raspberry-pi", "iot", "gpio"],
        "is_answered": false,
        "view_count": 68,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1605349639,
        "creation_date": 1605197567,
        "question_id": 64807557,
        "link": "https://stackoverflow.com/questions/64807557/net-core-iot-no-data-coming-from-seed-studio-grove-dth11-sensor-when-using-wit",
        "title": ".NET Core IOT (No Data coming from Seed Studio Grove DTH11 Sensor when using without Grove Shield)",
        "body": "<p>I am using Grove DTH11 Sensor to connect to raspberry pi 4 and get the reading from the sensor using .NET Core IOT and GPIO Pins. I am connecting the sensor directly to the Pi without using Grove Pi+ or Grove Shield.</p>\n<p>The problem is I am not getting any reading from the sensor. Below is the code i am using</p>\n<pre><code>int pin = 4;\nusing (GpioController controller = new GpioController()) \n{ \n    Console.WriteLine(&quot;Opening Pin - &quot; + pin);\n    controller.OpenPin(pin, PinMode.Input);\n    Console.WriteLine(&quot;Pin - &quot; + pin + &quot; opened successfully&quot;);\n \n    using (Dht11 dth11Obj = new Dht11(pin, PinNumberingScheme.Logical)) \n    { \n        Console.WriteLine(&quot;Dht11 object created&quot;);\n        while (!Console.KeyAvailable) \n        { \n            Console.WriteLine(&quot;reading data&quot;); \n            var temp = dth11Obj.Temperature; \n            var hum = dth11Obj.Humidity; \n            Console.WriteLine(&quot;data read successfully&quot;); \n\n            if (dth11Obj.IsLastReadSuccessful) \n            {\n                Console.WriteLine($&quot;Temperature: {temp.DegreesCelsius}\\u00B0C, Relative humidity: {hum.Percent}%&quot;); \n                Console.WriteLine($&quot;Heat index: {WeatherHelper.CalculateHeatIndex(temp, hum).DegreesCelsius:0.#}\\u00B0C&quot;); \n                Console.WriteLine($&quot;Dew point: {WeatherHelper.CalculateDewPoint(temp, hum).DegreesCelsius:0.#}\\u00B0C&quot;); \n             } \n             else \n             { \n                 Console.WriteLine(&quot;Error reading DHT sensor&quot;); \n             }\n             \n             Thread.Sleep(2000); \n        } \n    } \n} \n</code></pre>\n<p>The output of the above code is below.</p>\n<pre><code>Opening Pin - 4\nPin - 4 opened successfully\nDht11 object created\nreading data\n</code></pre>\n<p>The execution gets stuck after displaying &quot;reading data&quot; and no sensor readings are coming.</p>\n<p>The connection of Raspberry Pi and Sensor is as below -</p>\n<pre><code>Pin GND of Dth11 Sensor is Connected to Pin 6 of Raspberry Pi 4\nPin VCC of Dth11 Sensor is Connected to Pin 1 of Raspberry Pi 4\nPin NC  of Dth11 Sensor is Connected to Nothing\nPin SIG of Dth11 Sensor is Connected to Pin 7 (GPIO 4) of Raspberry Pi 4\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": false,
        "view_count": 53,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1604773878,
        "creation_date": 1604770866,
        "question_id": 64730620,
        "link": "https://stackoverflow.com/questions/64730620/led-not-glowing",
        "title": "LED not glowing",
        "body": "<p>I a beginner to IoT. I want to glow LED connected to arduino for this I have made connections as described below, also see the image of breadboard attached here.\n<a href=\"https://i.stack.imgur.com/wZXh4.jpg\" rel=\"nofollow noreferrer\">LED Connections</a>\nConnected\nArduino GND to one leg of LED and 3.3V to another leg of LED.\nMy Arduino program is-</p>\n<pre><code>   void setup() {\n      Serial.begin(9600);\n\n     // connect to wifi.\n      WiFi.begin(WIFI_SSID, WIFI_PASSWORD);\n      Serial.print(&quot;connecting&quot;);\n      while (WiFi.status() != WL_CONNECTED) {\n         Serial.print(&quot;.&quot;);\n         delay(500);\n      }\n      Serial.println();\n      Serial.print(&quot;connected: &quot;);\n      Serial.println(WiFi.localIP());\n  \n      Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);\n      Firebase.set(&quot;LED_STATUS&quot;,0);\n   }\n\n   int n = 0;\n\n   void loop() {\n  // get value\n      n = Firebase.getInt(&quot;LED_STATIS&quot;);\n \n      if (n == 1) {\n         Serial.print(&quot;LED IS ON&quot;);\n         digitalWrite(D1,HIGH);      \n         return;\n     }else{\n          Serial.print(&quot;LED IS OFF&quot;);\n          digitalWrite(D1,LOW);      \n          return;\n       }\n       delay(1000);\n  }\n</code></pre>\n<p>Serial monitor shows LED is ON as shown in screenshot.\n<a href=\"https://i.stack.imgur.com/mfhYO.png\" rel=\"nofollow noreferrer\">Serial Monitor</a></p>\n"
    }, {
        "tags": ["android", "mqtt", "viewmodel", "iot", "android-livedata"],
        "is_answered": false,
        "view_count": 114,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1604652628,
        "creation_date": 1604646819,
        "last_edit_date": 1604652628,
        "question_id": 64710274,
        "link": "https://stackoverflow.com/questions/64710274/how-to-send-data-from-a-service-class-to-a-fragment-using-live-dataandroid",
        "title": "How to send data from a service class to a Fragment using Live data:Android",
        "body": "<p>I'm using the MQTT service to receive some sensor data readings  in my app</p>\n<pre><code>class MqttService : Service() {\n     val mqttLive_data = MqttLiveData()\n    override fun onMessageReceived(topic: String?, message: MqttMessage?) {\n      \n      var data = MqttModel()\n      data.setMqttData(MqttMessage)\n      \n      //This does not update the live data model \n      mqttLive_data.postValue(data)\n    }}\n</code></pre>\n<p>When I receive the MQTT message, I want to pass it to my Fragment. I've tried to use LiveData + ViewModel, but unfortunately, postValue() does not update the view model.</p>\n<pre><code>class MqttLiveData: ViewModel() {\n\nprivate var _mqttData = MutableLiveData&lt;MqttModel&gt;()\n\nval mqttLiveData:LiveData&lt;MqttModel&gt;\nget() = _mqttData}\n\n\nclass FragmentItemLiveData(subcategoryId: String?, deviceType_: String?) : Fragment(){ \noverride fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val root =  inflater.inflate(R.layout.fragment_item_live_data, container, false)\n        mqttViewModel = ViewModelProvider(this).get(MqttLiveData::class.java)\n        mqttViewModel.mqttLiveData.observe(viewLifecycleOwner, Observer { mqttData -&gt;\n            \n        })\n        return root\n    }}\n</code></pre>\n"
    }, {
        "tags": ["python", "floating-point", "iot", "sensors"],
        "is_answered": true,
        "view_count": 41,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1604408205,
        "creation_date": 1604400005,
        "last_edit_date": 1604408205,
        "question_id": 64661216,
        "link": "https://stackoverflow.com/questions/64661216/problems-sending-measurement-values-via-rest-api",
        "title": "Problems sending measurement values via REST API",
        "body": "<p>I'm trying to send data to an IoT cloud using some REST API in a python script.</p>\n<p>Unfortunately, I encounter the following problem:</p>\n<ul>\n<li><p>sending fixed values to the cloud is working</p>\n<p>body='{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;24.0&quot;, &quot;99.0&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }'</p>\n</li>\n<li><p>sending sensor values fails</p>\n<p>body='{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;' + str(temp) + '&quot;, &quot;' + str(light) + '&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }'</p>\n</li>\n</ul>\n<p>both bodies look similar when using print(body), see below</p>\n<ul>\n<li><p>with fixed values</p>\n<p>{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;24.0&quot;, &quot;99.0&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }</p>\n</li>\n<li><p>with sensor values</p>\n<p>{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;24.0&quot;, &quot;62.72&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }</p>\n</li>\n</ul>\n<p>Does anyone have some idea, how this could be solved.\nObviously, I need the sensor values, not the fixed one.</p>\n<p><strong>additional comments after implementing the hints from Joseph</strong></p>\n<p>This code is working fine ==&gt; return code 202</p>\n<pre><code>body='{ \\&quot;capabilityAlternateId\\&quot;: \\&quot;SENSOR_001\\&quot;, \\&quot;measures\\&quot;: [[\\&quot;24.0\\&quot;, \\&quot;99.0\\&quot;]], \\&quot;sensorAlternateId\\&quot;: \\&quot;4711_CR_SENS\\&quot; }'\n        print (body)\n\n    r = requests.post(url, data=body, headers=headers, cert=('./credentials_0211.crt', './credentials_0211.key'))\n</code></pre>\n<p>body contains</p>\n<pre><code>{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;24.0&quot;, &quot;99.0&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }\n</code></pre>\n<p>Problem with above is the usage of fixed numbers for the measures, I need the one from the sensor.</p>\n<p>following options are not working, those options would contain measures from a sensor, which is the real use case</p>\n<p><strong>Option 1 ==&gt; error 400</strong></p>\n<pre><code>measures = [temp, light]\n    body = {\n            &quot;capabilityAlternateId&quot; : capability,\n            &quot;measures&quot; : [measures],\n            &quot;sensorAlternateId&quot; : sensor\n        }\n    json_body = json.dumps(body)\n\n#body contains\n\n{'capabilityAlternateId': 'SENSOR_001', 'measures': [['24,0', '99,0']], 'sensorAlternateId': '4711_CR_SENS'}\n</code></pre>\n<p><strong>Option 2 ==&gt; error 400</strong></p>\n<pre><code>body='{ \\&quot;capabilityAlternateId\\&quot;: \\&quot;SENSOR_001\\&quot;, \\&quot;measures\\&quot;: [[\\&quot;' + str(temp) + '\\&quot;, \\&quot;' + str(light) + '\\&quot;]], \\&quot;sensorAlternateId\\&quot;: \\&quot;4711_CR_SENS\\&quot; }'\nr = requests.post(url, data=body, headers=headers, cert=('./credentials_0211.crt', './credentials_0211.key'))\n\n#body contains\n\n{ &quot;capabilityAlternateId&quot;: &quot;SENSOR_001&quot;, &quot;measures&quot;: [[&quot;24.0&quot;, &quot;19.16&quot;]], &quot;sensorAlternateId&quot;: &quot;4711_CR_SENS&quot; }\n</code></pre>\n<p>Thanks a lot and best regards,\nHyproN</p>\n"
    }, {
        "tags": ["arduino-uno", "iot"],
        "is_answered": true,
        "view_count": 33275,
        "favorite_count": 4,
        "score": 3,
        "last_activity_date": 1604219065,
        "creation_date": 1435558953,
        "question_id": 31109021,
        "link": "https://stackoverflow.com/questions/31109021/how-to-find-co2-and-o2-level-using-mq135-with-arduino",
        "title": "How to find Co2 and O2 level using MQ135 with Arduino",
        "body": "<p>How to find Co2 and O2 level or any other parameters using MQ135 with Arduino, I just sensed ppm data and displayed it on screen.</p>\n\n<pre><code>int sensorValue;\nint pin8 = 8;\nvoid setup()\n{\n  Serial.begin(9600);      // sets the serial port to 9600\n  pinMode(pin8, OUTPUT);\n}\n\nvoid loop()\n{\n  sensorValue = analogRead(0);       // read analog input pin 0\n  Serial.print(sensorValue, DEC);  // prints the value read\n  Serial.println(\"ppm\");\n  if (sensorValue &gt; 500) {\n    // Activate digital output pin 8 - the LED will light up\n    digitalWrite(pin8, HIGH);\n  }\n  else {\n    // Deactivate digital output pin 8 - the LED will not light up\n    digitalWrite(pin8, LOW);\n  }\n\n  delay(5000);                        // wait 100ms for next reading\n}\n</code></pre>\n"
    }, {
        "tags": ["c++", "iot", "arduino-uno", "esp32", "arduino-ide"],
        "is_answered": false,
        "view_count": 356,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1603777281,
        "creation_date": 1603777281,
        "question_id": 64548857,
        "link": "https://stackoverflow.com/questions/64548857/fail-to-upload-code-from-arduino-ide-to-custom-esp32-wroom-32-using-arduino-uno",
        "title": "Fail to upload code from Arduino IDE to Custom ESP32 WROOM 32 using Arduino Uno as ISP",
        "body": "<p><strong>Here is Custom ESP32 WROOM 32 circuit diagram</strong></p>\n<p><a href=\"https://i.stack.imgur.com/0UvLx.png\" rel=\"nofollow noreferrer\">Custom ESP32 WROOM 32 circuit diagram</a></p>\n<p><strong>Here is My Board Design</strong></p>\n<p><a href=\"https://i.stack.imgur.com/968Ku.png\" rel=\"nofollow noreferrer\">Single Layer Board Design</a></p>\n<p><strong>Here are my Connection</strong></p>\n<ol>\n<li>tx-tx</li>\n<li>rx-rx</li>\n<li>gnd-gnd</li>\n<li>3.3v - 3.3v</li>\n</ol>\n<p><em>I removed the Atmaga329p pu ic of arduino uno and connecting gnd with reset pin to acts as USB Serial Adapter</em>\n<a href=\"https://i.stack.imgur.com/ecAn1.jpg\" rel=\"nofollow noreferrer\">arduino uno as USB Serial Adapter </a></p>\n<p><strong>Uploading Process.....</strong></p>\n<p>*System and Software Configuration *</p>\n<blockquote>\n<p>Window 10 64 bit,\nArduino IDE 1.8.13,\nCP210xVCPInstaller_x64</p>\n</blockquote>\n<p><em>Code upload</em></p>\n<blockquote>\n<p>Here is my arduino IDE &gt; tool &gt; board selection\n<a href=\"https://i.stack.imgur.com/HWTUs.png\" rel=\"nofollow noreferrer\">see here</a></p>\n</blockquote>\n<ul>\n<li><p>Here is the data i received in the serial monitor when pressing boot button of esp32*</p>\n</li>\n<li>\n<blockquote>\n<p>rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT) configsip: 0, SPIWP:0xee</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>mode:DIO, clock div:2 load:0x3fff0018,len:4 load:0x3fff001c,len:5656</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>load:0x40078000,len:0 ho 12 tail 0 room 4 load:0x40078000,len:13844</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>entry 0x40078fc4 [0;32mI (30) boot: ESP-IDF v3.0.7 2nd stage</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>bootloader[0m [0;32mI (30) boot: compile time 09:04:31[0m [0;32mI</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>(30) boot: Enabling RNG early entropy source...[0m [0;32mI (35)</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>boot: SPI Speed      : 40MHz[0m [0;32mI (39) boot: SPI Mode       :</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>DIO[0m [0;32mI (43) boot: SPI Flash Size : 4MB[0m [0;32mI (47)</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>boot: Partition Table:[0m [0;32mI (51) boot: ## Label</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>Usage          Type ST Offset   Length[0m [0;32mI (58) boot:  0</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>phy_init         RF data          01 01 0000f000 00001000[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>[0;32mI (65) boot:  1 otadata          OTA data         01 00</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>00010000 00002000[0m [0;32mI (73) boot:  2 nvs              WiFi</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>data        01 02 00012000 0000e000[0m [0;32mI (80) boot:  3</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>at_customize     unknown          40 00 00020000 000e0000[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>[0;32mI (88) boot:  4 ota_0            OTA app          00 10</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>00100000 00180000[0m [0;32mI (95) boot:  5 ota_1            OTA app</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>00 11 00280000 00180000[0m [0;32mI (103) boot: End of partition</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>table[0m [0;32mI (107) boot: No factory image, trying OTA 0[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>[0;32mI (112) esp_image: segment 0: paddr=0x00100020</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>vaddr=0x3f400020 size=0x20614 (132628) map[0m [0;32mI (167)</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>esp_image: segment 1: paddr=0x0012063c vaddr=0x3ffc0000 size=0x02d7c</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>( 11644) load[0m [0;32mI (172) esp_image: segment 2:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>paddr=0x001233c0 vaddr=0x40080000 size=0x00400 (  1024) load[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>[0;32mI (175) esp_image: segment 3: paddr=0x001237c8</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>vaddr=0x40080400 size=0x0c848 ( 51272) load[0m [0;32mI (204)</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>esp_image: segment 4: paddr=0x00130018 vaddr=0x400d0018 size=0xdfc80</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>(916608) map[0m [0;32mI (526) esp_image: segment 5:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>paddr=0x0020fca0 vaddr=0x4008cc48 size=0x02504 (  9476) load[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>[0;32mI (530) esp_image: segment 6: paddr=0x002121ac</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>vaddr=0x400c0000 size=0x00064 (   100) load[0m [0;32mI (541) boot:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>Loaded app from partition at offset 0x100000[0m [0;32mI (541) boot:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>Disabling RNG early entropy source...[0m</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>1.1.3</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>I (590) wifi: wifi firmware version: 703e53b I (590) wifi: config NVS</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>flash: enabled I (590) wifi: config nano formating: disabled I (600)</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>wifi: Init dynamic tx buffer num: 32 I (601) wifi: Init data frame</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>dynamic rx buffer num: 32 I (601) wifi: Init management frame dynamic</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>rx buffer num: 32 I (606) wifi: wifi driver task: 3ffdeeb8, prio:23,</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>stack:3584 I (611) wifi: Init static rx buffer num: 10 I (615) wifi:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>Init dynamic rx buffer num: 32 I (619) wifi: wifi power manager task:</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>0x3ffe369c prio: 21 stack: 2560 I (653) wifi: mode : softAP</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>(3c:71:bf:79:32:e1) I (661) wifi: mode : sta (3c:71:bf:79:32:e0) +</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>softAP (3c:71:bf:79:32:e1) I (665) wifi: mode : softAP</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>(3c:71:bf:79:32:e1) I (669) wifi: set country: cc=CN</p>\n</blockquote>\n</li>\n</ul>\n<p><em>I press reset and boot button of esp32 and set into flash mode</em></p>\n<blockquote>\n<p>rst:0x1 (POWERON_RESET),boot:0x3 (DOWNLOAD_BOOT(UART0/UART1/SDIO_REI_REO_V2))</p>\n</blockquote>\n<blockquote>\n<p>waiting for download</p>\n</blockquote>\n<p><em>Now i upload a blank code to test by holding</em></p>\n<ol>\n<li>Both boot and reset button and released when connecting start</li>\n<li>boot and released when connecting start</li>\n<li>reset and released when connecting start</li>\n</ol>\n<blockquote>\n<p>But none of this working giving an error of :</p>\n</blockquote>\n<p><strong>A fatal error occurred: Failed to connect to ESP32: Timed out waiting for packet header</strong></p>\n<blockquote>\n<p>please help i cannot find any solution on the internet.</p>\n</blockquote>\n"
    }, {
        "tags": ["c", "parsing", "arduino", "iot", "sdi-12"],
        "is_answered": false,
        "view_count": 101,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1603619150,
        "creation_date": 1603619150,
        "question_id": 64522323,
        "link": "https://stackoverflow.com/questions/64522323/parse-readings-and-send-it-via-esp-now",
        "title": "Parse Readings and send it via ESP-NOW",
        "body": "<p>Briefly, I'm working now with a project including SDI-12 sensors which are connected to NodeMCU then send the readings.</p>\n<p>i made the connection between the sensors and its MCU and I got the readings with no problem,</p>\n<p>now I want to parse the readings which I got from the sensor then send it to the ESP gateway</p>\n<p>could anyone guide me on how to parse and send the data.</p>\n<p>The nodeMCU will be connected to 3 sensors at least.</p>\n<p>each sensor return the readings in the following format.</p>\n<blockquote>\n<p>a+&lt; calibratedCountsVWC&gt;\u00b1&lt; temperature&gt;+&lt; electricalConductivity&gt;</p>\n</blockquote>\n<p>example :</p>\n<pre><code>sensorId:1,\nVWC:1850.5,\nTEMP:25.5,\nEC:150\n\n1+2500-2+150\nsensorId:1,\nVWC:2500,\nTEMP:-2,\nEC:150\n</code></pre>\n<p>here is a code that works with one sensor readings and I want to parse the readings and forward them through ESP-NOW (it now only sends &quot;TEST&quot;) also I'll send about 3 sensors readings.</p>\n<pre><code>#include &lt;Arduino.h&gt;\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;espnow.h&gt;\n#include &lt;SPI.h&gt;\n\nuint8_t peer1[] = {0x24, 0x62, 0xAB, 0xFF, 0x2C, 0x5C};\n\ntypedef struct message {\n  String msg;\n};\nstruct message myMessage;\nvoid onSent(uint8_t *mac_addr, uint8_t sendStatus) {\n Serial.println(&quot;Status:&quot;);\n Serial.println(sendStatus);\n}\n\n#define SERIAL_BAUD 9600 /*!&lt; The baud rate for the output serial port */\n#define DATA_PIN 5         /*!&lt; The pin of the SDI-12 data bus */\n#define POWER_PIN -1       /*!&lt; The sensor power pin (or -1 if not switching power) */\n\n/** Define the SDI-12 bus */\nSDI12 mySDI12(DATA_PIN);\n\n/**\n  '?' is a wildcard character which asks any and all sensors to respond\n  'I' indicates that the command wants information about the sensor\n  '!' finishes the command\n*/\nString myCommand = &quot;1R0!&quot;;\n\nvoid setup() {\n  Serial.begin(SERIAL_BAUD);\n \n   WiFi.mode(WIFI_STA);\n \n // Get Mac Add\n Serial.print(&quot;Mac Address: &quot;);\n Serial.print(WiFi.macAddress());\n Serial.println(&quot;ESP-Now Sender&quot;);\n \n // Initializing the ESP-NOW\n if (esp_now_init() != 0) {\n   Serial.println(&quot;Problem during ESP-NOW init&quot;);\n   return;\n }\n \n esp_now_set_self_role(ESP_NOW_ROLE_CONTROLLER);\n // Register the peer\n Serial.println(&quot;Registering a peer&quot;);\n esp_now_add_peer(peer1, ESP_NOW_ROLE_SLAVE, 1, NULL, 0);\n Serial.println(&quot;Registering send callback function&quot;);\n esp_now_register_send_cb(onSent);\n\n \n  while (!Serial)\n    ;\n\n  Serial.println(&quot;Opening SDI-12 bus...&quot;);\n  mySDI12.begin();\n  delay(500);  // allow things to settle\n\n  // Power the sensors;\n  if (POWER_PIN &gt; 0) {\n    Serial.println(&quot;Powering up sensors...&quot;);\n    pinMode(POWER_PIN, OUTPUT);\n    digitalWrite(POWER_PIN, HIGH);\n    delay(200);\n  }\n}\n\nvoid loop() {\n  mySDI12.sendCommand(myCommand);\n  delay(300);                    // wait a while for a response\n  while (mySDI12.available()) {  // write the response to the screen\n    Serial.write(mySDI12.read());\n  }\n  Serial.println(&quot;Send a new message&quot;);\n  myMessage.msg = &quot;Test&quot;;\n  esp_now_send(NULL, (uint8_t *) &amp;myMessage, sizeof(myMessage));\n  delay(3000);  // print again in three seconds\n}\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "gsm"],
        "is_answered": true,
        "view_count": 265,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1603246578,
        "creation_date": 1599726244,
        "last_edit_date": 1603246578,
        "question_id": 63825656,
        "link": "https://stackoverflow.com/questions/63825656/sim7600ce-how-to-know-when-sim-card-is-registered-into-network-by-software",
        "title": "SIM7600CE - How to know when SIM card is registered into network by software",
        "body": "<p>I am trying to set up the SIM7600CE to have it connect to the internet whenever I turn it on with Arduino Mega. I know how to turn it on with software by set the pin D12 to HIGH but I don't know how to read the signal of the NETLIGHT pin to get to know when the NETLIGHT starts to blink, which means the SIM card is registered into network successfully. Is there any way I can read that signal? Or is there any other way I can acknowledge when SIM card is registered into network successfully by software?</p>\n<p>edit: I am trying to get the information that my SIM7600 is connected by using AT command. Even though I can send the AT command, I cannot parse the response. The result of the code below turns out that the Serial keeps printing the string &quot;at+csq&quot; constantly. Can anybody help?</p>\n<pre><code>#define mySerial Serial1\n#define PWRKEY 12\n\nvoid setup() \n{\n  digitalWrite(PWRKEY, HIGH);     //Press the boot button\n  Serial.begin(115200);\n  delay(500);\n  mySerial.begin(115200);\n  delay(5000);\n\n  while (1)\n  {\n    Serial.println(&quot;AT+CSQ&quot;);     //AT command for Signal quality test\n    updateSerial();\n    delay(1500);\n  }\n}\n\nvoid loop() \n{\n  updateSerial();\n}\n\nvoid updateSerial()\n{\n  delay(500);\n   while (Serial.available())\n  {\n    mySerial.write(Serial.read());\n  }\n  while (mySerial.available())\n   {\n    Serial.write(mySerial.read());\n     if (Serial.find(&quot;+CSQ: &quot;))   //Find the AT+CSQ response\n    {\n      char c = mySerial.read();   \n      if (c != '9')               //check the first digit after &quot;+CSQ: &quot;, +CSQ: 99,99 means not detectable, \n      {\n        Serial.println(&quot;connected&quot;);\n        break; \n      }\n    }\n  }\n</code></pre>\n"
    }, {
        "tags": ["python", "arduino", "iot", "arduino-uno", "hc-05"],
        "is_answered": false,
        "view_count": 72,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1602870762,
        "creation_date": 1602654541,
        "last_edit_date": 1602870762,
        "question_id": 64347346,
        "link": "https://stackoverflow.com/questions/64347346/my-bluetooth-controlled-mouse-arduino-project-is-not-working",
        "title": "my bluetooth controlled mouse arduino project is not working",
        "body": "<p>The project involves a smartphone application that sends the joystick's x and y-axis data, scroll status, left and right-click status using Bluetooth to the Arduino Uno connected to the HC-05 Bluetooth module. These data upon reception to the Arduino are manipulated to make changes in the current cursor's position to obtain a new position. The resulting data along with scroll and button status is then printed as the output that is recognized to be read by the Python sketch. The Python sketch is made to execute mouse actions using the mouse module and I control the mouse with mobile app.</p>\n<p>ERROR:- there is no error when I run the python and Arduino script it runs well but when I use a mobile app and connect the app with Arduino it gets connected but it's not working(cursor is not moving) check the below link</p>\n<p>app link:- <a href=\"https://drive.google.com/drive/folders/1xJYx8pkkLD5OFUnATf7K_ENvClIXVAxw\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1xJYx8pkkLD5OFUnATf7K_ENvClIXVAxw</a></p>\n<p>this is I am trying to perform\n<a href=\"https://create.arduino.cc/projecthub/shubhamsantosh99/smartphone-controlled-mouse-728d91\" rel=\"nofollow noreferrer\">https://create.arduino.cc/projecthub/shubhamsantosh99/smartphone-controlled-mouse-728d91</a>\nbasically, I followed all the step from the above link but I can't move the cursor from mobile app</p>\n<p>this is Arduino code:-</p>\n<pre><code>    int datareceived[5] {0,0,0,0};          // To store byte from phone\n    int in_byte = 0;\n    int array_index = 0;\n    void setup() {\n    Serial.begin (9600); // starts the serial monitor\n    }\n     int height=0,width=0;\n     int lcount=0,rcount=0;\n    void loop() {\n      int clicks=0;\n      int sensitivity=20;       // you can adjust the sensitivity\n      int xpos=0,ypos=0;\n    if (Serial.available() &gt; 0) {  //recieve byte from phone\n      in_byte= Serial.read(); //store in byte into a variable\n      if (in_byte == (255)) { // if the variable is 0 stet the array inxed to 0.\n        array_index = 0;\n      }\n      datareceived[array_index] = in_byte;  //store number into array\n      array_index = array_index +1;\n      \n    if(datareceived[1]&gt;=110)\n    xpos=map(datareceived[1],110,172,0,sensitivity);       // When moved right\n    if(datareceived[1]&lt;=70)\n    xpos=map(datareceived[1],60,1,0,-sensitivity);        // When moved left\n    if(datareceived[2]&gt;=110)\n    ypos=map(datareceived[2],110,255,0,sensitivity);     // When moved down\n    if(datareceived[2]&lt;=60)\n    ypos=map(datareceived[2],70,1,0,-sensitivity);       // When moved up\n    \n    \n    if(datareceived[3]==1)      // TO recognise a single button press\n    {\n      lcount+=1;\n      if(lcount&gt;3)\n      {\n        clicks=1;\n        lcount=0;\n      }\n    }\n    else if(datareceived[3]==2)\n    {\n      rcount+=1;\n      if(rcount&gt;3)\n      {\n        clicks=2;\n        rcount=0;\n      }\n    }\n    else \n    clicks=datareceived[3];       // to recognise the scroll\n    \n    \n    if(xpos!=0 or ypos!=0 or clicks!=0)       // when either of the joystick is moved or the button is pressed\n    {\n    height=height+ypos;\n    width=width+xpos;\n    if(height&gt;=799)\n    height=799;\n    if(height&lt;=0)\n    height=0;\n    if(width&gt;=1279)\n    width=1279;\n    if(width&lt;=0)\n    width=0;\n    Serial.print(width);\n    Serial.print(&quot;:&quot;);\n    Serial.print(height);\n    Serial.print(&quot;:&quot;);\n    Serial.println(clicks);\n    clicks=0;\n    }\n    }\n    }\n</code></pre>\n<p>this is python code:-</p>\n<pre><code>    import mouse, sys\n    import time \n    import serial\n    \n    mouse.FAILSAFE=False\n    ArduinoSerial=serial.Serial('com3',9600)  #Specify the correct COM port\n    time.sleep(1)                             #delay of 1 second\n    \n    while 1:\n       data=str(ArduinoSerial.readline().decode('ascii'))\n       (x,y,z)=data.split(&quot;:&quot;)  # read the x and y axis data\n       (x,y)=(int(x),int(y))   # convert to int\n       mouse.move(x,y)         # move the cursor to desired coordinates\n       if '1' in z:                       \n          mouse.click(button=&quot;left&quot;)     #clicks mouse button\n       elif '2' in z:\n          mouse.click(button=&quot;right&quot;)\n       elif '3' in z:\n          mouse.wheel(delta=-1)       # Scroll down\n       elif '4' in z:\n          mouse.wheel(delta=1)       # Scroll up\n</code></pre>\n"
    }, {
        "tags": ["iot", "leshan", "lwm2m"],
        "is_answered": true,
        "view_count": 339,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1602617896,
        "creation_date": 1468390281,
        "last_edit_date": 1602617896,
        "question_id": 38343854,
        "link": "https://stackoverflow.com/questions/38343854/does-leshan-support-objlink",
        "title": "Does Leshan support ObjLink?",
        "body": "<p>I am trying to create my composite LWM2M object by using objlink type.</p>\n<p>For <a href=\"https://eclipse.org/leshan/\" rel=\"nofollow noreferrer\">Leshan</a>, the only source on how to write the spec file in JSON seems to be the official <code>oma-objects-spec.json</code>, which does not contain examples of objlinks.</p>\n<p>Can anyone provide an example on how to create an objlink object?\nIf it is not possible in Leshan, have anyone tried other implementations?</p>\n"
    }, {
        "tags": ["node.js", "heroku", "iot", "esp8266", "nodemcu"],
        "is_answered": false,
        "view_count": 113,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1601947943,
        "creation_date": 1601947943,
        "question_id": 64218184,
        "link": "https://stackoverflow.com/questions/64218184/assistance-with-controlling-nodemcu-esp8266-from-heroku-deploy",
        "title": "Assistance with Controlling Nodemcu/ESP8266 from Heroku Deploy",
        "body": "<p>Thank you in advance for the help with all of this!\nI have set up a website where I can control individually addressable LEDs via the internet using my nodemcu as the microcontroller/server. I have everything working great on my localhost but when I trying to deploy it to heroku all of requests fail every time.\nI have narrowed it down to 2 problems:</p>\n<ol>\n<li>Problem 1\n<ol>\n<li>Heroku wants the requests to be in HTTPS but they are in HTTP</li>\n<li>Possible Solution 1:\n<ol>\n<li>Use the WiFiClientSecure Library to convert the requests to HTTPS</li>\n<li>I have not gotten this solution to work with the way my nodemcu is set up, and would greatly appreciate any advice on how to make it work.</li>\n<li>This is the example that I found and was recommended by multiple articles</li>\n<li><a href=\"https://github.com/esp8266/Arduino/blob/master/libraries/ESP8266WiFi/examples/HTTPSRequest/HTTPSRequest.ino%E2%80%A8\" rel=\"nofollow noreferrer\">https://github.com/esp8266/Arduino/blob/master/libraries/ESP8266WiFi/examples/HTTPSRequest/HTTPSRequest.ino</a></li>\n<li>This example is making a get request on start up to the GitHub api</li>\n<li>My goal is to make requests from my website to my nodemcu. I don't understand how I can make that happen.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>Problem 2\n<ol>\n<li>Heroku doesn't like that I am making requests to a api that doesn't doesnt match its own query url</li>\n<li>Possible Solution 2:\n<ol>\n<li>I have already implemented CORS on the Nodemcu</li>\n<li>I created this function that gets pass into each route as shown below to allow it to be called from other query urls</li>\n<li>This is what I initially had to do to get it working on my localhost</li>\n<li>I feel like I need to do this same sort of thing but on the heroku side</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<pre><code>void cors_set_access_control_headers()\n{\n  Serial.println(&quot;cors_set_access_control_headers&quot;);\n  webServer.sendHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n  webServer.sendHeader(&quot;Access-Control-Max-Age&quot;, &quot;10000&quot;);\n  webServer.sendHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,OPTIONS&quot;);\n  webServer.sendHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n}\n\nvoid run_server()\n{\n  httpUpdateServer.setup(&amp;webServer);\n\n  webServer.on(&quot;/all&quot;, HTTP_GET, []() {\n    cors_set_access_control_headers();\n    String json = getFieldsJson(fields, fieldCount);\n    webServer.send(200, &quot;text/json&quot;, json);\n  });\n....\n</code></pre>\n<p>I am using my nodemcu as a backend server that I am making get and post requests to from my full stack website. The examples that I found related to my problem seem to be pointing towards making requests from your nodemcu to an api, which is not what I am trying to do and I haven't found a way to utilize the same technique in my situation</p>\n<p>This has been a problem that I have not been able to fix for too long now and I really appreciate any advice or help with all of this. Even coding structure tips. I'm trained in Javascript Full Stack Web development so my Arduino/C++ isn't my strong suit.</p>\n<p>Here is the code for my main server.ino file\n<a href=\"https://github.com/livingkurt/Glow-LEDs/blob/master/server/server.ino\" rel=\"nofollow noreferrer\">https://github.com/livingkurt/Glow-LEDs/blob/master/server/server.ino</a></p>\n<p>routes.ino\n<a href=\"https://github.com/livingkurt/Glow-LEDs/blob/master/server/routes.ino\" rel=\"nofollow noreferrer\">https://github.com/livingkurt/Glow-LEDs/blob/master/server/routes.ino</a></p>\n<p>wifi_setup.ino\n<a href=\"https://github.com/livingkurt/Glow-LEDs/blob/master/server/wifi_setup.ino\" rel=\"nofollow noreferrer\">https://github.com/livingkurt/Glow-LEDs/blob/master/server/wifi_setup.ino</a></p>\n<p>I apologize if my code is messy, I've just been trying everything to get it to work.</p>\n"
    }, {
        "tags": ["iot", "esp8266"],
        "is_answered": false,
        "view_count": 18,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1601102329,
        "creation_date": 1601094016,
        "last_edit_date": 1601102329,
        "question_id": 64073851,
        "link": "https://stackoverflow.com/questions/64073851/esp8266-weekly-and-monthly-average-power-measurement-from-cloud",
        "title": "Esp8266 weekly and monthly average power measurement from cloud",
        "body": "<p>I am making  kwh power meter with Esp8266 and uploading  instaneous data to cloud(thing\nspeak web site)and working.</p>\n<p>How can i calculate average power used in a week, from the logged insteanous data in cloud.</p>\n<p>How to display in widget the average power used in 1 week and  24 hours from the logged data.</p>\n"
    }, {
        "tags": ["google-cloud-platform", "iot"],
        "is_answered": true,
        "view_count": 110,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1600692779,
        "creation_date": 1599952516,
        "last_edit_date": 1599952865,
        "question_id": 63865734,
        "link": "https://stackoverflow.com/questions/63865734/google-cloud-iot-core-config-sent-every-1-hour-reboot-the-device",
        "title": "Google Cloud - IoT Core - Config sent every 1 hour reboot the device",
        "body": "<p>I have a ESP8266 with a relay to turn on/off a ligth.\nAll is working great, but IoT core is sending a configuration every 1 hour and that makes the device to reboot, when the device starts again there is no guarantee that the initial state is the desired.</p>\n<p><img src=\"https://i.stack.imgur.com/v3tiM.png\" alt=\"Config sent every 1 hour\" /></p>\n<p><img src=\"https://i.stack.imgur.com/2yVAn.png\" alt=\"This is the message inside the config\" /></p>\n<p>Its there any way to avoid this automatically config?</p>\n<p>Thanks.</p>\n"
    }, {
        "tags": ["android", "arduino", "iot", "okhttp", "nodemcu"],
        "is_answered": false,
        "view_count": 112,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1600672855,
        "creation_date": 1600620085,
        "question_id": 63981343,
        "link": "https://stackoverflow.com/questions/63981343/when-passing-ip-adress-in-okhttp-response-is-null",
        "title": "When passing ip adress in OkHttp response is null",
        "body": "<p>I'm working on a project that combines nodemcu and android. I set nodemcu as server. I need to connect it to android and fetch data according to instructons.\nHere is my Android code</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        textView=findViewById(R.id.textView);\n        button=findViewById(R.id.button);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                ConnectivityManager connectivityManager=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);\n                assert connectivityManager!=null;\n                NetworkInfo networkInfo=connectivityManager.getActiveNetworkInfo();\n                if(networkInfo!=null&amp;&amp;networkInfo.isConnected()){\n                    String url=&quot;http://192.168.8.100/&quot;;\n                    new RequestServer().execute(url);\n                }else {\n                    Toast.makeText(MainActivity.this, &quot;Error..&quot;, Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n    }\n    private class RequestServer extends AsyncTask&lt;String,Void,String&gt; {\n        @Override\n        protected String doInBackground(String... url) {\n            return ConnectionServer.getData(url[0]);\n        }\n        @Override\n        protected void onPostExecute(String s) {\n            if(s!=null){\n                textView.setText(s);\n            }else {\n                Toast.makeText(MainActivity.this, &quot;Error.&quot;,Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n</code></pre>\n<p>And here is the code for ConnectionServer class</p>\n<pre><code>public static String getData(String url){\n        OkHttpClient.Builder builder=new OkHttpClient.Builder();\n        builder.connectTimeout(5, TimeUnit.MINUTES)\n                .writeTimeout(5,TimeUnit.MINUTES)\n                .readTimeout(5,TimeUnit.MINUTES);\n        OkHttpClient client=builder.build();\n        Request request=new Request.Builder().url(url).build();\n        try {\n            Response response=client.newCall(request).execute();\n            return Objects.requireNonNull(response.body()).string();\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n</code></pre>\n<p>And here is my nodemcu code</p>\n<pre><code>#include &lt;Arduino.h&gt;\n#include&lt;ESP8266WiFi.h&gt;\n#ifndef WIFI_SSID\n  #define WIFI_SSID &quot;****&quot;\n  #define WIFI_PASSWORD &quot;****&quot;\n#endif\nWiFiServer server(80);\nvoid WiFiConnect();\nvoid setup() {\n  Serial.begin(9600);\n  WiFiConnect();\n  server.begin();\n  Serial.println(&quot;Server Status:Ready&quot;);\n}\nvoid loop() {\n  if(WiFi.status()!=WL_CONNECTED){\n    WiFiConnect();\n  }\n  WiFiClient client=server.available();\n  if(!client){\n    return;\n  }\n  Serial.println(&quot;New Client Request&quot;);\n  unsigned long timeout=millis()+3000;\n  while(!client.available()&amp;&amp;millis()&lt;timeout){\n    delay(1);\n  }\n  if(millis()&gt;timeout){\n    Serial.println(&quot;Client Status:Timeout&quot;);\n    client.flush();\n    client.stop();\n    return;\n  }\n  String request=client.readStringUntil('\\r');\n  Serial.println(request);\n  client.flush();\n  client.println(&quot;HTTP/1.1 200 OK\\r\\nContent-Type: text/html\\r\\n\\r\\n&lt;!DOCTYPE HTML&gt;\\r\\n&lt;html&gt;&lt;body&gt;Request Received.&lt;/body&gt;&lt;/html&gt;&quot;);\n  Serial.println(&quot;Client Status:Request Recieved&quot;);\n  client.flush();\n  delay(1);\n  Serial.println(&quot;Client Status:Disconnected&quot;);\n}\nvoid WiFiConnect(){\n  WiFi.begin(WIFI_SSID,WIFI_PASSWORD);\n  Serial.print(&quot;Connecting to &quot;);\n  Serial.print(WIFI_SSID);\n  while(WiFi.status()!=WL_CONNECTED) {\n    Serial.print(&quot;.&quot;);\n    delay(500);\n  }\n  Serial.println();\n  Serial.print(&quot;connected: &quot;);\n  Serial.println(WiFi.localIP());\n  delay(10);\n}\n</code></pre>\n<p>My problem is I never get any response from nodemcu. I get response from nodemcu when I type ip address in browser. And also in android I'm getting response when I replace ip address with a link(eg:<a href=\"http://www.google.com\" rel=\"nofollow noreferrer\">www.google.com</a>). I found out that OkHttp is not working when I'm using ip address. Please help me. Happy Coding:)</p>\n"
    }, {
        "tags": ["assembly", "iot", "esp8266", "esp32", "esp8266wifi"],
        "is_answered": true,
        "view_count": 1824,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1600524495,
        "creation_date": 1600166748,
        "question_id": 63900236,
        "link": "https://stackoverflow.com/questions/63900236/programming-esp32-and-esp8266",
        "title": "Programming esp32 and esp8266",
        "body": "<p>How do i program an ESP32 or an ESP8266 module using assembly? I don't want to use arduino ide. I figured a way to program atmel chips with assembly. I wanted to learn how to program esp32 and esp8266 in assembly.</p>\n"
    }, {
        "tags": ["c", "aes", "padding", "iot", "cbc-mode"],
        "is_answered": false,
        "view_count": 26,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1600330093,
        "creation_date": 1600330093,
        "question_id": 63933838,
        "link": "https://stackoverflow.com/questions/63933838/how-can-i-decrpty-a-message-of-a-aes-128-cbc-mesage",
        "title": "How can i decrpty a message of A AES 128 CBC mesage",
        "body": "<p>I have both my IOT device and Network using AES 128 CBC to transfer message.\nSince AES 128 CBC need padding , that mean after i decrptyed there 's still some PADDED BYTE In the MESSGAGE.</p>\n<p>I have test in my mcu with the function working ENCRPYTED AND DECRYPTED OK WITH PADDING .\n(i can encrpytyed , padded the message, decrpyted, calculate the padded message on my MCU )\nHowever I have no idea that my MCU know how many padded byte was cascaded in the message recevied from my Network.</p>\n<p>THanks</p>\n"
    }, {
        "tags": ["android", "echo", "iot", "google-home"],
        "is_answered": false,
        "view_count": 117,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1600209641,
        "creation_date": 1593357483,
        "question_id": 62624476,
        "link": "https://stackoverflow.com/questions/62624476/is-possible-to-programmatically-get-invocation-and-recognition-of-any-action-fro",
        "title": "Is possible to programmatically get invocation and recognition of any action from Google Home echo device?",
        "body": "<p>I want to know when I speak any command to echo, whether it detects it or not? If it detects what is the exact command it detected?\nfor eg; If I say 'Hey Google, Increase volume on TV', Google Home echo will light up if it's in range and then perform the action. Is there any API so I will get to know echo is in range and it can listen.\nAlso what exactly it understood.</p>\n"
    }, {
        "tags": ["c++", "arduino", "iot", "nodemcu"],
        "is_answered": true,
        "view_count": 286,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1597045029,
        "creation_date": 1597041485,
        "last_edit_date": 1597045029,
        "question_id": 63335260,
        "link": "https://stackoverflow.com/questions/63335260/how-to-measure-sound-frequency-using-microphone-gy-max4466",
        "title": "How to measure sound frequency using microphone gy-max4466?",
        "body": "<p>I have a project that uses sound sensors. but the output is not in frequency units. how do I make the coding so that the output is in the form of frequency (hz). I used the Arduino IDE to code it. thanks for your attention</p>\n"
    }, {
        "tags": ["unity3d", "arduino", "iot", "accelerometer", "gyroscope"],
        "is_answered": false,
        "view_count": 145,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1596792572,
        "creation_date": 1596792572,
        "question_id": 63298986,
        "link": "https://stackoverflow.com/questions/63298986/orientation-problem-from-inertial-module-lsm9ds1-arduino",
        "title": "Orientation problem from inertial module LSM9DS1 Arduino",
        "body": "<p>I am working on a project where i have to determine position and rotation of an IoT object with accelerometer, gyroscope and magnetometer. The goal is to show this object in a Unity3D virtual world.</p>\n<p>To do this, i have an Arduino Nano 33 BLE that include a LSM9DS1 as inertial module.\nSo, i started to determine the rotation of my object. This link was very usefull : <a href=\"http://gilles.thebault.free.fr/spip.php?article32\" rel=\"nofollow noreferrer\">http://gilles.thebault.free.fr/spip.php?article32</a></p>\n<p>That's the line for get the Y axis :\nangle=0.98*(angle+float(gy)<em>0.01/131) + 0.02</em>atan2((double)ax,(double)az)*180/PI;</p>\n<p>With this one, i can get X, Y and Z angles. When i try one by one axis orientation, all axis rotation are fine. The problem is when i use 2 axis or more at same time. For example, i use only X and Y axis. When i turn only X axis of 90\u00b0, Y axis turn of 90\u00b0 too. This video will explain more accurately than words : <a href=\"https://www.youtube.com/watch?v=IeuIuEcjUBc&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=IeuIuEcjUBc&amp;feature=youtu.be</a></p>\n<p>I searched lot of things to fix it but now, i have no more idea. Can anyone guide me?</p>\n"
    }, {
        "tags": ["arduino", "google-cloud-firestore", "iot"],
        "is_answered": true,
        "view_count": 4567,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1596351507,
        "creation_date": 1559576147,
        "question_id": 56430487,
        "link": "https://stackoverflow.com/questions/56430487/can-arduino-uno-send-data-to-cloud-firestore",
        "title": "Can Arduino Uno send data to Cloud Firestore?",
        "body": "<p>I need information on how to connect and send data to firestore from an Arduino Board  and an ESP2866 module. I've only found tutorials using Firebase realtime, the ones I found using Firestore are using the NodeMCU board.</p>\n\n<p>I have a Vue.js application reading some fields from a Firestore db, which should recieve information from the arduino with some attached sensors. From what I've seen my options are changing to firebase realtime or changing to NodeMCU( not possible ). I some direction to follow, on how to use firestore with arduino or just change the db.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "esp32", "infrared"],
        "is_answered": false,
        "view_count": 54,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1595707140,
        "creation_date": 1595707140,
        "question_id": 63092982,
        "link": "https://stackoverflow.com/questions/63092982/controlling-ac-using-arduino-esp8266-esp32",
        "title": "Controlling AC using Arduino / ESP8266 / ESP32",
        "body": "<p>I want to turn on / off my voltas (TATA) Ac using IR commands using Arduino / nodeMCU / ESP32 any of these boards.</p>\n<p>So far I have decoded the IR codes from my AC remote</p>\n<p>HEX :</p>\n<pre><code>0xCE4342CC\n</code></pre>\n<p>RAW :</p>\n<pre><code>4448, -4324, 580, -1600, 572, -548, 548, -1636, 544, -1608, 576, -544, 552, -544, 540, -1608, 576, -548, 548, -544, 552, -1604, 580, -540, 544, -548, 548, -1604, 580, -1600, 572, -548, 548, -1608, 572, -552, 544, -1608, 576, -1600, 572, -1608, 572, -1608, 576, -544, 552, -1604, 576, -1632, 552, -1608, 572, -548, 548, -544, 544, -548, 548, -544, 552, -1624, 548, -548, 548, -544, 552, -1632, 548, -1632, 540, -1612, 572, -548, 548, -544, 552, -544, 544, -548, 548, -544, 552, -544, 552, -540, 544, -548, 548, -1632, 552, -1604, 568, -1608, 572, -1608, 576, -1604, 576, -5216, 4440, -4352, 572, -1608, 576, -544, 552, -1604, 576, -1604, 568, -552, 544, -548, 548, -1600, 572, -552, 544, -552, 544, -1608, 576, -544, 552, -540, 544, -1636, 548, -1604, 568, -552, 544, -1612, 568, -556, 544, -1608, 572, -1604, 580, -1600, 572, -1608, 572, -548, 548, -1608, 576, -1604, 576, -1608, 576, -544, 552, -540, 544, -548, 548, -548, 548, -1600, 572, -548, 548, -548, 548, -1608, 576, -1604, 568, -1608, 572, -548, 552, -544, 540, -552, 544, -548, 548, -544, 544, -552, 544, -548, 548, -544, 552, -1604, 568, -1612, 568, -1608, 576, -1604, 576, -1604, 580,\n</code></pre>\n<p>The problem arises when I send these IR codes using IR led. The AC doesn\u2019t respond to the IR codes transmitted by nodeMCU.</p>\n<p>My logic was if I replicated the IR codes from remote and retransmitted it using my nodeMCU the AC should accept it. I don\u2019t know what\u2019s wrong.</p>\n<p>I am using the following libraries :</p>\n<pre><code>#include &lt;IRremoteESP8266.h&gt;\n#include &lt;IRsend.h&gt;\n#include &lt;IRrecv.h&gt;\n</code></pre>\n<p>My code for hex :</p>\n<pre><code>irsend.sendNEC(POWER_ON); \n</code></pre>\n<p>My code for RAW :</p>\n<pre><code>irsend.sendRaw((unsigned int*) results.rawbuf, results.rawlen, 38);\n</code></pre>\n"
    }, {
        "tags": ["python", "arduino", "iot"],
        "is_answered": false,
        "view_count": 61,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1595569803,
        "creation_date": 1510856371,
        "last_edit_date": 1595569803,
        "question_id": 47336600,
        "link": "https://stackoverflow.com/questions/47336600/issue-with-arduino-thingspeak",
        "title": "Issue with Arduino/Thingspeak",
        "body": "<p>I'm trying to upload sound sensor data to Thingspeak. Having problems getting the data when connected to the Wifi.</p>\n\n<p>The Arduino is supposed to pick up sound, light up an LED and send the data to the Thingspeak but the LED isn't responding once the code for Thingspeak is input and it's not sending any data to Thingspeak.</p>\n\n<p>Any help would be appreciated.</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n#include \"ThingSpeak.h\"\n#include &lt;SPI.h&gt;\n#include &lt;WiFi101.h&gt;\n\n// Create instance of WiFi client\nWiFiClient client;\nchar ssid[] = \"Arduino\";        //  your network SSID (name) \n\n// Add yourThingSpeak channel information here\nunsigned long myChannelNumber = 365995;\nconst char * myWriteAPIKey = \"30Y94U59QGRL5OEJ\";\n\n\n\nconst int ledPin = 6; //pin 13 built-in led\nconst int soundPin = A0; //sound sensor attach to A0\nint threshold = 1000; //Set minimum threshold for LED lit\nvoid setup()\n{\n  pinMode(ledPin,OUTPUT);//set pin13 as OUTPUT\n  Serial.begin(9600); //initialize serial\n  ThingSpeak.begin(client);\n    WiFi.begin(ssid);\n    // Print WiFi strength information\n  printCurrentNet();\n}\nvoid loop()\n{\n\n\n  int value = analogRead(soundPin);//read the value of A0\n  Serial.println(value);//print the value\n  if(value &gt; threshold) //if the value is greater than 600\n  {\n\n    digitalWrite(ledPin,LOW);//turn off the led\n    //delay(1000);\n  }\n  else\n  {\n    digitalWrite(ledPin,HIGH);//turn on the led\n    ThingSpeak.setField(1, value);\n\n\n  }\n\n}\nvoid printCurrentNet() {\n  // Print the WiFi signal strength:\n  long rssi = WiFi.RSSI();\n  Serial.print(\"Signal strength (RSSI): \");\n  Serial.print(rssi);\n  Serial.println(\" dBm\");\n}\n</code></pre>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub", "arduino-esp8266", "azure-iot-central"],
        "is_answered": false,
        "view_count": 25,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1594979932,
        "creation_date": 1594979355,
        "question_id": 62951467,
        "link": "https://stackoverflow.com/questions/62951467/while-connecting-devices-to-azure-cloud-which-is-advisable-to-use-azure-iot",
        "title": "While connecting devices to Azure cloud , which is advisable to use - Azure IoT Hub or Azure IoT Central?",
        "body": "<p>So basically i'm working on a project which involves getting data using a sensor (say analyzing temperature/vibration etc.) and then transfer the data to cloud (Azure) which in turn can be used to show users the data - in an app/website. Do i use Azure IoT Hub or Azure IoT Central to store , stream and make use of data so that i can display the respective data of each user when they logon to the website?</p>\n"
    }, {
        "tags": ["iot", "esp8266", "micropython"],
        "is_answered": false,
        "view_count": 50,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1594464069,
        "creation_date": 1593851151,
        "question_id": 62726941,
        "link": "https://stackoverflow.com/questions/62726941/micropython-code-to-blink-build-in-led-of-esp8266-have-no-effect",
        "title": "Micropython code to blink build-in Led of ESP8266 have no effect",
        "body": "<p>I have uploaded micropython code that blink the build-in Led, everything passed perfectely and the file have been uploaded succssefully to the board, but when I unplug the board and plug it again to see the effect of the code uploaded nothing happened.</p>\n<p>here is the code:</p>\n<pre><code># main.py\n\nimport machine\nimport time\n\npin = machine.Pin(0, machine.Pin.OUT)\n\nfor i in range(10):\n        pin.value(1)\n        time.sleep(0.5)\n        pin.value(0)\n        time.sleep(0.5)\n</code></pre>\n"
    }, {
        "tags": ["swift", "bluetooth-lowenergy", "iot"],
        "is_answered": true,
        "view_count": 119,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1593544412,
        "creation_date": 1593361994,
        "question_id": 62625320,
        "link": "https://stackoverflow.com/questions/62625320/connecting-to-metawear-via-swift-ble",
        "title": "Connecting to Metawear via Swift BLE",
        "body": "<p>I am using a Metawear Motion R board. I want to read the accelerometer and gyroscope data. While the manufacturer does provide a C++ SDK that I can use to read this data, I find it unstable and hard to debug when things go wrong. As a result, I wanted to read the accelerometer and gyroscope data only via Swift.</p>\n<p>If I were to use their SDK, code below would let me call and configure the device:</p>\n<pre><code>// configure accelerometer\nmbl_mw_acc_set_odr(self.connectedDevice?.board, 50.0);\nmbl_mw_acc_set_range(self.connectedDevice?.board, 4.0);\nmbl_mw_acc_write_acceleration_config(self.connectedDevice?.board);\n\n// configure gyroscope\nmbl_mw_gyro_bmi160_set_odr(self.connectedDevice?.board, MBL_MW_GYRO_BMI160_ODR_50Hz);\nmbl_mw_gyro_bmi160_set_range(self.connectedDevice?.board, MBL_MW_GYRO_BMI160_RANGE_125dps);\nmbl_mw_gyro_bmi160_write_config(self.connectedDevice?.board);\n\n// read the accelerometer\nlet acc_signal = mbl_mw_acc_get_acceleration_data_signal(self.connectedDevice?.board);\nmbl_mw_datasignal_subscribe(acc_signal, bridge(obj: self)) { (context, data) in\n    let obj: MblMwCartesianFloat = data!.pointee.valueAs();\n    let _self: ExerciseViewController = bridge(ptr: context!);\n    _self.add_imu_records(record: ImuRecord(x: obj.x, y: obj.y, z: obj.z, time: Date()), isAccelerometer: true);\n}\n// read the gyroscope\nlet gyro_signal = mbl_mw_gyro_bmi160_get_rotation_data_signal(self.connectedDevice?.board);\nmbl_mw_datasignal_subscribe(gyro_signal, bridge(obj: self)) { (context, data) in\n    let obj: MblMwCartesianFloat = data!.pointee.valueAs();\n    let _self: ExerciseViewController = bridge(ptr: context!);\n    _self.add_imu_records(record: ImuRecord(x: obj.x, y: obj.y, z: obj.z, time: Date()), isAccelerometer: false);\n}\n\nmbl_mw_acc_enable_acceleration_sampling(self.connectedDevice?.board);\nmbl_mw_acc_start(self.connectedDevice?.board);\nmbl_mw_gyro_bmi160_enable_rotation_sampling(self.connectedDevice?.board);\nmbl_mw_gyro_bmi160_start(self.connectedDevice?.board);\n</code></pre>\n<p>To start implementing the configuration and logging logic by only using Swift, I am following two guides: <a href=\"https://www.cumulations.com/blogs/66/decoding-metawear-apis-using-ble-to-read-gyro-sensor\" rel=\"nofollow noreferrer\">Decoding metawear</a> , <a href=\"https://www.raywenderlich.com/231-core-bluetooth-tutorial-for-ios-heart-rate-monitor\" rel=\"nofollow noreferrer\">Core BLE Tutorial</a></p>\n<p>My code base below will connect to the MetaWear device and look at the different characteristics.</p>\n<pre><code>import Foundation\nimport CoreBluetooth\n\npublic class BleCommunicator : NSObject, CBCentralManagerDelegate {\n    \n    private let metaWearService = CBUUID(string: &quot;326A9000-85CB-9195-D9DD-464CFBBAE75A&quot;)\n    private let metaWearConfigurationCharacteristic = CBUUID(string: &quot;326A9001-85CB-9195-D9DD-464CFBBAE75A&quot;)\n    private let metawearDataCharacteristic = CBUUID(string: &quot;326A9006-85CB-9195-D9DD-464CFBBAE75A&quot;)\n    \n    private var centralManager : CBCentralManager!\n    private var myDevice: CBPeripheral!\n    \n    override init() {\n        super.init()\n        centralManager = CBCentralManager(delegate: self, queue: nil)\n    }\n    \n    public func centralManagerDidUpdateState(_ central: CBCentralManager) {\n        switch central.state {\n        case .poweredOn:\n            centralManager.scanForPeripherals(withServices: nil)\n        case .unknown:\n            print(&quot;### check ble connection is unknown&quot;);\n        case .resetting:\n            print(&quot;### check ble connection is resetting&quot;);\n        case .unsupported:\n            print(&quot;### check ble connection is unsupported&quot;);\n        case .unauthorized:\n            print(&quot;### check ble connection is unauthorized&quot;);\n        case .poweredOff:\n            print(&quot;### check ble connection is poweredOff&quot;);\n        @unknown default:\n            print(&quot;### check ble connection&quot;);\n        }\n    }\n\n    public func centralManager(_ central: CBCentralManager, didDiscover peripheral: CBPeripheral,\n                        advertisementData: [String: Any], rssi RSSI: NSNumber) {\n        if (peripheral.name == &quot;MetaWear&quot;) {\n            myDevice = peripheral\n            myDevice.delegate = self\n            centralManager.stopScan()\n            centralManager.connect(myDevice)\n        }\n    }\n    \n    public func centralManager(_ central: CBCentralManager, didConnect peripheral: CBPeripheral) {\n        myDevice.discoverServices([metaWearService])\n    }\n}\n\nextension BleCommunicator : CBPeripheralDelegate {\n\n    public func peripheral(_ peripheral: CBPeripheral, didDiscoverServices error: Error?) {\n        guard let services = peripheral.services else { return }\n        for service in services {\n            peripheral.discoverCharacteristics(nil, for: service)\n        }\n    }\n    \n    public func peripheral(_ peripheral: CBPeripheral, didDiscoverCharacteristicsFor service: CBService, error: Error?) {\n        guard let characteristics = service.characteristics else { return }\n        for characteristic in characteristics {\n            if (characteristic.uuid == metawearDataCharacteristic) {\n                peripheral.readValue(for: characteristic)\n                peripheral.setNotifyValue(true, for: characteristic)\n            }\n        }\n    }\n    \n    public func peripheral(_ peripheral: CBPeripheral, didUpdateValueFor characteristic: CBCharacteristic, error: Error?) {\n        switch characteristic.uuid {\n        case metawearDataCharacteristic:\n            sensor(from: characteristic)\n        default:\n            print(&quot;Unhandled Characteristic UUID: \\(characteristic.uuid)&quot;)\n        }\n    }\n    \n    private func sensor(from characteristic: CBCharacteristic) {\n        guard let characteristicData = characteristic.value,\n        let _ = characteristicData.first else { return }\n        let data = String(bytes: characteristicData, encoding: .utf8)\n        print(&quot;### we have this:: \\(data) &quot;);\n    }\n}\n</code></pre>\n<p>Once run, the sensor funciton displays an empty 20 byte array. I suspect this is because the device needs to be configured before data is read. ( As I do in the C++ code block ) The first tutorial mentions sending a pre-formatted pattern to the metawear board via the metaWearConfigurationCharacteristic, as shown below, but I am unable to find any documentation to replicate it:</p>\n<blockquote>\n<p>Input - 13032600, where 13 is gyro module, 03 is config opcode, 26 is\noutput data rate (38 hz), 00 is angular data range.</p>\n</blockquote>\n<p>Question:\nHow can I configure and read accelerometer and gyroscope sensors, as demonstrated using the C++ code, with Swift?</p>\n"
    }, {
        "tags": ["sms", "twilio", "iot"],
        "is_answered": false,
        "view_count": 848,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1593209324,
        "creation_date": 1510749565,
        "last_edit_date": 1510750184,
        "question_id": 47307673,
        "link": "https://stackoverflow.com/questions/47307673/twilio-error-21211-invalid-to-phone-number-for-m2m-sim-card",
        "title": "Twilio - ERROR 21211 - Invalid &#39;To&#39; Phone Number for M2M SIM card",
        "body": "<p>Is there a possibility to send SMS to an M2M number (in my case consisting of country code plus 13 digits) using Twilio?</p>\n\n<p>I tried using curl:</p>\n\n<pre><code>curl -XPOST https://api.twilio.com/2010-04-01/Accounts/{AccountSID}/Messages.json -d \"Body=test\" -d \"To=%2Bxx xxxxxxxxxxxxx\" -d \"From=%2Bxx xxxxxxxxxxx\" -u \"{AccountSID}:{authToken}\"\n</code></pre>\n\n<p>And the result is </p>\n\n<pre><code>{\"code\": 21211, \"message\": \"The 'To' number +xxxxxxxxxxxxxxx is not a valid phone number.\", \"more_info\": \"https://www.twilio.com/docs/errors/21211\", \"status\": 400}\n</code></pre>\n\n<p>The number is definitely valid, since I can send SMS e.g. from my phone to this number.</p>\n\n<p>When I remove the last three digits of the longer number, I do not get any error.</p>\n"
    }, {
        "tags": ["android", "embedded", "iot", "okhttp", "esp8266"],
        "is_answered": true,
        "view_count": 390,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1592071057,
        "creation_date": 1592068297,
        "last_edit_date": 1592068669,
        "question_id": 62363186,
        "link": "https://stackoverflow.com/questions/62363186/okhttp-fails-to-connect-to-esp8266",
        "title": "OkHttp fails to connect to ESP8266",
        "body": "<p>I'm trying to send a simple HTTP request to a ESP8266 from my Android phone. I'm following <a href=\"https://codinginflow.com/tutorials/android/okhttp-simple-get-request\" rel=\"nofollow noreferrer\">this</a> tutorial. The code works for the URL used in the tutorial (<a href=\"https://reqres.in/api/users?page=2\" rel=\"nofollow noreferrer\">https://reqres.in/api/users?page=2</a>), however not for the URL that turns on the LED on ESP8266. (Turning on the LED is possible through a browser though, so it must be something with the code). The URL is <code>https://192.168.137.78/led/1</code>.<br>\nThe stacktrace is quite long, but this is the first error,</p>\n\n<pre><code>2020-06-13 12:55:55.948 13594-13631/com.example.esp W/System.err: java.net.ConnectException: Failed to connect to /192.168.137.78:443\n</code></pre>\n\n<hr>\n\n<p>The rest of the stacktrace:</p>\n\n<pre><code>2020-06-13 12:55:55.948 13594-13631/com.example.esp W/System.err: java.net.ConnectException: Failed to connect to /192.168.137.78:443\n    2020-06-13 12:55:55.949 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:285)\n    2020-06-13 12:55:55.949 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:195)\n    2020-06-13 12:55:55.950 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:249)\n    2020-06-13 12:55:55.950 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:108)\n    2020-06-13 12:55:55.950 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:76)\n    2020-06-13 12:55:55.951 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:245)\n    2020-06-13 12:55:55.951 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n    2020-06-13 12:55:55.951 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100)\n    2020-06-13 12:55:55.951 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:96)\n    2020-06-13 12:55:55.952 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100)\n    2020-06-13 12:55:55.952 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    2020-06-13 12:55:55.952 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100)\n    2020-06-13 12:55:55.953 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    2020-06-13 12:55:55.953 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100)\n    2020-06-13 12:55:55.953 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:197)\n    2020-06-13 12:55:55.954 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:502)\n    2020-06-13 12:55:55.954 13594-13631/com.example.esp W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n    2020-06-13 12:55:55.954 13594-13631/com.example.esp W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n    2020-06-13 12:55:55.955 13594-13631/com.example.esp W/System.err:     at java.lang.Thread.run(Thread.java:919)\n    2020-06-13 12:55:55.956 13594-13631/com.example.esp W/System.err: Caused by: java.net.ConnectException: failed to connect to /192.168.137.78 (port 443) from /192.168.137.82 (port 42408) after 10000ms: isConnected failed: ECONNREFUSED (Connection refused)\n    2020-06-13 12:55:55.956 13594-13631/com.example.esp W/System.err:     at libcore.io.IoBridge.isConnected(IoBridge.java:288)\n    2020-06-13 12:55:55.957 13594-13631/com.example.esp W/System.err:     at libcore.io.IoBridge.connectErrno(IoBridge.java:193)\n    2020-06-13 12:55:55.957 13594-13631/com.example.esp W/System.err:     at libcore.io.IoBridge.connect(IoBridge.java:135)\n    2020-06-13 12:55:55.957 13594-13631/com.example.esp W/System.err:     at java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:142)\n    2020-06-13 12:55:55.957 13594-13631/com.example.esp W/System.err:     at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:390)\n    2020-06-13 12:55:55.958 13594-13631/com.example.esp W/System.err:     at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:230)\n    2020-06-13 12:55:55.958 13594-13631/com.example.esp W/System.err:     at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:212)\n    2020-06-13 12:55:55.959 13594-13631/com.example.esp W/System.err:     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n    2020-06-13 12:55:55.959 13594-13631/com.example.esp W/System.err:     at java.net.Socket.connect(Socket.java:621)\n    2020-06-13 12:55:55.959 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:120)\n    2020-06-13 12:55:55.960 13594-13631/com.example.esp W/System.err:     at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:283)\n    2020-06-13 12:55:55.960 13594-13631/com.example.esp W/System.err:   ... 18 more\n    2020-06-13 12:55:55.961 13594-13631/com.example.esp W/System.err: Caused by: android.system.ErrnoException: isConnected failed: ECONNREFUSED (Connection refused)\n    2020-06-13 12:55:55.961 13594-13631/com.example.esp W/System.err:     at libcore.io.IoBridge.isConnected(IoBridge.java:275)\n    2020-06-13 12:55:55.961 13594-13631/com.example.esp W/System.err:   ... 28 more\n</code></pre>\n"
    }, {
        "tags": ["python", "django", "sockets", "iot", "raspberry-pi4"],
        "is_answered": false,
        "view_count": 146,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1591509436,
        "creation_date": 1591509436,
        "question_id": 62241441,
        "link": "https://stackoverflow.com/questions/62241441/how-connect-to-iot-devices-with-python",
        "title": "how connect to IoT devices with python",
        "body": "<p>I have 300 sensors in a wide site and every 200 ms I have to send a request to them to get data \nand sensors reply at max 100 ms\nsensors manufacturer programmed the sensors to answer requests on socket(TCP/IP) only\nand I want to make a dashboard for monitor sensors status by python and Django  and  run it on raspberry pi 4(4 G Ram)</p>\n\n<p>is it possible?\nhow I connect to 150 sensors at the same moment (multi-thread? or another way)\nand raspberry pi 4 can handle this project?</p>\n"
    }, {
        "tags": ["post", "arduino", "iot", "ifttt"],
        "is_answered": true,
        "view_count": 389,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1591371383,
        "creation_date": 1591039310,
        "question_id": 62139465,
        "link": "https://stackoverflow.com/questions/62139465/solve-issue-posting-to-webhook-for-ifttt-from-arduino-mkr1010",
        "title": "Solve issue POSTING to webhook for IFTTT from Arduino MKR1010",
        "body": "<p>I am aiming to make a post request to trigger a IFTTT webhook action. I am using the MKR1010 board. I am able to connect to the network and turn the connected LED on and off using the cloud integration.</p>\n\n<p>The code is as follows, but doesn't trigger the web hook. I can manually paste the web address in a browser and this does trigger the web hook. When the code is posted it returns a 400 bad request error. </p>\n\n<p>The key has been replaced in the below code with a dummy value.</p>\n\n<p>Does anybody know why this is not triggering the web hook? / Can you explain why the post request is being rejected by the server? I don't even really need to read the response from the server as long as it is sent.</p>\n\n<p>Thank you</p>\n\n<pre><code>// ArduinoHttpClient - Version: Latest \n#include &lt;ArduinoHttpClient.h&gt;\n\n\n#include \"thingProperties.h\"\n\n\n#define LED_PIN 13\n#define BTN1 6\n\nchar serverAddress[] = \"maker.ifttt.com\";  // server address\nint port = 443;\n\nWiFiClient wifi;\nHttpClient client = HttpClient(wifi, serverAddress, port);\n\n\n// variables will change:\nint btnState = 0;         // variable for reading the pushbutton status\nint btnPrevState = 0;\n\nvoid setup() {\n  // Initialize serial and wait for port to open:\n  Serial.begin(9600);\n  // This delay gives the chance to wait for a Serial Monitor without blocking if none is found\n  delay(1500); \n\n  // Defined in thingProperties.h\n  initProperties();\n\n  // Connect to Arduino IoT Cloud\n  ArduinoCloud.begin(ArduinoIoTPreferredConnection);\n\n  /*\n     The following function allows you to obtain more information\n     related to the state of network and IoT Cloud connection and errors\n     the higher number the more granular information you\u2019ll get.\n     The default is 0 (only errors).\n     Maximum is 4\n */\n  setDebugMessageLevel(2);\n  ArduinoCloud.printDebugInfo();\n\n  // setup the board devices\n  pinMode(LED_PIN, OUTPUT);\n  pinMode(BTN1, INPUT);\n\n\n}\n\nvoid loop() {\n  ArduinoCloud.update();\n  // Your code here \n  // read the state of the pushbutton value:\n\nbtnState = digitalRead(BTN1);\nif (btnPrevState == 0 &amp;&amp; btnState == 1) {\n led2 = !led2;\n postrequest();\n}\n  digitalWrite(LED_PIN, led2);\n\nbtnPrevState = btnState;\n\n}\n\n\n\nvoid onLed1Change() {\n  // Do something\n\n   digitalWrite(LED_PIN, led1);\n    //Serial.print(\"The light is \");\n    if (led1) {\n        Serial.println(\"The light is ON\");\n    } else {\n    //    Serial.println(\"OFF\");\n    }\n\n\n}\n\nvoid onLed2Change() {\n  // Do something\n\n  digitalWrite(LED_PIN, led2);\n}\n\n\nvoid postrequest() {\n  //    String(\"POST /trigger/btn1press/with/key/mykeyhere\")\n Serial.println(\"making POST request\");\n  String contentType = \"/trigger/btn1press/with/key\";\n  String postData = \"mykeyhere\";\n\n  client.post(\"/\", contentType, postData);\n\n  // read the status code and body of the response\n  int statusCode = client.responseStatusCode();\n  String response = client.responseBody();\n\n  Serial.print(\"Status code: \");\n  Serial.println(statusCode);\n  Serial.print(\"Response: \");\n  Serial.println(response);\n\n  Serial.println(\"Wait five seconds\");\n  delay(5000);\n\n    }\n</code></pre>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "qr-code", "iot"],
        "is_answered": false,
        "view_count": 738,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1591348431,
        "creation_date": 1591348431,
        "question_id": 62211917,
        "link": "https://stackoverflow.com/questions/62211917/how-to-generate-a-qr-code-from-a-mac-address",
        "title": "How to generate a QR code from a MAC address",
        "body": "<p>I am trying to generate a QR code from a MAC address to re-pair my watch to an iOS app. I\u2019ve tried using many standard QR code generators, but my understanding is that making a QR code for a MAC address follows a different format. (For example, <a href=\"https://www.aina-wireless.com/wp-content/uploads/2018/08/Bluetooth_Pairing-1.20.pdf\" rel=\"nofollow noreferrer\">look at section five in this PDF</a> -- the string shown makes a different QR code than in the example)</p>\n\n<p>I could just reset the watch, but then I\u2019d lose a lot of important data. Does anyone have any suggestions for how I can get this working?  Thank you!</p>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "ads", "iot"],
        "is_answered": true,
        "view_count": 1671,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1591040177,
        "creation_date": 1590843929,
        "question_id": 62102854,
        "link": "https://stackoverflow.com/questions/62102854/ble-advertising-rawdata-how-to-decode",
        "title": "BLE Advertising RawData - How to decode?",
        "body": "<p>I have a E66 Fitness band connected to a gateway and the band does connect to the gateway and I receive data on MQTT. \nBut I am unsure on how to decode the RawData format, can someone help me with that?\nThanks  </p>\n\n<pre><code>{\n      \"TimeStamp\":\"2020-05-30 16:44:32\",\n      \"DataFormat\":\"RawData\",\n      \"BLEMac(hex)\":\"E5F604C2EAAE\",\n      \"RSSI(dBm)\":-30,\n      \"BLEName\":\"E67 EAAE\",\n      \"RawData(hex)\":\"02010610FF107803E8000000000000640023290009094536372045414145\"\n  }\n\n</code></pre>\n"
    }, {
        "tags": ["iot", "cumulocity"],
        "is_answered": false,
        "view_count": 34,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1589819506,
        "creation_date": 1589819506,
        "question_id": 61874402,
        "link": "https://stackoverflow.com/questions/61874402/cumulocity-data-types-handling",
        "title": "Cumulocity Data Types Handling",
        "body": "<p>How does one handle different data types in the Cumulocity IoT Cloud? Things like:\nDouble - Double precision floating-point value in accordance to IEEE754\nFloat - Single precision floating-point value in accordance to IEEE754\nDecimal - Decimal with arbitrary precision\nLong - Signed 64bit integer value\nInt - Signed 32bit integer value\nShort - Signed 16bit integer value\nByte - Signed 8bit integer value</p>\n"
    }, {
        "tags": ["iot"],
        "is_answered": false,
        "view_count": 14,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1589395849,
        "creation_date": 1589394431,
        "question_id": 61782159,
        "link": "https://stackoverflow.com/questions/61782159/is-it-a-must-that-logic-converter-must-be-used-with-breadboard",
        "title": "Is it a must that logic converter must be used with breadboard?",
        "body": "<p>I am working on a project that requires me use logic converter as my nodemcu esp 32 is 3.3V and my sensor is 5V. I got my logic converter soldered and I am trying to assemble the parts together but I am stuck now as I am not sure is it a must to use logic converter with breadboard? I am sorry if my question sounds too dumb for I am a newbie and this is my first time working on IoT project. Any help/suggestion will definitely be appreciated.</p>\n\n<p>Thanks in advance. </p>\n"
    }, {
        "tags": ["iot", "raspberry-pi2", "windows-10"],
        "is_answered": true,
        "view_count": 3048,
        "favorite_count": 0,
        "score": 5,
        "last_activity_date": 1588800327,
        "creation_date": 1430929390,
        "last_edit_date": 1431024431,
        "question_id": 30082322,
        "link": "https://stackoverflow.com/questions/30082322/windows-10-iot-raspberry-pi-2-dht22-am2302",
        "title": "Windows 10 IoT Raspberry Pi 2: DHT22/AM2302",
        "body": "<p>I just wanted to start making experience with the DHT22/AM2302 (a temperature and humidity sensor), but I have no idea how to initialize and get the data of it ... I tried to use GpioPin:</p>\n\n<pre><code>gpioController = GpioController.GetDefault();\nif(gpioController == null)\n{\n    Debug.WriteLine(\"GpioController Initialization failed.\");\n    return;\n}\nsensorPin = gpioController.OpenPin(7); //Exception throws here\nsensorPin.SetDriveMode(GpioPinDriveMode.Input);\nDebug.WriteLine(sensorPin.Read());\n</code></pre>\n\n<p>but get the exception: \"A resource required for this operation is disabled.\"</p>\n\n<p>After that I took a look at the library for the unixoids and found this:</p>\n\n<p><a href=\"https://github.com/technion/lol_dht22/blob/master/dht22.c\" rel=\"nofollow\">https://github.com/technion/lol_dht22/blob/master/dht22.c</a></p>\n\n<p>But I have no idea how to realize that in VCSharp using Windows 10, anyone an idea or experience?</p>\n\n<p>Thank you very much in advance!</p>\n\n<p>UPDATE:</p>\n\n<p>I got the hint, that there is not GPIO-Pin 7 and this is true, so I re-tried it, but the GPIO-Output seems to be just HIGH or LOW ... So I have to use the I2C or the SPI ... According to this Project, I decided to try it out with SPI: <a href=\"http://microsoft.hackster.io/windowsiot/temperature-sensor-sample\" rel=\"nofollow\">http://microsoft.hackster.io/windowsiot/temperature-sensor-sample</a> and making steps forward ... The difficulty now is to translate the above linked C-Library to the C-Sharp-SDK to receive the right data ... </p>\n\n<pre><code>private async void InitSPI()\n{\n    try\n    {\n        var settings = new SpiConnectionSettings(SPI_CHIP_SELECT_LINE);\n        settings.ClockFrequency = 500000;\n        settings.Mode = SpiMode.Mode0;\n\n        string spiAqs = SpiDevice.GetDeviceSelector(SPI_CONTROLLER_NAME);\n        var deviceInfo = await DeviceInformation.FindAllAsync(spiAqs);\n        SpiDisplay = await SpiDevice.FromIdAsync(deviceInfo[0].Id, settings);\n    }\n    catch(Exception ex)\n    {\n        Debug.WriteLine(\"SPI Initialization failed: \" + ex.Message);\n    }\n}\n</code></pre>\n\n<p>This works not so well, to be clear: It works just once on starting up the raspberry pi2, then starting / remote debugging the application, but after exiting the application and re-start them, the SPI Initialization fails.</p>\n\n<p>And now Im working on reading the data from the pin and will show some Code in a future update. Any comments, answers and or advices are still welcome. </p>\n"
    }, {
        "tags": ["xml", "iot", "omnet++", "inet"],
        "is_answered": false,
        "view_count": 57,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1588512823,
        "creation_date": 1573380677,
        "question_id": 58787613,
        "link": "https://stackoverflow.com/questions/58787613/auto-generate-environmental-objects-in-xml-file-for-omnett-simulation",
        "title": "Auto generate environmental objects in xml file for Omnett++ simulation",
        "body": "<p>I am going to simulate a Smart Home Lighting System using Omnet++. For this, I need to draw the floorplan for the specific building I am simulating my network on. There is a module that does the job for me, however, it has to be rendered with an XML file that contains the positions and the dimensions of the objects (walls mainly) to be drawn. </p>\n\n<p>So, please if anyone knows how to auto generate such and XML file that contains the objects, or it is the only way to go by tediously writing hundreds of lines similar to the following one: </p>\n\n<p>[object position=\"min 21 15.5 0\" orientation=\"0 0 0\" shape=\"cuboid 10 0.5 2\" material=\"brick\" fill-color=\"203 65 84\" opacity=\"0.8\" texture=\"brick.jpg\"/]</p>\n"
    }, {
        "tags": ["arduino", "wifi", "mqtt", "iot", "arduino-uno"],
        "is_answered": true,
        "view_count": 481,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1588319423,
        "creation_date": 1587290658,
        "last_edit_date": 1587293372,
        "question_id": 61302576,
        "link": "https://stackoverflow.com/questions/61302576/connection-problem-of-esp8266-esp-01-arduino-uno-to-cayenne",
        "title": "Connection problem of ESP8266 ESP-01 arduino uno to cayenne",
        "body": "<p>I am using the ESP8266 Wi-Fi shield to connect Arduino to the cayenne server. However once connect the chip to the access point it will heat up and sometimes will lagging. After that, it shows some message but the Cayenne server didn't connect to the Arduino. Every widget can not be operated (No response when clicking a button, temperature value unchanged, etc.). Can anyone solve this issue? It is important for my course work. I am using Arduino Uno and ESP8266 ESP-01 chip. We have tried different styles of code to upload data to cayenne server but they didn't work(Below include 3 versions)</p>\n\n<p>Finale 1 Version(Cayenne out) :</p>\n\n<pre><code>#define CAYENNE_PRINT Serial\n#include &lt;CayenneMQTTESP8266Shield.h&gt;\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n#include &lt;virtuabotixRTC.h&gt;\n\n//Real+Virtual\n#define LED_PIN 5\n#define temp_sensor 4\n#define EspSerial Serial\n\n//Virtual\n#define Power_sensor 9\n#define DayPower 10\n#define MonthPower 11\n#define LED_PWM 12\n\n//SSID\n\nchar ssid[] = \"TP-LINK_MWNg\";\nchar password[] = \"mwngpass\";\n\nchar username[] = \"743674368676328742somenumbers\";\nchar mqtt_password[] = \"743674368676328742somenumbers\";\nchar client_id[] = \"743674368676328742somenumbers\";\n\nESP8266 wifi(&amp;EspSerial);\n\n//Temperature setup\nOneWire oneWire(4);\nDallasTemperature sensors(&amp;oneWire);\n\n//Power sensor\nconst int analogInPin = A0;\nint sensorValue = 0;        // value read from the pot\nfloat MAXValue = 0;        // value output to the PWM (analog out)\nfloat Power = 0;\nint PWM = 0;\n\n//Time\nint curSec = 0;\nint curMin = 0;\nint curHour = 0;\nint curDay = 0;\nvirtuabotixRTC myRTC(6, 7, 8);\nunsigned PowerInDay = 0;\nunsigned PowerInMonth = 0;\n\nvoid setup() {\n  // put your setup code here, to run once:\n  sensors.begin();\n  EspSerial.begin(115200);\n  delay(10);\n  Cayenne.begin(username, mqtt_password, client_id, wifi, ssid, password);\n\n  pinMode(LED_PIN, OUTPUT);\n  analogWrite(LED_PIN, PWM);\n\n  curSec = myRTC.seconds;\n  curMin = myRTC.minutes;\n  curHour = myRTC.hours;\n  curDay = myRTC.dayofmonth;\n\n  //test\n\n}\n\nvoid loop() {\n  Cayenne.loop();\n  myRTC.updateTime();\n  if ( curSec != myRTC.seconds ) {\n    PowerInDay += Power;\n    curSec = myRTC.seconds;\n  }\n  if (curDay != myRTC.dayofmonth) {\n    PowerInMonth += PowerInDay;\n    PowerInDay = 0;\n    curDay = myRTC.dayofmonth;\n  }\n  if (curDay &gt; myRTC.dayofmonth) {\n    PowerInMonth = 0;\n  }\n  Serial.print(myRTC.dayofmonth);\n  Serial.print('/');\n  Serial.print(myRTC.month);\n  Serial.print('/');\n  Serial.print(myRTC.year);\n  Serial.print('/');\n  Serial.print(' ');\n  Serial.print(myRTC.hours);\n  Serial.print(':');\n  Serial.print(myRTC.minutes);\n  Serial.print(':');\n  Serial.print(myRTC.seconds);\n  Serial.print('\\n');\n  Serial.print(PowerInDay);\n  Serial.print(' ');\n  Serial.print(PowerInMonth);\n  Serial.print('\\n');\n\n}\n\nCAYENNE_OUT(temp_sensor)\n{\n  sensors.requestTemperatures();\n  Cayenne.celsiusWrite(temp_sensor, sensors.getTempCByIndex(0));\n}\n\nCAYENNE_OUT(Power_sensor)\n{\n  sensorValue = analogRead(analogInPin);\n  // map it to the range of the analog out:\n  if (sensorValue &gt; 0)\n    MAXValue = sensorValue * 0.00007307;\n\n  Power = MAXValue * ((float)PWM / (float)255) * 3.3 * ((float)PWM / (float)255);\n  // change the analog out value:/\n\n  // print the results to the serial monitor:\n  Serial.print(\"sensor = \");\n  Serial.print(sensorValue); //RAW value from analog read :)\n  Serial.print(\"\\t output = \");\n  Serial.println(MAXValue * ((float)PWM / (float)255), 3); //Output the current\n  Serial.print(\"Power =\");\n  Serial.println(Power, 3);\n  // wait 2 milliseconds before the next loop\n  // for the analog-to-digital converter to settle\n  // after the last reading:\n  delay(50);\n  Cayenne.virtualWrite(Power_sensor, Power, \"pow\", \"w\");\n}\n\nCAYENNE_OUT(DayPower) {\n  Cayenne.virtualWrite(DayPower, PowerInDay, \"pow\", \"w\");\n}\n\nCAYENNE_OUT(MonthPower) {\n  Cayenne.virtualWrite(MonthPower, PowerInMonth, \"pow\", \"w\");\n}\n\n\nCAYENNE_IN(LED_PIN)\n{\n  int currentValue = getValue.asInt();\n  if (currentValue == 1) {\n    PWM = 255;\n    digitalWrite(LED_PIN, HIGH);\n  } else {\n    PWM = 0;\n    digitalWrite(LED_PIN, LOW);\n  }\n  //digitalWrite(Relay, HIGH);\n  //Process message here. If there is an error set an error message using getValue.setError(), e.g getValue.setError(\"Error message\");\n}\n\nCAYENNE_IN(LED_PWM)\n{\n  int value = getValue.asInt(); // 0 to 255\n  PWM = value;\n  analogWrite(LED_PIN, value);\n}\n</code></pre>\n\n<p>Finale 2 Version(Cayenne out_Default):</p>\n\n<pre><code>#define CAYENNE_PRINT Serial\n#include &lt;CayenneMQTTESP8266Shield.h&gt;\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n#include &lt;virtuabotixRTC.h&gt;\n\n//Real+Virtual\n#define LED_PIN 5\n#define temp_sensor 4\n#define EspSerial Serial\n\n//Virtual\n#define Power_sensor 9\n#define DayPower 10\n#define MonthPower 11\n#define LED_PWM 12\n\n//SSID\n\nchar ssid[] = \"TP-LINK_MWNg\";\nchar password[] = \"mwngpass\";\n\nchar username[] = \"743674368676328742somenumbers\";\nchar mqtt_password[] = \"743674368676328742somenumbers\";\nchar client_id[] = \"743674368676328742somenumbers\";\n\nESP8266 wifi(&amp;EspSerial);\n\n//Temperature setup\nOneWire oneWire(4);\nDallasTemperature sensors(&amp;oneWire);\n\n//Power sensor\nconst int analogInPin = A0;\nint sensorValue = 0;        // value read from the pot\nfloat MAXValue = 0;        // value output to the PWM (analog out)\nfloat Power = 0;\nint PWM = 0;\n\n//Time\nint curSec = 0;\nint curMin = 0;\nint curHour = 0;\nint curDay = 0;\nvirtuabotixRTC myRTC(6, 7, 8);\nunsigned PowerInDay = 0;\nunsigned PowerInMonth = 0;\n\nvoid setup() {\n  // put your setup code here, to run once:\n  sensors.begin();\n  EspSerial.begin(115200);\n  delay(10);\n  Cayenne.begin(username, mqtt_password, client_id, wifi, ssid, password);\n\n  pinMode(LED_PIN, OUTPUT);\n  analogWrite(LED_PIN, PWM);\n\n  curSec = myRTC.seconds;\n  curMin = myRTC.minutes;\n  curHour = myRTC.hours;\n  curDay = myRTC.dayofmonth;\n\n  //test\n\n}\n\nvoid loop() {\n  Cayenne.loop();\n  myRTC.updateTime();\n  if ( curSec != myRTC.seconds ) {\n    PowerInDay += Power;\n    curSec = myRTC.seconds;\n  }\n  if (curDay != myRTC.dayofmonth) {\n    PowerInMonth += PowerInDay;\n    PowerInDay = 0;\n    curDay = myRTC.dayofmonth;\n  }\n  if (curDay &gt; myRTC.dayofmonth) {\n    PowerInMonth = 0;\n  }\n  Serial.print(myRTC.dayofmonth);\n  Serial.print('/');\n  Serial.print(myRTC.month);\n  Serial.print('/');\n  Serial.print(myRTC.year);\n  Serial.print('/');\n  Serial.print(' ');\n  Serial.print(myRTC.hours);\n  Serial.print(':');\n  Serial.print(myRTC.minutes);\n  Serial.print(':');\n  Serial.print(myRTC.seconds);\n  Serial.print('\\n');\n  Serial.print(PowerInDay);\n  Serial.print(' ');\n  Serial.print(PowerInMonth);\n  Serial.print('\\n');\n\n}\n\n  CAYENNE_OUT_DEFAULT()\n  {\n  //Temp sensor-----------------------------------------\n  sensors.requestTemperatures();\n  Cayenne.celsiusWrite(temp_sensor, sensors.getTempCByIndex(0));\n  //Temp sensor-----------------------------------------\n\n  //Power sensor-------------------------------------------------\n  sensorValue = analogRead(analogInPin);\n  // map it to the range of the analog out:\n  if (sensorValue &gt; 0)\n    MAXValue = sensorValue * 0.00007307;\n\n  Power = MAXValue * ((float)PWM / (float)255) * 3.3 * ((float)PWM / (float)255);\n  // change the analog out value:/\n\n  // print the results to the serial monitor:\n  Serial.print(\"sensor = \");\n  Serial.print(sensorValue); //RAW value from analog read :)\n  Serial.print(\"\\t output = \");\n  Serial.println(MAXValue * ((float)PWM / (float)255), 3); //Output the current\n  Serial.print(\"Power =\");\n  Serial.println(Power, 3);\n  // wait 2 milliseconds before the next loop\n  // for the analog-to-digital converter to settle\n  // after the last reading:\n  delay(50);\n  Cayenne.virtualWrite(Power_sensor, Power, \"pow\", \"w\");\n  //Power sensor-------------------------------------------------\n\n  //Power Day-------------------------------------------------\n  Cayenne.virtualWrite(DayPower, PowerInDay, \"pow\", \"w\");\n\n  //Power Month-------------------------------------------------\n  Cayenne.virtualWrite(MonthPower, PowerInMonth, \"pow\", \"w\");\n\n  }\n\nCAYENNE_IN(LED_PIN)\n{\n  int currentValue = getValue.asInt();\n  if (currentValue == 1) {\n    PWM = 255;\n    digitalWrite(LED_PIN, HIGH);\n  } else {\n    PWM = 0;\n    digitalWrite(LED_PIN, LOW);\n  }\n  //digitalWrite(Relay, HIGH);\n  //Process message here. If there is an error set an error message using getValue.setError(), e.g getValue.setError(\"Error message\");\n}\n\nCAYENNE_IN(LED_PWM)\n{\n  int value = getValue.asInt(); // 0 to 255\n  PWM = value;\n  analogWrite(LED_PIN, value);\n}\n</code></pre>\n\n<p>Finale 3 Version(Send data with time difference):</p>\n\n<pre><code>#define CAYENNE_PRINT Serial\n#include &lt;CayenneMQTTESP8266Shield.h&gt;\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n#include &lt;virtuabotixRTC.h&gt;\n\n//Real+Virtual\n#define LED_PIN 5\n#define temp_sensor 4\n#define EspSerial Serial\n\n//Virtual\n#define Power_sensor 9\n#define DayPower 10\n#define MonthPower 11\n#define LED_PWM 12\n\n//SSID\n\nchar ssid[] = \"TP-LINK_MWNg\";\nchar password[] = \"mwngpass\";\n\nchar username[] = \"743674368676328742somenumbers\";\nchar mqtt_password[] = \"743674368676328742somenumbers\";\nchar client_id[] = \"743674368676328742somenumbers\";\n\nESP8266 wifi(&amp;EspSerial);\n\n//Temperature setup\nOneWire oneWire(4);\nDallasTemperature sensors(&amp;oneWire);\n\n//Power sensor\nconst int analogInPin = A0;\nint sensorValue = 0;        // value read from the pot\nfloat MAXValue = 0;        // value output to the PWM (analog out)\nfloat Power = 0;\nint PWM = 0;\n\n//Time\nint curSec = 0;\nint curMin = 0;\nint curHour = 0;\nint curDay = 0;\nvirtuabotixRTC myRTC(6, 7, 8);\nunsigned PowerInDay = 0;\nunsigned PowerInMonth = 0;\nint lastMillis = 0;\nvoid setup() {\n  // put your setup code here, to run once:\n  sensors.begin();\n  EspSerial.begin(115200);\n  delay(10);\n  Cayenne.begin(username, mqtt_password, client_id, wifi, ssid, password);\n\n  pinMode(LED_PIN, OUTPUT);\n  analogWrite(LED_PIN, PWM);\n\n  curSec = myRTC.seconds;\n  curMin = myRTC.minutes;\n  curHour = myRTC.hours;\n  curDay = myRTC.dayofmonth;\n\n  //test\n\n}\n\nvoid loop() {\n  Cayenne.loop();\n  myRTC.updateTime();\n  if ( curSec != myRTC.seconds ) {\n    PowerInDay += Power;\n    curSec = myRTC.seconds;\n  }\n  if (curDay != myRTC.dayofmonth) {\n    PowerInMonth += PowerInDay;\n    PowerInDay = 0;\n    curDay = myRTC.dayofmonth;\n  }\n  if (curDay &gt; myRTC.dayofmonth) {\n    PowerInMonth = 0;\n  }\n//  Serial.print(myRTC.dayofmonth);\n//  Serial.print('/');\n//  Serial.print(myRTC.month);\n//  Serial.print('/');\n//  Serial.print(myRTC.year);\n//  Serial.print('/');\n//  Serial.print(' ');\n//  Serial.print(myRTC.hours);\n//  Serial.print(':');\n//  Serial.print(myRTC.minutes);\n//  Serial.print(':');\n//  Serial.print(myRTC.seconds);\n//  Serial.print('\\n');\n//  Serial.print(PowerInDay);\n//  Serial.print(' ');\n//  Serial.print(PowerInMonth);\n//  Serial.print('\\n');\n\n if(millis() - lastMillis &gt; 10000 &amp;&amp; millis() - lastMillis &lt; 20000 ) {//Send data between 10 - 20 seconds\n   //Temp sensor-----------------------------------------\n  sensors.requestTemperatures();\n  Cayenne.celsiusWrite(temp_sensor, sensors.getTempCByIndex(0));\n  //Temp sensor-----------------------------------------\n   }\n if(millis() - lastMillis &gt; 20000 &amp;&amp; millis() - lastMillis &lt; 30000 ) {//Send data between 20 - 30 seconds\n      //Power sensor-------------------------------------------------\n  sensorValue = analogRead(analogInPin);\n  // map it to the range of the analog out:\n  if (sensorValue &gt; 0)\n    MAXValue = sensorValue * 0.00007307;\n\n  Power = MAXValue * ((float)PWM / (float)255) * 3.3 * ((float)PWM / (float)255);\n  // change the analog out value:/\n\n  // print the results to the serial monitor:\n  Serial.print(\"sensor = \");\n  Serial.print(sensorValue); //RAW value from analog read :)\n  Serial.print(\"\\t output = \");\n  Serial.println(MAXValue * ((float)PWM / (float)255), 3); //Output the current\n  Serial.print(\"Power =\");\n  Serial.println(Power, 3);\n  // wait 2 milliseconds before the next loop\n  // for the analog-to-digital converter to settle\n  // after the last reading:\n  delay(50);\n  Cayenne.virtualWrite(Power_sensor, Power, \"pow\", \"w\");\n  //Power sensor-------------------------------------------------\n\n   }\n if(millis() - lastMillis &gt; 30000 &amp;&amp; millis() - lastMillis &lt; 40000 ) {//Send data between 30 - 40 seconds\n\n      //Power Day-------------------------------------------------\n  Cayenne.virtualWrite(DayPower, PowerInDay, \"pow\", \"w\");\n   }\n if(millis() - lastMillis &gt; 40000 &amp;&amp; millis() - lastMillis &lt; 50000 ) {//Send data between 40 - 50 seconds\n\n       //Power Month-------------------------------------------------\n  Cayenne.virtualWrite(MonthPower, PowerInMonth, \"pow\", \"w\");\n  lastMillis = millis();\n   }\n\n}\n\nCAYENNE_IN(LED_PIN)\n{\n  int currentValue = getValue.asInt();\n  if (currentValue == 1) {\n    PWM = 255;\n    digitalWrite(LED_PIN, HIGH);\n  } else {\n    PWM = 0;\n    digitalWrite(LED_PIN, LOW);\n  }\n  //digitalWrite(Relay, HIGH);\n  //Process message here. If there is an error set an error message using getValue.setError(), e.g getValue.setError(\"Error message\");\n}\nCAYENNE_IN(LED_PWM)\n{\n  int value = getValue.asInt(); // 0 to 255\n  PWM = value;\n  analogWrite(LED_PIN, value);\n}\n</code></pre>\n\n<p>Serial monitor message:</p>\n\n<pre><code>AT\nATE0\nAT+CIPMUX=1\nAT+CWMODE?\nAT+CWJAP=\"TP-LINK_MWNg\",\"mwngpass\"\n[5618] Connected to WiFi\n[5619] Connecting to mqtt.mydevices.com:1883\nAT+CIPSTART=1,\"TCP\",\"mqtt.mydevices.com\",1883\n[15636] Network connect failed\nAT+CIPSTART=1,\"TCP\",\"mqtt.mydevices.com\",1883\nAT+CIPSEND=1,40\nMQIsdp\n9c6b2/things/743674368676328742somenumbersAT+CIPSEND=1,16\ne7f5ba423/cmd/+\nAT+CIPSEND=1,40\nAT+CIPSEND=1,40\nAT+CIPSEND=1,40\nAT+CIPSEND=1,40\n1i Zv1/743674368676328742somenumbersAT+CIPSEND=1,40\n6b2/things/743674368676328742somenumbersAT+CIPSEND=1,27\nf5ba423/data/4temp,c=28.125sensor = 0     output = 0.000\nPower =0.000\nAT+CIPSEND=1,40\n1g\n</code></pre>\n"
    }, {
        "tags": ["algorithm", "embedded", "signal-processing", "iot", "accelerometer"],
        "is_answered": false,
        "view_count": 41,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1588279500,
        "creation_date": 1588268704,
        "question_id": 61529590,
        "link": "https://stackoverflow.com/questions/61529590/tracking-wrist-position-using-accelerometer-in-a-smart-watch",
        "title": "Tracking wrist position using accelerometer in a smart watch",
        "body": "<p>I am working on a smartwatch project. I want the display to be turned off and only come on when the user brings his hand into the watch-viewing position.\nI am running my application on the NRF52 MCU which means machine learning is out of the question. I am using a 3-axis accelerometer from STM.\nHow can I detect when a user moves his hand into the typically watch viewing position? How is this achieved in smartwatches?</p>\n\n<p>I have the following ideas so far:\n- Constantly poll accelerometer and calculate pitch and roll values. Then determine what range of pitch and roll values corresponds to this gesture. This seems a bit wasteful because the CPU will have to be always active.</p>\n\n<p>Is there a simple signal processing algorithm or something similar that can achieve this?</p>\n"
    }, {
        "tags": ["arduino", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 805,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1588001246,
        "creation_date": 1588001246,
        "question_id": 61462388,
        "link": "https://stackoverflow.com/questions/61462388/arduino-mqtt-disconnect",
        "title": "Arduino MQTT disconnect",
        "body": "<p>I have a ESP32 board with 2 relays and a DHT22 sensor and the bellow code in Arduino running on the ESP32</p>\n\n<p>MQTT Broker is running on Pi4 with mosquitto and node-red dashboard.</p>\n\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;PubSubClient.h&gt;\n#include \"DHT.h\"\n\n#define DHTTYPE DHT22\nconst char* ssid = \"MY SSID\";\nconst char* password = \"1234\";\nconst char* mqtt_server = \"192.168.1.118\";\nWiFiClient espClient;\nPubSubClient client(espClient);\n\nconst int DHTPin = 14;\nconst int lamp = 25;\nconst int lamp1 = 26;\nDHT dht(DHTPin, DHTTYPE);\n\n\nlong now = millis();\nlong lastMeasure = 0;\n\nvoid setup_wifi() {\n  delay(10);\n  // We start by connecting to a WiFi network\n  Serial.println();\n  Serial.print(\"Connecting to \");\n  Serial.println(ssid);\n  WiFi.begin(ssid, password);\n  delay(1000);\n  WiFi.disconnect();\n  delay(1000);\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(1000);\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.print(\"WiFi connected - ESP IP address: \");\n  Serial.println(WiFi.localIP());\n}\n\nvoid callback(char* topic, byte* payload, unsigned int length) {\n  String message;\n  Serial.print(\"Message arrived [\");\n  Serial.print(topic);\n  Serial.print(\"] \");\n  for (int i = 0; i &lt; length; i++) {\n    Serial.print((char)payload[i]);\n    char c = (char)payload[i];\n    message += c;\n  }\n  Serial.println();\n  if ((char)payload[0] == '0' || message == \"false\") {\n    digitalWrite(lamp, HIGH);\n    delay(100);\n    digitalWrite(lamp1, LOW);\n    Serial.println(\"lamp, HIGH si lamp1, LOW\");\n   } else if ((char)payload[0] == '1' || message == \"true\") {\n    digitalWrite(lamp1, HIGH);\n    delay(100);\n    digitalWrite(lamp, LOW);\n    Serial.println(\"lamp, LOW si lamp1, HIGH\");\n  } else if ((char)payload[0] == '2') {\n    digitalWrite(lamp, HIGH);\n    digitalWrite(lamp1, HIGH);\n    Serial.println(\"lamp, LOW si lamp1, LOW &gt; STOP\");\n  }\n}\n\nvoid reconnect() {\n\n  while (!client.connected()) {\n    Serial.print(\"Attempting MQTT connection...\");\n    if (client.connect(\"ESP8266Client\")) {\n      Serial.println(\"connected\");  \n      // Subscribe or resubscribe to a topic\n      // You can subscribe to more topics (to control more LEDs in this example)\n      client.subscribe(\"room/lamp\");\n      client.subscribe(\"room/lamp1\");\n    } else {\n      Serial.print(\"failed, rc=\");\n      Serial.print(client.state());\n      Serial.println(\" try again in 5 seconds\");\n      // Wait 5 seconds before retrying\n      delay(5000);\n    }\n  }\n}\n\nvoid setup() {\n  pinMode(lamp, OUTPUT);\n  pinMode(lamp1, OUTPUT);\n  pinMode(LED,OUTPUT);\n  dht.begin();\n  Serial.begin(115200);\n  setup_wifi();\n  client.setServer(mqtt_server, 1883);\n  client.setCallback(callback);\n}\n// For this project, you don't need to change anything in the loop function. Basically it ensures that you ESP is connected to your broker\nvoid loop() {\n  if (!client.connected()) {\n    reconnect();\n  }\n  if(!client.loop())\n    client.connect(\"ESP8266Client\");\n  now = millis();\n  // Publishes new temperature and humidity every 30 seconds\n  if (now - lastMeasure &gt; 5000) {\n    lastMeasure = now;\n    // Sensor readings may also be up to 2 seconds 'old' (its a very slow sensor)\n    float h = dht.readHumidity();\n    // Read temperature as Celsius (the default)\n    float t = dht.readTemperature();\n    // Read temperature as Fahrenheit (isFahrenheit = true)\n    // float f = dht.readTemperature(true);\n\n    // Check if any reads failed and exit early (to try again).\n    //if (isnan(h) || isnan(t) || isnan(f)) \n    if (isnan(h) || isnan(t)){\n      Serial.println(\"Failed to read from DHT sensor!\");\n      return;\n    }\n\n    // Computes temperature values in Celsius\n    float hic = dht.computeHeatIndex(t, h, false);\n    static char temperatureTemp[7];\n    dtostrf(t, 6, 2, temperatureTemp);\n    static char test[7];\n    dtostrf(hic, 6, 2, test);\n\n    static char humidityTemp[7];\n    dtostrf(h, 6, 2, humidityTemp);\n\n    client.publish(\"room/temperature\", temperatureTemp);\n    client.publish(\"room/humidity\", humidityTemp);\n    client.publish(\"room/test\", test);\n\n    Serial.print(\"Humidity: \");\n    Serial.print(h);\n    Serial.print(\" %\\t Temperature: \");\n    Serial.print(t);\n    Serial.print(\" *C \");\n    //Serial.print(f);\n    Serial.print(\" *F\\t Heat index: \");\n    Serial.print(hic);\n    Serial.println(\" *C \");\n    delay(500);\n    digitalWrite(LED,HIGH);\n    delay(500); \n    digitalWrite(LED,LOW);\n  }\n} \n</code></pre>\n\n<p>The 2 relays are controlling a window in my bathroom. If  I plug the ESP32 to power all is working, and I can open/close the window and sensor readings are ok.</p>\n\n<p>But after ~24hours I can still see realtime sensor readings but when I try to open/close the window nothing is happening. On the MQTT broker I can see the mqtt messages but nothing is happening.</p>\n\n<pre><code>room/lamp1 1\nroom/lamp1 1\nroom/lamp 0\nroom/lamp 0\nroom/lamp 0\nroom/lamp 0\nroom/lamp 0\nroom/lamp 0\nroom/temperature  24.00\nroom/humidity  29.10\nroom/test  23.22\nroom/lamp 0\nroom/lamp 0\nroom/lamp 2\nroom/lamp1 2\nroom/lamp 2\nroom/lamp1 2\nroom/lamp 2\nroom/lamp1 2\nroom/lamp 2\n</code></pre>\n\n<p>Any suggestions.</p>\n"
    }, {
        "tags": ["iot", "esp32"],
        "is_answered": true,
        "view_count": 482,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1587231147,
        "creation_date": 1576221439,
        "last_edit_date": 1587231147,
        "question_id": 59317822,
        "link": "https://stackoverflow.com/questions/59317822/esp32-with-pulsesensorplayground",
        "title": "ESP32 with PulsesensorPlayground",
        "body": "<p>I am new in developing Arduino and I encounter bugs already. I have searched in the internet but still no luck.</p>\n\n<p>The situation is, I have an ESP32 Dev Kit with 32 pins and I have this PulseSensor from pulsesensor.com. I tried the example Getting_BPM_to_Monitor in the PulseSensorPlayground Library and encountered problems.</p>\n\n<p>The problem is in the void setup function pulsesensor can not create a object here.</p>\n\n<p>My code:</p>\n\n<pre><code>const int PulseWire = 0;     \nconst int LED13 = 13;       \nint Threshold = 550;\n\nPulseSensorPlayground pulseSensor;\n\nvoid setup() {\n\n    Serial.begin(9600);\n    pulseSensor.analogInput(PulseWire);\n    pulseSensor.blinkOnPulse(LED13);\n    pulseSensor.setThreshold(Threshold);\n    if (pulseSensor.begin()){\n        Serial.println(\"We created a pulseSensor Object !\");\n    } else \n        Serial.println(\"Cannot create a pulseSensor Object !\"); //this code is added to check if it creates the object\n}\n</code></pre>\n"
    }, {
        "tags": ["lua", "iot", "esp8266", "nodemcu", "esplorer"],
        "is_answered": true,
        "view_count": 14485,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1586816175,
        "creation_date": 1456678817,
        "last_edit_date": 1459052722,
        "question_id": 35685471,
        "link": "https://stackoverflow.com/questions/35685471/esplorer-cant-communicate-with-esp8266",
        "title": "ESPlorer can&#39;t communicate with ESP8266",
        "body": "<p>I flashed the NodeMCU v0.9.5 to one of my ESP8266 modules. Now I'm trying to send a Lua script to my module using ESPlorer. I already double-checked the wiring.</p>\n\n<p>When I press the \"Send to ESP\" button, it shows an error:</p>\n\n<pre><code>    PORT OPEN 9600\n\n    Communication with MCU...\n    ....Got answer! AutoDetect firmware...\n\n    Can't autodetect firmware, because proper answer not received.\n    \ufffd\ufffd\ufffd\ufffd,\ufffd.,\ufffd\ufffd\ufffd\ufffd\ufffd(\ufffd.,\ufffd\ufffd\ufffd\ufffd\ufffdWaiting answer from ESP -   Timeout reached. Command aborted.`\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p>Edit:\nAfter I flashed NodeMCU 1.4 (master) I get a startup message.</p>\n\n<pre><code>_flash_used_end:402669c3\nfs.start:68000,max:14000\nmount res: 0\nTask task_lua started.\nSIG_LUA received.\n\nNodeMCU custom build by frightanic.com\n    branch: master\n    commit: c8037568571edb5c568c2f8231e4f8ce0683b883\n    SSL: false\n    modules: file,gpio,i2c,net,node,ow,tmr,uart,wifi\nbuild   built on: 2016-02-29 18:25\npowered by Lua 5.1.4 on SDK 1.4.0\nlua: cannot open init.lua\n&gt; Heap size::42720.\nTask task_lua started.\n</code></pre>\n\n<p>When I try to upload a Lua script I get these error messages.</p>\n\n<pre><code>fTask task_lua started.\niTask task_lua started.\nlTask task_lua started.\neTask task_lua started.\n.Task task_lua started.\nremove(\"DS1820.lua\");Task task_lua started.\nTask task_lua started.\nTask task_lua started.\nTask task_lua started.\nWaiting answer from ESP - Timeout reached. Command aborted.\n</code></pre>\n\n<p>After flashing a new firmeware without debuging mode, I can upload scripts. I'm trying to build this project:\n<a href=\"http://www.instructables.com/id/Low-cost-WIFI-temperature-data-logger-based-on-ESP/?ALLSTEPS\" rel=\"nofollow\">http://www.instructables.com/id/Low-cost-WIFI-temperature-data-logger-based-on-ESP/?ALLSTEPS</a>\nBut there are no data on Thingspeak. The outputs on the serial line seem to be fine.\nI think, everything should be okay?</p>\n\n<pre><code>Sending data to thingspeak.com\nGot disconnection...\nLast temp: 222500\nTemp:22.25.2500 C\n</code></pre>\n"
    }, {
        "tags": ["iot", "micropython"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1586351944,
        "creation_date": 1585771782,
        "last_edit_date": 1586351944,
        "question_id": 60979450,
        "link": "https://stackoverflow.com/questions/60979450/control-2-relays-with-micropython",
        "title": "Control 2 relays with micropython",
        "body": "<p>Can some one help me with a problem.</p>\n\n<p>I have an ESP32 board with GPIO pin 25 and 27 connected to a 2 relay board and with a webserver.</p>\n\n<p>At boot one relay is low and one is high then the code behind the webpage is </p>\n\n<pre><code>while True:\n  try:\n    if gc.mem_free() &lt; 102000:\n      gc.collect()\n    conn, addr = s.accept()\n    conn.settimeout(3.0)\n    print('Got a connection from %s' % str(addr))\n    request = conn.recv(1024)\n    conn.settimeout(None)\n    request = str(request)\n    print('Content = %s' % request)\n    relay_on = request.find('/?relay=on')\n    relay_off = request.find('/?relay=off')\n    if relay_on == 6:\n      print('RELAY ON')\n      relay_a.value(0)\n      relay_b.value(1)\n    if relay_off == 6:\n      print('RELAY OFF')\n      relay_a.value(1)\n      relay_b.value(0)\n    response = web_page()\n    conn.send('HTTP/1.1 200 OK\\n')\n    conn.send('Content-Type: text/html\\n')\n    conn.send('Connection: close\\n\\n')\n    conn.sendall(response)\n    conn.close()\n  except OSError as e:\n    conn.close()\n    print('Connection closed')\n</code></pre>\n\n<p>but with this cod only relay_a is getting triggered on an off.</p>\n\n<p>Thanks in advance!</p>\n"
    }, {
        "tags": ["python", "raspberry-pi", "iot", "sensors"],
        "is_answered": false,
        "view_count": 52,
        "favorite_count": 0,
        "score": -3,
        "last_activity_date": 1585525737,
        "creation_date": 1585524891,
        "last_edit_date": 1585525607,
        "question_id": 60922088,
        "link": "https://stackoverflow.com/questions/60922088/int-argument-must-a-string-or-a-number-not-nonetype",
        "title": "int() argument must a string or a number, not &#39;NoneType&#39;",
        "body": "<p>I have little to no skill at programming, but I need to take measurements with various sensors which are connected to my raspberry pi 3, and send them to thingspeak. I'm using this as a reference: <a href=\"https://iotdesignpro.com/projects/iot-based-raspberry-pi-weather-station-using-dht11-and-bmp180-sensor\" rel=\"nofollow noreferrer\">https://iotdesignpro.com/projects/iot-based-raspberry-pi-weather-station-using-dht11-and-bmp180-sensor</a> . The error I'm getting is: <a href=\"https://i.stack.imgur.com/znsu3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>My code is identical to the one on the link, the only differences are the api key and gpio pin. </p>\n\n<p><strong>Line 128 is</strong> : <code>main()</code> , which is at the very end. </p>\n\n<p><strong>Line 114 is</strong> : <code>(humi, temp)= readDHT()</code> . </p>\n\n<p>Lastly, <strong>line 104 is</strong> : <code>return (str(int(humi)), str(int(temp)))</code> . </p>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["graph", "highcharts", "iot", "multiple-axes"],
        "is_answered": true,
        "view_count": 274,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1585076079,
        "creation_date": 1585073921,
        "question_id": 60837000,
        "link": "https://stackoverflow.com/questions/60837000/highchart-thingspeak-iot-issues-with-graphs-axes",
        "title": "Highchart - ThingSpeak - IoT - issues with graphs (axes)",
        "body": "<p>I use Highcharts for my ThingSpeak IoT project.</p>\n\n<p>All is fine except these things, which just makes me angry (I cannot find a solution on my own... I have been trying with my frind Google for last 3 days without any success).</p>\n\n<p>Here is my project page: <a href=\"http://net.cekuj.net/\" rel=\"nofollow noreferrer\">http://net.cekuj.net/</a></p>\n\n<p><strong>There are my issues:</strong>\n1) I cannot see the most top number next to the Y axes (I can see only the tick, not the number - if you check browser console, it is there but it has wrong X and Y coordinates)\n2) I cannot align \"tick mark\" for all Y axes according to the manual - I would like to align them \"on\" mark, but now there are still \"between\"... and yes I use added a var for this :(\n3) I would like to use decimalplace setting independently for every series of data - for example - Temperature will have 1 decimal place, humidex will have 0 decimal place etc. is that possible?\n4) I added major ticks, but no succes with adding minor ticks :(</p>\n\n<p>I would be really happy if any of these 4 issues would be solved, thank you for your help and time!</p>\n\n<p>EDIT:\nAlso autorefresh is not working, but it seems to be because of wrong URL pattern, will be fixed later :)</p>\n"
    }, {
        "tags": ["arduino", "embedded", "iot", "modbus", "rs485"],
        "is_answered": false,
        "view_count": 667,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1585040114,
        "creation_date": 1585036850,
        "last_edit_date": 1585038393,
        "question_id": 60826986,
        "link": "https://stackoverflow.com/questions/60826986/cant-read-modbus-holding-register-because-modbusmaster-for-arduino-is-lack-of-d",
        "title": "Can&#39;t read Modbus holding register because ModbusMaster for arduino is lack of documentation",
        "body": "<h2>The Problem:</h2>\n\n<p>Hi, First of all, i am no expert at <strong>C++</strong>.</p>\n\n<p>I seem can't find any of the guide(or documentation) of modbusMaster especially for <a href=\"https://github.com/4-20ma/ModbusMaster\" rel=\"nofollow noreferrer\">this</a> particular library. Which explains all the class method uses.</p>\n\n<p>I use this library because it supports <strong>stream class</strong>. not like official library or others. Therefore, i can use <strong>softwareSerial</strong> to add more serial for rs485.</p>\n\n<p>I am using <strong>Arduino pro mini</strong>, that's why i need software serial. And this <strong>Max485 module</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O3L29.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O3L29.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I am very sure everything is connected properly, thus my aim is to read coil from a Chinese brand ultrasonic level meter which the guide says:</p>\n\n<p><a href=\"https://i.stack.imgur.com/H9pHk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H9pHk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the program what i am trying to do:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;ModbusMaster.h&gt;\n#include &lt;SoftwareSerial.h&gt;\n/*!\n  We're using a MAX485-compatible RS485 Transceiver.\n  Rx/Tx is hooked up to the hardware serial port at 'Serial'.\n  The Data Enable and Receiver Enable pins are hooked up as follows:\n*/\n#define MAX485_DE      9\n#define MAX485_RE_NEG  8\n//for software serial\n#define RO_RX 7\n#define DI_TX 6\n\n\n// instantiate ModbusMaster object\nModbusMaster node;\n// RX, TX on softser\nSoftwareSerial mySerial(RO_RX, DI_TX); \n\nvoid preTransmission()\n{\n  digitalWrite(MAX485_RE_NEG, 1);\n  digitalWrite(MAX485_DE, 1);\n}\n\nvoid postTransmission()\n{\n  digitalWrite(MAX485_RE_NEG, 0);\n  digitalWrite(MAX485_DE, 0);\n}\n\nvoid setup()\n{\n  pinMode(MAX485_RE_NEG, OUTPUT);\n  pinMode(MAX485_DE, OUTPUT);\n  // Init in receive mode\n  digitalWrite(MAX485_RE_NEG, 0);\n  digitalWrite(MAX485_DE, 0);\n\n  // for serial monitoring on PC\n  Serial.begin(115200);\n  // Modbus communication runs at 9600 baud\n  mySerial.begin(9600);\n  // Modbus slave ID 1 and pass the software serial\n  node.begin(1, mySerial);\n  // Callbacks allow us to configure the RS485 transceiver correctly\n  node.preTransmission(preTransmission);\n  node.postTransmission(postTransmission);\n  Serial.println(\"init done...\");\n}\n\n\n\nvoid loop()\n{\n// now, i'm kinda lost here..\n\n  delay(100);\n  Serial.println(\"loop end.\");\n}\n\n</code></pre>\n\n<p>I am confused with most of the <em>class method</em> without a proper explanation. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>modbusObj.readWriteMultipleRegisters();\nmodbusObj.writeSingleRegister();\nmodbusObj.setTransmitBuffer();\nmodbusObj.readCoils();\nmodbusObj.writeMultipleRegisters();\nmodbusObj.readHoldingRegisters();\n// etc.. \n\n</code></pre>\n\n<p>They had no documentation. Well, Some method names are self explanatory but not about the arguments.I am trying just to read the holding register.</p>\n\n<h2>TL;DR:</h2>\n\n<p>I want to read the level meter's distance data, but the library doesn't provide a proper documentation.</p>\n\n<h2>Nb:</h2>\n\n<ul>\n<li>nothing wrong with the ultrasonic device, tested in PC to read holding register with some modbus tool and hooked up to <strong>rs485 to usb</strong> and working!</li>\n<li>this question intended in stack overflow rather than <a href=\"https://electronics.stackexchange.com/\">stack-electrical-engineering</a> because I am mainly asking about the code.</li>\n<li>I've been discussing it with someone in a local facebook forum that said he's successfully utilizing the lib alongside soft-serial and pro-mini.  </li>\n</ul>\n"
    }, {
        "tags": ["iot", "accelerometer", "micropython", "bbc-microbit"],
        "is_answered": true,
        "view_count": 35,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1584378047,
        "creation_date": 1582721769,
        "question_id": 60414486,
        "link": "https://stackoverflow.com/questions/60414486/is-it-possible-to-attach-a-micro-bit-board-to-a-rock-and-make-it-count-numbers",
        "title": "Is it possible to attach a micro: bit board to a rock, and make it count numbers of times it has been thrown up into the air?",
        "body": "<p>See the headline</p>\n\n<p>I can easily get gestures to work. But what if I were to attach the board on a rock, and make it register how many times the rock has been thrown up into the air - and caught again? I am wondering if it is possible to utilize the accelerometer?</p>\n\n<p>This code works, if I just flip the board, it counts as described.</p>\n\n<pre><code>from microbit import *\nscore = 0\ndisplay.show(str(score))\n\nwhile True:\nif accelerometer.was_gesture('face down'):\n    score += 1\n    if score &lt; 10:\n        display.show(score)\n    else: \n        display.scroll(score)\ncontinue\n</code></pre>\n"
    }, {
        "tags": ["json", "iot", "sensors", "arduino-uno", "nrf51"],
        "is_answered": false,
        "view_count": 309,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1584359795,
        "creation_date": 1584359030,
        "last_edit_date": 1584359795,
        "question_id": 60705365,
        "link": "https://stackoverflow.com/questions/60705365/how-to-send-and-parse-json-data-through-nrf24l01-sensor",
        "title": "How to send and parse JSON data through NRF24L01 sensor?",
        "body": "<p>TRANSMITTER.ino (COM8 port)</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;nRF24L01.h&gt;\n#include &lt;RF24.h&gt;\n#include&lt;ArduinoJson.h&gt;\nRF24 radio(7, 8); // CE, CSN\nconst byte addresses[6] = {\"00001\"};\nvoid setup() {\n radio.begin();\n radio.openWritingPipe(addresses);\n radio.setPALevel(RF24_PA_MIN);\n radio.stopListening();\n}\nvoid loop() {\nDynamicJsonBuffer jBuffer;\nJsonObject&amp; root = jBuffer.createObject();\nroot[\"North\"] = \"true\";\nroot[\"South\"] = \"false\";\nroot[\"East\"] = \"true\";\nroot[\"West\"] = \"true\";\nradio.write(&amp;root, sizeof(root));\ndelay(1000);\n}\n</code></pre>\n\n<p>RECEIVER.ino  (COM9 port)</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;nRF24L01.h&gt;\n#include &lt;RF24.h&gt;\n#include&lt;ArduinoJson.h&gt;\nRF24 radio(7, 8); // CE, CSN\nconst byte addresses[6] = {\"00001\"};\nvoid setup() {\nSerial.begin(9600);\nradio.begin();\nradio.openReadingPipe(0, addresses);\nradio.setPALevel(RF24_PA_MIN);\nradio.startListening();\n}\nvoid loop() {\nif ( radio.available()) {\n  unsigned char data[1024];\n  radio.read(&amp;data, sizeof(data));\n  StaticJsonBuffer&lt;1024&gt; jsonBuffer;\n  JsonObject&amp; toor = jsonBuffer.parseObject(data);\n  String n = toor[\"North\"];\n  String s = toor[\"South\"];\n  String e = toor[\"East\"];\n  String w = toor[\"West\"];\n  Serial.println(n);\n  Serial.println(s);\n  Serial.println(e);\n  Serial.println(w);\n  delay(1000);\n }\n}\n</code></pre>\n\n<p>I am trying to transmit a JSON data over NRF24L01, and printing it to the serial monitor, but i dont see any output in my serial monitor(COM9 serial monitor). what is the mistake am i doing here?</p>\n\n<p>I am using arduino JSON 5.13.5 version</p>\n"
    }, {
        "tags": ["lcd", "arduino", "iot"],
        "is_answered": false,
        "view_count": 362,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1584341940,
        "creation_date": 1584340109,
        "question_id": 60701539,
        "link": "https://stackoverflow.com/questions/60701539/1602-lcd-module-showing-garbage-output",
        "title": "1602 LCD Module showing garbage output",
        "body": "<p>I connected 1602 LCD with Arduino( Without I2C) to print Hello World, but after printing hello world for few seconds it starts showing garbage values\nHere's my code</p>\n\n<pre><code>    #include&lt;LiquidCrystal.h&gt;\n\n    int Contrast = 145 ;\n\n    LiquidCrystal lcd(12,11,5,4,3,2);\n\n\n    void setup() {\n    // put your setup code here, to run once:\n    analogWrite(6,Contrast);\n    lcd.begin(16,2);\n    //  Serial.begin(115200);\n    }\n\n    long result = 0;\n    void loop() {\n    // put your main code here, to run repeatedly:\n    lcd.clear();\n    lcd.setCursor(0,0);\n    lcd.print(\"Hello \");\n    lcd.setCursor(0,1);\n    lcd.print(\"World \");\n\n    delay(500);\n    }\n</code></pre>\n"
    }, {
        "tags": ["lua", "mqtt", "iot", "esp8266", "broker"],
        "is_answered": false,
        "view_count": 300,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1584279312,
        "creation_date": 1584167543,
        "last_edit_date": 1584255998,
        "question_id": 60680346,
        "link": "https://stackoverflow.com/questions/60680346/i-cant-subscribe-to-mqtt-broker-on-lua-for-esp8266",
        "title": "I can&#39;t subscribe to MQTT broker on Lua for ESP8266",
        "body": "<p>First of all I'm using the following:</p>\n\n<ul>\n<li>ESP8266 (ESP12E)</li>\n<li>Default firmware from Git (built with linux with all pertinent configs, according with nodemcu documentation)</li>\n<li>ESPlorer IDE</li>\n</ul>\n\n<p>My specific problem (I think) is that I can't connect my MQTT client to a adafruit.io broker. I think I've successfully connected to WiFi (confimed by two separate SSIDs). The issue comes when creating the MQTT client AND connecting it to its broker.</p>\n\n<pre><code>-- INITIAL DEFINES\n-- defines\nstation_cfg={}\nstation_cfg.ssid        = \"&lt;my wifi&gt;\"    -- my personal ssid\nstation_cfg.pwd         = \"&lt;wifi pwd&gt;\"   -- my wifi pwd\n--station_cfg.ssid        = \"IoT\"        -- campus' ssid\n--station_cfg.pwd         = \"&lt;wifi pwd&gt;\" -- campus' wifi pwd, I tried this first, then my home's. It \n                                            worked as it should\nstation_cfg.auto        = false\nstation_cfg.save        = false\n\nmqtt_client_cfg = {}\nmqtt_client_cfg.clientid    = \"alro\"          -- any ID\nmqtt_client_cfg.keepalive   = 120             -- went for the example's value\nmqtt_client_cfg.username    = \"AlvaRocha\"     -- obviously a paranoic Ctrl+C/V from adafruit\nmqtt_client_cfg.password    = \"aio_KO&lt;safety edit&gt;sXwbgtWCboCal\" -- obviously a paranoic Ctrl+C/V \n                                                                 -- from adafruit\n\nwifi.setmode(wifi.STATION)\nwifi.sta.config(station_cfg)\nwifi.sta.connect(connect)         -- so far so good\n\niot_test = mqtt.Client(mqtt_client_cfg) -- open client, apparently OK\n--iot_test:lwt(\"/lwt\", \"offline\", 0, 0) -- this line is on examples, doesn't affect outputs\n\niot_test:on(\"connect\", function(client) print(\"client connected\") end)\niot_test:on(\"offline\", function(client) print(\"client offline\") end) -- this event is called\n                                                                     -- always (line 27)\n\nfunction connect(params)\n    print('Connected to:', params.SSID) -- I understant from documentation that this is called IF \n                                        -- successfull wifi connection. Double checked with \n                                        -- campus' and home wifi\nend\n\nfunction disconnect(params)\n    print('Disconnected from:', params.SSID) -- ignore this function\nend\n\nfunction get_broker(mqtt_client)\n    mqtt_client:connect(\"io.adafruit.com\", 1883, false, false, --Found this double 'false' on \n                                                   --https://www.electronicwings.com/nodemcu/nodemcu- \n                                                   --mqtt-client-with-esplorer-ide \n           function(client) -- CONNECTED CALLBACK\n            print('connected to broker') \n            --break\n            -- continue\n            client:subscribe(\"/Test\", 0, function(client) print(\"Succesfull sub.\") end) -- (LINE 42)\n            --break\n      --- continue\n      end,\n      function(_reason) -- OFFLINE CALLBACK not called (called if I don't write the 'double false' \n                        -- from the example)\n            print('connection failed', reason) \n      end)\n end\n\n get_broker(iot_test) -- connect to broker\n</code></pre>\n\n<p>ISSUE: even though line 27 is called, CONNECTED CALLBACK is called. No consistency there.</p>\n\n<p>ISSUE: Line 42 output : PANIC: unprotected error in call to Lua API (init.lua:42: not connected)</p>\n\n<p>Hoping the comments are helpfull, I want to state the obvious:</p>\n\n<ul>\n<li>This is my first time using ESP8266, LUA and MQTT</li>\n<li>I read as much as I felt comfortable with (you can never read enough)</li>\n<li>I don't like Arduino IDE (but I'll try it as this gets answered)</li>\n</ul>\n\n<p>I suspect the following:</p>\n\n<ul>\n<li>I messed up somewhere at firmware config.</li>\n<li>WiFi is not really connected.</li>\n<li>I'm missing something obvious.</li>\n</ul>\n\n<p>Best regards, Alvaro R.</p>\n"
    }, {
        "tags": ["firebase", "arduino", "iot", "nodemcu"],
        "is_answered": false,
        "view_count": 180,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1584041661,
        "creation_date": 1584034560,
        "question_id": 60659219,
        "link": "https://stackoverflow.com/questions/60659219/data-are-not-sent-between-arduino-uno-and-nodemcu-esp8266-at-all-time",
        "title": "Data are not sent between Arduino uno and NodeMcu esp8266 at all time",
        "body": "<p>I am sending data from Arduino UNO R3 to nodeMcu esp8266. In that case sometime data are send properly but at sometime data are are not send by arduino or not get by nodemcu esp8266.Also tx light not blinks after i upload the code to the Arduiono.</p>\n\n<pre><code>enter code here\n</code></pre>\n\n<p>Code Uploaded to Arduino:</p>\n\n<pre><code>#include &lt;SoftwareSerial.h&gt;\n#include &lt;ArduinoJson.h&gt;\nSoftwareSerial s(10,11);\nSoftwareSerial h(10,11);\nint i=0;\nvoid setup() {\n  // put your setup code here, to run once:\ns.begin(9600);\nSerial.begin(9600);\n}\nint f1=0;\nint f2=0;\nString st=\"sy\";\nvoid loop() {\n  f1=f1+1;\n  f2=f2+2;\n  // put your main code here, to run repeatedly:\nStaticJsonBuffer &lt;1000&gt; bf;\nStaticJsonBuffer &lt;1000&gt; rec;\n JsonObject&amp; root=bf.createObject();\n JsonObject&amp; receives=rec.parseObject(h);\n if (receives==JsonObject::invalid())\n {\n  Serial.println(\"no data from nodemcu\");\n  root[\"data3\"]=\"no data from nide\";\n  }\n  else\n  {\n    root[\"data3\"] = receives[\"data3\"];\n    //st = (const char*)receive[\"data3\"];\n  }\nroot[\"data1\"]=f1;\nroot[\"data2\"]=f2;\n//root[\"data3\"]=st;\nif(s.available()&gt;0)\n{\n  root.printTo(s);\n  Serial.println(\"send\");\n}\nelse\n{\n  Serial.println(\"NOt Available\");}\n//i=i+1;\n//s.write(i);\ndelay(1000);\n}\n</code></pre>\n"
    }, {
        "tags": ["iot", "arduino-uno"],
        "is_answered": true,
        "view_count": 387,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1584012007,
        "creation_date": 1582623865,
        "question_id": 60391605,
        "link": "https://stackoverflow.com/questions/60391605/arduino-uno-displaying-999-value-for-humidity-and-temperature",
        "title": "Arduino UNO displaying -999 value for humidity and temperature",
        "body": "<p>I am using DHT11 sensor for displaying humidity and temperature values. I dont know where I did wrong. It's displaying only -999 value for both humidity and temperature. Here's my code</p>\n\n<pre><code>#include &lt;dht.h&gt;\n\ndht DHT;\n\n#define DHT11_PIN A0\n\nvoid setup(){\nSerial.begin(9600);\n}\n\nvoid loop()\n{\n  DHT.read11(DHT11_PIN);\n  Serial.print(\"Temperature = \");\n  Serial.println(DHT.temperature);\n  Serial.print(\"Humidity = \");\n  Serial.println(DHT.humidity);\n  delay(1000);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HtUdd.jpg\" rel=\"nofollow noreferrer\">Picture of Arduino</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/1N1nG.png\" rel=\"nofollow noreferrer\">Output</a></p>\n"
    }, {
        "tags": ["lua", "iot", "nodemcu", "lua-scripting-library"],
        "is_answered": false,
        "view_count": 607,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1583687428,
        "creation_date": 1583168357,
        "last_edit_date": 1583168793,
        "question_id": 60493428,
        "link": "https://stackoverflow.com/questions/60493428/how-to-secure-the-lua-scripts-inside-nodemcu",
        "title": "How to Secure the lua scripts inside Nodemcu",
        "body": "<p>I am writing a script having user personal information like \"User Id\", \"Password\", \"Server detail\", Bla bla bla. And I want to secure these all personal data.</p>\n\n<p>And you know, Script inside Nodemcu is not secure at all. Anybody can download the script and make a cop of my project.<br>\nSo, I want to encrypt the script which is uploaded in the Nodemcu so that some other can not decrypt or read my script.</p>\n\n<p>Is it possible in NodeMCU?<br>\nI am using NodeMCU V3(Written at the back side of nodemcu)<br>\nInitial Details :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NodeMCU custom build by frightanic.com\n    branch: 1.5.4.1-final\n    commit: b9436bdfa452c098d5cb42a352ca124c80b91b25\n    SSL: false\n    modules: file,gpio,mqtt,net,node,rtctime,tmr,uart,wifi\n build created on 2019-09-21 17:56\n powered by Lua 5.1.4 on SDK 1.5.4.1(39cb9a32)\nlua: cannot open init.lua\n</code></pre>\n"
    }, {
        "tags": ["c++", "windows", "iot", "gpio"],
        "is_answered": false,
        "view_count": 108,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1582038469,
        "creation_date": 1582032724,
        "last_edit_date": 1582038469,
        "question_id": 60282066,
        "link": "https://stackoverflow.com/questions/60282066/fintek-f81803-gpio-usage-controling-leds-windows-10-iot",
        "title": "Fintek F81803 - GPIO Usage - Controling LEDs - Windows 10 IoT",
        "body": "<p>i want to try to use the GPIOs on a Jetway System with Fintek Chip F81803.\nI already tried a few code samples but non of them works. The one who comes from jetway is a full .exe which i cant use, cause i need to put that in an other script.</p>\n\n<p>I use Windows 10 IoT Enterprise.\nHow can i adress the GPIO so i can put them high/low? (maybe a code sample would be usefull)</p>\n"
    }, {
        "tags": ["arduino", "bluetooth-lowenergy", "project", "iot", "esp32"],
        "is_answered": true,
        "view_count": 98,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1581438373,
        "creation_date": 1581433503,
        "last_edit_date": 1581438373,
        "question_id": 60171855,
        "link": "https://stackoverflow.com/questions/60171855/arduino-ble-project-esp32",
        "title": "Arduino BLE Project (esp32)",
        "body": "<p>I want to make a device project that perform to receive data(device id) continuously from another four BLE(esp32 module). Can I do this by using one Arduino with one esp32 module? or needs 4 module to receive data from 4 individual device? There will also have 4 led for 4 device, if any device go out of range corresponding led turn off and if get signal led turn on.</p>\n"
    }, {
        "tags": ["java", "jsp", "arduino", "iot"],
        "is_answered": true,
        "view_count": 105,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1581414873,
        "creation_date": 1581405252,
        "question_id": 60163688,
        "link": "https://stackoverflow.com/questions/60163688/how-to-send-sensor-data-from-arduino-as-a-server-to-a-jsp-on-tomcat",
        "title": "how to send sensor data from arduino as a server to a jsp on tomcat?",
        "body": "<p>I have Arduino with an ethernet shield. I want to send readings from the ultrasonic sensor to be displayed on a JSP that is on tomcat on my local machine. \nHow can I do that?</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp32"],
        "is_answered": true,
        "view_count": 23667,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1579816476,
        "creation_date": 1579650003,
        "question_id": 59850742,
        "link": "https://stackoverflow.com/questions/59850742/esp32-wroom-32-vs-esp32-wrover",
        "title": "ESP32-WROOM-32 vs ESP32-WROVER",
        "body": "<p>I have numerous ESP8266 apps converted to 32 bit. These seem to run fine on the WROVER chips but on the WROOM-32 chips they load and execute, but panic after some time. I get this error:</p>\n\n<p>Guru Meditation Error: Core  1 panic'ed (LoadProhibited). Exception was unhandled.</p>\n\n<p>My code is just flashing an LED (onboard pin 2) every second and watching for UDP packets. Other that this, they are just sitting the execute loop. I have a number of these chips and would like to use them if I can get them to run reliably.</p>\n\n<p>Any hints on how/what to track down would be greatly appreciated.</p>\n\n<p>Thanks.</p>\n"
    }, {
        "tags": ["cloud", "iot", "communication-protocol", "siemens", "s7-1200"],
        "is_answered": false,
        "view_count": 562,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1578477588,
        "creation_date": 1548017244,
        "last_edit_date": 1578477588,
        "question_id": 54280812,
        "link": "https://stackoverflow.com/questions/54280812/ways-to-establish-communication-between-s7-1200-plc-and-ms-azure",
        "title": "Ways to establish communication between s7-1200 PLC and MS Azure",
        "body": "<p>We're a group of students that is gonna set up communication between a S7-1200 PLC and a cloud (probably gonna be MS Azure), to upload measured data (e.g. temperature, pressure).</p>\n\n<p>In what ways is it possible to achieve this, and what communication protocols is recommended for this?</p>\n\n<p>We dont wanna use a second device like Rasperry Pi or Simatic IoT2000...</p>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": false,
        "view_count": 83,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1578274297,
        "creation_date": 1578274297,
        "question_id": 59605702,
        "link": "https://stackoverflow.com/questions/59605702/error-in-sending-data-to-cloud-server-and-arduino-lagging",
        "title": "Error in sending data to cloud server and arduino lagging",
        "body": "<p>The code im working on, is suppose to show temperature, humidity and able to take and show heart rate on the lcd. After data is shown, it will send data to \"ThingSpeak\". After sending, there will be a http code error -401 which is ok as it can only send data very 15 sec. But after awhile, it will change it error http code -301... and then it will hang. Another issue is when i try to use the temperature sensor with the heart rate sensor, the lcd will hang and it will not work till i reset.</p>\n\n<pre><code>    #include \"ThingSpeak.h\"\n    #include \"SPI.h\"\n    #include \"DHT.h\"\n    #include &lt;Ethernet.h&gt;\n    #include &lt;LiquidCrystal.h&gt;\n    LiquidCrystal lcd(10, 9, 5, 4, 3, 2); //numbers of interface pins\n    #define redLED 8\n    int sensorPin = A8;\n    float tempC;\n\n    #define DHTPIN 6\n    #define DHTTYPE DHT11\n    DHT dht(DHTPIN, DHTTYPE);\n    float h;\n\n    #define USE_ARDUINO_INTERRUPTS true    // Set-up low-level interrupts for most acurate BPM math.\n    #include &lt;PulseSensorPlayground.h&gt;     // Includes the PulseSensorPlayground Library.   \n\n    //  Variables\n    const int PulseWire = A9;       // PulseSensor PURPLE WIRE connected to ANALOG PIN 0\n    const int blinkPin = 22;          // The on-board Arduino LED, close to PIN 13.\n    int Threshold = 550;           // Determine which Signal to \"count as a beat\" and which to ignore.\n\n    PulseSensorPlayground pulseSensor;  // Creates an instance of the PulseSensorPlayground object called \"pulseSensor\"\n\n\n    byte mac[] = {0x90, 0xA2, 0xDA, 0x10, 0x40, 0x4F};\n    unsigned long myChannelNumber = ;\n    const char * myWriteAPIKey = \"\";\n\n    // Set the static IP address to use if the DHCP fails to assign\n    IPAddress ip(172, 17, 171, 199);\n    IPAddress myDns(172, 17, 171, 254);\n\n    float get_temperature(int pin)\n    {\n      float temperature = analogRead(pin); // Calculate the temperature based on the reading and send that value back\n      float voltage = temperature * 5.0;\n      voltage = voltage / 1024.0;\n      return ((voltage - 0.5) * 100);\n    }\n\n    EthernetClient client;\n\n    void setup()\n    {\n      lcd.begin(16, 2);\n      pinMode(redLED, OUTPUT);\n      pulseSensor.analogInput(PulseWire);\n      pulseSensor.blinkOnPulse(blinkPin);       //auto-magically blink Arduino's LED with heartbeat.\n      pulseSensor.setThreshold(Threshold);\n      pulseSensor.begin();\n      dht.begin();\n      Ethernet.init(10);  // Most Arduino Ethernet hardware\n      Serial.begin(9600);  //Initialize serial\n      // start the Ethernet connection:\n      Serial.println(\"Initialize Ethernet with DHCP:\");\n      if (Ethernet.begin(mac) == 0)\n      {\n        Serial.println(\"Failed to configure Ethernet using DHCP\");\n        // Check for Ethernet hardware present\n        if (Ethernet.hardwareStatus() == EthernetNoHardware)\n        {\n          Serial.println(\"Ethernet shield was not found.  Sorry, can't run without hardware. :(\");\n          while (true)\n          {\n            delay(10); // do nothing, no point running without Ethernet hardware\n          }\n        }\n        if (Ethernet.linkStatus() == LinkOFF)\n        {\n          Serial.println(\"Ethernet cable is not connected.\");\n        }\n        // try to congifure using IP address instead of DHCP:\n        Ethernet.begin(mac, ip, myDns);\n      }\n      else\n      {\n        Serial.print(\"  DHCP assigned IP \");\n        Serial.println(Ethernet.localIP());\n      }\n      // give the Ethernet shield a second to initialize:\n      delay(1000);\n\n      ThingSpeak.begin(client);  // Initialize ThingSpeak\n    }\n\n    void loop()\n    {\n      h = dht.readHumidity();\n      {\n        tempC = get_temperature(sensorPin);\n      }\n\n      if (tempC &lt; 31)\n      {\n        lcd.setCursor(0, 0);\n        lcd.print(tempC);\n        lcd.print(\" \"); //print the temp\n        lcd.print((char)223); // to get \u00b0 symbol\n        lcd.print(\"C\");\n        lcd.print(\" \");\n        lcd.print(h);\n        lcd.print(\"%\");\n        delay(750);\n      }\n      else if (tempC &gt; 31)\n      {\n        lcd.setCursor(0, 0);\n        lcd.print(tempC);\n        lcd.print(\" \"); //print the temp\n        lcd.print((char)223); // to get \u00b0 symbol\n        lcd.print(\"C\");\n        lcd.print(\" \");\n        lcd.print(h);\n        lcd.print(\"%\");\n        delay(750);\n      }\n\n       int myBPM = pulseSensor.getBeatsPerMinute();  // Calls function on our pulseSensor object that returns BPM as an \"int\".\n      // \"myBPM\" hold this BPM value now.\n\n      if (pulseSensor.sawStartOfBeat()) \n      {   \n        lcd.setCursor(0,1);\n        lcd.print(\"BPM:\");                        // Print phrase \"BPM: \"\n        lcd.println(myBPM);                        // Print the value inside of myBPM.\n        lcd.print(\"    \");\n        delay(100);\n      }\n\n      // Write to ThingSpeak channel.\n      ThingSpeak.setField(1, tempC);\n      ThingSpeak.setField(2, h);\n      ThingSpeak.setField(3, myBPM);\n\n      int x = ThingSpeak.writeFields(myChannelNumber, myWriteAPIKey);\n      if (x == 200)\n      {\n        Serial.println(\"Channel update successful.\");\n\n      }\n      else\n      {\n        Serial.println(\"Problem updating channel. HTTP error code \" + String(x));\n      }\n\n    }\n</code></pre>\n"
    }, {
        "tags": ["c", "iot", "contiki", "contiki-process"],
        "is_answered": true,
        "view_count": 113,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1576857245,
        "creation_date": 1574889610,
        "question_id": 59078597,
        "link": "https://stackoverflow.com/questions/59078597/start-contiki-process-from-a-process",
        "title": "Start Contiki process from a process",
        "body": "<p>I am using contikiOS and C, I am trying to create code that will wait for 10s then print the temperature. It will then start a different process and record temp every 1s. It will check when temperature exceeds 28c and turn led on.</p>\n\n<p>Currently, it executes as follows:</p>\n\n<p>Waits 10s,\nPrints temp,\nWaits 10s,\nTerminates</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include \"dev/light-sensor.h\"\n#include \"dev/sht11-sensor.h\"\n#include \"dev/leds.h\"\n#include &lt;stdio.h&gt; /* For printf() */\n\n\nunsigned short d1(float f) // Integer part\n{\n  return((unsigned short)f);\n}\nunsigned short d2(float f) // Fractional part\n{\n  return(1000*(f-d1(f)));\n}\n\n\n/*---------------------------------------------------------------------------*/\nPROCESS(alarm, \"alarm\");\n\n/*---------------------------------------------------------------------------*/\n\n/*---------------------------------------------------------------------------*/\nPROCESS(detect, \"detect\");\nAUTOSTART_PROCESSES(&amp;detect);\n/*---------------------------------------------------------------------------*/\n\n\n\n\nPROCESS_THREAD(detect, ev, data)\n{\n\n    static struct etimer timer;\n    PROCESS_BEGIN();\n    etimer_set(&amp;timer, CLOCK_CONF_SECOND * 10);\n    SENSORS_ACTIVATE(sht11_sensor);\n    leds_off(LEDS_ALL);\n\n    while (1) {\n        if (!etimer_pending()) {\n            break;\n        }\n        else {\n\n\n            PROCESS_WAIT_EVENT_UNTIL(ev == PROCESS_EVENT_TIMER);\n\n            float temp = 0.01*sht11_sensor.value(SHT11_SENSOR_TEMP) - 39.6;\n            printf(\"\\n%u.%03u C\", d1(temp), d2(temp));\n\n            if (temp &gt; 28) {\n\n                leds_on(LEDS_ALL);\n                clock_wait(CLOCK_SECOND);\n\n\n                leds_off(LEDS_ALL);\n\n            }\n            if (temp &lt;= 28) {\n\n                leds_off(LEDS_ALL);\n            }\n\n\n        }\n        etimer_stop(&amp;timer);\n\n    }\n    PROCESS_EXIT();\n    PROCESS_START(&amp;alarm, NULL);\n    PROCESS_END();\n}\n\n\n/*---------------------------------------------------------------------------*/\n\n\nPROCESS_THREAD(alarm, ev, data)\n{\n\n    static struct etimer timer1;\n    PROCESS_BEGIN();\n    etimer_set(&amp;timer1, CLOCK_SECOND);\n    SENSORS_ACTIVATE(sht11_sensor);\n    leds_off(LEDS_ALL);\n    while (1) {\n        PROCESS_WAIT_EVENT_UNTIL(ev == PROCESS_EVENT_TIMER);\n        float temp = 0.01*sht11_sensor.value(SHT11_SENSOR_TEMP) - 39.6;\n        printf(\"\\n%u.%03u C\", d1(temp), d2(temp));\n\n        if (temp &gt; 28) {\n\n            leds_on(LEDS_ALL);\n            clock_wait(CLOCK_SECOND);\n\n\n            leds_off(LEDS_ALL);\n\n        }\n        if (temp &lt;= 28) {\n\n            leds_off(LEDS_ALL);\n        }\n        etimer_reset(&amp;timer1);\n\n\n\n\n\n\n    }\n\n    PROCESS_END();\n}\n\n\n\n\n\n</code></pre>\n"
    }, {
        "tags": ["python", "callback", "switch-statement", "iot", "led"],
        "is_answered": true,
        "view_count": 74,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1576489240,
        "creation_date": 1576410804,
        "question_id": 59343640,
        "link": "https://stackoverflow.com/questions/59343640/pyboard-changing-led-colour-on-usr-button-press",
        "title": "Pyboard: Changing LED colour on USR button press",
        "body": "<p>I got these this board <a href=\"https://pybd.io/hw/pybd_sfxw.html#\" rel=\"nofollow noreferrer\">Pyboard D-series</a> which has internal LED diode with three different colours.\nMy goal is to make it change the LED colour on button press so basically if u press for the first time, red goes red, second time led goes green, third time led goes blue and at the fourth time I would love it to (\"reset\") and go back to red.</p>\n\n<p>I tried making this fucntion based on stuff I found online, but it doest seem to be working.</p>\n\n<p>I am new to IoT and micropython so I might be missing something important, but have no clue what.</p>\n\n<p>Thanks for any advice</p>\n\n<pre><code>from pyb import Switch\nfrom pyb import LED\n\n\nled_R = LED(1)\nled_G = LED(2)\nled_B = LED(3)\n# 1=red, 2=green, 3=blue\n\nsw = pyb.Switch()\n\ndef cycle():\n    counter = 0\n    buttonState = ''\n    buttonState = sw.value()\n    print(buttonState)\n    if buttonState == True:\n        counter = counter + 1\n        print(counter)\n\n    elif counter == 0:\n        led_R.off() \n        led_G.off() \n        led_B.off() \n\n    elif counter == 1:\n        led_R.on() \n        led_G.off() \n        led_B.off()\n\n    elif counter == 2:\n        led_R.off() \n        led_G.on() \n        led_B.off() \n\n    elif counter == 3:\n        led_R.off() \n        led_G.off() \n        led_B.on()\n\n    else:\n        counter = 0\n\nsw.callback(cycle())\n</code></pre>\n"
    }, {
        "tags": ["android", "bluetooth", "iot"],
        "is_answered": false,
        "view_count": 74,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1576484474,
        "creation_date": 1576478432,
        "question_id": 59351618,
        "link": "https://stackoverflow.com/questions/59351618/how-to-convert-a-string-to-byte-to-pass-into-the-bytearray",
        "title": "how to convert a string to byte to pass into the byteArray",
        "body": "<p>I am trying to change the color of the light bulb from a colorpicker.</p>\n\n<p>This is my code</p>\n\n<pre><code> ColorPickerDialogBuilder\n                        .with(this)\n                        .setTitle(\"Choose color\")\n                        .initialColor(R.color.colorPrimary)\n                        .wheelType(ColorPickerView.WHEEL_TYPE.FLOWER)\n                        .density(12)\n                        .setOnColorSelectedListener(new OnColorSelectedListener() {\n                            @Override\n                            public void onColorSelected(int selectedColor) {\n                                Toast.makeText(mBluetoothLeService, \"\"+Integer.toHexString(selectedColor), Toast.LENGTH_SHORT).show();\n                                String abc = Integer.toHexString(selectedColor);\n                                String aa = \"7f\";\n                                byte bb = 0x &amp; 7f;\n                                String[] split = abc.split(\"\");\n\n\n\n                                BluetoothGattService Service = bluetoothGatt.getService(UUID.fromString(\"0000ffd5-0000-1000-8000-00805f9b34fb\"));\n                                BluetoothGattCharacteristic charac = Service.getCharacteristic(UUID.fromString(\"0000ffd9-0000-1000-8000-00805f9b34fb\"));\n                                byte[] byteArray1 = { 0x56,  0xff, (byte) 0x00, (byte) 0x2c, 0x00, (byte) 0xf0, (byte) 0xaa};\n                                charac.setValue(byteArray1);\n                            }\n                        })\n                        .setPositiveButton(\"ok\", new ColorPickerClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialog, int selectedColor, Integer[] allColors) {\n                                //changeBackgroundColor(selectedColor);\n\n                               // byte byte1 =\n                            }\n                        })\n                        .setNegativeButton(\"cancel\", new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialog, int which) {\n                            }\n                        })\n                        .build()\n                        .show();\n</code></pre>\n\n<p>in the onColorSelected method, I get a hex string of the selected colour for eg \"7ff002c\".i want to split this string like \"ff\",\"00\",\"2c\"</p>\n\n<p>now as you can see there is a byteArray down the code</p>\n\n<p>I want to merge this string in the values of byteArray like  </p>\n\n<pre><code>byte[] byteArray1 = { 0x56,  0x\"ff\", (byte) 0x\"00\", (byte) 0x\"2c\", 0x00, (byte) 0xf0, (byte) 0xaa}; //note the inverted comma's\n</code></pre>\n\n<p>How can i do this.is this logic feasible? do you have any another logic?</p>\n\n<p>Please Help</p>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": false,
        "view_count": 127,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1575638542,
        "creation_date": 1575612163,
        "last_edit_date": 1575621794,
        "question_id": 59207696,
        "link": "https://stackoverflow.com/questions/59207696/error-using-thingspeak-talk-back-to-control-arduino-led",
        "title": "Error using thingspeak talk back to control arduino led",
        "body": "<p>The error I'm facing is about using talkback function of thingspeak to control my Arduino LED. it cannot execute the talkback command to off the led. The error is in my void get talkback. Please help me                                                                                             </p>\n\n<pre><code>#include \"ThingSpeak.h\"\n#include &lt;Ethernet.h&gt;\n#define redLED 8\nbyte mac[] = {0x90, 0xA2, 0xDA, 0x10, 0x40, 0x4F};\n\nconst String channelsAPIKey = \"\";\nconst String talkBackAPIKey = \"\";\nconst String talkBackID = \"\";\nconst String talkCommandID = \"\";\nconst unsigned int getTalkBackInterval = 10 * 1000;\nconst unsigned int updateChannelsInterval = 15 * 1000;\nString talkBackCommand;\n\n\nlong lastConnectionTimeChannels = 0;\nboolean lastConnectedChannels = false;\nint failedCounterChannels = 0;\nlong lastConnectionTimeTalkBack = 0;\nboolean lastConnectedTalkBack = false;\nint failedCounterTalkBack = 0;\nchar charIn;\n\n\n\n// Arduino Ethernet Client is initialized\nEthernetClient client;\n\nvoid setup()\n{\n  Ethernet.init(10);  // Most Arduino Ethernet hardware\n  Serial.begin(9600);  //Initialize serial\n  // start the Ethernet connection:\n  pinMode(redLED, OUTPUT);\n  digitalWrite(redLED, HIGH);\n}\nvoid loop()\n{\n  getTalkBack();\n\n}\n\nvoid getTalkBack()\n{\n\n\n\n  String tsData;\n  tsData = talkBackID + \"/commands/execute?api_key=\" + talkBackAPIKey;\n  if ((!client.connected() &amp;&amp; (millis() - lastConnectionTimeTalkBack &gt; getTalkBackInterval)))\n  {\n    if (client.connect(\"api.thingspeak.com\", 80))\n    {\n      client.println(\"GET /talkbacks/\" + tsData + \" HTTP/1.0\");\n      client.println();\n      lastConnectionTimeTalkBack = millis();\n      if (client.connected())\n      {\n        Serial.println(\"---------------------------------------\");\n        Serial.println(\"GET TalkBack command\");\n        Serial.println();\n        Serial.println(\"Connecting to ThingSpeak\");\n        Serial.println();\n        Serial.println();\n        Serial.println(\"Server response\");\n        Serial.println();\n        failedCounterTalkBack = 0;\n\n        while (client.connected() &amp;&amp; !client.available()) delay(2000); //waits for data\n        while (client.connected() || client.available())\n        {\n          charIn = client.read();\n          talkBackCommand += charIn;\n          Serial.print(charIn);\n          if (talkBackCommand == \"LED_ON\")\n          {\n            digitalWrite(redLED, HIGH);\n          }\n\n          if (talkBackCommand == \"LED_OFF\")\n          {\n            digitalWrite(redLED, LOW);\n          }\n        }\n\n        if (talkBackCommand = talkBackCommand.substring(talkBackCommand.indexOf(\"_CMD_\") + 5));\n        {\n          Serial.println();\n          Serial.println();\n          Serial.println(\"Disconnected\");\n          Serial.println();\n          Serial.println(\"--------\");\n          Serial.println();\n          Serial.println(\"talkback command was\");\n          Serial.println();\n          Serial.println(\"--------\");\n          Serial.println();\n          Serial.println(talkBackCommand);\n          Serial.println(\"--------\");\n          Serial.println();\n\n        }\n\n      }\n      else\n      {\n        failedCounterTalkBack++;\n        Serial.println(\"Connection to ThingSpeak failed (\" + String(failedCounterTalkBack, DEC) + \")\");\n        Serial.println();\n        lastConnectionTimeChannels = millis();\n      }\n    }\n  }\n  if (failedCounterTalkBack &gt; 3 )\n  {\n    startEthernet();\n  }\n  client.stop();\n  Serial.flush();\n}\n</code></pre>\n\n<p>The below is a image from my serial monitor. It shows that I can capture the command but couldn't execute it.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 984,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1575542957,
        "creation_date": 1552009943,
        "last_edit_date": 1575542957,
        "question_id": 55055620,
        "link": "https://stackoverflow.com/questions/55055620/esp8266-getting-data-from-thingspeak-by-using-ipd-answer",
        "title": "esp8266 getting data from thingspeak by using IPD answer",
        "body": "<p>i am new here, if asked before sorry in advance,\ni cannot found a related question.</p>\n\n<p>I edited a code for get the thingspeak channel's data, for using with a led or relay on channel 8 on arduino uno. according to data 1 or 0, the led would be on or off. I am using esp8266.</p>\n\n<p>espSerial.find(\"+IPD,1:0\") block is cannot work as it needed to do.</p>\n\n<pre><code>#include &lt;SoftwareSerial.h&gt;\nSoftwareSerial espSerial(2, 3);   \n#define DEBUG true\nString mySSID = \"ssid\";\nString myPWD = \"pass\"; \nString myAPI = \"CV4YEARDB91GTOXM\";   // API Key\nString myHOST = \"api.thingspeak.com\";\nString myPORT = \"80\";\nString myFIELD = \"field1\";\n\nvoid setup()\n{\n  pinMode(8,OUTPUT);\n  Serial.begin(9600);\n  espSerial.begin(115200);\n\n  espData(\"AT+RST\", 1000, DEBUG);                     \n  espData(\"AT+CWMODE=1\", 1000, DEBUG);                 \n  espData(\"AT+CWJAP=\\\"\"+ mySSID +\"\\\",\\\"\"+ myPWD +\"\\\"\", 1000, DEBUG);   \n  delay(1000); }\n\nvoid loop()\n  {\n\n    String sendData = \"GET /channels/716457/fields/1/last?key=CV4YEARDB91GTOXM\";\n    espData(\"AT+CIPMUX=1\", 1000, DEBUG);\n    espData(\"AT+CIPSTART=0,\\\"TCP\\\",\\\"\"+ myHOST +\"\\\",\"+ myPORT, 1000, DEBUG);\n    espData(\"AT+CIPSEND=0,\" +String(sendData.length()+4),1000,DEBUG);\n    espSerial.find(\"&gt;\");\n    espSerial.println(sendData);\n\n    espData(\"AT+CIPCLOSE=0\",1000,DEBUG);\n    delay(10000);\n  }\n\nString espData(String command, const int timeout, boolean debug)\n{\nSerial.print(command);\n  Serial.println(\"     \");\n\n  String response = \"\";\n  espSerial.println(command);\n  long int time = millis();\n  while ( (time + timeout) &gt; millis())\n  {\n    while (espSerial.available())\n    {\n      if (espSerial.find(\"+IPD,1:0\")) {\n        digitalWrite(8,LOW); }\n      if (espSerial.find(\"+IPD,1:1\")) {\n        digitalWrite(8,HIGH); }\n    }\n    }\n\n  if (debug)\n  {\n    Serial.print(response);\n  }\n  return response;\n}\n</code></pre>\n"
    }, {
        "tags": ["windows-10", "iot", "gpio"],
        "is_answered": false,
        "view_count": 132,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1574331581,
        "creation_date": 1574271687,
        "last_edit_date": 1574331581,
        "question_id": 58960360,
        "link": "https://stackoverflow.com/questions/58960360/windows-10-iot-and-gpio",
        "title": "Windows 10 iot and GPIO",
        "body": "<p>I have a C&amp;T RCO-3000 computer, Intel I5 processor x64 with Windows 10 Enterprise. The computer has 4 embedded input and 4 output.\nI tried to manage those GPIO with <strong>GpioController.GetDefault()</strong> but it returns null.</p>\n\n<p>I checked on <strong>device manager</strong> and there is nothing about <strong>GPIO</strong>. Is it correct ?\nWatching at <strong>System</strong> the reported operative system is Windows 10 Enterprise, I should have expected a reference to IoT, maybe the wrong os was installed and GPIO device is not recognized.\nI searched a lot about missing drivers or something to enable but found nothing useful. </p>\n\n<p>Update 1</p>\n\n<p>The chip which drives the GPIO is a <strong>Fintek F81866A</strong>. I found a related <a href=\"https://stackoverflow.com/questions/52670521/programming-gpio-pins-on-a-fintek-f81866a-chipset?noredirect=1\">question</a> about that chip, but I need something for Windows. </p>\n"
    }, {
        "tags": ["android", "wifi", "iot", "sensors"],
        "is_answered": false,
        "view_count": 81,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1574255139,
        "creation_date": 1574253995,
        "question_id": 58954707,
        "link": "https://stackoverflow.com/questions/58954707/how-to-receive-sensors-data-in-android-app-using-wifi-connection",
        "title": "How to receive sensor&#39;s data in android app using WiFi connection?",
        "body": "<p>I have a motion detector sensor with WiFi, I'm able to connect to that WiFi with my android app.\nBut how to get the sensor's data into my app?</p>\n"
    }, {
        "tags": ["raspberry-pi3", "iot"],
        "is_answered": false,
        "view_count": 330,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1574163295,
        "creation_date": 1574155853,
        "question_id": 58930677,
        "link": "https://stackoverflow.com/questions/58930677/how-to-read-sunrom-blood-pressure-sensor-data-using-raspberry-pi3",
        "title": "how to read SunRom Blood Pressure sensor data using Raspberry Pi3",
        "body": "<p>Im new to IoT platform.I need to read Reads blood pressure and heart rate and outputs at 9600 baud rate(Device name:Sunrom blood pressure sensor) using serial port RS232 in Python.Please help me to give any helpful reference link and useful material.   </p>\n"
    }, {
        "tags": ["python", "raspberry-pi", "iot"],
        "is_answered": true,
        "view_count": 253,
        "favorite_count": 0,
        "closed_date": 1573730404,
        "score": 0,
        "last_activity_date": 1573723915,
        "creation_date": 1573722481,
        "question_id": 58852995,
        "link": "https://stackoverflow.com/questions/58852995/using-lm393-sound-sensor-to-detect-sound-frequency",
        "title": "Using LM393 Sound sensor to detect sound frequency",
        "body": "<p>I am using sound sensor module LM393 to detect the sound frequency of snoring in setup with Raspberry Pi 3 Model B+ which occurs at around 300-500Hz. The scope of my mini project is to detect the sound at that particular range and then send it to firebase realtime database from which i can later utilize on my web applications front end. Currently the LM393 sensor detects any sound which has been calibrated using its built in function and sends the message to firebase.  </p>\n\n<pre><code>#!/usr/bin/python\nimport RPi.GPIO as GPIO\nfrom time import sleep\nimport datetime\nfrom firebase import firebase\nimport urllib2, urllib, httplib\nimport json\nimport os \nfrom functools import partial\n\nGPIO.setmode(GPIO.BCM)\nGPIO.cleanup()\nGPIO.setwarnings(False)\n\n#GPIO SETUP\nchannel = 24\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(channel, GPIO.IN)\n\nfirebase = firebase.FirebaseApplication('....', None)\n\ndef update_firebase():\n    print('Sound Detected')\n    data = {\"Sound\": \"Sound Detected\"}\n    firebase.post('/sensor/sound', data)\n\ndef update_firebase2():\n    print('Sound Detected')\n    data2={\"Sound\": \"Sound Not Detected\"}\n    firebase.post('/sensor/sound',data2)\n\n\ndef callback(channel):\n    if GPIO.input(channel):\n            update_firebase()\n    else:\n            update_firebase2()\n\nGPIO.add_event_detect(channel, GPIO.BOTH, bouncetime=300)  # let us know when the pin goes HIGH or LOW\nGPIO.add_event_callback(channel, callback)  # assign function to GPIO PIN, Run function on change\n\n# infinite loop\nwhile True:\n        callback(channel)\n        #sleepTime = int(sleepTime)\n        sleep(10)\n</code></pre>\n"
    }, {
        "tags": ["python", "devise", "raspberry-pi3", "iot", "sensors"],
        "is_answered": false,
        "view_count": 51,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1573625479,
        "creation_date": 1573625479,
        "question_id": 58831256,
        "link": "https://stackoverflow.com/questions/58831256/how-to-change-setmodeboard-t-setmodebcm",
        "title": "how to change setmode(board) t setmode(bcm)",
        "body": "<pre><code>import RPi.GPIO as GPIO\nimport time\n\nGPIO.setwarnings(False)\nGPIO.setmode(GPIO.Board)\n\nControlPin = [16,18,22,29]\n\nfor pin in ControlPin:\n    GPIO.setup(pin, GPIO.OUT)\n    GPIO.output(pin,0)\n\nseq =[\n[1,0,0,1],\n[1,0,0,0],\n[1,1,0,0],\n[0,1,0,0],\n[0,1,1,0],\n[0,0,1,0],\n[0,0,1,1],\n[0,0,0,1],\n[1,0,0,1],\n[1,0,0,0],\n[1,1,0,0],\n[0,1,0,0],\n[0,1,1,0],\n[0,0,1,0],\n[0,0,1,1],\n[0,0,0,1],\n]\n\n\nfor i in range(512):\n    for halfstep in range(16):\n        for pin in range(4):\n            GPIO.output(ControlPin[pin], seq[halfstep][pin])\n        time.sleep(0.001)\n\n\n\n\n</code></pre>\n\n<p>1.currently able function with board mode,but not able with bcm mode,but i want to use bcm mode, what part of code need to change to make bcm mode work...........................</p>\n"
    }, {
        "tags": ["arduino", "bluetooth", "iot"],
        "is_answered": false,
        "view_count": 55,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1572873168,
        "creation_date": 1572686560,
        "question_id": 58669755,
        "link": "https://stackoverflow.com/questions/58669755/one-of-two-hc-06-bluetooth-modules-only-can-be-detected",
        "title": "one of two HC-06 bluetooth modules only can be detected",
        "body": "<p>i am working on a device for my project that needs two HC-06 bluetooth modules to be connected to the pc. both of the modules are ok to be connected separately and are working fine. but when both of them are powered at the same time, the pc detect only on of them. <strong>are they getting the same address?</strong> </p>\n"
    }, {
        "tags": ["arduino", "iot", "sensors"],
        "is_answered": true,
        "view_count": 49,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1572862717,
        "creation_date": 1572831656,
        "last_edit_date": 1572862717,
        "question_id": 58686229,
        "link": "https://stackoverflow.com/questions/58686229/why-the-serial-monitor-only-give-same-output",
        "title": "Why the serial monitor only give same output",
        "body": "<p>I'm setting up the connection of sen0189 turbidity sensor to arduino uno board, while the output given looks weird</p>\n\n<pre><code>void setup() {\n    Serial.begin(9600);\n}\n\nvoid loop() {\n    // read the input on analog pin 0:\n    int sensorValue = analogRead(A0);\n    // Convert the analog reading (which goes from 0 - 1023) \n    // to a voltage (0 - 5V):\n    float voltage = sensorValue * (5.0 / 1024.0); \n    // print out the value you read:\n    Serial.println(voltage); \n    Serial.println(analogRead(A0));\n    delay(500);\n} \n</code></pre>\n\n<p>I expected the changing of output, however it only give reading of 0.3 for its voltage, while analogRead(A0) give 62</p>\n"
    }, {
        "tags": ["iot", "arduino-ide", "esp32"],
        "is_answered": false,
        "view_count": 936,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1572599407,
        "creation_date": 1572345972,
        "question_id": 58605900,
        "link": "https://stackoverflow.com/questions/58605900/how-do-i-read-connect-ble-beacon-on-esp32-with-arduino-ide",
        "title": "How do I read/connect BLE beacon on ESP32 with Arduino IDE?",
        "body": "<p>I wish to connect my ESP32 to my JDY-08 paired with Arduino for some smart sensor application. I wanted to read the integer which I have sent with the JDY-08 set on iBeacon mode. I tried the example that came along with the library ESP32, the one named BLE_CLient in ESP32_BLE_Arduino. The code could find the device I'm using which is the JDY-08 combined with Arduino UNO. I check the service and char UUID with my nRF app. Can any one tell what is wrong?</p>\n\n<p>JDY-08 Code:</p>\n\n<pre><code>#include &lt;SoftwareSerial.h&gt;\n\nSoftwareSerial mySerial(2, 3);\n\nvoid setup(){\n  Serial.begin(9600);\n  mySerial.begin(9600);\n}\n\nvoid loop(){\n  float temperature = 0.0;\n  int sample;\n  float ten_samples = 0.0;\n\n  for (sample = 0; sample &lt; 10; sample++) {\n      temperature = ((float)analogRead(A0) * 5.0 / 1024.0) - 0.5;\n      temperature = temperature / 0.01;\n      delay(100);\n      ten_samples = ten_samples + temperature;\n  }\n\n  temperature = ten_samples / 10.0;\n  int temperature_translate = (int)temperature;\n  mySerial.print(temperature_translate);\n  Serial.print(temperature_translate);\n  ten_samples = 0.0;\n\n  if (mySerial.available())\n    Serial.write(mySerial.read());\n  if (Serial.available())\n    mySerial.write(Serial.read());\n}\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "arduino-uno", "arduino-ide"],
        "is_answered": false,
        "view_count": 668,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1571484709,
        "creation_date": 1568365195,
        "last_edit_date": 1568366950,
        "question_id": 57920430,
        "link": "https://stackoverflow.com/questions/57920430/how-to-send-float-values-from-arduino-uno-to-esp8266-01",
        "title": "How to send float values from Arduino-UNO to ESP8266-01",
        "body": "<p>I am trying to send data from <code>arduino</code>to <code>esp-01</code> but i am only able to send integer values or If i am sending floating values it is received as integer by <code>esp-01</code> through software serial</p>\n\n<p>I tried sending with software serial, also tried typecasting float to string but it was giving me error while passing string to <code>myserial.write(STRING)</code></p>\n\n<pre><code>data = 0.00005146;\nmyserial.write(data);\n</code></pre>\n"
    }, {
        "tags": ["javascript", "raspberry-pi", "iot", "node-red"],
        "is_answered": false,
        "view_count": 170,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1571315889,
        "creation_date": 1563275525,
        "question_id": 57055942,
        "link": "https://stackoverflow.com/questions/57055942/node-red-temperature-based-light-or-fan",
        "title": "node-red temperature based light or fan",
        "body": "<p>i am retrieving temperature value from sensor into a function. how can i turn something On or Off connected to raspberry pin via toggle switch. tried if else in function but it wouldn't return Boolean. </p>\n"
    }, {
        "tags": ["c++", "c", "arduino", "iot"],
        "is_answered": false,
        "view_count": 454,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1570459235,
        "creation_date": 1570450973,
        "last_edit_date": 1570451920,
        "question_id": 58269469,
        "link": "https://stackoverflow.com/questions/58269469/how-to-combine-2-file-in-blynk-arduino",
        "title": "How to combine 2 file in blynk (arduino)",
        "body": "<p>I have 2 sketch , one is the code for my led to run , and other one is the blynk connection code , i wan to combine this 2 sketch so to make sure i can connect to my blynk app and also make my led code run.i use esp 8266 wifi sheild to connect to my phone app because ive use up all the pin for my arduino</p>\n\n<p><strong>blynk connection code</strong></p>\n\n<pre><code>#define BLYNK_PRINT Serial\n\n\n#include &lt;ESP8266_Lib.h&gt;\n#include &lt;BlynkSimpleShieldEsp8266.h&gt;\n\n// You should get Auth Token in the Blynk App.\n// Go to the Project Settings (nut icon).\nchar auth[] = \"ghznMVLIilXc08bYkO9qyNl_A6KaY7kT\";\n\n// Your WiFi credentials.\n// Set password to \"\" for open networks.\nchar ssid[] = \"find yr own one\";//store ssid user name\nchar pass[] = \"yashwini123\";//store password\n\n// Hardware Serial on Mega, Leonardo, Micro...\n//#define EspSerial Serial1\n\n// or Software Serial on Uno, Nano...\n#include &lt;SoftwareSerial.h&gt;\nSoftwareSerial EspSerial(2, 3); // RX, TX\n\n// Your ESP8266 baud rate:\n#define ESP8266_BAUD 9600 // set to 9600\n\nESP8266 wifi(&amp;EspSerial);\n\nvoid setup()\n{\n // Debug console\n Serial.begin(9600);\n\n delay(10);\n\n // Set ESP8266 baud rate\n EspSerial.begin(ESP8266_BAUD);\n delay(10);\n\n Blynk.begin(auth, wifi, ssid, pass);\n}\n\nvoid loop()\n{\n Blynk.run();\n}\n\n\n</code></pre>\n\n<p><strong>Led code</strong></p>\n\n<pre><code>#include &lt;Wire.h&gt;\n\n\n/*\n  4x4x4 LED Cube\n  Connection Setup: \n  Columns\n  [(x,y)-Pin]\n  (1,1)-13\n  (1,2)-12\n  (1,3)-11\n  (1,4)-10\n  (2,1)-9\n  (2,2)-8\n  (2,3)-7\n  (2,4)-6\n  (3,1)-5\n  (3-2)-4\n  (3-3)-3\n  (3,4)-2\n  (4,1)-1\n  (4,2)-0\n  (4,3)-A5\n  (4,4)-A4\n  Layers\n  [layer-Pin]\n  a-A0\n  b-A1\n  c-A2\n  d-A3\n*/\n//initializing and declaring led rows\n  int column[16]={13,12,11,10,A4,A5,9,8,7,6,5,4,3,2,1,0};//switch a4 a5 with 6 7\n//initializing and declaring led layers\n  int layer[4]={A3,A2,A1,A0};\n\n  int time = 250;\n\nvoid setup()\n{\n  //setting rows to ouput\n  for(int i = 0; i&lt;16; i++)\n  {\n    pinMode(column[i], OUTPUT);\n  }\n  //setting layers to output\n  for(int i = 0; i&lt;4; i++)\n  {\n    pinMode(layer[i], OUTPUT);\n  }\n  //seeding random for random pattern\n  randomSeed(analogRead(10));\n}\n//xxxxxxxxxxxxxxxxxxxxFUNCTION LOOPxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n//xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nvoid loop()\n{\nturnEverythingOff();//turn all off\n  flickerOn();\nturnEverythingOn();//turn all on\n  delay(time);\n turnOnAndOffAllByLayerUpAndDownNotTimed();\nlayerstompUpAndDown();\n  turnOnAndOffAllByColumnSideways();\n  delay(time);\n  aroundEdgeDown();\n  turnEverythingOff();\n randomflicker();\n randomRain();\n  diagonalRectangle();\ngoThroughAllLedsOneAtATime();\n propeller();\n  spiralInAndOut();\n\n  flickerOff();\n  turnEverythingOff();\n  delay(2000);\n\n}\n\n\n\n//xxxxxxxxxxxxxxxxxxxxFUNCTIONSxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n//xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\n///////////////////////////////////////////////////////////turn all off\nvoid turnEverythingOff()\n {\n   for(int i = 0; i&lt;16; i++)\n   {\n     digitalWrite(column[i], 1);\n   }\n   for(int i = 0; i&lt;4; i++)\n   {\n     digitalWrite(layer[i], 0);\n   }\n }\n\n////////////////////////////////////////////////////////////turn all on\nvoid turnEverythingOn()\n{\n  for(int i = 0; i&lt;16; i++)\n  {\n    digitalWrite(column[i], 0);\n  }\n  //turning on layers\n  for(int i = 0; i&lt;4; i++)\n  {\n    digitalWrite(layer[i], 1);\n  }\n}\n///////////////////////////////////////////////////////turn columns off\nvoid turnColumnsOff()\n{\n  for(int i = 0; i&lt;16; i++)\n  {\n    digitalWrite(column[i], 1);\n  }\n}\n/////////////////////////////////////////////////////////////flicker on\nvoid flickerOn()\n{\n  int i = 150;\n  while(i != 0)\n  {\n    turnEverythingOn();\n    delay(i);\n    turnEverythingOff();\n    delay(i);\n    i-= 5;\n  }\n}\n//////////////turn everything on and off by layer up and down NOT TIMED\nvoid turnOnAndOffAllByLayerUpAndDownNotTimed()\n{\n  int x = 75;\n  for(int i = 5; i != 0; i--)\n  {\n    turnEverythingOn();\n    for(int i = 4; i!=0; i--)\n    {\n      digitalWrite(layer[i-1], 0);\n      delay(x);\n    }\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(layer[i], 1);\n      delay(x);\n    }\n      for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(layer[i], 0);\n      delay(x);\n    }\n    for(int i = 4; i!=0; i--)\n    {\n      digitalWrite(layer[i-1], 1);\n      delay(x);\n    }\n  }\n}\n//////////////////////////turn everything on and off by column sideways\nvoid turnOnAndOffAllByColumnSideways()\n{\n  int x = 75;\n  turnEverythingOff();\n  //turn on layers\n  for(int i = 0; i&lt;4; i++)\n  {\n    digitalWrite(layer[i], 1);\n  }\n  for(int y = 0; y&lt;3; y++)\n  {\n    //turn on 0-3\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 4-7\n    for(int i = 4; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 8-11\n    for(int i = 8; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 12-15\n    for(int i = 12; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn off 0-3\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 4-7\n    for(int i = 4; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 8-11\n    for(int i = 8; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 12-15\n    for(int i = 12; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn on 12-15\n    for(int i = 12; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 8-11\n    for(int i = 8; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 4-7\n    for(int i = 4; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn on 0-3\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(column[i], 0);\n      delay(x);\n    }\n    //turn off 12-15\n    for(int i = 12; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 8-11\n    for(int i = 8; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 4-7\n    for(int i = 4; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n    //turn off 0-3\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(column[i], 1);\n      delay(x);\n    }\n  }\n}\n/////////////////////////////////////////up and down single layer stomp\nvoid layerstompUpAndDown()\n{\n  int x = 75;\n  for(int i = 0; i&lt;4; i++)\n  {\n    digitalWrite(layer[i], 0);\n  }\n  for(int y = 0; y&lt;5; y++)\n  {\n    for(int count = 0; count&lt;1; count++)\n    { \n      for(int i = 0; i&lt;4; i++)\n      {\n        digitalWrite(layer[i], 1);\n        delay(x);\n        digitalWrite(layer[i], 0);\n      }\n      for(int i = 4; i !=0; i--)\n      {\n        digitalWrite(layer[i-1], 1);\n        delay(x);\n        digitalWrite(layer[i-1], 0);\n      }\n    }\n    for(int i = 0; i&lt;4; i++)\n    {\n      digitalWrite(layer[i], 1);\n      delay(x);\n    }\n    for(int i = 4; i!=0; i--)\n    {\n      digitalWrite(layer[i-1], 0);\n      delay(x);\n    }\n  }\n}\n////////////////////////////////////////////////////////////flicker off\nvoid flickerOff()\n{\n  turnEverythingOn();\n  for(int i = 0; i!= 150; i+=5)\n  {\n    turnEverythingOff();\n    delay(i+50);\n    turnEverythingOn();\n    delay(i);\n  }\n}\n///////////////////////////////////////////around edge of the cube down\nvoid aroundEdgeDown()\n{\n  for(int x = 200; x != 0; x -=50)\n  {\n    turnEverythingOff();\n    for(int i = 4; i != 0; i--)\n    {\n      digitalWrite(layer[i-1], 1);\n      digitalWrite(column[5], 0);\n      digitalWrite(column[6], 0);\n      digitalWrite(column[9], 0);\n      digitalWrite(column[10], 0);\n\n      digitalWrite(column[0], 0);\n      delay(x);\n      digitalWrite(column[0], 1);\n      digitalWrite(column[4], 0);\n      delay(x);\n      digitalWrite(column[4], 1);\n      digitalWrite(column[8], 0);\n      delay(x);\n      digitalWrite(column[8], 1);\n      digitalWrite(column[12], 0);\n      delay(x);\n      digitalWrite(column[12], 1);\n      digitalWrite(column[13], 0);\n      delay(x);\n      digitalWrite(column[13], 1);\n      digitalWrite(column[15], 0);\n      delay(x);\n      digitalWrite(column[15], 1);\n      digitalWrite(column[14], 0);\n      delay(x);\n      digitalWrite(column[14], 1);\n      digitalWrite(column[11], 0);\n      delay(x);\n      digitalWrite(column[11], 1);\n      digitalWrite(column[7], 0);\n      delay(x);\n      digitalWrite(column[7], 1);\n      digitalWrite(column[3], 0);\n      delay(x);\n      digitalWrite(column[3], 1);\n      digitalWrite(column[2], 0);\n      delay(x);\n      digitalWrite(column[2], 1);\n      digitalWrite(column[1], 0);\n      delay(x);\n      digitalWrite(column[1], 1);\n    }\n  }\n}\n/////////////////////////////////////////////////////////random flicker\nvoid randomflicker()\n{\n  turnEverythingOff();\n  int x = 10;\n  for(int i = 0; i !=750; i+=2)\n  {\n  int randomLayer = random(0,4);\n  int randomColumn = random(0,16);\n\n  digitalWrite(layer[randomLayer], 1);\n  digitalWrite(column[randomColumn], 0);\n  delay(x);\n  digitalWrite(layer[randomLayer], 0);\n  digitalWrite(column[randomColumn], 1);\n  delay(x); \n  }\n}\n////////////////////////////////////////////////////////////random rain\nvoid randomRain()\n{\n  turnEverythingOff();\n  int x = 100;\n  for(int i = 0; i!=60; i+=2)\n  {\n    int randomColumn = random(0,16);\n    digitalWrite(column[randomColumn], 0);\n    digitalWrite(layer[0], 1);\n    delay(x+50);\n    digitalWrite(layer[0], 0);\n    digitalWrite(layer[1], 1);\n    delay(x);\n    digitalWrite(layer[1], 0);\n    digitalWrite(layer[2], 1);\n    delay(x);\n    digitalWrite(layer[2], 0);\n    digitalWrite(layer[3], 1);\n    delay(x+50);\n    digitalWrite(layer[3], 0);\n    digitalWrite(column[randomColumn], 1);\n  }\n}\n/////////////////////////////////////////////////////diagonal rectangle\nvoid diagonalRectangle()\n{\n  int x = 350;\n  turnEverythingOff();\n  for(int count = 0; count&lt;5; count++)\n  {\n    //top left\n    for(int i = 0; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[3], 1);\n    digitalWrite(layer[2], 1);\n    delay(x);\n    turnEverythingOff();\n    //middle middle\n    for(int i = 4; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[1], 1);\n    digitalWrite(layer[2], 1);\n    delay(x);\n    turnEverythingOff();\n    //bottom right\n    for(int i = 8; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[0], 1);\n    digitalWrite(layer[1], 1);\n    delay(x);\n    turnEverythingOff();\n    //bottom middle\n    for(int i = 4; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[0], 1);\n    digitalWrite(layer[1], 1);\n    delay(x);\n    turnEverythingOff();\n    //bottom left\n    for(int i = 0; i&lt;8; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[0], 1);\n    digitalWrite(layer[1], 1);\n    delay(x);\n    turnEverythingOff();\n    //middle middle\n    for(int i = 4; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[1], 1);\n    digitalWrite(layer[2], 1);\n    delay(x);\n    turnEverythingOff();\n    //top right\n    for(int i = 8; i&lt;16; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[2], 1);\n    digitalWrite(layer[3], 1);\n    delay(x);\n    turnEverythingOff();\n    //top middle\n    for(int i = 4; i&lt;12; i++)\n    {\n      digitalWrite(column[i], 0);\n    }\n    digitalWrite(layer[2], 1);\n    digitalWrite(layer[3], 1);\n    delay(x);\n    turnEverythingOff();\n  }\n  //top left\n  for(int i = 0; i&lt;8; i++)\n  {\n    digitalWrite(column[i], 0);\n  }\n  digitalWrite(layer[3], 1);\n  digitalWrite(layer[2], 1);\n  delay(x);\n  turnEverythingOff();\n}\n//////////////////////////////////////////////////////////////propeller\nvoid propeller()\n{\n  turnEverythingOff();\n  int x = 90;\n  for(int y = 4; y&gt;0; y--)\n  {\n    for(int i = 0; i&lt;6; i++)\n    {\n      //turn on layer\n      digitalWrite(layer[y-1], 1);\n      //a1\n      turnColumnsOff();\n      digitalWrite(column[0], 0);\n      digitalWrite(column[5], 0);\n      digitalWrite(column[10], 0);\n      digitalWrite(column[15], 0);\n      delay(x);\n      //b1\n      turnColumnsOff();\n      digitalWrite(column[4], 0);\n      digitalWrite(column[5], 0);\n      digitalWrite(column[10], 0);\n      digitalWrite(column[11], 0);\n      delay(x);\n      //c1\n      turnColumnsOff();\n      digitalWrite(column[6], 0);\n      digitalWrite(column[7], 0);\n      digitalWrite(column[8], 0);\n      digitalWrite(column[9], 0);\n      delay(x);\n      //d1\n      turnColumnsOff();\n      digitalWrite(column[3], 0);\n      digitalWrite(column[6], 0);\n      digitalWrite(column[9], 0);\n      digitalWrite(column[12], 0);\n      delay(x);\n      //d2\n      turnColumnsOff();\n      digitalWrite(column[2], 0);\n      digitalWrite(column[6], 0);\n      digitalWrite(column[9], 0);\n      digitalWrite(column[13], 0);\n      delay(x);\n      //d3\n      turnColumnsOff();\n      digitalWrite(column[1], 0);\n      digitalWrite(column[5], 0);\n      digitalWrite(column[10], 0);\n      digitalWrite(column[14], 0);\n      delay(x);\n    }\n  }\n  //d4\n  turnColumnsOff();\n  digitalWrite(column[0], 0);\n  digitalWrite(column[5], 0);\n  digitalWrite(column[10], 0);\n  digitalWrite(column[15], 0);\n  delay(x);\n}\n//////////////////////////////////////////////////////spiral in and out\nvoid spiralInAndOut()\n{\n  turnEverythingOn();\n  int x = 60;\n  for(int i = 0; i&lt;6; i++)\n  {\n    //spiral in clockwise\n    digitalWrite(column[0], 1);\n    delay(x);\n    digitalWrite(column[1], 1);\n    delay(x);\n    digitalWrite(column[2], 1);\n    delay(x);\n    digitalWrite(column[3], 1);\n    delay(x);\n    digitalWrite(column[7], 1);\n    delay(x);\n    digitalWrite(column[11], 1);\n    delay(x);\n    digitalWrite(column[15], 1);\n    delay(x);\n    digitalWrite(column[14], 1);\n    delay(x);\n    digitalWrite(column[13], 1);\n    delay(x);\n    digitalWrite(column[12], 1);\n    delay(x);\n    digitalWrite(column[8], 1);\n    delay(x);\n    digitalWrite(column[4], 1);\n    delay(x);\n    digitalWrite(column[5], 1);\n    delay(x);\n    digitalWrite(column[6], 1);\n    delay(x);\n    digitalWrite(column[10], 1);\n    delay(x);\n    digitalWrite(column[9], 1);\n    delay(x);\n    ///////////////////////////////////////spiral out counter clockwise\n    digitalWrite(column[9], 0);\n    delay(x);\n    digitalWrite(column[10], 0);\n    delay(x);\n    digitalWrite(column[6], 0);\n    delay(x);\n    digitalWrite(column[5], 0);\n    delay(x);\n    digitalWrite(column[4], 0);\n    delay(x);\n    digitalWrite(column[8], 0);\n    delay(x);\n    digitalWrite(column[12], 0);\n    delay(x);\n    digitalWrite(column[13], 0);\n    delay(x);\n    digitalWrite(column[14], 0);\n    delay(x);\n    digitalWrite(column[15], 0);\n    delay(x);\n    digitalWrite(column[11], 0);\n    delay(x);\n    digitalWrite(column[7], 0);\n    delay(x);\n    digitalWrite(column[3], 0);\n    delay(x);\n    digitalWrite(column[2], 0);\n    delay(x);\n    digitalWrite(column[1], 0);\n    delay(x);\n    digitalWrite(column[0], 0);\n    delay(x);\n    ///////////////////////////////////////spiral in counter clock wise\n    digitalWrite(column[0], 1);\n    delay(x);\n    digitalWrite(column[4], 1);\n    delay(x);\n    digitalWrite(column[8], 1);\n    delay(x);\n    digitalWrite(column[12], 1);\n    delay(x);\n    digitalWrite(column[13], 1);\n    delay(x);\n    digitalWrite(column[14], 1);\n    delay(x);\n    digitalWrite(column[15], 1);\n    delay(x);\n    digitalWrite(column[11], 1);\n    delay(x);\n    digitalWrite(column[7], 1);\n    delay(x);\n    digitalWrite(column[3], 1);\n    delay(x);\n    digitalWrite(column[2], 1);\n    delay(x);\n    digitalWrite(column[1], 1);\n    delay(x);\n    digitalWrite(column[5], 1);\n    delay(x);\n    digitalWrite(column[9], 1);\n    delay(x);\n    digitalWrite(column[10], 1);\n    delay(x);\n    digitalWrite(column[6], 1);\n    delay(x);\n    //////////////////////////////////////////////spiral out clock wise\n    digitalWrite(column[6], 0);\n    delay(x);\n    digitalWrite(column[10], 0);\n    delay(x);\n    digitalWrite(column[9], 0);\n    delay(x);\n    digitalWrite(column[5], 0);\n    delay(x);\n    digitalWrite(column[1], 0);\n    delay(x);\n    digitalWrite(column[2], 0);\n    delay(x);\n    digitalWrite(column[3], 0);\n    delay(x);\n    digitalWrite(column[7], 0);\n    delay(x);\n    digitalWrite(column[11], 0);\n    delay(x);\n    digitalWrite(column[15], 0);\n    delay(x);\n    digitalWrite(column[14], 0);\n    delay(x);\n    digitalWrite(column[13], 0);\n    delay(x);\n    digitalWrite(column[12], 0);\n    delay(x);\n    digitalWrite(column[8], 0);\n    delay(x);\n    digitalWrite(column[4], 0);\n    delay(x);\n    digitalWrite(column[0], 0);\n    delay(x);\n  }\n}\n//////////////////////////////////////go through all leds one at a time\nvoid goThroughAllLedsOneAtATime()\n{\n  int x = 15;\n  turnEverythingOff();\n  for(int y = 0; y&lt;5; y++)\n  {\n    //0-3\n    for(int count = 4; count != 0; count--)\n    {\n      digitalWrite(layer[count-1], 1);\n      for(int i = 0; i&lt;4; i++)\n      {\n        digitalWrite(column[i], 0);\n        delay(x);\n        digitalWrite(column[i], 1);\n        delay(x);\n      }\n    digitalWrite(layer[count-1], 0);\n    }\n    //4-7\n    for(int count = 0; count &lt; 4; count++)\n    {\n      digitalWrite(layer[count], 1);\n      for(int i = 4; i&lt;8; i++)\n      {\n        digitalWrite(column[i], 0);\n        delay(x);\n        digitalWrite(column[i], 1);\n        delay(x);\n      }\n    digitalWrite(layer[count], 0);\n    }\n    //8-11\n    for(int count = 4; count != 0; count--)\n    {\n      digitalWrite(layer[count-1], 1);\n      for(int i = 8; i&lt;12; i++)\n      {\n        digitalWrite(column[i], 0);\n        delay(x);\n        digitalWrite(column[i], 1);\n        delay(x);\n      }\n    digitalWrite(layer[count-1], 0);\n    }\n    //12-15\n    for(int count = 0; count &lt; 4; count++)\n    {\n      digitalWrite(layer[count], 1);\n      for(int i = 12; i&lt;16; i++)\n      {\n        digitalWrite(column[i], 0);\n        delay(x);\n        digitalWrite(column[i], 1);\n        delay(x);\n      }\n    digitalWrite(layer[count], 0);\n    }\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["database", "time-series", "iot", "partition", "dolphindb"],
        "is_answered": false,
        "view_count": 21,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1569810827,
        "creation_date": 1569810827,
        "question_id": 58160857,
        "link": "https://stackoverflow.com/questions/58160857/how-to-partition-properly-in-dolphindb-to-reach-a-better-performance",
        "title": "How to partition properly in DolphinDB to reach a better performance?",
        "body": "<p>I have 10 thousand devices and each device has 10 thousand records. For each record, we should have columns including devId(int),devName(string),devgroup(int),time(timestamp),temperature(int) and humidity(float). To be specific, devId ranges from 1 to 10000; devName similarly ranges from 'dev'_1 to 'dev_10000'; devGroup ranges from 0 to 99 (every 100 devices as a group). In DolphinDB, I have desgined two schemas:</p>\n\n<pre><code>dbDir = 'dfs://devDB'\nif(existsDatabase(dbDir))\n   dropDatabase(dbDir)\nrange_schema=0..100 * 100 + 1\ndb = database(dbDir, RANGE, range_schema)\ndev = db.createPartitionedTable(schema, `dev , `devId)\n</code></pre>\n\n<p>Or if I partition like this:</p>\n\n<pre><code>dbDir = 'dfs://devDB'\nif(existsDatabase(dbDir))\n   dropDatabase(dbDir)\nrange_schema=0..100 * 100 + 1\ndb1 = database(\"\", VALUE, 0..99)\ndb2 = database(\"\", RANGE, range_schema) \ndb = database(dbDir, COMPO, [db1,db2])\ndb.createPartitionedTable(schema,`dev,`devGroup`devId)\n</code></pre>\n\n<p>I wonder which is more proper, or is there a partition rule?</p>\n"
    }, {
        "tags": ["iot", "stm32", "stm32f0"],
        "is_answered": true,
        "view_count": 996,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1568816087,
        "creation_date": 1491421247,
        "question_id": 43240218,
        "link": "https://stackoverflow.com/questions/43240218/stmicro-stmtouch-driver-usage-of-a-5-channel-mono-electrode-design-for-linear-se",
        "title": "STMicro STMTouch Driver Usage of a 5 channel Mono electrode design for Linear Sensor Problems",
        "body": "<p>I'm working with a custom board which has 8 channels consisting of three touchkey and 1 linear sensor.</p>\n\n<p>There are 8 channel IOs, three sampling IOs and no shield configs.  Three of the channels are for the three touchkeys.  Five of the channels are for the linear sensor.</p>\n\n<p>I have worked with the STM3270B Discovery board where it has three channels setup in a Half-Ended electrode design (LIN_H).  I've worked through the example provided by this board for a non interrupt implementation.</p>\n\n<p>I have worked with the STM3207 Eval board where it has two channels setup as two touchkeys.</p>\n\n<p>On my custom board the touchkeys work flawlessly.  The five channel linear sensor does not work completely.   All five pads do indeed detect a touch but as far as data position goes, it fails.  The example has all the ios in a single channel.  There isn't an example I know of which uses 5 channels split across two TSC groups.   Its mentioned in the STMTouch Driver User Manual, but I'll have to look again for a code sample.</p>\n\n<p>The problem is that the macro which determines the value of the sensor LINEAR_POSITION = MyLinRots[0].p_Data->Position has two results.  If either of the two pads associated with the group 1 IOs is touched the DETECT macro fires correctly but the LINEAR_POSITION value is 0x2.  Likewise if the three pads associated with the group 2 IOS is touched DETECT macro fires correctly but the LINEAR_POSITION value is 0xC.  </p>\n\n<p>I thought the value would vary between 0 and 255 split 5 ways for each pad.  I've looked at the raw position instead of the scaled position but it behaves similarly.</p>\n\n<p>Here is my layout of the channels, banks, touchkeys, linear/rotary and objects split across the header file and source file.</p>\n\n<p>The header:</p>\n\n<pre><code>/* Channel IOs definition */\n// The three touchkey channels\n#define CHANNEL_0_IO_MSK    (TSC_GROUP6_IO2)\n#define CHANNEL_0_GRP_MSK   (TSC_GROUP6)\n#define CHANNEL_0_SRC       (TSC_GROUP6_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_0_DEST      (0) /* Index in destination result array */\n\n#define CHANNEL_1_IO_MSK    (TSC_GROUP6_IO3)\n#define CHANNEL_1_GRP_MSK   (TSC_GROUP6)\n#define CHANNEL_1_SRC       (TSC_GROUP6_IDX)\n#define CHANNEL_1_DEST      (1)\n\n#define CHANNEL_2_IO_MSK    (TSC_GROUP6_IO4)\n#define CHANNEL_2_GRP_MSK   (TSC_GROUP6)\n#define CHANNEL_2_SRC       (TSC_GROUP6_IDX)\n#define CHANNEL_2_DEST      (2)\n\n// The five linrot channels\n#define CHANNEL_3_IO_MSK    (TSC_GROUP1_IO3)\n#define CHANNEL_3_GRP_MSK   (TSC_GROUP1)\n#define CHANNEL_3_SRC       (TSC_GROUP1_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_3_DEST      (3) /* Index in destination result array */\n\n#define CHANNEL_4_IO_MSK    (TSC_GROUP1_IO4)\n#define CHANNEL_4_GRP_MSK   (TSC_GROUP1)\n#define CHANNEL_4_SRC       (TSC_GROUP1_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_4_DEST      (4) /* Index in destination result array */\n\n#define CHANNEL_5_IO_MSK    (TSC_GROUP2_IO2)\n#define CHANNEL_5_GRP_MSK   (TSC_GROUP2)\n#define CHANNEL_5_SRC       (TSC_GROUP2_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_5_DEST      (5) /* Index in destination result array */\n\n#define CHANNEL_6_IO_MSK    (TSC_GROUP2_IO3)\n#define CHANNEL_6_GRP_MSK   (TSC_GROUP2)\n#define CHANNEL_6_SRC       (TSC_GROUP2_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_6_DEST      (6) /* Index in destination result array */\n\n#define CHANNEL_7_IO_MSK    (TSC_GROUP2_IO4)\n#define CHANNEL_7_GRP_MSK   (TSC_GROUP2)\n#define CHANNEL_7_SRC       (TSC_GROUP2_IDX) /* Index in source register (TSC-&gt;IOGXCR[]) */\n#define CHANNEL_7_DEST      (7) /* Index in destination result array */\n\n\n\n/* Shield IOs definition */\n#define SHIELD_IO_MSK       (0) // orig (TSC_GROUP7_IO3)  we dont have a shield\n\n/* Banks definition */\n// The touch key bank\n#define BANK_0_NBCHANNELS    (1)\n#define BANK_0_MSK_CHANNELS  (CHANNEL_0_IO_MSK | SHIELD_IO_MSK)\n#define BANK_0_MSK_GROUPS    (CHANNEL_0_GRP_MSK)\n\n#define BANK_1_NBCHANNELS    (1)\n#define BANK_1_MSK_CHANNELS  (CHANNEL_1_IO_MSK | SHIELD_IO_MSK)\n#define BANK_1_MSK_GROUPS    (CHANNEL_1_GRP_MSK)\n\n#define BANK_2_NBCHANNELS    (1)\n#define BANK_2_MSK_CHANNELS  (CHANNEL_2_IO_MSK | SHIELD_IO_MSK)\n#define BANK_2_MSK_GROUPS    (CHANNEL_2_GRP_MSK)\n\n\n// The linrot bank\n#define BANK_3_NBCHANNELS    (5)\n#define BANK_3_MSK_CHANNELS  (CHANNEL_3_IO_MSK | CHANNEL_4_IO_MSK | CHANNEL_5_IO_MSK | CHANNEL_6_IO_MSK| CHANNEL_7_IO_MSK | SHIELD_IO_MSK)\n#define BANK_3_MSK_GROUPS    (CHANNEL_3_GRP_MSK | CHANNEL_4_GRP_MSK | CHANNEL_5_GRP_MSK | CHANNEL_6_GRP_MSK | CHANNEL_7_GRP_MSK )\n</code></pre>\n\n<p>The source file setting up the definitions</p>\n\n<pre><code>/* define for the linear */\n#define LINEAR_DETECT ((MyLinRots[0].p_Data-&gt;StateId == TSL_STATEID_DETECT) || \\\n                       (MyLinRots[0].p_Data-&gt;StateId == TSL_STATEID_DEB_RELEASE_DETECT))\n#define LINEAR_POSITION (MyLinRots[0].p_Data-&gt;Position)\n\n\n/*============================================================================*/\n/* Channels                                                                   */\n/*============================================================================*/\n\n/* Source and Configuration (ROM) */\nCONST TSL_ChannelSrc_T MyChannels_Src[TSLPRM_TOTAL_CHANNELS] = {\n\n// The three touchkey channels  \n  { CHANNEL_0_SRC, CHANNEL_0_IO_MSK, CHANNEL_0_GRP_MSK },\n  { CHANNEL_1_SRC, CHANNEL_1_IO_MSK, CHANNEL_1_GRP_MSK },\n  { CHANNEL_2_SRC, CHANNEL_2_IO_MSK, CHANNEL_2_GRP_MSK },\n// The five linrot channels\n  { CHANNEL_3_SRC, CHANNEL_3_IO_MSK, CHANNEL_3_GRP_MSK },\n  { CHANNEL_4_SRC, CHANNEL_4_IO_MSK, CHANNEL_4_GRP_MSK },\n  { CHANNEL_5_SRC, CHANNEL_5_IO_MSK, CHANNEL_5_GRP_MSK },\n  { CHANNEL_6_SRC, CHANNEL_6_IO_MSK, CHANNEL_6_GRP_MSK },\n  { CHANNEL_7_SRC, CHANNEL_7_IO_MSK, CHANNEL_7_GRP_MSK }\n\n};\n\n/* Destination (ROM) */\nCONST TSL_ChannelDest_T MyChannels_Dest[TSLPRM_TOTAL_CHANNELS] = {\n// The three touchkey channels\n  { CHANNEL_0_DEST },\n  { CHANNEL_1_DEST },\n  { CHANNEL_2_DEST },\n// The five linrot channels\n  { CHANNEL_3_DEST },\n  { CHANNEL_4_DEST },\n  { CHANNEL_5_DEST },\n  { CHANNEL_6_DEST },\n  { CHANNEL_7_DEST },\n};\n\n/* Data (RAM) */\nTSL_ChannelData_T MyChannels_Data[TSLPRM_TOTAL_CHANNELS];\n\n/*============================================================================*/\n/* Banks                                                                      */\n/*============================================================================*/\n\n/* List (ROM) */\nCONST TSL_Bank_T MyBanks[TSLPRM_TOTAL_BANKS] = {\n  // The three touchkey bankss\n  {&amp;MyChannels_Src[0], &amp;MyChannels_Dest[0], MyChannels_Data, BANK_0_NBCHANNELS, BANK_0_MSK_CHANNELS, BANK_0_MSK_GROUPS},\n  {&amp;MyChannels_Src[1], &amp;MyChannels_Dest[1], MyChannels_Data, BANK_1_NBCHANNELS, BANK_1_MSK_CHANNELS, BANK_1_MSK_GROUPS},\n  {&amp;MyChannels_Src[2], &amp;MyChannels_Dest[2], MyChannels_Data, BANK_2_NBCHANNELS, BANK_2_MSK_CHANNELS, BANK_2_MSK_GROUPS},\n  // The one linrot bank\n  {&amp;MyChannels_Src[3], &amp;MyChannels_Dest[3], MyChannels_Data, BANK_3_NBCHANNELS, BANK_3_MSK_CHANNELS, BANK_3_MSK_GROUPS}\n};\n\n/*============================================================================*/\n/* Touchkey sensors                                                           */\n/*============================================================================*/\n\n/* Data (RAM) */\nTSL_TouchKeyData_T MyTKeys_Data[TSLPRM_TOTAL_TKEYS];\n\n/* Parameters (RAM) */\nTSL_TouchKeyParam_T MyTKeys_Param[TSLPRM_TOTAL_TKEYS];\n\n/* State Machine (ROM) */\n\nvoid MyTKeys_ErrorStateProcess(void);\nvoid MyTKeys_OffStateProcess(void);\n\nCONST TSL_State_T MyTKeys_StateMachine[] = {\n  /* Calibration states */\n  /*  0 */ { TSL_STATEMASK_CALIB,              TSL_tkey_CalibrationStateProcess },\n  /*  1 */ { TSL_STATEMASK_DEB_CALIB,          TSL_tkey_DebCalibrationStateProcess },\n  /* Release states */\n  /*  2 */ { TSL_STATEMASK_RELEASE,            TSL_tkey_ReleaseStateProcess },\n#if TSLPRM_USE_PROX &gt; 0\n  /*  3 */ { TSL_STATEMASK_DEB_RELEASE_PROX,   TSL_tkey_DebReleaseProxStateProcess },\n#else\n  /*  3 */ { TSL_STATEMASK_DEB_RELEASE_PROX,   0 },\n#endif\n  /*  4 */ { TSL_STATEMASK_DEB_RELEASE_DETECT, TSL_tkey_DebReleaseDetectStateProcess },\n  /*  5 */ { TSL_STATEMASK_DEB_RELEASE_TOUCH,  TSL_tkey_DebReleaseTouchStateProcess },\n#if TSLPRM_USE_PROX &gt; 0\n  /* Proximity states */\n  /*  6 */ { TSL_STATEMASK_PROX,               TSL_tkey_ProxStateProcess },\n  /*  7 */ { TSL_STATEMASK_DEB_PROX,           TSL_tkey_DebProxStateProcess },\n  /*  8 */ { TSL_STATEMASK_DEB_PROX_DETECT,    TSL_tkey_DebProxDetectStateProcess },\n  /*  9 */ { TSL_STATEMASK_DEB_PROX_TOUCH,     TSL_tkey_DebProxTouchStateProcess },  \n#else\n  /*  6 */ { TSL_STATEMASK_PROX,               0 },\n  /*  7 */ { TSL_STATEMASK_DEB_PROX,           0 },\n  /*  8 */ { TSL_STATEMASK_DEB_PROX_DETECT,    0 },\n  /*  9 */ { TSL_STATEMASK_DEB_PROX_TOUCH,     0 },\n#endif\n  /* Detect states */\n  /* 10 */ { TSL_STATEMASK_DETECT,             TSL_tkey_DetectStateProcess },\n  /* 11 */ { TSL_STATEMASK_DEB_DETECT,         TSL_tkey_DebDetectStateProcess },\n  /* Touch state */\n  /* 12 */ { TSL_STATEMASK_TOUCH,              TSL_tkey_TouchStateProcess },\n  /* Error states */\n  /* 13 */ { TSL_STATEMASK_ERROR,              MyTKeys_ErrorStateProcess },\n  /* 14 */ { TSL_STATEMASK_DEB_ERROR_CALIB,    TSL_tkey_DebErrorStateProcess },\n  /* 15 */ { TSL_STATEMASK_DEB_ERROR_RELEASE,  TSL_tkey_DebErrorStateProcess },\n  /* 16 */ { TSL_STATEMASK_DEB_ERROR_PROX,     TSL_tkey_DebErrorStateProcess },\n  /* 17 */ { TSL_STATEMASK_DEB_ERROR_DETECT,   TSL_tkey_DebErrorStateProcess },\n  /* 18 */ { TSL_STATEMASK_DEB_ERROR_TOUCH,    TSL_tkey_DebErrorStateProcess },\n  /* Other states */\n  /* 19 */ { TSL_STATEMASK_OFF,                MyTKeys_OffStateProcess }\n};\n\n\n/* Methods for \"extended\" type (ROM) */\nCONST TSL_TouchKeyMethods_T MyTKeys_Methods = {\n  TSL_tkey_Init,\n  TSL_tkey_Process\n};\n\n/* TouchKeys list (ROM) */\nCONST TSL_TouchKey_T MyTKeys[TSLPRM_TOTAL_TKEYS] = {\n  { &amp;MyTKeys_Data[0], &amp;MyTKeys_Param[0], &amp;MyChannels_Data[CHANNEL_0_DEST], MyTKeys_StateMachine, &amp;MyTKeys_Methods },\n  { &amp;MyTKeys_Data[1], &amp;MyTKeys_Param[1], &amp;MyChannels_Data[CHANNEL_1_DEST], MyTKeys_StateMachine, &amp;MyTKeys_Methods },\n  { &amp;MyTKeys_Data[2], &amp;MyTKeys_Param[2], &amp;MyChannels_Data[CHANNEL_2_DEST], MyTKeys_StateMachine, &amp;MyTKeys_Methods }\n};\n\n/*============================================================================*/\n/* Linear and Rotary sensors                                                  */\n/*============================================================================*/\n\n/* Data (RAM) */\nTSL_LinRotData_T MyLinRots_Data[TSLPRM_TOTAL_LINROTS];\n\n/* Parameters (RAM) */\nTSL_LinRotParam_T MyLinRots_Param[TSLPRM_TOTAL_LINROTS];\n\n/* State Machine (ROM) */\n\nvoid MyLinRots_ErrorStateProcess(void);\nvoid MyLinRots_OffStateProcess(void);\n\n\n\n\nCONST TSL_State_T MyLinRots_StateMachine[] = {\n  /* Calibration states */\n  /*  0 */ { TSL_STATEMASK_CALIB,              TSL_linrot_CalibrationStateProcess },\n  /*  1 */ { TSL_STATEMASK_DEB_CALIB,          TSL_linrot_DebCalibrationStateProcess },\n  /* Release states */\n  /*  2 */ { TSL_STATEMASK_RELEASE,            TSL_linrot_ReleaseStateProcess },\n#if TSLPRM_USE_PROX &gt; 0\n  /*  3 */ { TSL_STATEMASK_DEB_RELEASE_PROX,   TSL_linrot_DebReleaseProxStateProcess },\n#else\n  /*  3 */ { TSL_STATEMASK_DEB_RELEASE_PROX,   0 },\n#endif\n  /*  4 */ { TSL_STATEMASK_DEB_RELEASE_DETECT, TSL_linrot_DebReleaseDetectStateProcess },\n  /*  5 */ { TSL_STATEMASK_DEB_RELEASE_TOUCH,  TSL_linrot_DebReleaseTouchStateProcess },\n#if TSLPRM_USE_PROX &gt; 0\n  /* Proximity states */\n  /*  6 */ { TSL_STATEMASK_PROX,               TSL_linrot_ProxStateProcess },\n  /*  7 */ { TSL_STATEMASK_DEB_PROX,           TSL_linrot_DebProxStateProcess },\n  /*  8 */ { TSL_STATEMASK_DEB_PROX_DETECT,    TSL_linrot_DebProxDetectStateProcess },\n  /*  9 */ { TSL_STATEMASK_DEB_PROX_TOUCH,     TSL_linrot_DebProxTouchStateProcess },\n#else\n  /*  6 */ { TSL_STATEMASK_PROX,               0 },\n  /*  7 */ { TSL_STATEMASK_DEB_PROX,           0 },\n  /*  8 */ { TSL_STATEMASK_DEB_PROX_DETECT,    0 },\n  /*  9 */ { TSL_STATEMASK_DEB_PROX_TOUCH,     0 },\n#endif\n  /* Detect states */\n  /* 10 */ { TSL_STATEMASK_DETECT,             TSL_linrot_DetectStateProcess },\n  /* 11 */ { TSL_STATEMASK_DEB_DETECT,         TSL_linrot_DebDetectStateProcess },\n  /* Touch state */\n  /* 12 */ { TSL_STATEMASK_TOUCH,              TSL_linrot_TouchStateProcess },\n  /* Error states */\n  /* 13 */ { TSL_STATEMASK_ERROR,              MyLinRots_ErrorStateProcess },\n  /* 14 */ { TSL_STATEMASK_DEB_ERROR_CALIB,    TSL_linrot_DebErrorStateProcess },\n  /* 15 */ { TSL_STATEMASK_DEB_ERROR_RELEASE,  TSL_linrot_DebErrorStateProcess },\n  /* 16 */ { TSL_STATEMASK_DEB_ERROR_PROX,     TSL_linrot_DebErrorStateProcess },\n  /* 17 */ { TSL_STATEMASK_DEB_ERROR_DETECT,   TSL_linrot_DebErrorStateProcess },\n  /* 18 */ { TSL_STATEMASK_DEB_ERROR_TOUCH,    TSL_linrot_DebErrorStateProcess },\n  /* Other states */\n  /* 19 */ { TSL_STATEMASK_OFF,                MyLinRots_OffStateProcess }\n};\n\n\n\n/* Methods for \"extended\" type (ROM) */\nCONST TSL_LinRotMethods_T MyLinRots_Methods = {\n  TSL_linrot_Init,\n  TSL_linrot_Process,\n  TSL_linrot_CalcPos\n};\n\n/* Delta Normalization Process\n   The MSB is the integer part, the LSB is the real part\n   Examples:\n   - To apply a factor 1.10:\n     0x01 to the MSB\n     0x1A to the LSB (0.10 x 256 = 25.6 -&gt; rounded to 26 = 0x1A)\n   - To apply a factor 0.90:\n     0x00 to the MSB\n     0xE6 to the LSB (0.90 x 256 = 230.4 -&gt; rounded to 230 = 0xE6)\n*/\nCONST uint16_t MyLinRot0_DeltaCoeff[3] = {0x0100, 0x0100, 0x0100};\n\n/* LinRots list (ROM)*/\nCONST TSL_LinRot_T MyLinRots[TSLPRM_TOTAL_LINROTS] = {\n  {\n    /* LinRot sensor 0 = S1 */\n    &amp;MyLinRots_Data[0],\n    &amp;MyLinRots_Param[0],\n    &amp;MyChannels_Data[CHANNEL_3_DEST], // first channel data\n    5, /* Number of channels */  // \n    MyLinRot0_DeltaCoeff,\n// discovery    \n//    (TSL_tsignPosition_T *)TSL_POSOFF_3CH_LIN_H,\n// GP board    \n    (TSL_tsignPosition_T *)TSL_POSOFF_5CH_LIN_M1,\n\n// Discovery    \n//    TSL_SCTCOMP_3CH_LIN_H,\n// GP board    \n    TSL_SCTCOMP_5CH_LIN_M1,\n// Discovery    \n//    TSL_POSCORR_3CH_LIN_H,\n// GP board    \n    TSL_POSCORR_5CH_LIN_M1,\n    MyLinRots_StateMachine,\n    &amp;MyLinRots_Methods  \n  }\n};\n\n\n/*============================================================================*/\n/* Generic Objects                                                            */\n/*============================================================================*/\n\n/* List (ROM) */\nCONST TSL_Object_T MyObjects[TSLPRM_TOTAL_OBJECTS] = {\n  // touchkeys\n  { TSL_OBJ_TOUCHKEY, (TSL_TouchKey_T *)&amp;MyTKeys[0] },\n  { TSL_OBJ_TOUCHKEY, (TSL_TouchKey_T *)&amp;MyTKeys[1] },\n  { TSL_OBJ_TOUCHKEY, (TSL_TouchKey_T *)&amp;MyTKeys[2] },\n  // lin rot\n  { TSL_OBJ_LINEAR, (TSL_LinRot_T *)&amp;MyLinRots[0] }\n\n};\n\n/* Group (RAM) */\nTSL_ObjectGroup_T MyObjGroup = {\n  &amp;MyObjects[0],        /* First object */\n  TSLPRM_TOTAL_OBJECTS, /* Number of objects */\n  0x00,                 /* State mask reset value */\n  TSL_STATE_NOT_CHANGED /* Current state */\n};\n\n/*============================================================================*/\n/* TSL Common Parameters placed in RAM or ROM                                 */\n/* --&gt; external declaration in tsl_conf.h                                     */\n/*============================================================================*/\n\nTSL_Params_T TSL_Params = {\n  TSLPRM_ACQ_MIN,\n  TSLPRM_ACQ_MAX,\n  TSLPRM_CALIB_SAMPLES,\n  TSLPRM_DTO,\n#if TSLPRM_TOTAL_TKEYS &gt; 0  \n  MyTKeys_StateMachine,   /* Default state machine for TKeys */\n  &amp;MyTKeys_Methods,       /* Default methods for TKeys */\n#endif\n#if TSLPRM_TOTAL_LNRTS &gt; 0\n  MyLinRots_StateMachine, /* Default state machine for LinRots */\n  &amp;MyLinRots_Methods      /* Default methods for LinRots */\n#endif\n};\n\n/* Private functions prototype -----------------------------------------------*/\n\n/* Global variables ----------------------------------------------------------*/\n\n__IO TSL_tTick_ms_T ECSLastTick; /* Hold the last time value for ECS */\n\n/**\n  * @brief  Initialize the STMTouch Driver\n  * @param  None\n  * @retval None\n  */\nvoid tsl_user_Init(void) {\n\n  TSL_obj_GroupInit(&amp;MyObjGroup); /* Init Objects */\n\n  TSL_Init(MyBanks); /* Init acquisition module */\n\n  tsl_user_SetThresholds(); /* Init thresholds for each object individually (optional) */\n}\n\n\n/**\n  * @brief  Execute STMTouch Driver main State machine\n  * @param  None\n  * @retval status Return TSL_STATUS_OK if the acquisition is done\n  */\ntsl_user_status_t tsl_user_Exec(void)\n{\n  static uint32_t idx_bank = 0;\n  static uint32_t config_done = 0;\n  tsl_user_status_t status = TSL_USER_STATUS_BUSY;\n\n  /* Configure and start bank acquisition */\n  if (!config_done)\n  {\n    TSL_acq_BankConfig(idx_bank);\n    TSL_acq_BankStartAcq();\n    config_done = 1;\n  }\n\n  /* Check end of acquisition (polling mode) and read result */\n  if (TSL_acq_BankWaitEOC() == TSL_STATUS_OK)  {\n    TSL_acq_BankGetResult(idx_bank, 0, 0);\n    idx_bank++; /* Next bank */\n    config_done = 0;\n  }\n\n  /* Process objects, DxS and ECS\n     Check if all banks have been acquired\n  */\n  if (idx_bank &gt; TSLPRM_TOTAL_BANKS-1)\n  {\n    /* Reset flags for next banks acquisition */\n    idx_bank = 0;\n    config_done = 0;\n\n    /* Process Objects */\n    TSL_obj_GroupProcess(&amp;MyObjGroup);\n\n    /* DxS processing (if TSLPRM_USE_DXS option is set) */\n    TSL_dxs_FirstObj(&amp;MyObjGroup);\n\n    /* ECS every 100ms */\n    if (TSL_tim_CheckDelay_ms(100, &amp;ECSLastTick) == TSL_STATUS_OK)\n    {\n      if (TSL_ecs_Process(&amp;MyObjGroup) == TSL_STATUS_OK)\n      {\n        status = TSL_USER_STATUS_OK_ECS_ON;\n      }\n      else\n      {\n        status = TSL_USER_STATUS_OK_ECS_OFF;\n      }\n    }\n    else\n    {\n      status = TSL_USER_STATUS_OK_NO_ECS;\n    }\n  }\n  else\n  {\n    status = TSL_USER_STATUS_BUSY;\n  }\n\n  return status;\n}\n\n/**\n  * @brief  Set thresholds for each object (optional).\n  * @param  None\n  * @retval None\n  */\nvoid tsl_user_SetThresholds(void)\n{\n  /* Example: Decrease the Detect thresholds for the TKEY 0\n  MyTKeys_Param[0].DetectInTh -= 10;\n  MyTKeys_Param[0].DetectOutTh -= 10;\n  */\n}\n\n/**\n  * @brief  Executed when a sensor is in Error state\n  * @param  None\n  * @retval None\n  */\nvoid MyTKeys_ErrorStateProcess(void)\n{\n  /* Add here your own processing when a sensor is in Error state */\n}\n\n\n/**\n  * @brief  Executed when a sensor is in Off state\n  * @param  None\n  * @retval None\n  */\nvoid MyTKeys_OffStateProcess(void)\n{\n  /* Add here your own processing when a sensor is in Off state */\n}\n\n/**\n  * @brief  Executed when a sensor is in Error state\n  * @param  None\n  * @retval None\n  */\nvoid MyLinRots_ErrorStateProcess(void)\n{\n  /* Add here your own processing when a sensor is in Error state */\n}\n\n\n/**\n  * @brief  Executed when a sensor is in Off state\n  * @param  None\n  * @retval None\n  */\nvoid MyLinRots_OffStateProcess(void)\n{\n  /* Add here your own processing when a sensor is in Off state */\n}\n\n\n/**\n  * @brief  This function handles a tick.\n  * @param  None\n  * @retval None\n  */\nvoid User_Tick_Management(void) {\n\n\n  // tick counters set to zero first time this routine is called\n  static uint32_t tempo_50ms=0;  \n  static uint32_t tempo_100ms=0;\n  static uint32_t tempo_200ms=0;\n  static uint32_t tempo_300ms=0;\n  static uint32_t tempo_400ms=0;\n  static uint32_t tempo_500ms=0;\n\n  // increment each counter, but bound to max count for each\n  tempo_50ms++;\n  tempo_100ms++;\n  tempo_200ms++;\n  tempo_300ms++;\n  tempo_400ms++;\n  tempo_500ms++;\n  tempo_50ms%=50;\n  tempo_100ms%=100;\n  tempo_200ms%=200;\n  tempo_300ms%=300;\n  tempo_400ms%=400;\n  tempo_500ms%=500;\n\n  // LINEAR_POSITION = MyLinRots[0].p_Data-&gt;Position\n  // above is a \"scaled\" position\n  // MyLinRots[0].p_Data-&gt;RawPosition\n  if (LINEAR_DETECT) {\n    // Now we just adjust when we are touching.\n    if (LINEAR_POSITION &lt; 4) {\n      if (tempo_500ms==0) {\n        BSP_LED_Toggle(LED2);\n      }\n    } else if (LINEAR_POSITION &lt; 8) {\n      if (tempo_300ms==0) {\n        BSP_LED_Toggle(LED2);\n      }\n    } else if (LINEAR_POSITION &lt; 12) {\n      if (tempo_100ms==0) {\n        BSP_LED_Toggle(LED2);\n      }\n    } else {  // pos &gt;= 12\n      if (tempo_50ms==0) {\n        BSP_LED_Toggle(LED2);\n      }\n    }\n\n  }  \n}\n/**\n  * @brief  Display sensors information on LEDs and LCD\n  * @param  status TSL user status\n  * @retval None\n  */\nvoid Process_Sensors(tsl_user_status_t status) {\n\n  /* LED1 is ON when TS1 on board is touched */\n  if (MyTKeys[0].p_Data-&gt;StateId == TSL_STATEID_DETECT){\n    BSP_LED_On(LED3);\n  } else {\n    BSP_LED_Off(LED3);\n  }\n\n  /* LED2 is ON when TS2 on board is touched */\n  if (MyTKeys[1].p_Data-&gt;StateId == TSL_STATEID_DETECT) {\n    BSP_LED_On(LED4);\n  } else {\n    BSP_LED_Off(LED4);\n  }\n\n\n  /* LED3 is ON when TS3 on board is touched */\n  if (MyTKeys[2].p_Data-&gt;StateId == TSL_STATEID_DETECT) {\n    BSP_LED_On(LED5);\n  } else {\n    BSP_LED_Off(LED5);\n  }\n\n\n#ifdef isthisused  \n  /* ECS information */\n  switch (status){\n    case TSL_USER_STATUS_OK_ECS_OFF:\n      BSP_LED_Off(LED5);\n      break;\n    case TSL_USER_STATUS_OK_ECS_ON:\n      BSP_LED_Toggle(LED5);\n      break;\n    default:\n      break;\n  }\n#endif  \n\n\n  if (LINEAR_DETECT) {\n    BSP_LED_On(LED1);\n  } else{\n    BSP_LED_Off(LED1);\n  }\n\n}\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"
    }, {
        "tags": ["arduino", "iot", "arduino-uno", "esp8266", "arduino-esp8266"],
        "is_answered": true,
        "view_count": 585,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1567160513,
        "creation_date": 1567070529,
        "last_edit_date": 1567071300,
        "question_id": 57707015,
        "link": "https://stackoverflow.com/questions/57707015/why-code-runs-unstably-on-arduino-esp8266",
        "title": "Why code runs unstably on Arduino esp8266?",
        "body": "<p>Here is my code that I flashed to my esp8266 (esp-01) with Arduino IDE. I tried flashing multiple times but sometimes it succeeded for the first run and resets at second run or power loss and sometimes it doesn't run at all.</p>\n\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;Firebase.h&gt;\n#include &lt;FirebaseArduino.h&gt;\n#include &lt;FirebaseCloudMessaging.h&gt;\n#include &lt;FirebaseError.h&gt;\n#include &lt;FirebaseHttpClient.h&gt;\n#include &lt;FirebaseObject.h&gt;\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;AutoConnect.h&gt;\n#include &lt;SoftwareSerial.h&gt;\n//getting time and date\n#include &lt;NTPClient.h&gt;\n#include &lt;WiFiUdp.h&gt;\n#define FIREBASE_HOST \"arduino-9ac24.firebaseio.com\"\n#define FIREBASE_AUTH \"NtHBXaYlV5PGn4cWBTFG5dmjfsbICFpJzc1hle1o\"\nESP8266WebServer Server;\nAutoConnectConfig Config; \nAutoConnect Portal(Server);\nWiFiUDP ntpUDP;\nNTPClient timeClient(ntpUDP,5);\nString data;\nvoid setup() {\n  Serial.println(\"Module Started\"); \n  //esp.begin(115200);\n  Serial.begin(115200);\n  Portal.begin();\n  Serial.println(\"Server:\"+WiFi.localIP().toString());\n  //Portal.config(Config);\n  Config.autoReconnect = true;\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH); \n  timeClient.begin();\n} \n\nvoid loop() {\n  Portal.handleClient();\n  timeClient.update();\n  if (Firebase.failed()) {\n    Serial.println(Firebase.error());\n    Serial.println(\"Trying to reconnect....\");\n    Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);\n  }\n  else{\n    if (Serial.available() &gt; 0) {\n      while (Serial.available() &gt; 0) {\n          data = Serial.read();          //data is the incoming data\n     }\n      Firebase.setString(\"/sensor_1/\"+timeClient.getFormattedDate(), data);\n      Serial.println(data);\n    }\n  }\n  delay(5000);\n}\n</code></pre>\n\n<p>Here is the output</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>14:43:31.005 -&gt; load 0x4010f000, len 1384, room 16  \n14:43:31.005 -&gt; ecting..........................(IP unset), DNS1=(IP unset), DNS2=(IP unset))\n14:43:31.005 -&gt; [AC] DHCP cli\u2e2e\u2e2eQIQ\u2e2e\n14:43:31.005 -&gt; [AC] WiFi.begin() \n14:43:31.005 -&gt; [AC] Connecting..................................timeout IP:(IP unset) \n14:43:33.594 -&gt; [AC] SoftAP configure 172.217.28.1, 172.217.28.1, 255.255.255.0  \n14:43:42.952 -&gt; \n14:43:42.952 -&gt;  ets Jan  8 2013,rst cause:4, boot mode:(1,7) \n14:43:42.952 -&gt; \n14:43:42.952 -&gt; wdt reset\n</code></pre>\n"
    }, {
        "tags": ["python", "raspberry-pi", "iot", "sensors"],
        "is_answered": true,
        "view_count": 568,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1566932571,
        "creation_date": 1566924328,
        "question_id": 57679119,
        "link": "https://stackoverflow.com/questions/57679119/read-exact-moisture-values-from-soil-moisture-sensor-using-raspberry-pi",
        "title": "Read exact moisture values from soil moisture sensor using raspberry Pi",
        "body": "<p>I am new to IoT and I am trying to read the soil moisture sensor readings using Raspberry Pi. I need the EXACT moisture values and NOT just the boolean values as in the water is present or not.</p>\n\n<p>I have tried reading the exact values using Arduino-UNO but not sure on how to do it with Raspberry Pi in python.\nI have this code that I found on Intructables.\n<a href=\"https://www.instructables.com/id/Soil-Moisture-Sensor-Raspberry-Pi/\" rel=\"nofollow noreferrer\">https://www.instructables.com/id/Soil-Moisture-Sensor-Raspberry-Pi/</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/python\nimport RPi.GPIO as GPIO\nimport time\n\n#GPIO SETUP\nchannel = 21\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(channel, GPIO.IN)\n\ndef callback(channel):\n        if GPIO.input(channel):\n                print \"no Water Detected!\"\n        else:\n                print \"Water Detected!\"\n\nGPIO.add_event_detect(channel, GPIO.BOTH, bouncetime=300)  # let us know when the pin goes HIGH or LOW\nGPIO.add_event_callback(channel, callback)  # assign function to GPIO PIN, Run function on change\n\n# infinite loop\nwhile True:\n        time.sleep(1)\n</code></pre>\n\n<p>This code just tells if the water is detected or not but I need the actual values of moisture.</p>\n"
    }, {
        "tags": ["iot", "esp8266", "arduino-ide", "nodemcu", "esp8266wifi"],
        "is_answered": false,
        "view_count": 898,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1566845853,
        "creation_date": 1566729210,
        "question_id": 57645245,
        "link": "https://stackoverflow.com/questions/57645245/esp8266-wifi-isnt-working-without-wifimulti",
        "title": "ESP8266 WiFi isn&#39;t working without WiFiMulti",
        "body": "<p>I did a project for IoT attendance system using ESP8266 and RDM6300. However, I can connect to wifi using WiFiMulti.addAP() function for my home WiFi but can't connect using WiFi.begin().</p>\n\n<p>I tried <strong>WiFi.begin() instead of WiFiMulti.addAP()</strong> function to connect to my mobile hotspot but the esp8266 is failing to connect. In fact, <strong>WiFi.begin() also failed to connect to the same wifi router which was previously connected by WiFiMulti.addAP()</strong>. Serial monitor constantly showing the below error.</p>\n\n<pre><code>Exception (3):\nepc1=0x4020970d epc2=0x00000000 epc3=0x00000000 excvaddr=0x4003bfc9 depc=0x00000000\n\n&gt;&gt;&gt;stack&gt;&gt;&gt;\n\nctx: cont\nsp: 3ffffbc0 end: 3fffffc0 offset: 01a0\n3ffffd60:  00000000 00000004 3ffffe40 3ffffef0  \n3ffffd70:  4010156c 0000049c 000003fd 40209837  \n3ffffd80:  0000049c 00001000 000003fd 4010156c  \n3ffffd90:  40106980 3ffe85ad 3ffffe40 402354f1  \n3ffffda0:  401004a5 402355db 3fff0c1c 0000049c  \n3ffffdb0:  000003fd 3ffffef0 3fff0c1c 402355be  \n3ffffdc0:  ffffff00 55aa55aa 00000035 00000020  \n3ffffdd0:  00000020 00000048 0000004a aa55aa55  \n3ffffde0:  000003ff 40235aa8 3fff0c1c 3fff0c1c  \n3ffffdf0:  000000ff 3fff0c1c 0000049c 00000000  \n3ffffe00:  401004a5 00000001 3fff0c2c 40235cc2  \n3ffffe10:  00000008 3fff0c1c 000000ff 3ffffef0  \n3ffffe20:  3fffff10 3fff0c53 00000035 00000020  \n3ffffe30:  3fff0cdc 3fffff51 00000001 40235d72  \n3ffffe40:  3ffffef0 40242be0 00000000 0000000c  \n3ffffe50:  3fff101c 3fffff10 3fff6f54 40235d41  \n3ffffe60:  3fff0c1c 40235da8 3ffe84dc 3ffe85ae  \n3ffffe70:  402019ca 3ffe85ae 3ffe85b3 40201927  \n3ffffe80:  61666152 00000074 3ffffe60 40204666  \n3ffffe90:  4000e243 00000030 3ffffe60 402046c4  \n3ffffea0:  616d7374 2e2e3730 3ffffe00 40204901  \n3ffffeb0:  3ffffdf0 0693b740 000035af fffffffe  \n3ffffec0:  00000090 3fffc6fc 00000003 40201dd4  \n3ffffed0:  3ffee50c 000000f2 000000f2 40206bf8  \n3ffffee0:  8ab9b001 00a0a64e 00000000 40206057  \n3ffffef0:  78666152 3fff0c00 0000049c 00000000  \n3fffff00:  00000a2e 0000007f 3fff0c1c 402356c6  \n3fffff10:  61666172 66617274 32317461 40209500  \n3fffff20:  00000001 3fff0c1c 00000000 402099e8  \n3fffff30:  000003fd 402351a3 00000000 40101538  \n3fffff40:  00000001 001ce8e7 3ffeea78 402351be  \n3fffff50:  40235100 00000001 00000081 00000002  \n3fffff60:  00000004 00000000 3ffee544 00000001  \n3fffff70:  402083ea 000003e8 000003e8 3ffee870  \n3fffff80:  3ffee544 00000000 3ffee750 40201194  \n3fffff90:  00000000 00000000 ffefeffe feefeffe  \n3fffffa0:  3fffdad0 00000000 3ffee840 40207830  \n3fffffb0:  feefeffe feefeffe 3ffe8520 40101809  \n&lt;&lt;&lt;stack&lt;&lt;&lt;\n\nets Jan  8 2013,rst cause:2, boot mode:(3,6)\n\nload 0x4010f000, len 1384, room 16 \ntail 8\nchksum 0x2d\ncsum 0x2d\nv8b899c12\n~ld\n</code></pre>\n\n<p>this is the code I uploaded to ESP8266:</p>\n\n<pre><code>#include &lt;Arduino.h&gt;\n\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;ESP8266WiFiMulti.h&gt;\n\n#include &lt;ESP8266HTTPClient.h&gt;\n\n#include &lt;WiFiClient.h&gt;\n\n#include &lt;rdm6300.h&gt;\n\n#include &lt;Wire.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_SSD1306.h&gt;\n\n#define SCREEN_WIDTH 128 // OLED display width, in pixels\n#define SCREEN_HEIGHT 64 // OLED display height, in pixels\n\n// Declaration for an SSD1306 display connected to I2C (SDA, SCL pins)\nAdafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, -1);\n\n#define RDM6300_RX_PIN 2\n#define READ_LED_PIN 14\n\nESP8266WiFiMulti WiFiMulti;\nRdm6300 rdm6300;\n\nString RFID[] = {\"5958666\", \"5958741\"};\n\nString SID[] = {\"161-115-123\", \"161-115-124\"};\n\nString NAME[] = {\"Rafat\", \"Saney\"};\n\nint flag[2] = {0, 0};\n\nvoid setup() {\n\n  Serial.begin(115200);\n  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);\n  pinMode(READ_LED_PIN, OUTPUT);\n  digitalWrite(READ_LED_PIN, LOW);\n  rdm6300.begin(RDM6300_RX_PIN);\n\n  Serial.println();\n  Serial.println();\n  Serial.println();\n  OLED(\"Connecting...\");\n  for (uint8_t t = 4; t &gt; 0; t--) {\n    Serial.printf(\"[SETUP] WAIT %d...\\n\", t);\n    Serial.flush();\n    delay(1000);\n  }\n\n  WiFi.mode(WIFI_STA);\n  WiFi.begin(\"custom\", \"customjack.xyz\");\n  Serial.print(\"Connecting\");\n\n  while (WiFi.status() != WL_CONNECTED) {\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.println(\"Connected\");\n  OLED(\"Connected\");\n  Serial.println(WiFi.localIP());\n\n}\n\nvoid loop() {\n  // wait for WiFi connection\n  if ((WiFi.status() == WL_CONNECTED)) {\nlabel:\n    OLED(\"Place Your ID\");\n    String tag;\n    int check = 0;\n    if (rdm6300.update())\n    {\n      tag = String(rdm6300.get_tag_id());\n      Serial.println(tag);\n      for (int i = 0; i &lt; 1; i++)\n      {\n        if (RFID[i] == tag) // checking validity of RFID\n        {\n          tone(READ_LED_PIN, 392);\n          delay(100);\n          noTone(READ_LED_PIN);\n          check = 1;\n          if (flag[i] == 1) // Flag=1 meaans already attendance counted\n          {\n            Serial.println(\"Attendance Already Counted\");\n            OLED(\"Already Counted\");\n            delay(2000);\n            goto label;\n          }\n          OLED(\"Welcome \"+NAME[i]);\n          flag[i] = 1;\n          WiFiClient client;\n          HTTPClient http;\n\n          Serial.print(\"[HTTP] begin...\\n\");\n          String url = \"http://metrounisas.000webhostapp.com/action.php?ID=\" + SID[i];\n          if (http.begin(client, url ) ) { // HTTP\n\n\n            Serial.print(\"[HTTP] GET...\\n\");\n            // start connection and send HTTP header\n            int httpCode = http.GET();\n\n            // httpCode will be negative on error\n            if (httpCode &gt; 0) {\n              // HTTP header has been send and Server response header has been handled\n              Serial.printf(\"[HTTP] GET... code: %d\\n\", httpCode);\n\n              // file found at server\n              if (httpCode == HTTP_CODE_OK || httpCode == HTTP_CODE_MOVED_PERMANENTLY) {\n                String payload = http.getString();\n                Serial.println(payload);\n              }\n            } else {\n              Serial.printf(\"[HTTP] GET... failed, error: %s\\n\", http.errorToString(httpCode).c_str());\n            }\n\n            http.end();\n          } else {\n            Serial.printf(\"[HTTP} Unable to connect\\n\");\n          }\n        }\n      }\n      if (check == 0) {\n        tone(READ_LED_PIN, 261);\n        noTone(READ_LED_PIN);\n        Serial.println(\"Invalid RFID\");\n        OLED(\"INVALID ID\");\n        delay(2000);\n      }\n    }\n  }\n\n  delay(1000);\n}\n\nvoid OLED(String txt){\n  display.clearDisplay();\n  display.setTextSize(1);\n  display.setTextColor(WHITE,BLACK);\n  display.setCursor(30, 30);\n  display.println(txt);\n  display.display();\n  delay(2000);\n}\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "homekit"],
        "is_answered": true,
        "view_count": 346,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1566615922,
        "creation_date": 1566611668,
        "question_id": 57634556,
        "link": "https://stackoverflow.com/questions/57634556/i-can-not-connect-an-external-button-to-my-homekit-system-esp8266-without-homeb",
        "title": "I can not connect an external button to my Homekit system (ESP8266 without homebridge)",
        "body": "<p>After watching this video. <a href=\"https://www.youtube.com/watch?v=QBj8OLig8Kg\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=QBj8OLig8Kg</a>\nWhich is how to create a homekit system without having to use a brigde I wanted to create my own.</p>\n\n<p>My idea is to have 2 different lights that are connected to the internet and I handle them with siri and 2 external buttons that can turn off the light without having to always use siri. (for example if my cell phone runs out of battery). All this in the same ESP 8266.</p>\n\n<p>I could already operate the two lights without the need of a homebridge with the following code</p>\n\n<pre><code>#define Relay1    16    //D0\n#define Relay2    5     //D1\n\n#define button1   14    //D5\n#define button2   12    //D6    \n#define button3   13    //D7\n\nbool state1 = false;\nbool state2 = false;\n\n\n// ----------------------------------------------------   Inicializacion de wifi  -------------------------------------------------\n\nstatic void wifi_init() {\n    struct sdk_station_config wifi_config = {\n        .ssid = WIFI_SSID,\n        .password = WIFI_PASSWORD,\n    };\n\n    sdk_wifi_set_opmode(STATION_MODE);\n    sdk_wifi_station_set_config(&amp;wifi_config);\n    sdk_wifi_station_connect();\n}\n\n// --------------------------------------------------------   Logica de Relay1   -----------------------------------------------------\n\nvoid relay1_write(bool on) {\n    gpio_write(Relay1, on ? 1 : 0);\n}\n\n\nvoid relay1_init() {\n    gpio_enable(Relay1, GPIO_OUTPUT);\n    relay1_write(state1);\n}\n\n\nvoid relay1_identify_task(void *_args) {\n    for (int i=0; i&lt;3; i++) {\n        for (int j=0; j&lt;2; j++) {\n            relay1_write(true);\n            vTaskDelay(100 / portTICK_PERIOD_MS);\n            relay1_write(false);\n            vTaskDelay(100 / portTICK_PERIOD_MS);\n        }\n\n        vTaskDelay(250 / portTICK_PERIOD_MS);\n    }\n\n    relay1_write(state1);\n    vTaskDelete(NULL);\n}\n\n\nvoid relay1_identify(homekit_value_t _value) {\n    printf(\"Relay 1 identify\\n\");\n    xTaskCreate(relay1_identify_task, \"Relay Identify\", 128, NULL, 2, NULL);\n}\n\n\nhomekit_value_t relay1_on_get() {\n    return HOMEKIT_BOOL(state1);\n}\n\n\nvoid relay1_on_set(homekit_value_t value) {\n    if (value.format != homekit_format_bool) {\n        printf(\"Invalid value format: %d\\n\", value.format);\n        return;\n    }\n\n    state1 = value.bool_value;\n    relay1_write(state1);\n}\n\n\n// --------------------------------------------------------   Logica de Relay2   -----------------------------------------------------\n\nvoid relay2_write(bool on) {\n    gpio_write(Relay2, on ? 1 : 0);\n}\n\n\nvoid relay2_init() {\n    gpio_enable(Relay2, GPIO_OUTPUT);\n    relay2_write(state2);\n}\n\n\nvoid relay2_identify_task(void *_args) {\n    for (int i=0; i&lt;3; i++) {\n        for (int j=0; j&lt;2; j++) {\n            relay2_write(true);\n            vTaskDelay(100 / portTICK_PERIOD_MS);\n            relay2_write(false);\n            vTaskDelay(100 / portTICK_PERIOD_MS);\n        }\n\n        vTaskDelay(250 / portTICK_PERIOD_MS);\n    }\n\n    relay2_write(state2);\n    vTaskDelete(NULL);\n}\n\n\nvoid relay2_identify(homekit_value_t _value) {\n    printf(\"Relay 2 identify\\n\");\n    xTaskCreate(relay2_identify_task, \"Relay Identify\", 128, NULL, 2, NULL);\n}\n\n\nhomekit_value_t relay2_on_get() {\n    return HOMEKIT_BOOL(state2);\n}\n\n\nvoid relay2_on_set(homekit_value_t value) {\n    if (value.format != homekit_format_bool) {\n        printf(\"Invalid value format: %d\\n\", value.format);\n        return;\n    }\n\n    state2 = value.bool_value;\n    relay2_write(state2);\n}\n\n\n// ------------------------------------------------   Configuracion del server de Homekit   ------------------------------------------\n\nhomekit_accessory_t *accessories[] = {\n    HOMEKIT_ACCESSORY(.id=1, .category=homekit_accessory_category_lightbulb, .services=(homekit_service_t*[]){\n        HOMEKIT_SERVICE(ACCESSORY_INFORMATION, .characteristics=(homekit_characteristic_t*[]){\n            HOMEKIT_CHARACTERISTIC(NAME, \"Cuarto\"),\n            HOMEKIT_CHARACTERISTIC(MANUFACTURER, \"Estonian Port\"),\n            HOMEKIT_CHARACTERISTIC(SERIAL_NUMBER, \"ASD123\"),\n            HOMEKIT_CHARACTERISTIC(MODEL, \"C.U.C.A\"),\n            HOMEKIT_CHARACTERISTIC(FIRMWARE_REVISION, \"0.1\"),\n            HOMEKIT_CHARACTERISTIC(IDENTIFY, relay1_identify),\n            NULL\n        }),\n        HOMEKIT_SERVICE(LIGHTBULB, .primary=true, .characteristics=(homekit_characteristic_t*[]){\n            HOMEKIT_CHARACTERISTIC(NAME, \"Luz\"),\n            HOMEKIT_CHARACTERISTIC(ON, false,\n            .getter=relay1_on_get,\n            .setter=relay1_on_set\n            ),\n            NULL\n        }),\n        NULL\n    }),\n    HOMEKIT_ACCESSORY(.id=2, .category=homekit_accessory_category_lightbulb, .services=(homekit_service_t*[]){\n        HOMEKIT_SERVICE(ACCESSORY_INFORMATION, .characteristics=(homekit_characteristic_t*[]){\n            HOMEKIT_CHARACTERISTIC(NAME, \"Cuarto\"),\n            HOMEKIT_CHARACTERISTIC(MANUFACTURER, \"Estonian Port\"),\n            HOMEKIT_CHARACTERISTIC(SERIAL_NUMBER, \"ASD123\"),\n            HOMEKIT_CHARACTERISTIC(MODEL, \"C.U.C.A\"),\n            HOMEKIT_CHARACTERISTIC(FIRMWARE_REVISION, \"0.1\"),\n            HOMEKIT_CHARACTERISTIC(IDENTIFY, relay2_identify),\n            NULL\n        }),\n        HOMEKIT_SERVICE(LIGHTBULB, .primary=true, .characteristics=(homekit_characteristic_t*[]){\n            HOMEKIT_CHARACTERISTIC(NAME, \"Luz\"),\n            HOMEKIT_CHARACTERISTIC(ON, false,\n            .getter=relay2_on_get,\n            .setter=relay2_on_set\n            ),\n            NULL\n        }),\n        NULL\n    }),\n\n    NULL\n};\n\n\nhomekit_server_config_t config = {\n    .accessories = accessories,\n    .password = \"111-11-111\"\n};\n\n\n// -----------------------------------------------------------   MAIN   ----------------------------------------------------------\n\nvoid user_init(void) {\n    uart_set_baud(0, 115200);\n\n    wifi_init();\n    relay1_init();\n    relay2_init();\n    homekit_server_init(&amp;config);\n}\n</code></pre>\n\n<p>but i cant figure out how to implemet the two external buttons. I tried implementing:</p>\n\n<pre><code>void setup()\n{\n  pinMode(button1, INPUT);   \n  pinMode(button2, INPUT);\n}\n\nvoid loop() {\n    if (digitalRead(button1))\n    {\n     relay1_write(state1);\n    }\n}\n</code></pre>\n\n<p>but it gives me error, since, I have no way to implement the library .\nI also try to understand this example. \n<a href=\"https://github.com/maximkulkin/esp-homekit-demo/tree/master/examples/button\" rel=\"nofollow noreferrer\">https://github.com/maximkulkin/esp-homekit-demo/tree/master/examples/button</a>\nbut it does not apply to what I want to do since in that case because the button is recognized by homekit and I want it to just turn off and turn on the light</p>\n\n<p>Thanks so much for your time!</p>\n"
    }, {
        "tags": ["iot", "lcd"],
        "is_answered": false,
        "view_count": 220,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1565968323,
        "creation_date": 1517668583,
        "last_edit_date": 1565968323,
        "question_id": 48598509,
        "link": "https://stackoverflow.com/questions/48598509/how-to-change-value-of-dio-pin-in-ti-launchpad-cc1350",
        "title": "How to change value of DIO pin in TI Launchpad cc1350",
        "body": "<p>I've been trying to change pin's value so it will output high or low voltage using the following code:</p>\n\n<p>Initialize:</p>\n\n<pre><code>    PIN_Config LCDInitTable[] = {\n    // DIO2: Buzzer (initially off)\n    Board_DIO25_ANALOG |  PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // DI03: E\n    PIN_ID(3)  | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL ,\n    // DIO23: Rs\n    PIN_ID(23)  | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // DIO22: D4\n    PIN_ID(22) | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // DI24: D5\n    PIN_ID(24)  | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // DIO10: D6\n    PIN_ID(10)  | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // DIO21: D7\n    PIN_ID(21)  | PIN_GPIO_OUTPUT_EN | PIN_GPIO_LOW | PIN_PUSHPULL,\n    // Terminate list\n    PIN_TERMINATE\n    };\n    static PIN_Handle lcdHandle;\n    static PIN_State lcdState;\n</code></pre>\n\n<p>And then in the main function:</p>\n\n<pre><code>lcdHandle = PIN_open(&amp;lcdState, LCDInitTable);\nif(!lcdHandle) {\n    /* Error initializing board LED pins */\n    while(1);\n}\nPIN_setOutputValue(lcdHandle, Board_DIO25_ANALOG, 1);\n\nBIOS_start();\n</code></pre>\n\n<p>Here I tried to change to voltage to be high\nIf anyone knows how to pass data to the LCD 16bit it would be great (I'm using it as an 8bit)\nThanks for the help</p>\n"
    }, {
        "tags": ["python", "iot", "esp8266", "nodemcu", "micropython"],
        "is_answered": true,
        "view_count": 4447,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1565347698,
        "creation_date": 1487854145,
        "question_id": 42416224,
        "link": "https://stackoverflow.com/questions/42416224/micropython-hc-sr04-esp8266",
        "title": "Micropython HC-SR04 - ESP8266",
        "body": "<p>I am trying to get the NodeMCU ESP8266 dev board to work with an HC SR04 Ultrasonic Sensor. I keep getting a reading of \"0\", which is not the reality.</p>\n\n<p>I have the ground and 5v pins of the sensor hooked up to a 5v source, and the Echo and Trigger pins on GPIO pin 4 and 5. In theory, everything should be working, but I just keep getting \"0\". Perhaps there is something wrong with my code? See below:</p>\n\n<pre><code>import machine\nimport sys\nimport time\ntime.sleep(1) #Just for everything to settle down\n\nwhile 1:\n\n    pinTrigger = machine.Pin(5, machine.Pin.OUT) #defining the pins\n    pinEcho = machine.Pin(4, machine.Pin.IN) #defining the pins\n\n    pinTrigger.high()\n    time.sleep(0.00001)\n    pinTrigger.low()\n\n    time.sleep(0.5)\n\n    start = time.time()\n    stop = time.time()\n\n    while pinEcho ==0:\n        start = time.time() #Starting the time when sending out the signal\n\n    while pinTrigger ==1:\n        stop = time.time() #Stopping the time when the signal comes back\n\n    elapsed = stop-start #working out the time.\n\n    distance = elapsed * 34000 #multiply by speed of sound to get distance\n\n    distance = distance / 2 #divide by 2 becuase it was there and back\n\n    print (\"Distance : %.1f\" % distance) \n\n    sys.exit()\n</code></pre>\n\n<p>Please help.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 130,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1564489733,
        "creation_date": 1529390372,
        "last_edit_date": 1529419203,
        "question_id": 50922055,
        "link": "https://stackoverflow.com/questions/50922055/arduino-and-esp8266-01-communication-issue",
        "title": "Arduino and ESP8266-01 communication issue",
        "body": "<p>Fix the issue why complete code are not run and nothing are showed in WiFi setting like SSID.</p>\n\n<p>Pin config:</p>\n\n<ul>\n<li>USB to TTL Converter 3v3 - ESP8266 (VCC)</li>\n<li>USB to TTL Converter GND - ESP8266 (GND)</li>\n<li>Arduino pin 10 - ESP8266 (RX)</li>\n<li>Arduino pin 11 - ESP8266 (TX)</li>\n<li>Arduino GND - ESP8266 (CH_PD)</li>\n</ul>\n\n<p>Now this is my code I want to connect the Android application to ESP module using WiFi after that I will be able to control relay on and off.</p>\n\n<p>The code is here:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;SoftwareSerial.h&gt;\n#define DEBUG true\n#define LED 40\n#define two 42\n#define three 44\n#define four 46\n SoftwareSerial esp8266(10,11); // make RX Arduino line is pin 2, make TX Arduino line is pin 3.\n                        // This means that you need to connect the TX line from the esp to the Arduino's pin 2\n                        // and the RX line from the esp to the Arduino's pin 3\n void setup()\n {\n   pinMode(LED,OUTPUT);\n   pinMode(two,OUTPUT);\n   pinMode(three,OUTPUT);\n   pinMode(four,OUTPUT);\n   Serial.begin(9600);\n   esp8266.begin(9600); // your esp's baud rate might be different\n\n   sendData(\"AT+RST\\r\\n\",2000,DEBUG); // reset module\n   sendData(\"AT+CWMODE=2\\r\\n\",1000,DEBUG); // configure as access point\n   sendData(\"AT+CIFSR\\r\\n\",1000,DEBUG); // get ip address\n    sendData(\"AT+CIPMUX=1\\r\\n\",1000,DEBUG); // configure for multiple connections\n   sendData(\"AT+CIPSERVER=1,80\\r\\n\",1000,DEBUG); // turn on server on port 80\n\n   Serial.println(\"server started running on socket # 192.168.4.1:80\");\n\n }\n\n   void loop()\n    {\n if(esp8266.available()) // check if the esp is sending a message \n {\n\n          String cc=\"\";\n          while(esp8266.available()){\n       // The esp has data so display its output to the serial window \n           char c = esp8266.read(); // read the next character.\n           Serial.write(c);\n       cc+=c;\n     }\n         Serial.print(cc);\n         delay(1000);\n\n      if(esp8266.find(\"+IPD,\"))\n      {\n      delay(100);\n\n       int connectionId = esp8266.read()-48; // subtract 48 because the read() function returns \n                                          // the ASCII decimal value and 0 (the first decimal number) starts at 48\n    Serial.print(\"conn id = \");\n    Serial.println(connectionId);\n\n    String msg=\"\";\n    while(esp8266.available()){\n      char c=esp8266.read();\n      msg+=c;\n    }\n    Serial.print(\"msg = \");\n    Serial.println(msg);\n\n    String vv=msg.substring(10,16);\n    Serial.print(\"vv = \");\n    Serial.println(vv);\n    vv.trim();\n    /////////////////////////////////////////////////////////\n     if(vv.length()&gt;0){\n      if(vv==\"sw1:on\"){\n        Serial.println(\"switch 1 is turned on\");\n        digitalWrite(LED,HIGH);\n\n      }\n      if(vv==\"sw1:of\"){\n        Serial.println(\"switch 1 is turned off\");\n        digitalWrite(LED,LOW);\n\n      }\n      if(vv==\"sw2:on\"){\n        Serial.println(\"switch 2 is turned on\");\n        digitalWrite(two,HIGH);\n\n      }\n      if(vv==\"sw2:of\"){\n        Serial.println(\"switch 2 is turned off\");\n        digitalWrite(two,LOW);\n\n      }\n      if(vv==\"sw3:on\"){\n        Serial.println(\"switch 3 is turned on\");\n        digitalWrite(three,HIGH);\n\n      }\n      if(vv==\"sw3:of\"){\n        Serial.println(\"switch 3 is turned off\");\n        digitalWrite(three,LOW);\n\n      }\n      if(vv==\"sw4:on\"){\n        Serial.println(\"switch 4 is turned on\");\n        digitalWrite(four,HIGH);\n\n      }\n      if(vv==\"sw4:of\"){\n        Serial.println(\"switch 4 is turned off\");\n        digitalWrite(four,LOW);\n\n\n      }\n      if(vv==\"sw_:on\"){\n        Serial.println(\"all switches are turned on\");\n        digitalWrite(LED,HIGH);\n        digitalWrite(two,HIGH);\n        digitalWrite(three,HIGH);\n        digitalWrite(four,HIGH);\n\n      }\n      if(vv==\"sw_:of\"){\n        Serial.println(\"all switches are turned off\");\n        digitalWrite(LED,LOW);\n        digitalWrite(two,LOW);\n        digitalWrite(three,LOW);\n        digitalWrite(four,LOW);\n\n      }\n    }\n\n    ///////////////////////////////////////////////////////////\n\n    String closeCommand = \"AT+CIPCLOSE=\"; \n    closeCommand+=connectionId; // append connection id\n    closeCommand+=\"\\r\\n\";\n\n    sendData(closeCommand,3000,DEBUG);\n      }\n   }\n }\n    String sendData(String command, const int timeout, boolean debug)\n  {\n    String response = \"\";\n    Serial.print(\"command =&gt; \");\n    esp8266.print(command); // send the read character to the esp8266\n\n   long int time = millis();\n\n    while( (time+timeout) &gt; millis())\n    {\n      while(esp8266.available())\n     {\n\n   // The esp has data so display its output to the serial window \n   char c = esp8266.read(); // read the next character.\n   response+=c;\n     }  \n  }\n\n    if(debug)\n   {\n    Serial.print(\"response =&gt; \");\n    Serial.print(response);\n  }\n\n      return response;\n}\n</code></pre>\n"
    }, {
        "tags": ["linux", "serial-port", "usb", "iot", "ubuntu-18.04"],
        "is_answered": true,
        "view_count": 3097,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1564294018,
        "creation_date": 1559719732,
        "last_edit_date": 1559724999,
        "question_id": 56455942,
        "link": "https://stackoverflow.com/questions/56455942/unable-to-read-usb-to-serial-input-in-ubuntu-18-04-for-various-serial-sensors",
        "title": "Unable to read USB to serial input in ubuntu 18.04 for various serial sensors",
        "body": "<p>I am using Prolific 2303 serial usb to connect to various sensors and serial terms like (monoterm,coolterm) to monitor the serial output in ubuntu 18.04 but something seems to go wrong as i am not able to see the output date even when the driver and the usb seems to work fine. \nI have already updated the access permissions for the usb port and also launching the serialTerminal with root permissions.\nOutput For <code>lsusb</code> is as follows : </p>\n\n<pre><code>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\nBus 001 Device 009: ID 8087:0ab6 Intel Corp. \nBus 001 Device 005: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port\nBus 001 Device 002: ID 214b:7250  \nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n</code></pre>\n\n<p>and \nfor <code>dmesg | grep tty</code> is as follows :</p>\n\n<pre><code>[    0.000000] console [tty0] enabled\n[    6.724357] 8086228A:00: ttyS4 at MMIO 0x91420000 (irq = 39, base_baud = 2764800) is a 16550A\n[    6.742117] 8086228A:01: ttyS5 at MMIO 0x9141e000 (irq = 40, base_baud = 2764800) is a 16550A\n[    7.100607] usb 1-3: pl2303 converter now attached to ttyUSB0\n[    8.088988] cdc_acm 1-4:1.0: ttyACM0: USB ACM device\n</code></pre>\n\n<p>the serial port connects successfully but does not returns any output,I know am missing something but unable to figure out.\nAs Requested in the comments sharing the minimal python code to read data.</p>\n\n<pre><code>import serial\nser = serial.Serial('/dev/ttyUSB0')\nprint(ser.readline())\n</code></pre>\n"
    }, {
        "tags": ["iot", "esp8266", "nodemcu", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 544,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1564142505,
        "creation_date": 1564140790,
        "last_edit_date": 1564142505,
        "question_id": 57219214,
        "link": "https://stackoverflow.com/questions/57219214/always-get-1-connection-refused-response-from-server",
        "title": "Always get -1 connection refused response from server",
        "body": "<p>I am making a alert device on my node mcu board to report any orders made by customers on my application. The nodemcu should access the network using wifi and call the rest api. I tried researching many sites and modified the code several times, but the response is always -1, connection refused.</p>\n\n<p>tried doing </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;Arduino.h&gt;\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;ESP8266WiFiMulti.h&gt;   \n#include &lt;ESP8266HTTPClient.h&gt;\n#include &lt;WiFiClient.h&gt;\n\nESP8266WiFiMulti WiFiMulti;\n\nvoid setup() {\n\n  Serial.begin(9600);\n  // Serial.setDebugOutput(true);\n  Serial.println();\n  Serial.println();\n  Serial.println();\n\n  for (uint8_t t = 4; t &gt; 0; t--) {\n    Serial.printf(\"[SETUP] WAIT %d...\\n\", t);\n    Serial.flush();\n    delay(1000);\n  }\n\n  WiFi.mode(WIFI_STA);\n  WiFiMulti.addAP(\"----\", \"----\");\n}\n\nvoid loop() {\n  // wait for WiFi connection\n  if ((WiFiMulti.run() == WL_CONNECTED)) {\n\n    WiFiClient client;\n    HTTPClient http;\n\n    Serial.print(\"[HTTP] begin...\\n\");\n    if (http.begin(client, \"http://34.87.116.113:80/api/v1/iot/Notify/poll\")) {  // HTTP\n     http.setAuthorization(\"admin\", \"admin123!\");\n\n      Serial.print(\"[HTTP] GET...\\n\");\n      // start connection and send HTTP header\n      int httpCode = http.GET();\n\n      // httpCode will be negative on error\n      if (httpCode &gt; 0) {\n        // HTTP header has been send and Server response header has been handled\n        Serial.printf(\"[HTTP] GET... code: %d\\n\", httpCode);\n\n        // file found at server\n        if (httpCode == HTTP_CODE_OK || httpCode == HTTP_CODE_MOVED_PERMANENTLY) {\n          String payload = http.getString();\n          Serial.println(payload);\n        }\n      } else {\n        Serial.printf(\"[HTTP] GET... failed, error: %s\\n\", http.errorToString(httpCode).c_str());\n      }\n\n      http.end();\n    } else {\n      Serial.printf(\"[HTTP} Unable to connect\\n\");\n    }\n  }\n\n  delay(5000);\n}\n</code></pre>\n"
    }, {
        "tags": ["embedded", "iot", "c-strings", "usart", "atmega16"],
        "is_answered": true,
        "view_count": 327,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1562494626,
        "creation_date": 1562418895,
        "last_edit_date": 1562485928,
        "question_id": 56914428,
        "link": "https://stackoverflow.com/questions/56914428/how-to-receive-strings-from-hc05-bluetooth-module-using-atmega16-microcontroller",
        "title": "How to receive strings from HC05 Bluetooth module using ATmega16 microcontroller",
        "body": "<p>I am having problem in receiving string from HC05 to ATmega16. I am able receive characters but not able to receive strings.  </p>\n\n<p>I want to control DC motor wirelessly using ATmega16 and Bluetooth module (HC05). I am sending the timer OCR1A values from serial monitor app to ATmega16 by HC05 but not succeeded.  </p>\n\n<pre><code>#define F_CPU 16000000UL \n#include&lt;string.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;util/delay.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid UART_init()\n{\n    UCSRB |= (1 &lt;&lt; RXEN) | (1 &lt;&lt; TXEN);\n    UCSRC |= (1 &lt;&lt; URSEL) | (1 &lt;&lt; UCSZ0) | (1 &lt;&lt; UCS Z1);\n    UBRRL = 0x67;\n}\n\nunsigned char UART_RxChar()\n{\n    while( (UCSRA &amp; (1 &lt;&lt; RXC)) == 0 );\n    return(UDR);\n}\n\nvoid UART_TxChar( char ch )\n{\n    while( !(UCSRA &amp; (1 &lt;&lt; UDRE)) );  /* Wait for empty transmit buffer*/\n    UDR = ch ;\n}\n\nvoid UART_SendString( char* str )\n{\n    unsigned char j = 0;\n\n    while( j &lt;= 2 )\n    {\n        UART_TxChar( str[j] );\n        j++;\n    }\n}\n\nint main( void )\n{\n    char buff[3];\n    char j;\n    int i = 0, k = 0;\n    DDRD = (1 &lt;&lt; PD5);\n\n    UART_init();\n\n    while( 1 )\n    {\n        buff[0] = UART_RxChar();\n        buff[1] = UART_RxChar();\n        buff[2] = UART_RxChar();\n\n        j = UART_RxChar();\n\n        if( j == '!' )\n        {\n            UART_SendString( buff );   // this is to check whether the atmega16 received correct values for timer or not.\n            UART_SendString( \"\\n\" );\n        }\n    }\n}\n</code></pre>\n\n<p>The expected result is when I enter the number in serial monitor app, I should get back the same number on serial monitor app.</p>\n\n<p>In the actual result I am getting different characters sometimes and empty some times.</p>\n"
    }, {
        "tags": ["python", "opencv", "iot", "servo"],
        "is_answered": false,
        "view_count": 83,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1562070691,
        "creation_date": 1562070691,
        "question_id": 56852565,
        "link": "https://stackoverflow.com/questions/56852565/servo-motors-not-working-as-expected-for-facetracking-using-pantilt",
        "title": "servo motors not working as expected for facetracking using pantilt",
        "body": "<p>i have used servo motors for pantilt  to track faces \nbut the thing is the servo aren't directly connected to the raspberry \ninstead im using 16channel adafruit pca9685 to control the servos\nall the tutorials which teach face-tracking using raspberry aren't using such channels so i tried to figure out my own ways of making it happen </p>\n\n<pre><code>for frame in camera.capture_continuous(rawCapture, format = 'bgr', use_video_port = True):\n        image = frame.array\n\n        resized = cv2.resize(image, (320, 240))\n        gray = cv2.cvtColor(resized,cv2.COLOR_BGR2GRAY)\n\n        faces = face_cascade.detectMultiScale(gray, 1.1, 5)\n        if len(faces) &gt; 0:\n            for (x, y, w, h) in faces:\n                # Track(pan, tilt, Point(x + w/2.0, y+ h/2.0))\n                break\n        faces_resized = [(int(scale[0]*x), int(scale[1]*y), int(scale[0]*w), int(scale[1]*h)) for (x, y, w, h) in faces]\n        for (x,y,w,h) in faces_resized:\n            cv2.rectangle(image,(x,y),(x+w,y+h),(255,255,0),2)\n</code></pre>\n\n<p>to this part the code is absolutely clear the face is getting detected perfectly  fine but using this i want to track and change my servo motors position </p>\n\n<p>i just need the code that makes it happen \nmy adafruit board code structure</p>\n\n<pre><code>            pwm.set_pwm(0, 0,cam_pan)\n0 for index of channels \n0 min angle\n</code></pre>\n\n<p>cam_pan the angle it is supposed to move </p>\n\n<p>considering those parameters i just want to control the movements of my servo/pantilt to move accordingly</p>\n\n<p>i have tried to control the motors through this </p>\n\n<pre><code>x = x + (w/2)\n        y = y + (h/2)\n\n        # Correct relative to center of image\n        turn_x  = float(x - (FRAME_W/2))\n        turn_y  = float(y - (FRAME_H/2))\n\n        # Convert to percentage offset\n        turn_x  /= float(FRAME_W/2)\n        turn_y  /= float(FRAME_H/2)\n\n        # Scale offset to degrees\n    turn_x   = 2 # VFOV\n    turn_y   = 2 # HFOV\n    if x &gt; turn_x:\n        cam_pan  += -turn_x\n        pwm.set_pwm(0, 0,cam_pan)\n    elif x &lt; turn_x:\n\n        cam_pan  += +turn_x\n        pwm.set_pwm(0, 0,cam_pan)\n</code></pre>\n\n<p>but its of no use the servo motors just started jerking a bit</p>\n\n<pre><code>from picamera.array import PiRGBArray\nfrom picamera import PiCamera\nimport time\nimport cv2\n# from pisoc import *\nimport Adafruit_PCA9685\npwm = Adafruit_PCA9685.PCA9685()\nFRAME_W = 180\nFRAME_H = 100\ncam_pan = 90\ncam_tilt = 60\n\nif __name__ == \"__main__\":\n\n    camera = PiCamera()\n    camera.resolution = (640, 480)\n    camera.framerate = 32\n    rawCapture = PiRGBArray(camera, size = camera.resolution)\n\n    face_cascade = cv2.CascadeClassifier('/usr/local/share/OpenCV/lbpcascades/lbpcascade_frontalface.xml')\n\n    scale = (camera.resolution[0]/320.0, camera.resolution[1]/240.0)\n\n    time.sleep(0.1)\n\n    for frame in camera.capture_continuous(rawCapture, format = 'bgr', use_video_port = True):\n        image = frame.array\n\n        resized = cv2.resize(image, (320, 240))\n        gray = cv2.cvtColor(resized,cv2.COLOR_BGR2GRAY)\n\n        faces = face_cascade.detectMultiScale(gray, 1.1, 5)\n        if len(faces) &gt; 0:\n            for (x, y, w, h) in faces:\n                # Track(pan, tilt, Point(x + w/2.0, y+ h/2.0))\n                break\n        faces_resized = [(int(scale[0]*x), int(scale[1]*y), int(scale[0]*w), int(scale[1]*h)) for (x, y, w, h) in faces]\n        for (x,y,w,h) in faces_resized:\n            cv2.rectangle(image,(x,y),(x+w,y+h),(255,255,0),2)\n            # Track first face\n\n            # Get the center of the face\n            x = x + (w/2)\n            y = y + (h/2)\n\n            # Correct relative to center of image\n            turn_x  = float(x - (FRAME_W/2))\n            turn_y  = float(y - (FRAME_H/2))\n\n            # Convert to percentage offset\n            turn_x  /= float(FRAME_W/2)\n            turn_y  /= float(FRAME_H/2)\n\n            # Scale offset to degrees\n        turn_x   = 2 # VFOV\n        turn_y   = 2 # HFOV\n        if x &gt; turn_x:\n            cam_pan  += -turn_x\n            pwm.set_pwm(0, 0,cam_pan)\n        elif x &lt; turn_x:\n\n            cam_pan  += +turn_x\n            pwm.set_pwm(0, 0,cam_pan)\n        # cam_tilt += turn_y\n\n\n        # Clamp Pan/Tilt to 0 to 180 degrees\n        # cam_pan = max(0,min(180,cam_pan))\n        # cam_tilt = max(0,min(180,cam_tilt))\n\n        # Update the servos\n        # pwm.set_pwm(0, 0,cam_pan)\n\n            # print(cam_pan-90, cam_tilt-90)\n            #\n            # # Clamp Pan/Tilt to 0 to 180 degrees\n            # cam_pan = max(0,min(180,cam_pan))\n            # # cam_tilt = max(0,min(180,cam_tilt))\n            #\n            # # Update the servos\n            # pwm.set_pwm(0, 0,cam_pan)\n            #\n            # # pan(int(cam_pan-90))\n            # # tilt(int(cam_tilt-90))\n\n            break\n\n\n        cv2.imshow(\"Result\", image)\n        key = cv2.waitKey(1) &amp; 0xFF\n\n        rawCapture.truncate(0)\n\n        if key == ord('q') or key == 27:\n            break\n</code></pre>\n\n<p>here is the complete code</p>\n\n<p>i dont what exactly the issue is \nim not even sure if the issue is with the code part \nbut i just want to change servo motors according to the face</p>\n"
    }, {
        "tags": ["iot", "lorawan"],
        "is_answered": false,
        "view_count": 673,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1561122224,
        "creation_date": 1526056888,
        "last_edit_date": 1561122224,
        "question_id": 50296751,
        "link": "https://stackoverflow.com/questions/50296751/how-to-deal-with-the-lora-interference",
        "title": "How to deal with the LoRa interference",
        "body": "<p>I'm trying to test my LoRaWAN network and I'm having some very disappointing results.\nI have a Ideetron <a href=\"https://webshop.ideetron.nl/LORANK-8\" rel=\"nofollow noreferrer\">lorank8v1 gateway</a> which can work over distances of 15 km.</p>\n\n<p>In addition I used the Ideetron <a href=\"https://webshop.ideetron.nl/Nexus\" rel=\"nofollow noreferrer\">Nexus</a> Board as a microcontroller and a <a href=\"https://webshop.ideetron.nl/Nexus_Demo\" rel=\"nofollow noreferrer\">Nexus Demoboard</a> where the sensors are mounted.</p>\n\n<p>I'm sending 1 packet per minute with my humidity and temperature measurements.</p>\n\n<p>After 200m my packets aren\u2019t captured by the gateway anymore.\nI've ran the packet logger software on my gateway and all packets that are captured have a bad <code>CRC_CODE</code> verification which I think is due to interference.</p>\n\n<p>I have thought that I may have some interference from LTE/3G/4G networks but these networks are not 868MHz band in Greece.</p>\n\n<p>My gateway has 8 simultaneous channels and my node uses SF9 with a 125KHz bandwidth. When I changed these parameters nothing changed. I'm using it in a urban area.</p>\n\n<p>What should I do?\nMaybe I have to configure the datarate, the spreadingfactor and the frequencies at which my node transmits?\nAre there any better ideas out there?</p>\n"
    }, {
        "tags": ["c#", "iot", "bacnet"],
        "is_answered": false,
        "view_count": 542,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1559347091,
        "creation_date": 1448026007,
        "question_id": 33827902,
        "link": "https://stackoverflow.com/questions/33827902/how-to-get-alarms-from-bacnet-using-c",
        "title": "How to get alarms from Bacnet using c#",
        "body": "<p>I am trying to access alarms from PLC which is running on Bacnet protocol. I am using Windows 10 IoT platform (running on RPI). I can read all Bacnet object \"properties\" such as event state, alarm etc but I need to get all alarms of all objects.</p>\n\n<p>I know that GetAlarmSummary and GetEnrollmentSummary is deprecated and I should use GetEventInformation service but when I am browsing through objects I can find notification class objects but I do not know how they are connected with binary or analog objects. </p>\n\n<p>I also know that Bacnet object like (binary, analog, multistateValue) has notification class number which indicates number of notification class connected to the object but I really don't know how they are reacting on each other and how is error message generated. I have noticed that objects with error has event state set to alarm but I do not know how they are cooperating with notification classes because when I try to browse notification class I only get type and priority but nothing about connected objects. Could anyone provide some sample of code that I could use or give me some points to finish this issue?</p>\n\n<p>Thanks</p>\n"
    }, {
        "tags": ["iot", "arduino-uno", "sim900", "gsmcomm"],
        "is_answered": true,
        "view_count": 36,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1559017034,
        "creation_date": 1558697790,
        "last_edit_date": 1558701206,
        "question_id": 56291886,
        "link": "https://stackoverflow.com/questions/56291886/how-to-pass-the-function-value-in-api-address-of-thingspeak-i-am-using-ardui",
        "title": "How to pass the &#39;function value&#39; in api address of thingSpeak.. I am using Arduino and sim900 GSM",
        "body": "<p>I want to upload rain sensor data to thingspeak using HTTP POST method, But while using \"Api key= data to be sent ..\" \nThe sensor data is not being uploaded to server.. and also as it is in quotes so it is not taking as function may be....\nHow to solve this problem?? </p>\n\n<pre><code>Serial.print(\"api_key=QI8G7PVTC2BVIREC&amp;field1=TellWater()\\\\r\\\\n\"); \n</code></pre>\n"
    }, {
        "tags": ["node.js", "iot", "esp8266", "i2c", "johnny-five"],
        "is_answered": false,
        "view_count": 117,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1558198795,
        "creation_date": 1557958434,
        "last_edit_date": 1557974776,
        "question_id": 56158333,
        "link": "https://stackoverflow.com/questions/56158333/johnny-five-i2c-controlling-multiple-temperature-sensors-using-esp8266",
        "title": "Johnny-Five, I2C, Controlling multiple temperature sensors using ESP8266",
        "body": "<p>I'm trying figure out how to control multiple temperature sensors.</p>\n\n<p><strong>THE SETUP:</strong></p>\n\n<ul>\n<li>2 <a href=\"https://www.adafruit.com/product/2471\" rel=\"nofollow noreferrer\">ESP8266</a> Micro Controllers</li>\n<li>2 <a href=\"https://www.adafruit.com/product/1782\" rel=\"nofollow noreferrer\">MCP9808</a> Temperature Sensors</li>\n<li>1 Machine controlling both ESPs using Johnny-Five.</li>\n</ul>\n\n<p>NOTE: Each ESP8266 micro controller handles one MCP9808 Temperature Sensor.</p>\n\n<p><strong>THE GOAL:</strong>\nThe central machine (MacOS running Johnny-Five) handles both microcontrollers under one Node JS script.</p>\n\n<p><strong>THE PROBLEM:</strong>\nI can control one Micro Controller / Temperature pairing, but not both under the same script.\nApparently the key to handling both at once lies in knowing how to handle the IC2 addressing.\nSo far I haven't been able to find any pages, forums, instructions or combinations thereof that clearly explain the logic in terms that I can understand.</p>\n\n<p><strong>THE QUESTION:</strong>\nHow to handle I2C using Johnny-Five to control multiple devices</p>\n\n<p><strong>THE CODE:</strong>\nIt only works when handling one Sensor, not both\nIn other words with the 4th line commented out it works.  Uncommented, it doesn't.</p>\n\n<pre><code>    var five = require(\"johnny-five\");\n    var {EtherPortClient}=require(\"etherport-client\");\n    var Thermometers=[\n        //{Name:\"Thermometer1\", Ip:\"192.168.1.101\"}, //Uncommenting causes fail.\n        {Name:\"Thermometer2\", Ip:\"192.168.1.102\"} \n    ];\n    TrackThermometers();\n\n    function TrackThermometers(){\n        Thermometers.forEach(function(ThisThermometer, ThermometerCount){\n            ThisThermometer.Board=new five.Board({\n                port: new EtherPortClient({\n                    host: ThisThermometer.Ip,\n                    port: 3030\n                }),\n                repl: false\n            });\n            ThisThermometer.Board.on(\"ready\", function(){\n                ThisThermometer.Controller=new five.Thermometer({ //This cmd triggers the error\n                    controller:\"MCP9808\"\n                });\n                ThisThermometer.Controller.on(\"change\", function(){\n                    console.log(this.id, this.fahrenheit);\n                });\n            })\n        });\n    }\n</code></pre>\n"
    }, {
        "tags": ["react-native", "bluetooth-lowenergy", "iot", "react-native-ble-plx"],
        "is_answered": true,
        "view_count": 333,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1558168559,
        "creation_date": 1558092846,
        "question_id": 56185596,
        "link": "https://stackoverflow.com/questions/56185596/couldnt-read-accelerometer-and-gyro-from-sensortag-using-react-native",
        "title": "Couldn&#39;t read accelerometer and gyro from sensortag using react-native",
        "body": "<p>I have been working on react-native-ble-plx with sensortag <strong>cc2650stk</strong> and having issues fetching accelerometer and gyro data.</p>\n\n<pre><code>Error: Characteristic \"f000aa82-0451-4000-b000-000000000000\" write failed for device xxxxxx and service \"f000aa80-0451-4000-b000-000000000000\"\n</code></pre>\n\n<p>Things work fine for all the other sensors of the ticc2650 sensortag. like humidity,temperature,barometer etc.</p>\n\n<pre><code>constructor() {\n    super();\n    this.manager = new BleManager()\n    this.state = {info: \"\", values: {}}\n    this.prefixUUID = \"f000aa\"\n    this.suffixUUID = \"-0451-4000-b000-000000000000\"\n    this.sensors = {\n     0: \"Temperature\",\n     8: \"Accelerometer\",\n     2: \"Humidity\",\n     7: \"Magnetometer\",\n     4: \"Barometer\",\n    // 5: \"Gyroscope\"\n    }\n  }\n  serviceUUID(num) {\n    return this.prefixUUID + num + \"0\" + this.suffixUUID\n  }\n\n  notifyUUID(num) {\n    return this.prefixUUID + num + \"1\" + this.suffixUUID\n  }\n\n  writeUUID(num) {\n    return this.prefixUUID + num + \"2\" + this.suffixUUID\n  }\n</code></pre>\n\n<p>My sensortag Movemnet UUIDS are:</p>\n\n<pre><code>MOVEMENT_SERVICE = 'f000aa80-0451-4000-b000-000000000000';\nMOVEMENT_DATA = 'f000aa81-0451-4000-b000-000000000000';\nMOVEMENT_CONFIG = 'f000aa82-0451-4000-b000-000000000000';\nMOVEMENT_PERIOD = 'f000aa83-0451-4000-b000-000000000000';\nMOVEMENT_NOTIFICATION = '00002902-0000-1000-8000-00805f9b34fb';\nif (device.name === 'CC2650 SensorTag' || device.name === 'SensorTag') {\n        this.info(\"Connecting to TI Sensor\")\n        this.manager.stopDeviceScan();\n        device.connect()\n          .then((device) =&gt; {\n            this.info(\"Discovering services and characteristics\")\n            return device.discoverAllServicesAndCharacteristics()\n          })\n          .then((device) =&gt; {\n            this.info(\"Setting notifications\")\n            console.log(device);\n            return this.setupNotifications(device)\n          })\n          .then(() =&gt; {\n            this.info(\"Listening...\")\n          }, (error) =&gt; {\n\n            this.error(error.message)\n          })\n      }\nasync setupNotifications(device) {\n    for (const id in this.sensors) {\n      //id = 8;\n      const service = this.serviceUUID(id);\n      const characteristicW = this.writeUUID(id);\n      const characteristicN = this.notifyUUID(id);\n\n      const characteristic = await device.writeCharacteristicWithResponseForService(\n        service, characteristicW, \"AQ==\" /* 0x01 in hex */\n      )\n\n      device.monitorCharacteristicForService(service, characteristicN, (error, characteristic) =&gt; {\n        if (error) {\n\n          this.error(error.message)\n          return\n        }\n        console.log(characteristic.uuid+\":::\"+characteristic.value);\n        this.updateValue(characteristic.uuid, characteristic.value)\n      })\n    }\n  }\n</code></pre>\n\n<p>work fine for other sensors but not gyro and accelerometer.</p>\n"
    }, {
        "tags": ["windows", "arduino", "raspberry-pi", "iot", "windowsiot"],
        "is_answered": false,
        "view_count": 386,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1557987359,
        "creation_date": 1495026311,
        "last_edit_date": 1495120651,
        "question_id": 44025755,
        "link": "https://stackoverflow.com/questions/44025755/iot-raspberry-pi-windows-iot",
        "title": "IOT , Raspberry pi, Windows IOT",
        "body": "<p>I want to upload Arduino sketch via Raspberry pi using windows 10 IOT platform (Visual studio universal application), Has anybody any idea how to do this? </p>\n\n<p>Sketch from cloud > > > > Raspberry pi ------> Arduino</p>\n\n<p>In this diagram sketch download from the cloud and via Rpi upload to Arduino.</p>\n"
    }, {
        "tags": ["arduino", "gps", "iot", "android-gps"],
        "is_answered": false,
        "view_count": 180,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1557307132,
        "creation_date": 1557121756,
        "last_edit_date": 1557174660,
        "question_id": 55999435,
        "link": "https://stackoverflow.com/questions/55999435/trying-to-extract-longitude-and-latitude-from-gps-using-arduino-and-neo-6m-modul",
        "title": "Trying to extract longitude and latitude from gps using arduino and neo 6m module but the loop goes up to infinity",
        "body": "<p>I'm new to arduino and trying to extract gps coordinate using neo 6m module using arduino but the loop is running till infinity. Can you please help me why it is not breaking.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void gpsEvent()\n{\n    gpsString = \"\";\n    while (1)\n    {\n        while (gps.available() &gt; 0)  //Serial incoming data from GPS\n        {\n            char inChar = (char)gps.read();\n            gpsString += inChar;//store incoming data from GPS to temparary string str[]\n            i++;\n            // Serial.print(inChar);\n            if (i &lt; 7)                      \n            {\n                if (gpsString[i-1] != test[i-1])    //check for right string\n                {\n                    i = 0;\n                    gpsString = \"\";\n                }\n            }\n\n            if (inChar == '\\r')\n            {\n                if (i &gt; 60)\n                {\n                    gps_status = 1;\n                    break;\n                }\n                else\n                {\n                    i = 0;\n                }\n            }\n        }\n\n        if (gps_status)\n            break;\n     }\n}\n\nvoid get_gps()\n{\n    gps_status = 0;\n    int x = 0;\n    while (gps_status == 0)\n    {\n        gpsEvent();\n        int str_lenth = i;\n        coordinate2dec();\n        i = 0;\n        x = 0;\n        str_lenth = 0;\n    }\n}\n</code></pre>\n\n<p>I have called  <code>get_gps();</code> in the void setup() loop to initialize  the system but the gpsEvent function which is used to extract the correct string from data is running till infinite can you pls help. The reference of the code is from <a href=\"https://circuitdigest.com/microcontroller-projects/arduino-based-accident-alert-system-using-gps-gsm-accelerometer\" rel=\"nofollow noreferrer\">https://circuitdigest.com/microcontroller-projects/arduino-based-accident-alert-system-using-gps-gsm-accelerometer</a>\nbut have made few changes of my own but not in the programming for the gps module.</p>\n"
    }, {
        "tags": ["java", "iot", "android-things"],
        "is_answered": true,
        "view_count": 324,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1556552719,
        "creation_date": 1502233543,
        "last_edit_date": 1556552719,
        "question_id": 45579289,
        "link": "https://stackoverflow.com/questions/45579289/rainbow-hat-android-things-temperature-offset",
        "title": "Rainbow HAT Android things temperature offset",
        "body": "<p>Whenever I run the \"weatherstation\" application from here: <a href=\"https://github.com/androidthings/weatherstation\" rel=\"nofollow noreferrer\">https://github.com/androidthings/weatherstation</a> and let it run for a little while, the temperature sensing is off the charts. </p>\n\n<p>My room is about 25C whereas the sensor starts of about 21C but rises to 41C!</p>\n\n<p>Is there some offset I should know off?</p>\n"
    }, {
        "tags": ["mqtt", "iot", "fiware", "fiware-orion"],
        "is_answered": true,
        "view_count": 399,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1555430528,
        "creation_date": 1529485976,
        "last_edit_date": 1529567595,
        "question_id": 50944501,
        "link": "https://stackoverflow.com/questions/50944501/sending-mqtt-messages-to-orion-context-broker",
        "title": "Sending MQTT messages to Orion Context broker",
        "body": "<p>I have a relatively simple switch that sends data whenever the button is pressed (either 1 or 0). The message protocol it uses is MQTT. It is connected to Mosquitto via Wi-Fi and successfully sends data to it (i am able to see it using <code>mosquitto_sub -v -t \"#\"</code>. However, I would like to be able to send this data to Orion Context Broker and then receive it using REST commands and store it using Fiware-Cygnus afterwards. </p>\n\n<p>the topic that sensor publishes messages to is <code>tt/sergo/demo/sw</code> </p>\n\n<p>the name of the sensor presented in mosquitto_sub when sensor is first connected: DMS-A01</p>\n\n<p>the IP - address of sensor: 192.168.0.108</p>\n\n<p>I have installed Iot-Agent UL, which is working, but I don't know how to make it listen to the specific sensor that sends data to Mosquitto.\nI read the manuals but either missed something or did not find the solution to my problem.\nI tried using the manual below, but could not apply it to my problem.</p>\n\n<p><a href=\"http://secmotic.com/blog/connect-thing-mqtt-ultralight-fiware/\" rel=\"nofollow noreferrer\">Connecting \"thing\" to Fiware</a></p>\n\n<p>Thank you in advance, stack overflow community.</p>\n"
    }, {
        "tags": ["python", "raspberry-pi", "sensors", "iot"],
        "is_answered": true,
        "view_count": 1624,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1553449172,
        "creation_date": 1486167045,
        "last_edit_date": 1486167451,
        "question_id": 42034995,
        "link": "https://stackoverflow.com/questions/42034995/reading-temperature-on-raspberry-pi-using-dht11-sensor",
        "title": "Reading temperature on Raspberry Pi using DHT11 sensor",
        "body": "<p>I am new to working with Raspberry Pi physical computing. I have a Raspberry Pi and am trying to write a simple Python program to print the temperature and humidity data to the log. I have a DHT11 sensor plugged into 3V3, ground, and the data connected to GPIO pin 14. Here is the code I have so far:</p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom gpiozero import InputDevice\n\nprint(InputDevice(14, False))\n</code></pre>\n\n<p>However, all this prints is:</p>\n\n<pre><code>&lt;gpiozero.InputDevice object on pin GPIO14, pull_up=False, is_active=False&gt;\n</code></pre>\n\n<p>I'm not sure if it was wrong to use 'InputDevice' or really which direction to go from here. I just want to be able to read the temp and humidity. Thank you for any advice.</p>\n"
    }, {
        "tags": ["stream", "real-time", "visualization", "iot"],
        "is_answered": false,
        "view_count": 24,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1552837811,
        "creation_date": 1552837811,
        "question_id": 55208904,
        "link": "https://stackoverflow.com/questions/55208904/application-for-gathering-real-time-data-from-sensors-and-composing-multiple-sou",
        "title": "Application for gathering real-time data from sensors and composing multiple sources of data",
        "body": "<p>I'm currently searching for an application to visualize data from different sensors. The idea is that the sensor picks up movement and sends the angle which the object is at to the application. With about 4 of these sensors, they should display movement at their vicinity.\nAn example would be a car driving on a street. On both sides of the street there are sensors which pick up the angle(if the car was right in front of you, the angle would be 90 degrees) and send it to the application. Then the application should be able to take the input information from the sensors and plot a moving car/object on a canvas.\nSo far i've found Power BI / Azure IoT hub and cumulocity which although gather sensor data, but do not have the ways to transform it into  the earlier specified form.\nIs there anything which is capable of this?</p>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": false,
        "view_count": 54,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1551791145,
        "creation_date": 1551783098,
        "question_id": 55001091,
        "link": "https://stackoverflow.com/questions/55001091/i-have-purchased-a-nema-1-8-degree-step-angle-stepper-motor-how-can-i-rotate-it",
        "title": "I have purchased a Nema 1.8 Degree step angle stepper motor. How can i rotate it at 1.2 degrees?",
        "body": "<p>I want to rotate my motor at 1.2 degrees.\nDo I need to purchase any other components for this?</p>\n"
    }, {
        "tags": ["akka", "iot"],
        "is_answered": true,
        "view_count": 257,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1551375237,
        "creation_date": 1525799745,
        "last_edit_date": 1525813095,
        "question_id": 50239036,
        "link": "https://stackoverflow.com/questions/50239036/granularity-of-an-akka-actor-for-iot-scenario",
        "title": "Granularity of an Akka Actor for IoT Scenario",
        "body": "<p>I'm interested in using AKKA for an IoT Device scenario but I'm worried about complicating an individual actor.  In most industries, a device is not as simple as a 'temperature sensor' you see in most tutorials.  A device represents something more complex that can take on the following characteristics:</p>\n\n<ul>\n<li>Many sensors can be represented (temperatures, electrical/fluid flows, power output, on/off values.....</li>\n<li>Each of the values above can be queried for current value, and more likely historical values (trends, histograms....)</li>\n<li>Alerting rules can be set up for any one of the sensor values</li>\n<li>Each device has a fairly complex configuration that must be managed (what sensors, what unit of measure)</li>\n<li>Many different message types can be sent (sensor reading request, alerts, configuration updates....)</li>\n</ul>\n\n<p>So my general question is does anyone have good advice on what the level of complexity an actor should take on?  </p>\n\n<p>Thanks\nSteve</p>\n"
    }, {
        "tags": ["azure", "arduino", "iot", "arduino-uno", "azure-iot-hub"],
        "is_answered": true,
        "view_count": 917,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1550392561,
        "creation_date": 1490678659,
        "last_edit_date": 1490689721,
        "question_id": 43061205,
        "link": "https://stackoverflow.com/questions/43061205/parse-arduino-uno-data-directly-to-iot",
        "title": "Parse Arduino Uno data directly to IoT",
        "body": "<p>I'm making a temperature, humidity and moisture sensor system where data should be sent over to Iot hub (Cloud) every second. I have used an Arduino and Ethernet shield.</p>\n\n<p>I'm able to create sensor data every second. It sends this data to the IoT hub directly from Arduino without a Raspberry Pi or PC|VS Studio. I have already created a job stream on Azure as well. Is there any mechanism with which I could send this data to Azure IoT hub directly? Thanks in advance.</p>\n"
    }, {
        "tags": ["python", "multithreading", "multiprocessing", "mqtt", "iot"],
        "is_answered": false,
        "view_count": 100,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1550133267,
        "creation_date": 1550103789,
        "question_id": 54681477,
        "link": "https://stackoverflow.com/questions/54681477/how-to-run-an-object-whose-functions-can-be-called-as-threads",
        "title": "How to run an object whose functions can be called as threads",
        "body": "<p>I'm writing a script for a Raspberry Pi in Python whose purpose is to listen to a server/message broker for commands and execute said commands with certain hardware.  Sometimes, those commands must last for a specified duration (i.e. I need something to turn on, stay on for t seconds, then turn off) and this is accomplished by having the code sleep for said duration between on and off commands (this happens inside a function call -- hardware1.on(dur = t)).  I would like to be able to interrupt that sequence with another command (such as turning the hardware off before t seconds is up).  I've tried to accomplish this via multiprocessing,  but cannot get the behavior I'm looking for.</p>\n\n<p>This hardware (a stalk of differently colored lights) is controlled via a class, LiteStalk.  This class is made up of Lite objects (each light in the stalk), which have their own class too.  Both classes inherit multiprocessing.process.  In my main code that creates a specific LiteStalk and then listens to a message broker (MQTT-based) for commands, I evaluate the commands published to the broker (this is in the on_message callback which runs when a message is published to the broker).</p>\n\n<pre><code>import time\nimport LiteCntrlModule as LiteStalkMod\nimport multiprocessing\nimport paho.mqtt.client as mqtt\n\nprint('Starting...\\n')\n\n# Set gpio designatin mode to BCM\ngpio.setmode(gpio.BCM)\n\n# Initialize light stalk\nstalkdict = {'red':1, 'yel':2, 'grn':3, 'bzr':4}\nstalk = LiteStalkMod.LiteStalk(stalkdict)\nmsgRec = \"\"\n\ndef on_connect(client, userdata, flags, rc):\n    print(\"Connected with result code \"+str(rc))\n    if(rc == 0):\n        print('Code \"0\" indicates successful connection.  Waiting for messages...')\n    # Subscribing in on_connect() means that if we lose the connection and\n    # reconnect then subscriptions will be renewed.\n    client.subscribe(\"asset/andon1/state\")\n\n# The callback for when a PUBLISH message is received from the server.\ndef on_message(client, userdata, msg):\n    print(msg.topic+\" \"+str(msg.payload))\n    msgRec = msg.payload\n    eval(msg.payload)\n    if msg.payload == \"stalk.off()\":\n        print(\"If this executes while another command is running, it works!\")\n\nclient = mqtt.Client(client_id=\"\")\nclient.username_pw_set(\"mytopic\", password=\"mypassword\")\nclient.on_connect = on_connect\nclient.on_message = on_message\n\nclient.connect(\"mymessagebrokeraddress\", 1883, 60)\nclient.subscribe(\"mytopic\")\n\n# Blocking call that processes network traffic, dispatches callbacks and\n# handles reconnecting.\n# Other loop*() functions are available that give a threaded interface and a\n# manual interface.\n\ntry:\n    client.loop_start() # start listening in a thread and proceed\n\nexcept KeyboardInterrupt: # so that aborting with Ctrl+C works cleanly\nstalk.off()\n\nfinally:\nstalk.shutDown()\n</code></pre>\n\n<h3>LiteCtnrlModule (Lite and LiteStalk classes) follows:</h3>\n\n<pre><code>import time\nimport multiprocessing\nfrom relay_lib_seeed import *\n</code></pre>\n\n<p>class Lite(multiprocessing.Process):</p>\n\n<pre><code># A Lite object has an associated relay and functions\n# Ex: red\n    # A lite can be controlled\n    # Ex: red.blink()       \n\ndef __init__(self, relayIn):\n    # Ex: red = Lite.Lite(1)\n    multiprocessing.Process.__init__(self) # allows you to create multiple objects that can be run as threads\n    self.daemon = True # creates a daemon thread that will exit when the main code terminates\n    self.start() # allows multiproc. to begin\n    self.relay = relayIn\n\ndef shutDown(self):\n    # terminates the threaded object\n    relay_off(self.relay)\n    self.join()\n\ndef off(self, dur = 0):\n            # turns light off\n\ndef on(self, dur = 0):\n            # turns light on, optional duration to stay on for\n\n# blink\ndef blink(self, dur = 0, timeOn = .5, timeOff = .5):\n            # blinks light\n</code></pre>\n\n<p>class LiteStalk(multiprocessing.Process):</p>\n\n<pre><code># A LiteStalk object can have any number of \"lite\" onjects in it. Ex:\n    # Object: stalk1\n        # A lite object in stalk1 respresents one segment/color of the light stalk\n        # stalk1.red\n            # Any lite can be turned on/off in various patterns for amounts of time, etc.\n            # stalk1.red.blink()\n        # An entire stalk can be controlled all at once\n        # stalk1.cycle()\n\nliteList = {}\n\ndef __init__(self, liteListIn):\n\n    # liteListIn = {'clr1':relay1, 'clr2\":relay2, 'clr3':relay3]...}\n    self.liteList = liteListIn;\n    multiprocessing.Process.__init__(self) # allows you to create multiple objects that can be run as threads\n    self.daemon = True # creates a daemon thread that will exit when the main code terminates\n    self.start() # allows multiproc. to begin\n    for lite in self.liteList: # for each lite color string in the lites dict\n        setattr(self, lite, Lite(self.liteList[lite])) # creates a lite obj attr in the LiteStalk obj\n    print(self.liteList)\n\ndef shutDown(self):\n\n    # each light is turned off and that gpio pin is cleaned-up\n    relay_all_off()\n    self.join() # joins thread\n\ndef off(self, dur = 0):\n            # turns all hardware off\n\ndef on(self): \n            # turns all hardware on, optional duration to stay on for\ndef blink(self, timeOn, timeOff):\n            # blinks all hardware\n\ndef cntDn(self, dur = 20, yelDur = 2, redDur = 10): #in min\n    # enters a count down sequence\n</code></pre>\n\n<p>The command always runs to its completion before being executing whatever other commands were published to the server, i.e. the stalk stays on for the commanded duration, and cannot be commanded to turn off (or anything else) before the duration is up.  I think this may be becuase I am not including all the functionality of my multiprocessing-able objects in a run() function, but I've messed around with that with no luck.</p>\n"
    }, {
        "tags": ["arduino", "mqtt", "iot", "esp32", "thingsboard"],
        "is_answered": true,
        "view_count": 1028,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1550077920,
        "creation_date": 1550028346,
        "last_edit_date": 1550077920,
        "question_id": 54662037,
        "link": "https://stackoverflow.com/questions/54662037/publishing-telemtry-data-to-local-thingsboard-server-works-with-mqtt-js-but-not",
        "title": "Publishing telemtry data to local Thingsboard server works with mqtt.js but not ESP arduino sample",
        "body": "<p>I setup a VM running a ThingsBoard broker for an IoT project I'm working on and running into some odd problems. I'm using an ESP32 with a few sensors connected (temperature, humidity, pressure, etc.) and want to simply push these values to the ThingsBoard broker using MQTT. I created a test program based on the code sample provided by ThingsBoard, but am having issues connecting to the server. Here is my code below:</p>\n\n<pre><code>#include &lt;WiFi.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;OneWire.h&gt;\n#include &lt;PubSubClient.h&gt;\n#include &lt;Adafruit_Sensor.h&gt;\n#include &lt;Adafruit_BME280.h&gt;\n#include &lt;DallasTemperature.h&gt;\n\n// Constants\n#define ONE_WIRE_PIN  14  // One-Wire pin for water temperature sensor\n#define TURBIDITY_PIN 36  // Analog pin for turbidity sensor\n#define SEALEVELPRESSURE_HPA (1013.25)\n\n// WiFi Login Info\n#define ssid              \"WiFiNetwork\"\n#define password          \"password\"\n\n// MQTT Broker IP address:\n#define mqtt_server       \"192.168.0.10\"\n#define mqtt_server_port  1883\n\n// MQTT Client Info\n#define MQTT_CLIENT_NAME \"ESP32\"\n#define ACCESS_TOKEN \"ESP32_DEMO_TOKEN\"\n\n// Sensor Variables\nfloat airTemperature = 0;\nfloat waterTemperature = 0;\nfloat humidity = 0;\nfloat pressure = 0;\nfloat altitude = 0;\nfloat turbidity = 0;\n\n// Control Variables\nlong lastMsg = 0;   // keeps track of timestamp since the last message was sent\n\n// Objects\nAdafruit_BME280 BME280; // I2C\nOneWire oneWire_in(ONE_WIRE_PIN);\nDallasTemperature temperature_sensor(&amp;oneWire_in);\n\nWiFiClient espClient;\nPubSubClient client(espClient);\n\nvoid setup() {\n  int status = 0;\n\n  Serial.begin(115200);\n\n  // Initialize BME280\n  status = BME280.begin();  \n  if (!status) {\n      while(true) {\n        Serial.println(\"Could not find a valid BME280 sensor, check wiring!\");\n        delay(5000);\n      }\n  }\n\n  // Initialize the One-Wire Temperature Sensor\n  temperature_sensor.begin();\n\n  // Initialize the WiFi and MQTT connections\n  setup_wifi();\n  client.setServer(mqtt_server, mqtt_server_port);\n  client.setCallback(mqtt_callback);\n}\n\nvoid loop() {\n  // Update/refresh the Wifi/MQTT connection\n  updateWirelessConnection();\n\n  // Read and transmit the sensor values every 5 seconds\n  long now = millis();\n  if (now - lastMsg &gt; 5000) {\n    lastMsg = now;\n\n    // Read all the sensor values\n    collectMeasurements();\n\n    // Publish updated sensor values\n    publishMeasurements();\n\n    // Print all sensor values\n    printMeasurements();\n  }\n}\n\nvoid updateWirelessConnection()\n{\n  if (!client.connected()) {\n    reconnect();\n  }\n\n  client.loop();\n}\n\nvoid printMeasurements()\n{\n  Serial.print(\"Air Temperature: \");\n  Serial.print(airTemperature);\n  Serial.println( \" *C\");\n\n  Serial.print(\"Air Pressure: \");\n  Serial.print(pressure);\n  Serial.println( \" hPa\");\n\n  Serial.print(\"Humidity: \");\n  Serial.print(humidity);\n  Serial.println( \" %RH\");\n\n  Serial.print(\"Altitude: \");\n  Serial.print(altitude);\n  Serial.println( \" m\");\n\n  Serial.print(\"Water Temperature: \");\n  Serial.print(waterTemperature);\n  Serial.println( \" *C\");\n\n  Serial.print(\"Water Turbidity: \");\n  Serial.print(turbidity);\n  Serial.println( \" NTUs\");\n\n  Serial.println();\n}\n\nvoid collectMeasurements()\n{\n  // Read the measurements from the BME280 sensor\n  airTemperature = BME280.readTemperature();\n  pressure = BME280.readPressure() / 100.0F;\n  altitude = BME280.readAltitude(SEALEVELPRESSURE_HPA);\n  humidity = BME280.readHumidity();\n\n  // Read the water temperature sensor\n  temperature_sensor.requestTemperatures();\n  waterTemperature = temperature_sensor.getTempCByIndex(0);\n\n  // Read the turbidity sensor\n  turbidity = calculateTurbidityValue(analogRead(TURBIDITY_PIN), waterTemperature);\n}\n\n// Calculates the temperature-compensated Turbidity value based on the raw ADC voltage and water temperature in celsius\nfloat calculateTurbidityValue(int adcValue, float waterTemp)\n{\n  // Convert ADC value to original voltage reading\n  float voltage = adcValue * (5.0 / 4096.0);\n\n  // Correct the voltage value for temperature\n  // TODO: TBD later\n\n  // Convert the voltage to NTUs\n  float NTUs = -1120.4 * pow(voltage, 2.0) + 5742.3 * voltage - 4352.9;\n\n  if (NTUs &lt; 0) {\n    return 0;\n  } else {\n    return NTUs;\n  }\n}\n\n// Publishes all measurements to the MQTT broker\nvoid publishMeasurements()\n{\n  // Create Payload string\n  // Paylod String format: {\"key1\":\"value1\", \"key2\":\"value2\"}\n  String payload1 = \"{\";\n  payload1 += \"\\\"airTemperature\\\":\";   payload1 += airTemperature;    payload1 += \",\";\n  payload1 += \"\\\"pressure\\\":\";         payload1 += pressure;          payload1 += \",\";\n  payload1 += \"\\\"humidity\\\":\";         payload1 += humidity;\n  payload1 += \"}\";\n\n  String payload2 = \"{\";\n  payload2 += \"\\\"altitude\\\":\";         payload2 += altitude;          payload2 += \",\";\n  payload2 += \"\\\"waterTemperature\\\":\"; payload2 += waterTemperature;  payload2 += \",\";\n  payload2 += \"\\\"turbidity\\\":\";        payload2 += turbidity;\n  payload2 += \"}\";\n\n  transmitPayload(payload1);\n  transmitPayload(payload2);\n}\n\nvoid transmitPayload(String payload)\n{\n  // Convert Payload string to c-string and transmit\n  char attributes[500];\n  payload.toCharArray(attributes, 500);\n  client.publish(\"v1/devices/me/telemetry\", attributes);\n}\n\nvoid setup_wifi() {\n  delay(10);\n\n  // We start by connecting to a WiFi network\n  Serial.println();\n  Serial.print(\"Connecting to \");\n  Serial.println(ssid);\n\n  WiFi.begin(ssid, password);\n\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(\".\");\n  }\n\n  Serial.println(\"\");\n  Serial.println(\"WiFi connected\");\n  Serial.println(\"IP address: \");\n  Serial.println(WiFi.localIP());\n}\n\nvoid mqtt_callback(char* topic, byte* message, unsigned int length) {\n  Serial.print(\"Message arrived on topic: \");\n  Serial.print(topic);\n  Serial.print(\". Message: \");\n  String messageTemp;\n\n  for (int i = 0; i &lt; length; i++) {\n    Serial.print((char)message[i]);\n    messageTemp += (char)message[i];\n  }\n  Serial.println();\n\n  // Feel free to add more if statements to control more GPIOs with MQTT\n\n  // If a message is received on the topic esp32/output, you check if the message is either \"on\" or \"off\". \n  // Changes the output state according to the message\n  /*if (String(topic) == \"esp32/output\") {\n    Serial.print(\"Changing output to \");\n    if(messageTemp == \"on\"){\n      Serial.println(\"on\");\n      digitalWrite(ledPin, HIGH);\n    }\n    else if(messageTemp == \"off\"){\n      Serial.println(\"off\");\n      digitalWrite(ledPin, LOW);\n    }\n  }*/\n}\n\nvoid reconnect() {\n  // Loop until we're reconnected\n  while (!client.connected())\n  {\n    Serial.print(\"Attempting MQTT connection...\");\n    // Attempt to connect\n    if (client.connect(MQTT_CLIENT_NAME, ACCESS_TOKEN, NULL)) {\n      Serial.println(\"connected\");\n      // Subscribe\n      //client.subscribe(\"esp32/output\");\n    } else {\n      Serial.print(\"failed, rc=\");\n      Serial.print(client.state());\n      Serial.println(\" try again in 5 seconds\");\n      // Wait 5 seconds before retrying\n      delay(5000);\n    }\n  }\n}\n</code></pre>\n\n<p>For those interested, the code that actually reads the sensor values and prints them out works fine, the issue is the code that connects to the ThingsBoard server. When I run this code, this is what I see in the serial terminal:</p>\n\n<blockquote>\n  <p>ets Jun  8 2016 00:22:57</p>\n  \n  <p>rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)\n  configsip: 0, SPIWP:0xee\n  clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n  mode:DIO, clock div:1\n  load:0x3fff0018,len:4 \n  load:0x3fff001c,len:928 \n  ho 0 tail 12 room 4 \n  load:0x40078000,len:9280\n  load:0x40080400,len:5848\n  entry 0x40080698</p>\n  \n  <p>Connecting to WiFiNetwork\n  ....\n  WiFi connected\n  IP address: \n  192.168.0.15 \n  Attempting MQTT connection...failed, rc=-1 try again in 5 seconds\n  Attempting MQTT connection...failed, rc=-1 try again in 5 seconds</p>\n</blockquote>\n\n<p>From looking at the <a href=\"https://pubsubclient.knolleary.net/api.html\" rel=\"nofollow noreferrer\">PubSubClient library documentation</a>, a status code of -1 means \"the client is disconnected cleanly\", which doesn't really make sense...</p>\n\n<p>So assuming that there may be something wrong with my ThingsBoard server, I used the MQTT.js client sample files from the <a href=\"https://thingsboard.io/docs/getting-started-guides/helloworld/#pushing-data-from-the-device\" rel=\"nofollow noreferrer\">ThingsBoard Getting Started Guide</a> and modified the .bat and .json files to match my inputs as follows:</p>\n\n<p><strong>mqtt-js.bat</strong></p>\n\n<pre><code>@echo off\n\nREM Set ThingsBoard host to \"demo.thingsboard.io\" or \"localhost\"\nset THINGSBOARD_HOST=192.168.0.10\n\nREM Replace YOUR_ACCESS_TOKEN with one from Device details panel.\nset ACCESS_TOKEN=ESP32_DEMO_TOKEN\n\nREM Read serial number and firmware version attributes\nset /p ATTRIBUTES=&lt;attributes-data.json\n\nREM Read timeseries data as an object without timestamp (server-side timestamp will be used)\nset /p TELEMETRY=&lt;telemetry-data.json\n\nREM publish attributes and telemetry data via mqtt client\nnode publish.js\n</code></pre>\n\n<p><strong>telemetry-data.json</strong></p>\n\n<pre><code>{\"airTemperature\":21, \"humidity\":55.0, \"pressure\": 101.6}\n</code></pre>\n\n<p>When I execute the .bat file, the data publishes to my server without issues!</p>\n\n<p>The strange thing is that this MQTT.js file does not seem to need the port 8080 specified like my Arduino code does. It's clear that the problem lies with the Arduino code and not the server itself, but I'm absolutely stumped... Any ideas?</p>\n\n<p><strong>EDIT:</strong> After correcting the problem with the incorrect MQQT port number the server was able to connect properly. Then after some testing, I noticed that the payload string was not updating on the dashboard at all once all the variables were included. It turned out that the string was too long to transmit correctly, so I updated the code to split the string into two transmissions, which ultimately fixed everything.</p>\n"
    }, {
        "tags": ["python", "sql", "amazon-web-services", "iot"],
        "is_answered": true,
        "view_count": 233,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1548883540,
        "creation_date": 1548877360,
        "last_edit_date": 1548883540,
        "question_id": 54448338,
        "link": "https://stackoverflow.com/questions/54448338/value-of-none-or-valueerrorinvalid-json-file",
        "title": "Value of None or ValueError(&quot;Invalid JSON file.&quot;)",
        "body": "<p>I'm setting up SNS push notifications on AWS IoT for two MCU sensors.                    </p>\n\n<p>Right now I am getting alerts just when the moisture is low so I wanted to include temp/humidity data but its either giving me a value of none or throwing an error Invalid JSON.  How do I fix this?</p>\n\n<p>Working code:</p>\n\n<pre><code>def myShadowUpdateCallback(payload, responseStatus, token):\n  print()\n  print('UPDATE: $aws/things/' + SHADOW_HANDLER +\n    '/shadow/update/#')\n  print(\"payload = \" + payload)\n  print(\"responseStatus = \" + responseStatus)\n  print(\"token = \" + token)\n\nchannel = 21\nGPIO.setup(channel, GPIO.IN)\n\nwhile True:\n\n  if GPIO.input(channel):\n    myDeviceShadow.shadowUpdate(\n      '{\"state\":{\"reported\":{\"moisture\":\"low\"}}}',\n      myShadowUpdateCallback, 5)\n  else:\n    myDeviceShadow.shadowUpdate(\n      '{\"state\":{\"reported\":{\"moisture\":\"okay\"}}}',\n      myShadowUpdateCallback, 5)\n</code></pre>\n\n<p>E-mail result:</p>\n\n<pre><code>{\"state\":{\"reported\":{\"moisture\":\"low\"}},\"metadata\":{\"reported\":{\"moisture\":{\"timestamp\":1548870624}}},\"version\":5167,\"timestamp\":1548870624,\"clientToken\":\"b8a2\"}\n</code></pre>\n\n<p>To get the DH22 temp/humidity sensor working I added:</p>\n\n<pre><code>import Adafruit_DHT\n\nhumidity, temperature = Adafruit_DHT.read_retry(Adafruit_DHT.DHT22, 20)\n</code></pre>\n\n<p>Changed:</p>\n\n<pre><code>def myShadowUpdateCallback(payload, responseStatus, token):\n  print()\n  print('UPDATE: $aws/things/' + SHADOW_HANDLER +\n    '/shadow/update/#')\n  print(\"payload = \" + payload)\n  print(\"responseStatus = \" + responseStatus)\n  print(\"token = \" + token)\n  print('Temperature={}*F  Humidity={}%'.format(temperature, humidity))\n\nwhile True:\n\n  if GPIO.input(channel):\n    myDeviceShadow.shadowUpdate(\n      '{\"state\":{\"reported\":{\"moisture\":\"low\",\"humidity\":{\"0\":\"0.1f\"},\"temperature\":{\"1\":\"0.1f\"}}}}',\n      myShadowUpdateCallback, 5)\n  else:\n    myDeviceShadow.shadowUpdate(\n      '{\"state\":{\"reported\":{\"moisture\":\"okay\",\"humidity\":{\"0\":\"0.1f\"},\"temperature\":{\"1\":\"0.1f\"}}}}',\n      myShadowUpdateCallback, 5)\n</code></pre>\n\n<p>Error:</p>\n\n<p>When moisture is OK the temperature and moisture show:</p>\n\n<pre><code>Temperature=None*F  Humidity=None%\n</code></pre>\n\n<p>When moisture is low I get an error:</p>\n\n<pre><code>myShadowUpdateCallback, ValueError: Invalid JSON file.\n</code></pre>\n"
    }, {
        "tags": ["firebase", "arduino", "google-cloud-platform", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 474,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1548793665,
        "creation_date": 1548779675,
        "last_edit_date": 1548793665,
        "question_id": 54425642,
        "link": "https://stackoverflow.com/questions/54425642/unable-to-read-data-from-firebase-in-nodemcu",
        "title": "Unable to read data from firebase in NodeMCU",
        "body": "<p>I'm trying to read and write data in firebase using nodemcu ; everything works at the beginning but after few minutes of running, <code>firebase.failed()</code> loop is getting executed every time. But the <code>firebase.error()</code> is not printing the specific error. What should I do? </p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;FirebaseArduino.h&gt;\n#include &lt;WiFiUdp.h&gt;\nWiFiUDP Udp;\n\n#define FIREBASE_HOST \"mystique12.firebaseio.com\"   \n#define FIREBASE_AUTH \"L5XkMKQkof54yoKnOJLk7mP2LHo3vTZILwZ947rO\"                                    \n#define wifiled D3\n#define LED D5\n#define button D6\nfloat val;\nint touch=0;\n\nconst char* ssid = \"Redmi 3s\";\nconst char* password = \"alohomora\";\n\n\nvoid setup() \n{\n  Serial.begin(115200);                                                  \n  pinMode(LED,OUTPUT);\n  pinMode(wifiled,OUTPUT);\n  pinMode(button,INPUT);\n  digitalWrite(LED,LOW);\n\n\n   WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED)\n  {\n   digitalWrite(wifiled, HIGH); \n   delay(500);              \n   digitalWrite(wifiled, LOW);    \n   delay(500);\n   Serial.print(\".\"); \n  }\n  Serial.println(\" connected\");\n  digitalWrite(wifiled, HIGH); \n\n\n  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);\n  Firebase.set(\"S1\",0);                     \n\n}\n\nvoid loop() \n{\n   if(digitalRead(button)==HIGH){     \n      touch+=1;\n      if(touch==1){Firebase.setFloat(\"S1\",2); }\n else if(touch==2){Firebase.setFloat(\"S1\",3); }\n else if(touch==3){Firebase.setFloat(\"S1\",1); }\n else if(touch==4){Firebase.setFloat(\"S1\",0);  touch=0;}     \n }\n\n  val=Firebase.getFloat(\"S1\");   \n  Serial.println(val); \n    if (Firebase.failed()) {                  \n  Serial.print(\"getting/val failed:\");   \n  Serial.print(Firebase.error());        \n  }\n  delay(1000);                                 \n       if(val==0){analogWrite(LED,0);   }\n  else if(val==1){analogWrite(LED,255); }\n  else if(val==2){analogWrite(LED,25);  }\n  else if(val==3){analogWrite(LED,125); }                                  \n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dQzO7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQzO7.png\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["express", "iot", "pusher", "pusher-js"],
        "is_answered": false,
        "view_count": 133,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1547360465,
        "creation_date": 1547288120,
        "question_id": 54158604,
        "link": "https://stackoverflow.com/questions/54158604/allow-existing-api-to-to-bridge-with-pusher-and-allow-preprocessing-of-payloads",
        "title": "Allow Existing API to to bridge with Pusher and allow preprocessing of payloads before transmission",
        "body": "<p>I\u2019m currently working on bidirectional communication between some IoT sensors and a mobile app using Pusher channels.</p>\n\n<p>I have been able to get Pusher working on the IoT nodes using the Arduino library and also in my React Native app. </p>\n\n<p>However, I\u2019ve hit a bit of a roadblock. My IoT sensors aren\u2019t capable of producing JSON payloads and arrays (they broadcast batches of 30 readings at 30 second intervals) due to memory constraints. Each reading can be up to 60 characters in length unprocessed and a full payload being sent every 30s would be at least 1800 bytes, then there\u2019s the header data (Auth token and session data for the sensor\u2019s context). </p>\n\n<p>I do not want to parse this hex data on my React Native app (as some comes from proprietary sensors where the protocol cannot be risked being divulged) so need it to happen on my ExpressJS API (currently handles the authentication and historic data retrieval) <strong>before</strong> it enters Pusher and pings the React Native app. </p>\n\n<h2>My questions:</h2>\n\n<ol>\n<li>If the sensor made a POST request to my Express API in which the route performed the processing from hex into nice JSON (with full text values!) - can I use the Pusher client to get this data into the correct channel? Instead of having the sensor talk straight to Pusher?</li>\n<li>Is there a way to bridge the Pusher service through my API so that the React Native app \u201cpoints\u201d to my API for the updates instead of directly to Pusher?</li>\n</ol>\n\n<p>Here is the architecture that I\u2019m trying to achieve - hoping those of you who have experience with Pusher can tell me if this is possible:\n<a href=\"https://i.stack.imgur.com/R2YOQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R2YOQ.png\" alt=\"Architecture Diagram\"></a></p>\n\n<p>I\u2019ve seen the \u201cpusher-http-node\u201d server library but there\u2019s no tangible description of why this would be used. </p>\n\n<p>Really hoping I don\u2019t need to go down the MQTT route and have my own micro service (something I\u2019ve wanted to avoid given the costs and scalability concerns). </p>\n"
    }, {
        "tags": ["sql", "arduino", "connection", "iot", "arduino-ultra-sonic"],
        "is_answered": true,
        "view_count": 11171,
        "favorite_count": 0,
        "score": -5,
        "last_activity_date": 1546724406,
        "creation_date": 1499878484,
        "question_id": 45063576,
        "link": "https://stackoverflow.com/questions/45063576/arduino-to-sql-server",
        "title": "Arduino To SQL Server",
        "body": "<p>Anyone who can Help me, Please tell me How to send ultrasonic detection readings from Arduino to SQL Server using Ethernet Cable? Need Code or Helping material or Link. I don't want to send it by using any Wifi module to Arduino just by using Ethernet Cable.</p>\n"
    }, {
        "tags": ["iot", "esp8266", "micropython"],
        "is_answered": false,
        "view_count": 163,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1546672918,
        "creation_date": 1546619997,
        "last_edit_date": 1546636380,
        "question_id": 54042907,
        "link": "https://stackoverflow.com/questions/54042907/not-able-to-detect-flash-button-pressed-on-nodemcu",
        "title": "Not able to detect flash button pressed on Nodemcu",
        "body": "<p>I am working with simple Micropython with Esp8266 module and not able to detect if flash button on esp is pressed</p>\n\n<p>I tried using pin 0 but it is not working.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>p2=Pin(0,Pin.IN)\nwhile True:\n    print(p2.value())\n    if p2.value():\n        break;\n</code></pre>\n\n<p>I also tried this but it is also not working as expected.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>p2 = Pin(0,Pin.PULL_DOWN)\nwhile True:\n    print(p2.value())\nif p2.value():\n        break;\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 297,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1546027522,
        "creation_date": 1546023257,
        "last_edit_date": 1546027522,
        "question_id": 53963111,
        "link": "https://stackoverflow.com/questions/53963111/both-my-nodemcu-and-my-esp01-turn-off-after-a-few-minutes",
        "title": "Both my NodeMCU and my ESP01 turn off after a few minutes",
        "body": "<p>I am trying to make a simple hardware to turn off and on a lamp in my room remotely using a database I have. For this i wanted to use ESP8266 in the ESP-01 board.</p>\n\n<p>For workbench testing I have a 2 amps 5v source. I used a 3.3V regulator (LD33V) to turn the ESP-01 on and managed to make a connection with a database where I have the \"on/off flag\". Works like a charm with a LED and a 330 ohms resistor.</p>\n\n<p>Thing is after a few moments (I have not measured, but only a few minutes), the board turns off completely. I realised it could be an excessive current drain, so I uploaded the same code to a NodeMCU board and powered it with a cellphone charger, turning on and off the in-board LED. The same happened.</p>\n\n<p>I am guessing it can be a software issue, because it doesn't seem to be hardware after these tests. Maybe I need to set any virtual flag, or something.</p>\n\n<p>The ESP-01 has the following in the pins:\nVCC: 3.3V from the regulator<br>\nGND: 0V from the regulator<br>\nGPI02: 330 ohms resistor and the LED<br>\nGPIO0: floating (yes, I do ground it when programming)<br>\nTX / RX: floating<br>\nRST: Vcc<br>\nCH_PD (enable): Vcc</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266mDNS.h&gt;\n\n#include &lt;MySQL_Connection.h&gt;\n#include &lt;MySQL_Cursor.h&gt;\n\n#define led 2 //pin of the external led\n\n// Inicializa\u00e7\u00e3o do WiFi\nconst char* ssid = \"xxxxxx\";\nconst char* pass = \"xxxxxx\";\nbyte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED }; // made-up MAC\n\nWiFiClient client;\n\n// Inicializa\u00e7\u00e3o do MySQL\nMySQL_Connection conn((Client *)&amp;client);\n// Create an instance of the cursor passing in the connection\nMySQL_Cursor cur = MySQL_Cursor(&amp;conn);\nIPAddress server_addr(XXX, XXX , XXX, XXX);          // MySQL server IP\nchar user[] = \"xxxxxx\";           // MySQL user\nchar password[] = \"xxxxxx\";       // MySQL password\nchar BANCODEDADOS[] = \"USE xxxxxx\";\n\nvoid toggle_lamp(void){\n\n  // FAZ UM SELECT SIMPLES\n  char query[] = \"SELECT STATUS FROM devices WHERE ID = 1\";\n  MySQL_Cursor *cur_mem = new MySQL_Cursor(&amp;conn);\n  cur_mem-&gt;execute(query);\n  Serial.println(\"\");\n  Serial.print(\"Executando query: \");\n  Serial.println(query);\n\n  // Fetch the columns (required) but we don't use them.\n  column_names *columns = cur_mem-&gt;get_columns();\n\n  // Read the row (we are only expecting the one)\n  row_values *row = NULL;\n  //char* result = NULL;\n  int lamp_status;\n\n  do {\n    row = cur_mem-&gt;get_next_row();\n    if (row != NULL) {\n     // result = row-&gt;values[0];\n     lamp_status = atoi(row-&gt;values[0]);\n\n    }\n  } while (row != NULL);\n\n  // Deleting the cursor also frees up memory used\n  delete cur_mem;\n\n  // USA O RESULTADO PARA ACENDER UM LED\n  //int lamp_status = atoi(result);\n  //Serial.println(result);\n  Serial.println(lamp_status);\n  if(lamp_status == 1){\n    digitalWrite(led,HIGH); \n  }\n  else{\n    lamp_status = 0;\n    digitalWrite(led,LOW);\n\n  }\n\n}\n\nvoid setup(void){\n\n  // Define a sa\u00edda como output\n  pinMode(led,OUTPUT);\n\n  // Inicializa a porta Serial\n  Serial.begin(115200);\n  Serial.println(\"\");\n\n  // Inicializa a conex\u00e3o WiFi\n  WiFi.mode(WIFI_STA);\n  WiFi.begin(ssid, pass);\n\n  // Wait for connection\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.print(\"Connected to \");\n  Serial.println(ssid);\n  Serial.print(\"IP address: \");\n  Serial.println(WiFi.localIP());\n\n  // REALIZA A CONEX\u00c3O COM O MYSQL\n  if (conn.connect(server_addr, 3306, user, password)) \n   {\n      delay(1000);\n\n      // Initiate the query class instance\n      MySQL_Cursor *cur_mem = new MySQL_Cursor(&amp;conn);\n      cur_mem-&gt;execute(BANCODEDADOS);\n\n      Serial.println(\"\");\n      Serial.println(\"Conectado ao MySQL\");\n      Serial.print(\"Usuario:\");\n      Serial.println(user);\n   }\n   else\n   {\n      Serial.println(\"A conex\u00e3o falhou\");\n      conn.close();\n   }\n\n} // end setup()\n\nvoid loop(void){\n\n  toggle_lamp();\n  delay(1250);\n\n}\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp32"],
        "is_answered": false,
        "view_count": 453,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1545282421,
        "creation_date": 1545060372,
        "last_edit_date": 1545068804,
        "question_id": 53818218,
        "link": "https://stackoverflow.com/questions/53818218/client-connect-additional-parameters-query",
        "title": "client.connect() additional parameters - query",
        "body": "<p>I use ESP32 as client for my socket.io server application. I need ESP32 to send MAC Address as query within \"connect\" method. In my browser I can do:</p>\n\n<pre><code>io('localhost:2000', {query: { mac: 222222 }})\n</code></pre>\n\n<p>I need ESP32 to do the same thing, but I am limited to the WiFiClient library, which I can use for a basic connection to the server:</p>\n\n<pre><code>client.connect(host, port)\n</code></pre>\n\n<p>But I want to send additional information, for example:</p>\n\n<pre><code>client.connect(host, port, query)\n</code></pre>\n"
    }, {
        "tags": ["python", "raspberry-pi3", "iot"],
        "is_answered": false,
        "view_count": 630,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1544367872,
        "creation_date": 1544367872,
        "question_id": 53693623,
        "link": "https://stackoverflow.com/questions/53693623/recording-data-into-csv-files-from-dht11",
        "title": "Recording data into CSV files from DHT11",
        "body": "<p>Code below is designed so when the motion sensor is triggered it starts recording data from the DHT11. The data is then sent to a site called cayenne for data transfer. The issue is that the data being recorded and sent to cayenne is not being stored into the CSV file that is also created. It successfully prints the titles for each piece of data, however the figures being read are not being printed.\nUses Raspberry Pi 3B+, DHT11 Temperature and Humidity sensor and PIR motion sensor.</p>\n\n<pre><code>import sys\nimport os \n\nimport Adafruit_DHT as dht\nimport cayenne.client\n\nimport RPi.GPIO as GPIO\n\n# Added to deal with RPi 3B+\nimport platform\nimport re\n\nimport time \nfrom time import strftime \nimport datetime\n\n#Cayenne authentification info stuff\nMQTT_USERNAME=\"4ff7bed0-f66b-11e8-a08c-c5a286f8c00d\"\nMQTT_PASSWORD=\"82e9cd4df60e9a8e864d0f4f80262322ad692068\"\nMQTT_CLIENT_ID=\"66751010-f7d6-11e8-898f-c12a468aadce\"\n\n\nclient = cayenne.client.CayenneMQTTClient()\nclient.begin(MQTT_USERNAME, MQTT_PASSWORD, MQTT_CLIENT_ID)\n\n# DHT sensor connected to Raspberry Pi to GPIO dhtpin. \ndhtpin = 3 #pin03 is BCM2; 2 in BOARD\n# Pin for Pir sensor\npirsensor = 17  # BOARD11\n\n#GPIO.setmode(GPIO.BOARD) #for using the WiringPi numbers\nGPIO.setmode(GPIO.BCM) #for the Broadcom numbers instead of the WiringPi numbers\n#GPIO.setwarnings(False)\nGPIO.setup(dhtpin, GPIO.OUT)  # Set dhtpin as an output\n\nGPIO.setup(pirsensor,GPIO.IN) #Set pirsensor to input\n\n# Sensor should be set to Adafruit_DHT.DHT11, Adafruit_DHT.DHT22, or Adafruit_DHT.AM2302. \nsensor = dht.DHT11 \n\n# Set Duration in second between two mesures. \nperiod =  1\n\n# Pir status\nstate = 0\n\n\n#Create the log file in CSV format with header columns\nwith open('dhtpir.csv', 'a+') as f:\n    f.write(\" DATE &amp; TIME \\t \" + \" , \\t\"+ \"% HUMIDITY \" + \" , \" + \"T(Celcius)\" + \" , \\t\" + \" T(Fahrenheit),\\n\")\n\n\nwhile True: \n    # Note that sometimes you won't get a reading and the results will be null \n    # (because Linux can't guarantee the timing of calls to read the sensor). \n    # If this happens try again!\n    client.loop()\n    # Pir \n    time.sleep(0.1)\n    state = GPIO.input(pirsensor)\n    if state == 1:\n        humidity,tempC = dht.read_retry(dht.DHT11, dhtpin)\n        #Convert from Celcius to Farenheit\n        tempF = (9.0/5.0)*(tempC)+32\n\n        print(\"GPIO PIR pin %s is %s\" % (pirsensor, state))\n\n\n        #Get the data\n\n        if humidity is not None and tempC is not None:\n        # Get the timestamp\n            timestamp = datetime.datetime.now().strftime(\"%Y%m%d %H:%M:%S\")\n\n            client.celsiusWrite(1, tempC)\n            client.luxWrite(2, humidity)\n\n            # Print data to the terminal \n            print('{}'.format(timestamp),'\\t Humidity: {0:0.1f}% Temperature: {1:0.1f} C'.format(humidity, tempC) , '({0:0.1f} F)'.format(tempF)), # print temperature in Celcius\n            # Fill the previously created log wile with the sensor data in csv format\n            # \n            with open('dhtpir.csv', 'a+') as f:\n                f.write('{}'.format(timestamp)+ \" , \\t\" + (repr(humidity))+\"%\" + \" , \\t\" + str(tempC)+\" C\" + \" , \\t\" + '{0:0.1f} F,'.format(tempF) + \" \\n\"),\n                #f.write(timestamp + \" , \\t\" + (repr(humidity))+\"%\" + \" , \\t\" + str(tempC)+\" C\" + \" , \\t\" +  str(tempF) + \" F\\n\"), # just a different formating output\n                f.close() # not absolutly needed when using the 'with' syntax\n\n        else:\n            print('Exiting: failed to get reading.\\n Try again!')  \n            with open('dhtpir.csv', 'a+') as f:\n                f.write('{}'.format(timestamp)+ \" , \\t Exiting: failed to get reading.\\n Try again!\")\n                f.close()\n            sys.exit(1)\n        # Wait for the period in second between data reading\n        time.sleep(period)\n\n\nGPIO.cleanup()\n</code></pre>\n"
    }, {
        "tags": ["raspberry-pi3", "iot", "raspbian", "node-red", "grovepi+"],
        "is_answered": false,
        "view_count": 124,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1544304844,
        "creation_date": 1544304844,
        "question_id": 53687189,
        "link": "https://stackoverflow.com/questions/53687189/grovepi-cannot-find-module-i2c-bus",
        "title": "GrovePi / Cannot find module &#39;i2c-bus&#39;",
        "body": "<p>I would like to use Node-Red on my RaspberryPi B 3+ with GrovePi, but I get the same error message every time again and again.</p>\n\n<p><code>[node-red-contrib-grovepi/grovepi] Error: Cannot find module 'i2c-bus'</code></p>\n\n<p>i2c is enabled in the <code>raspi-config</code> and I have everything installed that I've read on Node-Red/RPI Configuration.</p>\n\n<p>Thanks to all!</p>\n"
    }, {
        "tags": ["raspberry-pi3", "iot", "gpio", "spi", "android-things"],
        "is_answered": false,
        "view_count": 92,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1541823314,
        "creation_date": 1540571819,
        "last_edit_date": 1541823314,
        "question_id": 53013014,
        "link": "https://stackoverflow.com/questions/53013014/how-to-use-ad7490-with-android-things",
        "title": "How to use ad7490 with android things?",
        "body": "<p>How to use ad7490 ADC in Android Things?</p>\n\n<p>I have a sensor 16x16 Sensor Matrix. For this sensor matrix i want to read data of the each cell and position. I want to implement ad7490 ADC with the help of SPI and GPIO Pins connection. </p>\n\n<p>My requirement is, how to read ad7490 A2D value on SPI pin.</p>\n\n<p>Note : I had also implemented this on arduino uno using ic 7495 shift register and 74hc4067 mux. By these i am able to generate 16x16 matrix and read Analog data of each position. Now i want to implement same thing in android things with ad7490</p>\n"
    }, {
        "tags": ["python", "tcp", "iot", "modbus", "pymodbus"],
        "is_answered": false,
        "view_count": 758,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1541092073,
        "creation_date": 1541092073,
        "question_id": 53106048,
        "link": "https://stackoverflow.com/questions/53106048/pymodbus-getting-address-of-slave",
        "title": "Pymodbus getting address of slave",
        "body": "<p>I am working on a project where I am connecting two MOXA boxes to a raspberry pi. I am using pymodbus to connect to the device, and some LEDs are connected so I'm able to write to the coil and light them up.</p>\n\n<p>I am using the code below:</p>\n\n<pre><code>import time\nimport logging\nlogging.basicConfig()\nlog = logging.getLogger()\nlog.setLevel(logging.DEBUG)\n\nfrom pymodbus.client.sync import ModbusTcpClient as ModbusClient\n\nclient = ModbusClient('x.x.x.x', port=502)\nclient.connect()\n\nclient.write_coil(2, True, unit=1)\nclient.write_coil(2, False, unit=1)\n</code></pre>\n\n<p>This turns the LED on and off, and if I increase the first number it lights up the next one etc. HOWEVER, the problem is that I cannot access the slave unit and its coils. </p>\n\n<p>In the admin panel I have checked the \"Enable Modbus/TCP Slave Protocol\" but I do not have a unit ID nor address to the slave unit. The slave is connected to the master through an ethernet cable, and the master is connected to the network through another ethernet cable. </p>\n\n<p>I have googled my brains out, but can't find where to get hold of the ID? </p>\n"
    }, {
        "tags": ["iot", "beagleboneblack", "gpio"],
        "is_answered": false,
        "view_count": 368,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1539025993,
        "creation_date": 1538765821,
        "last_edit_date": 1538921980,
        "question_id": 52671782,
        "link": "https://stackoverflow.com/questions/52671782/beaglebone-black-how-to-turn-pins-on-off-programatically",
        "title": "Beaglebone Black: How to turn pins on/off programatically?",
        "body": "<p>I have a Beaglebone Black from which I use the some VCC pin. I need to programatically turn on/off VCC pins. \nSay, the VCC pin number is #5, I am looking for some Linux command that will turn that particular pin on/off.</p>\n\n<p>Is it possible via command line? or, there are some other way? is it possible at all? </p>\n\n<p>please help.</p>\n"
    }, {
        "tags": ["iot", "z-wave", "domoticz"],
        "is_answered": false,
        "view_count": 40,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1538638390,
        "creation_date": 1538638390,
        "question_id": 52641349,
        "link": "https://stackoverflow.com/questions/52641349/garage-door-opening-in-the-middle-of-the-night",
        "title": "Garage door opening in the middle of the night",
        "body": "<p>I use the stable version of Domoticz on a raspberry pi.</p>\n\n<p>I have never experienced any major issues, however yesterday I was unable to open the garage door which works with a simple switch. The GUI of the application worked fine, however the garage door didn't respond and I could see the zWave USB light flickering heavily.</p>\n\n<p>The next morning I saw in the logs that the switch was turned on and off multiple times at night in a period of a couple seconds. It seems it kept the actions in a queue and executed them when the device was responsive again.</p>\n\n<p>So here's my question: Can I turn this queue off? I don't like my garage door opening and closing at the middle of the night.</p>\n"
    }, {
        "tags": ["javascript", "iot", "esp8266", "espruino"],
        "is_answered": true,
        "view_count": 370,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1538233288,
        "creation_date": 1538226019,
        "question_id": 52568612,
        "link": "https://stackoverflow.com/questions/52568612/can-anyone-tell-if-i-can-flash-javascript-code-on-wemos-d1-mini",
        "title": "Can anyone tell if i can flash javascript code on wemos d1 mini?",
        "body": "<p>I am trying to figure out whether I can run javascript code on wemos d1 mini with esp-8266 chip, I was able to find resources on Arduino but not on wemos.</p>\n"
    }, {
        "tags": ["iot", "esp8266", "nodemcu"],
        "is_answered": false,
        "view_count": 141,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1537513375,
        "creation_date": 1536996677,
        "last_edit_date": 1537012839,
        "question_id": 52342641,
        "link": "https://stackoverflow.com/questions/52342641/arduino-sketch-for-nodemcu-v1-0-esp8266-12e-have-no-error-of-compiling-but-not",
        "title": "Arduino sketch for NodeMCU v1.0 (ESP8266-12E) have no error of compiling but not working on NodeMCU v1.0 (ESP8266-12E) Board",
        "body": "<p>I compiled an Arduino Sketch for NodeMCU v1.0 (ESP8266-12E) which have no error while i test with verifiy button in Arduino IDE 1.8.6 but i don't know what is the problem when i upload and test it . it [ NodeMCU v1.0 (ESP8266-12E) ] is not showing an static IP address while there is turned ON WiFi hotspot from my android phone.\nI'm sharing two codes (code 1, code 2) here. Code 1 is modified form of code 2.</p>\n\n<p>Code 2 connect to the WiFi Hotspot but i make changes in code 2 to make code 1 for desired output which is not working. Need help for making proper code.</p>\n\n<p>For better understanding, what i want you can check <a href=\"https://www.youtube.com/watch?v=A-UUTwhI3Kw\" rel=\"nofollow noreferrer\">this video</a> on Youtube or by typing in search bar in youtube.com</p>\n\n<p>Home automation circuit using NodeMCU v1.0 (ESP8266-12E).</p>\n\n<pre><code>**code 1**\n\n#include\nint pin1 = 2; // GPIO 14 (D5) \nint pin2 = 3; // GPIO 5 (D1) \nint pin3 = 6; // GPIO 5 (D2)\n\nconst char* ssid = \"wifi\"; \nconst char* password = \"12345678\";\n\nWiFiServer server(80);\n\nvoid setup() {\n\nSerial.begin(115200); \ndelay(10);\n\npinMode(2, OUTPUT); \npinMode(3, OUTPUT);\npinMode(6, OUTPUT);\n\n// Connect to WiFi network\n Serial.println();\nSerial.println();\nSerial.print(\"Connecting to \");\nSerial.println(ssid);\n\nWiFi.begin(ssid, password);\n\n while (WiFi.status() != WL_CONNECTED) {\n  delay(500);\n  Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.println(\"WiFi connected\");\n\n// Start the server\n  server.begin();\n  Serial.println(\"Server started\");\n\n// Print the IP address\n  Serial.print(\"Use this URL to connect: \");\n  Serial.print(\"http://\");\n  Serial.print(WiFi.localIP());\n  Serial.println(\"/\");\n\n}\n\nvoid loop() {\n  // Check if a client has connected\n  WiFiClient client = server.available();\n  if (!client) {\n  return;\n}\n\n// Wait until the client sends some data\n  Serial.println(\"new client\");\n  while(!client.available()){\n  delay(1);\n}\n// Read the first line of the request\n  String request = client.readStringUntil('\\r');\n  Serial.println(request);\n  client.flush();\n// Match the request\n  int value = LOW;\n  if (request.indexOf(\"/pin1=ON\") != -1) {\n  digitalWrite(2, HIGH);\n  value = HIGH;\n\n}\n  if (request.indexOf(\"/pin1=OFF\") != -1) {\n  digitalWrite(2, LOW);\n  value = LOW;\n\n}\n\n  if (request.indexOf(\"/pin2=ON\") != -1) {\n  digitalWrite(3, HIGH);\n  value = HIGH;\n\n}\n  if (request.indexOf(\"/pin2=OFF\") != -1) {\n  digitalWrite(3, LOW);\n  value = LOW;\n\n}\n\n  if (request.indexOf(\"/pin3=ON\") != -1) {\n  digitalWrite(6, HIGH);\n  value = HIGH;\n\n}\n  if (request.indexOf(\"/pin3=OFF\") != -1) {\n  digitalWrite(6, LOW);\n  value = LOW;\n\n}\n\n\n// Set ledPin according to the request\n//digitalWrite(ledPin, value);\n// Return the response\n// Return the response\n  client.println(\"HTTP/1.1 200 OK\");\n  client.println(\"Content-Type: text/html\");\n  client.println(\"\"); //  do not forget this one\n  client.println(\"&lt;!DOCTYPE HTML&gt;\");\n  client.println(\"&lt;html&gt;\");\n  client.println(\"&lt;head&gt;\");\n  client.println(\"&lt;meta name='apple-mobile-web-app-capable' content='yes' /&gt;\");\n  client.println(\"&lt;meta name='apple-mobile-web-app-status-bar-style' content='black-translucent' /&gt;\");\n  client.println(\"&lt;/head&gt;\");\n  client.println(\"&lt;body bgcolor = \\\"#f7e6ec\\\"&gt;\");\n  client.println(\"&lt;hr/&gt;&lt;hr&gt;\");\n  client.println(\"&lt;h4&gt;&lt;center&gt;Wifi Based Project&lt;/center&gt;&lt;/h4&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;hr/&gt;&lt;hr&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"&lt;a href=\\\"/a\\\"\\\"&gt;&lt;button&gt;Data &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"Load 1\");\n  client.println(\"&lt;a href=\\\"/l1on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\n  client.println(\"&lt;a href=\\\"/l1off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"Load 2\");\n  client.println(\"&lt;a href=\\\"/l2on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\n  client.println(\"&lt;a href=\\\"/l2off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"Load 3\");\n  client.println(\"&lt;a href=\\\"/l3on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\n  client.println(\"&lt;a href=\\\"/l3off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;center&gt;\");\n  client.println(\"&lt;table border=\\\"5\\\"&gt;\");\n  client.println(\"&lt;br&gt;&lt;br&gt;\");\n  client.println(\"&lt;tr&gt;\");\n\n  if(digitalRead(pin1)){client.print(\"&lt;td&gt;Load 1 is ON&lt;/td&gt;\");}\n  else{client.print(\"&lt;td&gt;Load 1 is OFF&lt;/td&gt;\");}\n\n  if(digitalRead(pin2)){client.print(\"&lt;td&gt;Load 2 is ON&lt;/td&gt;\");}\n  else{client.print(\"&lt;td&gt;Load 2 is OFF&lt;/td&gt;\");}\n\n  if(digitalRead(pin3)){client.print(\"&lt;td&gt;Load 3 is ON&lt;/td&gt;\");}\n  else{client.print(\"&lt;td&gt;Load 3 is OFF&lt;/td&gt;\");}\n\n\n  client.println(\"&lt;/tr&gt;\");\n  client.println(\"&lt;/table&gt;\");\n  client.println(\"&lt;/center&gt;\");\n  client.println(\"&lt;/html&gt;\");\n  delay(1);\n  Serial.println(\"Client disonnected\");\n  Serial.println(\"\");\n\n}\n</code></pre>\n\n<p>if you will upload this code in your NodeMCU v1.0 (ESP8266-12E) , this will \nconnect with your Android phone. You can consider it, code 2 and above code 1.</p>\n\n<p><strong>code 2</strong></p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n\nint pin1 = 14; // GPIO 14 (D5)\nint pin2 = 5; // GPIO 5 (D1)\nint pin3 = 4; // GPIO 5 (D2)\n\nconst char* ssid = \"wifi\";\nconst char* password = \"12345678\";\n\nWiFiServer server(80);\n\nvoid setup()\n{\n\nSerial.begin(115200);\ndelay(10);\n\npinMode(pin1, OUTPUT);\npinMode(pin2, OUTPUT);\npinMode(pin3, OUTPUT);\n\n// Connect to WiFi network\nSerial.println();\nSerial.println();\nSerial.print(\"Connecting to \");\nSerial.println(ssid);\n\nWiFi.begin(ssid, password);\n\nwhile (WiFi.status() != WL_CONNECTED) {\ndelay(500);\nSerial.print(\".\");\n}\nSerial.println(\"\");\nSerial.println(\"WiFi connected\");\n\n// Start the server\nserver.begin();\nSerial.println(\"Server started\");\n\n// Print the IP address\nSerial.print(\"Use this URL to connect: \");\nSerial.print(\"http://\");\nSerial.print(WiFi.localIP());\nSerial.println(\"/\");\n\n}\n\n\nvoid loop() {\n// Check if a client has connected\nWiFiClient client = server.available();\nif (!client) {\nreturn;\n}\n\n// Wait until the client sends some data\nSerial.println(\"new client\");\nwhile(!client.available()){\ndelay(1);\n}\n\n\n// Read the first line of the request\nString request = client.readStringUntil('\\r');\nSerial.println(request);\nclient.flush();\n\n\n\n\n// Read the first line of the request\nString request = client.readStringUntil('\\r');\nSerial.println(request);\nclient.flush();\n\nif (request.indexOf(\"/l1on\") &gt; 0)  {\ndigitalWrite(pin1, HIGH);\n\n}\nif (request.indexOf(\"/l1off\") &gt;0)  {\ndigitalWrite(pin1, LOW);\n\n}\n\nif (request.indexOf(\"/l2on\") &gt; 0)  {\ndigitalWrite(pin2, HIGH);\n\n}\nif (request.indexOf(\"/l2off\") &gt;0)  {\ndigitalWrite(pin2, LOW);\n\n}\nif (request.indexOf(\"/l3on\") &gt;0)  {\ndigitalWrite(pin3, HIGH);\n\n}\nif (request.indexOf(\"/l3off\") &gt; 0)  {\ndigitalWrite(pin3, LOW);\n\n}\n\n\n// Set ledPin according to the request\n//digitalWrite(ledPin, value);\n\n// Return the response\nclient.println(\"HTTP/1.1 200 OK\");\nclient.println(\"Content-Type: text/html\");\nclient.println(\"\"); //  do not forget this one\nclient.println(\"&lt;!DOCTYPE HTML&gt;\");\nclient.println(\"&lt;html&gt;\");\nclient.println(\"&lt;head&gt;\");\nclient.println(\"&lt;meta name='apple-mobile-web-app-capable' content='yes' /&gt;\");\nclient.println(\"&lt;meta name='apple-mobile-web-app-status-bar-style' content='black-translucent' /&gt;\");\nclient.println(\"&lt;/head&gt;\");\nclient.println(\"&lt;body bgcolor = \\\"#f7e6ec\\\"&gt;\");\nclient.println(\"&lt;hr/&gt;&lt;hr&gt;\");\nclient.println(\"&lt;h4&gt;&lt;center&gt;Wifi Based Project&lt;/center&gt;&lt;/h4&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;hr/&gt;&lt;hr&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"&lt;a href=\\\"/a\\\"\\\"&gt;&lt;button&gt;Data &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"Load 1\");\nclient.println(\"&lt;a href=\\\"/l1on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\nclient.println(\"&lt;a href=\\\"/l1off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"Load 2\");\nclient.println(\"&lt;a href=\\\"/l2on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\nclient.println(\"&lt;a href=\\\"/l2off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"Load 3\");\nclient.println(\"&lt;a href=\\\"/l3on\\\"\\\"&gt;&lt;button&gt;Turn On &lt;/button&gt;&lt;/a&gt;\");\nclient.println(\"&lt;a href=\\\"/l3off\\\"\\\"&gt;&lt;button&gt;Turn Off &lt;/button&gt;&lt;/a&gt;&lt;br /&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;center&gt;\");\nclient.println(\"&lt;table border=\\\"5\\\"&gt;\");\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"&lt;tr&gt;\");\n\nif(digitalRead(pin1)){client.print(\"&lt;td&gt;Load 1 is ON&lt;/td&gt;\");}\nelse{client.print(\"&lt;td&gt;Load 1 is OFF&lt;/td&gt;\");}\n\nif(digitalRead(pin2)){client.print(\"&lt;td&gt;Load 2 is ON&lt;/td&gt;\");}\nelse{client.print(\"&lt;td&gt;Load 2 is OFF&lt;/td&gt;\");}\n\nif(digitalRead(pin3)){client.print(\"&lt;td&gt;Load 3 is ON&lt;/td&gt;\");}\nelse{client.print(\"&lt;td&gt;Load 3 is OFF&lt;/td&gt;\");}\n\n\nclient.println(\"&lt;/tr&gt;\");\nclient.println(\"&lt;/table&gt;\");\nclient.println(\"&lt;/center&gt;\");\nclient.println(\"&lt;/html&gt;\");\ndelay(1);\nSerial.println(\"Client disonnected\");\nSerial.println(\"\");\n\n}\n</code></pre>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "sensors"],
        "is_answered": true,
        "view_count": 394,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1534838477,
        "creation_date": 1534835291,
        "question_id": 51943364,
        "link": "https://stackoverflow.com/questions/51943364/raspberry-check-electric-current",
        "title": "Raspberry, check electric current",
        "body": "<p>I've searched for many hours a way to detect if electric current is flowing or not using a Raspberry without success.</p>\n\n<p>The problem that I'm facing up is, using a Raspberry (powered by an uninterruptible power supply), detect if electric current in my house is ON or not. \nSometimes the electric current goes down because we've too many devices connected and when the fridge is down for some days is not a good surprise when you discover this.</p>\n\n<p>Do someone have a solution?</p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["http", "post", "arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 887,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1534671498,
        "creation_date": 1534671498,
        "question_id": 51916363,
        "link": "https://stackoverflow.com/questions/51916363/nodemcu-ets-jan-8-2013-rst-cause4-boot-mode3-6-wet-reset-issue",
        "title": "NodeMCU ets Jan 8 2013,rst cause:4, boot mode:(3,6) wet reset issue?",
        "body": "<p>this is the code I'm using from the mathworks website; <a href=\"https://in.mathworks.com/help/thingspeak/MoistureMonitor.html\" rel=\"nofollow noreferrer\">https://in.mathworks.com/help/thingspeak/MoistureMonitor.html</a></p>\n\n<p>I'm using it to connect a soil sensor to my NodeMCU board and then log the data via HTTP POST to ThingSpeak IOT server. My serial reading is as follows:</p>\n\n<p>ets Jan  8 2013,rst cause:4, boot mode:(3,6)</p>\n\n<p>wdt reset</p>\n\n<p>Please check out the code and help me out. Thanks!</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n\n// Network information.\n\n\n     #define WIFI_NAME \"Balasundar-EXT\"\n     #define PASSWORD \"9900002967\"\n\n// Hardware information.\n\n    #define SENSOR_POWER 6                  // Connect the power for the soil sensor here.\n    #define SOIL_PIN A0                     // Connect the sensor output pin here.\n    #define TIMEOUT  5000                  // Timeout for server response.\n    #define SLEEP_TIME_SECONDS 1800\n// ThingSpeak information.\n#define NUM_FIELDS 2                               // To update more fields, increase this number and add a field label below.\n#define SOIL_MOISTURE_FIELD 1                      // ThingSpeak field for soil moisture measurement.\n#define ELAPSED_TIME_FIELD 2                       // ThingSpeak Field for elapsed time from startup.\n#define THING_SPEAK_ADDRESS \"api.thingspeak.com\"\nString writeAPIKey=\"JBNXNMFKVWQJ1NNV\";             // Change this to your channel Write API key.\n\n// Global variables. \nint numMeasure = 5;                                // Number of measurements to average.\nint ADCValue = 0;                                  // Moisture sensor reading.\n\nWiFiClient client;\n\n  // Put your setup code here, to run once:\nvoid setup()\n{\n    Serial.begin( 115200 );   // You may need to adjust the speed depending on your hardware.\n    connectWifi();\n    pinMode( SENSOR_POWER , OUTPUT );\n    digitalWrite( SENSOR_POWER , LOW );   // Set to LOW so no power is flowing through the sensor.\n}\n\n  // Put your main code here, to run repeatedly:\nvoid loop()\n{\n    // You can fill fieldData with up to 8 values to write to successive fields in your channel.\n    String fieldData[ NUM_FIELDS ];  \n\n    // You can write to multiple fields by storing data in the fieldData[] array, and changing numFields.        \n    // Write the moisture data to field 1.\n    fieldData[ SOIL_MOISTURE_FIELD ] = String( readSoil( numMeasure ) ); \n    Serial.print( \"Soil Moisture = \" );\n    Serial.println( fieldData[ SOIL_MOISTURE_FIELD ] );\n\n    // Write the elapsed time from startup to Field 2.\n    fieldData[ ELAPSED_TIME_FIELD ] = String( millis() ); \n\n    HTTPPost( NUM_FIELDS , fieldData );\n\n    delay( 1000 );\n    Serial.print( \"Goodnight for \"+String( SLEEP_TIME_SECONDS ) + \" Seconds\" );\n    ESP.deepSleep( SLEEP_TIME_SECONDS * 1000000 );\n    // If you remove the sleep, add delay so you don't post to ThingSpeak too often.\n    // delay( 20000 );\n}\n\n// This function reads the soil moisture sensor name times and returns the average.\nlong readSoil(int numAve)\n{\n  long ADCValue = 0;\n\n  for ( int i = 0; i &lt; numAve; i++ ) {\n    digitalWrite( SENSOR_POWER, HIGH );  // Turn power to device on\n    delay(10);    // Wait 10 milliseconds for sensor to settle\n    ADCValue += analogRead( SOIL_PIN );     // Read the value from sensor\n    digitalWrite( SENSOR_POWER, LOW );   // Turn power to device off\n  }\n\n  ADCValue = ADCValue / numAve;\n  return ADCValue;                    // Return the moisture value.\n}\n\n// Connect to the local WiFi network\nint connectWifi()\n{\n\n    while (WiFi.status() != WL_CONNECTED) {\n        WiFi.begin( WIFI_NAME , PASSWORD );\n        Serial.println( \"Connecting to WiFi\" );\n        delay( 2500 );\n    }\n    Serial.println( \"Connected\" );  // Inform the serial monitor.\n}\n\n    // This function builds the data string for posting to ThingSpeak\n    // and provides the correct format for the wifi client to communicate with ThingSpeak.\n    // It will post \"numFields\" worth of data entries, and takes the\n    // data from the fieldData parameter passed to it. \n\nint HTTPPost( int numFields , String fieldData[] ){\n\n    if (client.connect( THING_SPEAK_ADDRESS , 80 )){\n\n       // Build the Posting data string.  \n       // If you have multiple fields, make sure the sting does not exceed 1440 characters.\n       String postData= \"api_key=\" + writeAPIKey ;\n       for ( int fieldNumber = 1; fieldNumber &lt; numFields+1; fieldNumber++ ){\n            String fieldName = \"field\" + String( fieldNumber );\n            postData += \"&amp;\" + fieldName + \"=\" + fieldData[ fieldNumber ];\n\n            }\n\n        // POST data via HTTP\n        Serial.println( \"Connecting to ThingSpeak for update...\" );\n        Serial.println();\n\n        client.println( \"POST /update HTTP/1.1\" );\n        client.println( \"Host: api.thingspeak.com\" );\n        client.println( \"Connection: close\" );\n        client.println( \"Content-Type: application/x-www-form-urlencoded\" );\n        client.println( \"Content-Length: \" + String( postData.length() ) );\n        client.println();\n        client.println( postData );\n\n        Serial.println( postData );\n\n        String answer=getResponse();\n        Serial.println( answer );\n    }\n    else\n    {\n      Serial.println ( \"Connection Failed\" );\n    }\n\n}\n\n// Wait for a response from the server to be available, \n//and then collect the response and build it into a string.\nString getResponse(){\n  String response;\n  long startTime = millis();\n\n  delay( 200 );\n  while ( client.available() &lt; 1 &amp;&amp; (( millis() - startTime ) &lt; TIMEOUT ) ){\n        delay( 5 );\n  }\n\n  if( client.available() &gt; 0 ){ // Get response from server\n     char charIn;\n     do {\n         charIn = client.read(); // Read a char from the buffer.\n         response += charIn;     // Append the char to the string response.\n        } while ( client.available() &gt; 0 );\n    }\n  client.stop();\n\n  return response;\n}\n</code></pre>\n"
    }, {
        "tags": ["php", "iot", "pubnub", "nodemcu"],
        "is_answered": false,
        "view_count": 41,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1533954761,
        "creation_date": 1533954761,
        "question_id": 51795973,
        "link": "https://stackoverflow.com/questions/51795973/how-to-check-on-hosted-webpage-when-my-nodemcu-goes-offline",
        "title": "How to check on hosted webpage when my nodeMCU goes offline?",
        "body": "<p>I have nodeMCU sending data to database. It is visible in a webpage coded with PHP, hosted online. I need some functionality to give presence of the device. How can I make it possible for nodeMCU to show it's presence? \nI got to know about PubNub and it's services, but it seems to work only for webpages, not for hardware devices pinging back to webpage.</p>\n\n<p>Please consider, I am a noob into this. Any help will be appreciated.</p>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "iot", "ibeacon", "texas-instruments"],
        "is_answered": true,
        "view_count": 156,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1533049459,
        "creation_date": 1533048596,
        "question_id": 51616248,
        "link": "https://stackoverflow.com/questions/51616248/ti-ibeacon-configuration",
        "title": "TI iBeacon configuration",
        "body": "<p>Hello I've got some iBeacons, but I don't know anything about manufacturer, I need anyway to configure that beacons with custom UUID, Major and  Minor parameters. </p>\n\n<p>So after search around I've understand that the chip inside is an CC2541 - HMSensor. As I understand well it's produced by Texas Instruments, but unfortunately any app I've tried (Even SensorTag both on iOS and Android) to edit iBeacon tags failed, no one seems to be able to allow me change UUID, Major and Minor.</p>\n\n<p>I hope that someone could help me to understand better in which situation I am. Phisically the beacon is just the CC2541 board (<a href=\"https://www.instructables.com/id/Turn-your-CC2541-based-HM-10-Bluetooth-Smart-Modul/\" rel=\"nofollow noreferrer\">https://www.instructables.com/id/Turn-your-CC2541-based-HM-10-Bluetooth-Smart-Modul/</a>) with a module to attach a button battery.</p>\n"
    }, {
        "tags": ["c#", "iot", "curly-braces", "windows-iot-core-10"],
        "is_answered": true,
        "view_count": 69,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1532662111,
        "creation_date": 1532645568,
        "last_edit_date": 1532662111,
        "question_id": 51548529,
        "link": "https://stackoverflow.com/questions/51548529/missing-bracket-in-c-because-of-windows-iot-background-task",
        "title": "Missing bracket in C# because of Windows IoT background task?",
        "body": "<p>I have created a test app for my first Windows IoT project with raspberry pi and an ultrasonic sensor.\nI have placed some sample code in it. Visual Studio tells me that I am missing a curly bracket in \"public void run\u2026\", but that doesn't seem to be the problem.\nIs it because of the public class within the BackgroundTaskInstance?</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Net.Http;\nusing Windows.ApplicationModel.Background;\nusing Windows.Devices.Gpio;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing System.Diagnostics;\n\n// The Background Application template is documented at http://go.microsoft.com/fwlink/?LinkID=533884&amp;clcid=0x409\n\nnamespace IoTtest\n{\n    public sealed class StartupTask : IBackgroundTask\n    {\n        public void Run(IBackgroundTaskInstance taskInstance)\n        {\n            public class HCSR04\n        {\n            private GpioPin triggerPin { get; set; }\n            private GpioPin echoPin { get; set; }\n            private Stopwatch timeWatcher;\n\n            public HCSR04(int triggerPin, int echoPin)\n            {\n                GpioController controller = GpioController.GetDefault();\n                timeWatcher = new Stopwatch();\n                //initialize trigger pin.\n                this.triggerPin = controller.OpenPin(triggerPin);\n                this.triggerPin.SetDriveMode(GpioPinDriveMode.Output);\n                this.triggerPin.Write(GpioPinValue.Low);\n                //initialize echo pin.\n                this.echoPin = controller.OpenPin(echoPin);\n                this.echoPin.SetDriveMode(GpioPinDriveMode.Input);\n            }\n\n            public double GetDistance()\n            {\n                ManualResetEvent mre = new ManualResetEvent(false);\n                mre.WaitOne(500);\n                timeWatcher.Reset();\n                //Send pulse\n                this.triggerPin.Write(GpioPinValue.High);\n                mre.WaitOne(TimeSpan.FromMilliseconds(0.01));\n                this.triggerPin.Write(GpioPinValue.Low);\n                return this.PulseIn(echoPin, GpioPinValue.High);\n            }\n\n            private double PulseIn(GpioPin echoPin, GpioPinValue value)\n            {\n                var t = Task.Run(() =&gt;\n                {\n                    //Recieve pusle\n                    while (this.echoPin.Read() != value)\n                    {\n                    }\n                    timeWatcher.Start();\n\n                    while (this.echoPin.Read() == value)\n                    {\n                    }\n                    timeWatcher.Stop();\n                    //Calculating distance\n                    double distance = timeWatcher.Elapsed.TotalSeconds * 17000;\n                    return distance;\n                });\n                bool didComplete = t.Wait(TimeSpan.FromMilliseconds(100));\n                if (didComplete)\n                {\n                    return t.Result;\n                }\n                else\n                {\n                    return 0.0;\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n"
    }, {
        "tags": ["python", "raspberry-pi", "raspberry-pi3", "iot", "lcd"],
        "is_answered": true,
        "view_count": 597,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1532593840,
        "creation_date": 1530999042,
        "question_id": 51227084,
        "link": "https://stackoverflow.com/questions/51227084/display-message-on-2-16-character-lcd-using-respberry-pi-3-on-system-startup",
        "title": "Display message on 2 * 16 character lcd using respberry pi 3 on system startup",
        "body": "<p>I have <code>raspberry pi 3 B</code>. </p>\n\n<p><strong>Use case</strong>: To print <code>ip address</code> and <code>time</code> to a <code>2 * 16 character lcd</code> display on system startup or reboot.</p>\n\n<p>For this, I am using python code which is <strong>working fine</strong> when I am running from the terminal.</p>\n\n<p><strong>Problem</strong>: \nOn system startup, nothing is getting displayed in lcd screen.</p>\n\n<p><strong>Details</strong>:  </p>\n\n<p>I tried three ways:</p>\n\n<p><strong>way 1:</strong></p>\n\n<p>I have added to <code>/etc/rc.local</code> the following lines</p>\n\n<pre><code>echo \"Display ip to 2*16 char display from /etc/rc.local\" &gt;&gt; /home/pi/Workspace/python/pi-screen/logs.log\n\nsudo /usr/bin/python /home/pi/Workspace/python/pi-screen/src/display.py &gt;&gt; /home/pi/Workspace/python/pi-screen/logs-1.log\n</code></pre>\n\n<p>On system reboot it was expected that it should print to the <code>lcd display</code> but <strong>it didn't.</strong> </p>\n\n<p>When I am running <code>display.py</code> from console using <code>python display.py</code> it's running file and printing to <code>2 * 16 characters lcd display</code> as expected.</p>\n\n<p><strong>Way 2:</strong></p>\n\n<p>I have even tried adding script to <code>/etc/init.d/lcd</code>.</p>\n\n<p>when running using <code>/etc/init.d/lcd start</code> it worked but on system startup but it <strong>didn't work</strong> too.</p>\n\n<p><strong>way 3:</strong></p>\n\n<p>Using <code>.bashrc</code> <strong>worked</strong> (Not preferred )</p>\n\n<p>I added the below line to <code>.bashrc</code> file and <strong>it worked</strong>.</p>\n\n<pre><code>#Show IP Address (temp solution)\n/home/pi/Workspace/python/pi-screen/src/display.py\n</code></pre>\n\n<p>Adding to <code>.bashrc</code> is not preferred as it prints to lcd screen on every login.</p>\n\n<p><code>----------------------------------------------------------------------</code></p>\n\n<p><strong>Code used</strong>:</p>\n\n<p><strong>lcd init file</strong> <code>/etc/init.d/lcd</code></p>\n\n<pre><code>### BEGIN INIT INFO\n# Provides: LCD - date / time / ip address\n# Required-Start: $remote_fs $syslog\n# Required-Stop: $remote_fs $syslog\n# Default-Start: 2 3 4 5\n# Default-Stop: 0 1 6\n# Short-Description: Liquid Crystal Display\n# Description: date / time / ip address\n### END INIT INFO\n\n\n#! /bin/sh\n# /etc/init.d/lcd\n\n\nexport HOME\ncase \"$1\" in\n    start)\n        echo \"Starting LCD\"\n        /home/pi/Workspace/python/pi-screen/src/display.py  2&gt;&amp;1 &amp;\n    ;;\n    stop)\n        echo \"Stopping LCD\"\n        LCD_PID=`ps auxwww | grep pi-screen | head -1 | awk '{print $2}'`\n        kill -9 $LCD_PID\n    ;;\n    *)\n        echo \"Usage: /etc/init.d/lcd {start|stop}\"\n        exit 1\n    ;;\nesac\nexit 0\n</code></pre>\n\n<p><strong>display.py</strong> </p>\n\n<pre><code>#!/usr/bin/python\nimport time\nimport display_conf\nimport utils\n\nlcd = display_conf.get_lcd()\n\ndef show_msg(msg, how_long):\n    lcd.message(msg)\n    time.sleep(how_long)\n    lcd.clear()\n\n\nif __name__ == \"__main__\":\n    now = utils.get_time()\n    ip = utils.get_host_ip()\n    msg = now + \"\\n\" + ip\n\n    show_msg(msg, 10)\n</code></pre>\n\n<p><strong>display_config.py</strong></p>\n\n<pre><code>import Adafruit_CharLCD as LCD\n\ndef get_lcd():\n    # Raspberry Pi pin setup\n    lcd_rs = 25\n    lcd_en = 24\n    lcd_d4 = 23\n    lcd_d5 = 17\n    lcd_d6 = 18\n    lcd_d7 = 22\n    lcd_backlight = 2\n\n    # Define LCD column and row size for 16x2 LCD.\n    lcd_columns = 16\n    lcd_rows = 2\n\n    lcd = LCD.Adafruit_CharLCD(lcd_rs, lcd_en, lcd_d4, lcd_d5, lcd_d6, lcd_d7, lcd_columns, lcd_rows, lcd_backlight)\n\n    return lcd\n</code></pre>\n\n<p><strong>utils.py</strong></p>\n\n<pre><code>import socket\nimport time\n\ndef get_host_ip():\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n    s.connect((\"8.8.8.8\", 80))\n    ip = s.getsockname()[0]\n    s.close()\n\n    return ip\n\ndef get_time():\n    now = time.strftime(\"%Y-%m-%d %H:%M:%S\")\n    return now\n</code></pre>\n\n<p><strong>Note</strong>: <code>/home/pi/Workspace/python/pi-screen/src/display.py</code> and <code>/etc/init.d/lcd</code> both have executable permission.</p>\n"
    }, {
        "tags": ["iot", "jdedwards"],
        "is_answered": false,
        "view_count": 175,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1532445712,
        "creation_date": 1452409191,
        "question_id": 34702929,
        "link": "https://stackoverflow.com/questions/34702929/get-third-party-values-into-jd-edwards",
        "title": "Get third party values into JD Edwards?",
        "body": "<p>I'm doing a small project in IoT .I'm using ARDUINO microcontroller(with temperature sensor)to sense the temperature value.Now i need to get those value into JDE(i.e..into IoT Orchestrator).How do i get those values into JDE?</p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["heatmap", "iot", "grafana", "temperature"],
        "is_answered": false,
        "view_count": 398,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1532377763,
        "creation_date": 1530747243,
        "question_id": 51181771,
        "link": "https://stackoverflow.com/questions/51181771/how-to-setup-a-heatmap-for-temperature-on-grafana",
        "title": "How to setup a heatmap, for temperature on Grafana",
        "body": "<p>I'd like to be able to setup a heatmap on Grafana that will show me the temperatures recorded over say a week showing me what the frequency of temperature over 24 hours. So for example I've noticed that my temperature seems to peak around 7PM so I would want 7PM to show the average darkest red blob to show that that is generally the warmest hour then the boxes getting lighter and going down as it goes on and cools. I have 3 sensors logging in an influx database tagged by sensor location. I've absolutely no idea how'd I'd even start with something like this. I've tried setting up a heatmap (which sounds like the sort of thing I'd want). I've also found carpet plot mentioned but haven't tried it yet and am unsure if it would do what I want. Can anyone suggest the best way to do this and how I'd proceed?</p>\n\n<p>Thank you for your time.</p>\n"
    }, {
        "tags": ["azure", "plot", "iot"],
        "is_answered": true,
        "view_count": 42,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1531557550,
        "creation_date": 1531507907,
        "question_id": 51331243,
        "link": "https://stackoverflow.com/questions/51331243/azure-and-plotting-data",
        "title": "Azure and plotting data",
        "body": "<p>Does azure have its own facilities to draw income date from IoT device (say Y-axis for temperature, X-axis for timestamp) in real-time (or not in real-time)</p>\n\n<p>I was able to implement it using PowerBI, but this is an external tool.\nAlso I know it is possible to publish it to your own web application, but again, it is an external application.\nDoes azure have any internal \"on-portal\" tools to do the same.</p>\n\n<p>Thanks</p>\n"
    }, {
        "tags": ["mqtt", "iot", "esp8266", "wifimanager", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 1109,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1531458513,
        "creation_date": 1530607819,
        "question_id": 51150322,
        "link": "https://stackoverflow.com/questions/51150322/how-to-pass-a-variables-to-wifimanager-by-tapzu-for-esp-8266-i-want-to-be-able",
        "title": "How to pass a variables to wifiManager by Tapzu for esp 8266, i want to be able to pass mqtt id and password",
        "body": "<p>I am able to configure the esp8266 using the tapzu wifi manager, i would also like to send the mqtt server id and password from the wifi configure page so that the esp can connect to the mqtt server. I do not want to be flashing the esp every-time, any resources would be much appreciated. Thank you.  </p>\n"
    }, {
        "tags": ["uwp", "raspberry-pi", "iot", "uart", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 99,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1531291680,
        "creation_date": 1531216023,
        "question_id": 51262054,
        "link": "https://stackoverflow.com/questions/51262054/raspberry-pi-uart-pins-as-general-purpose",
        "title": "Raspberry Pi UART Pins as General Purpose",
        "body": "<p>I am using Raspberry Pi Model 3B with Windows IoT Core. I want to use 8 and 10 no. pins(GPIO-14 &amp; GPIO-15) general purpose but when I tried to open pins an exception thrown that is </p>\n\n<p>System.Runtime.InteropServices.COMException: 'Element not found.</p>\n\n<p>Pin ' is not available. It is reserved by the system or in use for another function.'</p>\n\n<p>How can I use these pins as GPIO on Windows IoT Core?</p>\n"
    }, {
        "tags": ["azure", "security", "iot", "azure-sphere"],
        "is_answered": true,
        "view_count": 339,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1531287536,
        "creation_date": 1529560996,
        "last_edit_date": 1529908600,
        "question_id": 50961386,
        "link": "https://stackoverflow.com/questions/50961386/how-azure-sphere-providing-security-in-hybrid-system-where-it-is-embedded-with-o",
        "title": "How Azure Sphere providing security in hybrid system where it is embedded with other MCU?",
        "body": "<p>Azure Sphere with MT3620 is secured but when it is embedded with other MCU like Pi or NodeMCU then how it is making this system secured?</p>\n"
    }, {
        "tags": ["http", "iot", "esp8266", "battery", "consumption"],
        "is_answered": true,
        "view_count": 103,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1531171695,
        "creation_date": 1531130635,
        "question_id": 51242881,
        "link": "https://stackoverflow.com/questions/51242881/http-request-vs-rtc-battery-consumption-esp8266",
        "title": "HTTP request vs RTC battery consumption ESP8266",
        "body": "<p>I just wanted to know, what is more efficient</p>\n\n<ul>\n<li>Using NTPClient library and making an http request to get the time.</li>\n<li>Using a RTC and read the time from it.</li>\n</ul>\n\n<p>Taking into account that I used deep sleep, and once it wakes up has to set up the wireless because I am sending data into cloud storage, but just before I get the time with the NTPClient library.\nBut I am thinking that I may save some battery if I use a RTC.</p>\n\n<p>What do you think?</p>\n\n<p>Thanks</p>\n"
    }, {
        "tags": ["arduino", "mqtt", "iot", "esp8266", "thingsboard"],
        "is_answered": false,
        "view_count": 556,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1529412489,
        "creation_date": 1529110041,
        "question_id": 50884153,
        "link": "https://stackoverflow.com/questions/50884153/arduino-cant-show-out-respond-get-from-mqtt-server-through-esp8266",
        "title": "Arduino can&#39;t show out respond get from mqtt server through esp8266",
        "body": "<p>I'm trying to let my Arduino and esp8266 send data to thingsboard and then subscribe to thingsboard's mqtt channel and get a timestamp from it but for some unknown reason, it just doesn't work. Checked server-side and it was ok, tried postman to simulate request and also getting the correct response from the server.\nAlso, I had read the documentation about esp8266 and it somehow did state that it only can have 1 connection simultaneously. But tried to let my Arduino to only subscribe to channel but it still doesn't work.</p>\n\n<p>My code:(I'm using Arduino Mega for this)</p>\n\n<pre><code>#include \"DHT.h\"\n#include &lt;WiFiEspClient.h&gt;\n#include &lt;WiFiEsp.h&gt;\n#include &lt;WiFiEspUdp.h&gt;\n#include &lt;PubSubClient.h&gt;\n#include &lt;ArduinoJson.h&gt;\n#include &lt;TimeLib.h&gt;\n\n#define WIFI_AP \"CEC\"\n#define WIFI_PASSWORD \"#CEC@2017@CEC#\"\n\n#define TOKEN \"A1_TEST_TOKEN\"\n\n// DHT\n#define DHTPIN 2\n#define DHTTYPE DHT22\n\nchar thingsboardServer[] = \"192.168.0.250\";\n\n// Initialize the Ethernet client object\nWiFiEspClient espClient;\n\n// Initialize DHT sensor.\nDHT dht(DHTPIN, DHTTYPE);\n\nPubSubClient client(espClient);\n\nint status = WL_IDLE_STATUS;\nunsigned long lastSend;\nunsigned long lastSync;\n\nvoid setup() {\n  // initialize serial for debugging\n  Serial.begin(9600);\n  Serial1.begin(9600);\n  Serial2.begin(9600);\n\n  //serial pin\n      pinMode(LED_RUN_pin, OUTPUT);\n\n  //dht.begin();\n  InitWiFi();\n  lastSend = 0;\n  lastSync = 0;\n  //client subscribe thingsboard rpc PUBLISH msg\n  client.setServer( thingsboardServer, 1883 );\n   client.setCallback(on_message);\n}\n\nvoid loop() {\n  status = WiFi.status();\n  if ( status != WL_CONNECTED) {\n    while ( status != WL_CONNECTED) {\n      Serial.print(\"Attempting to connect to WPA SSID: \");\n      Serial.println(WIFI_AP);\n      // Connect to WPA/WPA2 network\n      status = WiFi.begin(WIFI_AP, WIFI_PASSWORD);\n      delay(500);\n    }\n  }\n\n  if ( !client.connected() ) {\n    reconnect();\n  }\n\n  if ( millis() - lastSend &gt; 30000 ) { // Update and send after 30 seconds\n    getAndSendTemperatureAndHumidityData();\n    lastSend = millis();\n  }\n\n  client.loop();\n}\n\nvoid getAndSendTemperatureAndHumidityData()\n{\n  Serial.println(\"Collecting temperature data.\");\n\n  // Reading temperature or humidity takes about 250 milliseconds!\n  float h = dht.readHumidity();\n  // Read temperature as Celsius (the default)\n  float t = dht.readTemperature();\n\n  // Check if any reads failed and exit early (to try again).\n  if (isnan(h) || isnan(t)) {\n    Serial.println(\"Failed to read from DHT sensor!\");\n    return;\n  }\n\n  Serial.print(\"Humidity: \");\n  Serial.print(h);\n  Serial.print(\" %\\t\");\n  Serial.print(\"Temperature: \");\n  Serial.print(t);\n  Serial.print(\" *C \");\n\n  String temperature = String(t);\n  String humidity = String(h);\n\n  // Prepare a JSON payload string\n  String payload = \"{\";\n  payload += \"\\\"temperature\\\":\"; payload += temperature; payload += \",\";\n  payload += \"\\\"humidity\\\":\"; payload += humidity;\n  payload += \"}\";\n\n  // Send payload\n  char attributes[100];\n  payload.toCharArray( attributes, 100 );\n  client.publish( \"v1/devices/me/rpc/request/1\", attributes , 1);\n  //Serial.println( attributes );\n}\n\n\n  // Prepare a JSON payload string\n String payload = \"{method: getTime, params:{}}\";\n\n  // Send payload\n  char attributes[100];\n  payload.toCharArray( attributes, 100 );\n  client.publish( \"v1/A1_TEST_TOKEN/rpc\", attributes );\n  //Serial.println( attributes );\n}\n\nvoid InitWiFi()\n{ \n  // initialize serial for ESP module\n  Serial1.begin(9600);\n  // initialize ESP module\n  WiFi.init(&amp;Serial1);\n  // check for the presence of the shield\n  if (WiFi.status() == WL_NO_SHIELD) {\n    Serial.println(\"WiFi shield not present\");\n    // don't continue\n    while (false);\n  }\n\n  Serial.println(\"Connecting to AP ...\");\n  // attempt to connect to WiFi network\n  while ( status != WL_CONNECTED) {\n    // Connect to WPA/WPA2 network\n    status = WiFi.begin(WIFI_AP, WIFI_PASSWORD);\n    delay(500);\n  }\n}\n\nvoid reconnect() {\n  // Loop until we're reconnected\n  while (!client.connected()) {\n    //Serial.print(\"Connecting to Thingsboard node ...\");\n    // Attempt to connect (clientId, username, password)\n    if ( client.connect(\"Arduino Uno Device\", TOKEN, NULL) ) {\n     Serial.println( \"[DONE]\" );\n      delay(500);\n     // Serial.println(\"Subscribing RPC\");\n     client.subscribe(\"v1/devices/me/rpc/request/+\");\n    } else {\n      Serial.print( \"[FAILED] [ rc = \" );\n      Serial.print( client.state() );\n      Serial.println( \" : retrying in 20  seconds]\" );\n      // Wait 20 seconds before retrying\n      delay( 20000 );\n    }\n  }\n}\n\nvoid printDigits(int digits){\n  // utility function for digital clock display: prints preceding colon and leading 0\n  Serial.print(\":\");\n  if(digits &lt; 10)\n    Serial.print('0');\n  Serial.print(digits);\n}\n\n// The callback for when a PUBLISH message is received from the server.\nvoid on_message (char* topic, byte* payload, unsigned int length) {\n\n  //Serial.println(\"On message\");\n\n  char json[length + 1];\n  strncpy (json, (char*)payload, length);\n  json[length] = '\\23';\n\n  Serial.print(\"Topic: \");\n  Serial.println(topic);\n  Serial.print(\"Message: \");\n  Serial.println(json); \n\n  // Decode JSON request\n  StaticJsonBuffer&lt;200&gt; jsonBuffer;\n  JsonObject&amp; data = jsonBuffer.parseObject((char*)json);\n\n  if (!data.success())\n  {\n    Serial.println(\"parseObject() failed\");\n    return;\n  }\n}\n</code></pre>\n"
    }, {
        "tags": ["cloud", "iot", "kaa", "particles"],
        "is_answered": true,
        "view_count": 51,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1528435929,
        "creation_date": 1526560450,
        "question_id": 50391615,
        "link": "https://stackoverflow.com/questions/50391615/make-master-slave-process-for-temperature-monitoring-system-using-cloud-services",
        "title": "Make Master slave process for temperature monitoring system using cloud services",
        "body": "<p>How can we give access to \"read\" the data from the application build on cloud to other people? I am trying to make the temperature monitoring system with <a href=\"https://store.ncd.io/product/industrial-long-range-wireless-temperature-humidity-sensor/\" rel=\"nofollow noreferrer\">mesh based sensor</a> with particle electron and  wanted to build an application using Kaa development platform which give me the right to edit the library of sensors and save the sensor data by linking to any cloud database and at same time it gives rights to only read the output (from sensors) to my colleagues through the application</p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "sensors"],
        "is_answered": false,
        "view_count": 25,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1527135554,
        "creation_date": 1527135170,
        "last_edit_date": 1527135554,
        "question_id": 50500845,
        "link": "https://stackoverflow.com/questions/50500845/raspberry-pi-obtain-details-of-sensor-connected",
        "title": "Raspberry pi- obtain details of sensor connected",
        "body": "<p>Components:-\nRaspverry pi 3,\nTemperature sensor DS18B20,\nLCD display screen.</p>\n\n<p>I am trying to create a simple program that gets the sensor values and shows the output on display screen connected to rpi.\nBut, I require some more information of the sensor such as 'manufacturer details, model number, type of sensor, etc.'  Is there a way to get these details?\nI want the details to be shown as soon as the sensor is connected to rpi.\n Please help!</p>\n"
    }, {
        "tags": ["c", "time", "iot", "msp430", "contiki"],
        "is_answered": true,
        "view_count": 170,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1527071046,
        "creation_date": 1526847414,
        "question_id": 50439002,
        "link": "https://stackoverflow.com/questions/50439002/measure-cpu-speed-of-iot-devices-at-different-temperatures",
        "title": "Measure CPU speed of IoT devices at different temperatures",
        "body": "<p>I want to measure the computational speed of a telosB at different temperatures. To program the device I use contiki. \nMy idea was to let it send messages in fixed intervals with the return of </p>\n\n<p><code>clock_time (void)</code></p>\n\n<p>as content. A second device reads that message and stores it in a file, together with its own clock_time (void) return value. With that I could say:</p>\n\n<p>At temperature A, a device needed 500 clock ticks to send 100 messages and the second device needed 600 clock ticks to receive 100 messages.</p>\n\n<p>At temperature B, a device needed 500 clock ticks to send 100 messages and the second device needed 800 clock ticks to receive 100 messages. </p>\n\n<p>This would mean that the device truly is slower at temperature B, because the receiver had to wait longer. </p>\n\n<p>I am stuck right now, because I get different results every time I perform my solution + the results get distorted at the moment the link quality is not perfect and some packages are getting lost.\nIs there a solution, maybe with a different setup, that helps me to prove the idea?</p>\n"
    }, {
        "tags": ["iot", "bigchaindb"],
        "is_answered": false,
        "view_count": 96,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1526449108,
        "creation_date": 1526385502,
        "last_edit_date": 1526449108,
        "question_id": 50349618,
        "link": "https://stackoverflow.com/questions/50349618/assert-as-an-iot-in-bigchaindb",
        "title": "assert as an IOT in BigchainDB",
        "body": "<p>We are working on a project which requires an IOT sensors to be connected Blockchain. I am unable to figure out how should I connect the sensor to BigchainDB and how can read the data.</p>\n"
    }, {
        "tags": ["c", "http", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 245,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1525702801,
        "creation_date": 1525525514,
        "last_edit_date": 1525702801,
        "question_id": 50189769,
        "link": "https://stackoverflow.com/questions/50189769/esp8266-data-upload-via-put-method-to-grovestreams",
        "title": "ESP8266 data upload via PUT method to Grovestreams",
        "body": "<p>I have problem with uploading data with ESP8266 (hooked up to STM32L0) to the Grovestreams (with ThingSpeak it works perfectly, but on GS not). I don't use Arduino HW or SW (and never will), but my own library (but this is probably not a problem).</p>\n\n<p>In a web browser, this command works</p>\n\n<pre><code>http://grovestreams.com/api/feed?api_key=secretKEY&amp;compId=bath&amp;data=29&amp;data=66&amp;asPut\n</code></pre>\n\n<p>The <code>&amp;asPut</code> is there because the web browser use GET as default. \nBut when I do this with ESP8266 like</p>\n\n<pre><code>ESP8266_SendCmd(\"AT+CIPSTART=\"TCP\",\"grovestreams.com\",80\");\nESP8266_SendData(\"PUT /api/feed?api_key=secretKEY&amp;compId=bath&amp;data=29&amp;data=66 HTTP/1.1\");\n</code></pre>\n\n<p>The ESP sends data to grovestreams</p>\n\n<pre><code>AT+CIPSTART=\"TCP\",\"grovestreams.com\",80\nCONNECT\nOK\nAT+CIPSEND=95\nOK\n&gt; \nbusy s...\nRecv 95 bytes\nSEND OK\n</code></pre>\n\n<p>but nothing happen (values will not show on server).\nI also tried this</p>\n\n<pre><code>ESP8266_SendCmd(\"AT+CIPSTART=\"TCP\",\"grovestreams.com\",80\");\nESP8266_SendData(\"PUT /api/feed?api_key=secretKEY&amp;compId=bath&amp;data=29&amp;data=66 HTTP/1.1\\r\\nHost: \\r\\nConnection: close\\r\\nContent-Type: application/json\");\n</code></pre>\n\n<p>then I get answer from server</p>\n\n<pre><code>+IPD,487:HTTP/1.1 408 Request Time-out\nDate: Sat, 05 May 2018 00:48:23 GMT\nServer: Apache\nVary: Accept-Encoding\nContent-Length: 293\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;408 \nRequest Time-out&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Request Time-out&lt;/h1&gt;&lt;p&gt;Server \ntimeout waiting for the HTTP request from the client.&lt;/p&gt;&lt;hr&gt;&lt;address&gt;Apache \nServer at www.grovestreams.com Port 80&lt;/address&gt;&lt;/body&gt;&lt;/html&gt;CLOSED\n</code></pre>\n\n<p>The functions for sending data and commands looks like</p>\n\n<pre><code>void ESP8266_SendData(char* data)\n{\n    char str[50] = \"\";\n    sprintf(str, \"AT+CIPSEND=%d\", strlen(data));\n    ESP8266_SendCmd(str);\n    HAL_Delay(100);\n\n    char str2[2048] = \"\";\n    sprintf(str2, \"%s\\r\\n\", data);\n    HAL_UART_Transmit(&amp;ESPUartHandle, str2,(uint16_t) strlen(str2), 20);\n    HAL_Delay(200);\n}\n\nvoid ESP8266_SendCmd(char* cmd)\n{\n    char str[50] = \"\";\n    sprintf(str, \"%s\\r\\n\", cmd);\n    HAL_UART_Transmit(&amp;ESPUartHandle, str,(uint16_t) strlen(str), 20);\n    HAL_Delay(100);\n}\n</code></pre>\n\n<p>As I wrote earlier, with Thingspeak it works perfectly (GET method) as</p>\n\n<pre><code>ESP8266_SendCmd(\"AT+CIPSTART=\\\"TCP\\\",\\\"api.thingspeak.com\\\",80\");\nHAL_Delay(2000);\nESP8266_SendData(\"GET /update?api_key=secretKEY&amp;field1=36\");\n</code></pre>\n\n<p>Please, what am I doing wrong with the PUT method on ESP8266?</p>\n\n<p>EDIT 6.5.2018: After detail examination of the arduino grovestreams library, this command format works:</p>\n\n<pre><code>ESP8266_SendData(\"PUT /api/feed?api_key=secretKEY&amp;compId=bath&amp;data=20.7&amp;data=66.8 HTTP/1.1\\nHost: grovestreams.com\\nConnection: close\\nContent-Type: application/json\\n\\n\");\n</code></pre>\n\n<p>Very important are the last two <code>\\n\\n</code>, without it no data will upload.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 91,
        "favorite_count": 0,
        "score": -4,
        "last_activity_date": 1525617837,
        "creation_date": 1525146981,
        "last_edit_date": 1525150820,
        "question_id": 50111151,
        "link": "https://stackoverflow.com/questions/50111151/control-led-using-esp8266-with-arduino",
        "title": "Control LED using ESP8266 with Arduino",
        "body": "<p>How I discover when this buttons was clicked?</p>\n\n<pre><code>webpage += \"Click &lt;a href=\\\"/H\\\"&gt;here&lt;/a&gt; Ligar a led&lt;br&gt;\";\nwebpage += \"Click &lt;a href=\\\"/L\\\"&gt;here&lt;/a&gt; Desligar a led &lt;br&gt;\";\n</code></pre>\n\n<p>On ESP without Arduino I can do it using \"endsWith\", but I don't know how to do it with Arduino and ESP. </p>\n\n<p>Does the function \"esp8266.find(\"H\")\" work?</p>\n"
    }, {
        "tags": ["iot", "nodemcu", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 192,
        "favorite_count": 0,
        "score": -2,
        "last_activity_date": 1523964071,
        "creation_date": 1523170156,
        "last_edit_date": 1523241844,
        "question_id": 49715264,
        "link": "https://stackoverflow.com/questions/49715264/nodemcu-multiple-libraries-error",
        "title": "NodeMCU multiple libraries error",
        "body": "<p>How do I fix these errors in NodeMCU, which reports that multiple libraries were found for servo.h?</p>\n\n<pre><code>Multiple libraries were found for \"Servo.h\"\n Used: C:\\Users\\username\\AppData\\Local\\Arduino15\\packages\\esp8266\\hardware\\esp8266\\2.4.1\\libraries\\Servo\n Not used: C:\\Program Files (x86)\\Arduino\\libraries\\Servo\nexit status 1\n'myservo' does not name a type\n</code></pre>\n"
    }, {
        "tags": ["java", "eclipse", "mqtt", "iot", "paho"],
        "is_answered": true,
        "view_count": 1987,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1523906309,
        "creation_date": 1470495920,
        "question_id": 38805669,
        "link": "https://stackoverflow.com/questions/38805669/how-to-read-data-from-mqtt-in-eclipse-paho",
        "title": "How to read data from MQTT in Eclipse Paho?",
        "body": "<p>I am trying to read sensor data using MQTT, using Eclipse Paho. I am successfully connected, but I want to read data. \nmy code so far:</p>\n\n<pre><code>  public static void main(String[] args) {\n    MqttClient client;\n    MqttMessage msg;\n    MemoryPersistence persistence;\n    MqttConnectOptions conn;\n    IMqttMessageListener listen;\n\n    String broker = \"tcp://url:1883\";\n    String str = \"password\";\n    char[] accessKey = str.toCharArray();\n    String appEUI = \"userID\";\n\n\n    try {\n        persistence = new MemoryPersistence();\n        client = new MqttClient(broker, appEUI, persistence);\n        conn = new MqttConnectOptions();\n        conn.setCleanSession(true);\n        conn.setPassword(accessKey);\n        conn.setUserName(appEUI);\n        client.connect(conn);\n        //client.connect();\n\n        if(client.isConnected()) {\n            System.out.println(\"Connected..\");\n        }else {\n            System.out.println(\"Unable to connect\");\n            System.exit(0);\n        }\n\n        msg = new MqttMessage();\n        byte[] data = msg.getPayload();\n        System.out.println(d);\n\n\n\n    }catch(Exception x) {\n        x.printStackTrace();\n    }\n\n}\n</code></pre>\n\n<p>But i am unable to read data. Can someone please guide?</p>\n"
    }, {
        "tags": ["arduino", "iot", "microphone", "esp8266", "nodemcu"],
        "is_answered": true,
        "view_count": 2652,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1523750528,
        "creation_date": 1469287696,
        "question_id": 38543395,
        "link": "https://stackoverflow.com/questions/38543395/using-a-big-sound-module-with-arduino-to-create-a-decibel-meter",
        "title": "Using a &quot;big sound&quot; module with arduino to create a decibel meter",
        "body": "<p>I am trying to create a sound meter to measure the decibels in a room and I am currently using a nodemcu 12e as I want to insert those measures to a row in a mySQL server and a \"big sound module\" (<a href=\"https://tkkrlab.nl/wiki/Arduino_KY-038_Microphone_sound_sensor_module\" rel=\"nofollow noreferrer\">https://tkkrlab.nl/wiki/Arduino_KY-038_Microphone_sound_sensor_module</a>). </p>\n\n<p><a href=\"https://i.stack.imgur.com/IGK3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IGK3x.png\" alt=\"Sound detection schematics\"></a></p>\n\n<p>The only thing I have achieved so far is to get the raw values of the sensor, as they don't seem to change, although I have tried to adjust the gain turning the screw in the microphone, with no result, as it seems to stay in the same values even when playing loud music. </p>\n\n<p>It seems to react to loud noises, and clapping makes the output to spike up - allowing me to control that lighting up the connected led:</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266mDNS.h&gt;\n\nconst char* ssid = \"yourssid\";\nconst char* password = \"yourpass\";\n\nESP8266WebServer server(80);\n\nconst int led = 13;\n\nint sensorPin = A0; // select the input pin for the potentiometer\nint ledPin = D7; // select the pin for the LED\nint sensorValue = 0; // variable to store the value coming from the sensor\n\nvoid setup(void){\n  pinMode(led, OUTPUT);\n  digitalWrite(led, 0);\n  Serial.begin(115200);\n  WiFi.begin(ssid, password);\n  Serial.println(\"\");\n\n  // Wait for connection\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.print(\"Connected to \");\n  Serial.println(ssid);\n  Serial.print(\"IP address: \");\n  Serial.println(WiFi.localIP());\n\n  if (MDNS.begin(\"esp8266\")) {\n    Serial.println(\"MDNS responder started\");\n  }\n\n  });\n\n  //SETUP SOUND SENSOR \n  pinMode (ledPin, OUTPUT);\n}\n\nvoid loop(void){\n  sensorValue = analogRead (sensorPin);\n  Serial.println (sensorValue);//, DEC);\n  if (sensorValue &gt; 100){\n    digitalWrite (ledPin, HIGH);\n    delay (1000);\n    digitalWrite (ledPin, LOW);\n  }\n}\n</code></pre>\n\n<p>I am reading the analog value of the sensor and I tried to get the lower values possible as seen I was trying to calibrate the mic. The values I am constantly getting are between 19 and 20: </p>\n\n<p><a href=\"https://i.stack.imgur.com/XiEVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XiEVB.png\" alt=\"Obtained values\"></a></p>\n\n<p>As you can see, on clapping I get a spike of the value. </p>\n\n<p>The thing is that the values don't change at all when loud music is playing, only getting different values when it detects a loud noise (like clapping).   How can I change the code or system to get the values in decibels?</p>\n"
    }, {
        "tags": ["json", "python-2.7", "iot"],
        "is_answered": false,
        "view_count": 693,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1523442981,
        "creation_date": 1523442981,
        "question_id": 49772846,
        "link": "https://stackoverflow.com/questions/49772846/read-data-from-thingspeak-using-python-using-urllib-library",
        "title": "Read data from thingspeak using python using urllib library",
        "body": "<p>I wanted to read current data from thingspeak website \nI used urllib library to get data using read url of the channel </p>\n\n<p>i used python code</p>\n\n<pre><code>import urllib\nfrom bs4 import BeautifulSoup\ndata=urllib.urlopen(\"https://api.thingspeak.com/channels/my_channel_no/feeds.json? \nresults=2\")\nprint data.read()\nselect=repr(data.read())\nprint select\nsel=select[20:]\nprint sel\n\n\nhttps://api.thingspeak.com/channels/my_channel_no/feeds.json?results=2\n</code></pre>\n\n<p>I get this result from the query</p>\n\n<pre><code>'{\"channel{\"id\":my_channel_no,\"name\":\"voltage\",\"latitude\":\"0.0\",\"longitude\":\"0.0 \",\"field1\":\"Field Label 1\",\"field2\":\"Field Label 2\",\"created_at\":\"2018-04-05T16:33:14Z\",\"updated_at\":\"2018-04-09T15:39:43Z\",\"last_entry_id\":108},\"feeds\":[{\"created_at\":\"2018-04-09T15:38:42Z\",\"entry_id\":107,\"field1\":\"20.00\",\"field2\":\"40.00\"},{\"created_at\":\"2018-04-09T15:39:44Z\",\"entry_id\":108,\"field1\":\"20.00\",\"field2\":\"40.00\"}]}'\n</code></pre>\n\n<p>But when this line was executed</p>\n\n<pre><code>select=repr(data.read())\n</code></pre>\n\n<p>the result was</p>\n\n<pre><code>\"''\"\n</code></pre>\n\n<p>And </p>\n\n<pre><code>sel=select[20:]\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>''\n</code></pre>\n\n<p>This is used to reduce the length of the query \n Can anyone give me sense of direction whats happening and solution for this selection of field value is the goal.</p>\n"
    }, {
        "tags": ["android", "iot", "app-inventor", "nodemcu", "thingsboard"],
        "is_answered": false,
        "view_count": 6287,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1522647881,
        "creation_date": 1521463464,
        "last_edit_date": 1521464210,
        "question_id": 49363312,
        "link": "https://stackoverflow.com/questions/49363312/read-sensor-data-from-thingspeak-with-mit-app-inventor",
        "title": "Read sensor data from ThingSpeak with MIT App Inventor",
        "body": "<p>I've been trying to build an android IOT app using MIT App Inventor. It's supposed to read the voltage value from my NodeMCU device and display it. I think the values should be transmitted to ThingSpeak database channels and I did that just fine. But I can't find one single tutorial on how to read back the values in ThingSpeak on my Android application in all the articles about Bluetooth communication between Arduino and the smartphone, I was wondering how to do that with internet connection. I need a simple example on how to send a sensor data to ThingSpeak and show it on my android application..</p>\n"
    }, {
        "tags": ["wifi", "iot", "beagleboneblack", "raspberry-pi3", "texas-instruments"],
        "is_answered": true,
        "view_count": 295,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1522096583,
        "creation_date": 1479002210,
        "question_id": 40569756,
        "link": "https://stackoverflow.com/questions/40569756/beaglebone-black-or-raspberry-pi",
        "title": "Beaglebone Black or raspberry PI?",
        "body": "<p>I had a question about the Beaglebone Black. why texas instruments  suggest using Beaglebone Black instead of Raspberry PI 3 which has Bluetooth and Wi-Fi chip inside and it is cheaper and more powerful. Is there any special reason ?</p>\n"
    }, {
        "tags": ["c#", "iot", "raspberry-pi3", "gpio", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 2380,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1522074759,
        "creation_date": 1506315552,
        "last_edit_date": 1506325938,
        "question_id": 46397880,
        "link": "https://stackoverflow.com/questions/46397880/how-to-read-value-from-gpio5-pin-of-raspberry-pi-3-using-c",
        "title": "how to read value from GPIO5 pin of Raspberry PI 3 using C#?",
        "body": "<p>I configured the Raspberry PI 3 with Q4XTBLAF300-Q8 this sensor and it is connected to GPIO5 for reading the value based on whenever something is in range of the sensor the input will be high. When it is out of range, the sensor will be low. But I don\u2019t know to how to write the code for reading the value from GPIO5 pin based on Q4XTBLAF300-Q8 this sensor status.</p>\n\n<p>So, can you please tell me how to read value from GPIO5 pin of Raspberry PI 3?</p>\n"
    }, {
        "tags": ["python-3.x", "raspberry-pi", "raspberry-pi3", "iot", "gpio"],
        "is_answered": false,
        "view_count": 34,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1520984129,
        "creation_date": 1520984129,
        "question_id": 49267569,
        "link": "https://stackoverflow.com/questions/49267569/raspberry-pi-3-one-pin-sending-different-voltage-4-25-instead-of-3-3",
        "title": "Raspberry Pi 3 - One pin sending different voltage (4.25 instead of 3.3)",
        "body": "<p>I am working with the SainSmart 16-Channel Relay board and everything is working fine except for one pin is sending a different voltage. This is causing the relay to shutoff after a few seconds. All the pins show 3.3v except for pin 4 that is showing  4.25v when I test the terminal with my multi-meter. I have added a 1k resister inline with the GPIO pin because the board is designed for Arduino and not the Raspberry Pi. The resister has corrected the voltage difference issue because 15 other relays work fine. Also I am reading this voltage issue before the 1k resistor so it should be effecting this. </p>\n\n<p>I have changed out the Raspberry Pi board and the relay board with another thinking that was the issue and am receiving the exact same voltage. Any ideas as to what the issue could be would be greatly appreciated. </p>\n\n<p>Below is the code I am using to test pins 2-8.</p>\n\n<pre><code>from tkinter import *\nimport RPi.GPIO as GPIO\n\nclass Create_Button:\n    def __init__(self,pin):\n        self.pin = pin\n        GPIO.setup(self.pin, GPIO.OUT)\n        GPIO.output(self.pin, GPIO.HIGH)\n\n        self.b = Button(text=\"Pin %s\" % self.pin + \" - Turn Relay On\", command=self.toggle)\n        self.b.pack()\n\n    def toggle(self):\n        print(self.pin)\n        if GPIO.input(self.pin):\n            GPIO.output(self.pin, GPIO.LOW)\n            self.b.config(text=\"Pin %s\" % self.pin + \" - Turn Relay On\")\n        else:\n            GPIO.output(self.pin, GPIO.HIGH)\n            self.b.config(text=\"Pin %s\" % self.pin + \" - Turn Relay Off\")\n\nroot = Tk()\nroot.title(\"Toggler\")    \n\nGPIO.setmode(GPIO.BCM)\nGPIO.setwarnings(FALSE)\n\nfor pin_count in range(2,9+1):\n    button = Create_Button(pin_count)\n\nquitButton = Button(root, text=\"Quit\", command=exit)\nquitButton.pack(side=LEFT)\n\nroot.mainloop()\nGPIO.cleanup()\n</code></pre>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "nodemcu", "arduino-esp8266"],
        "is_answered": true,
        "view_count": 554,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1520058765,
        "creation_date": 1518714905,
        "last_edit_date": 1518844336,
        "question_id": 48812803,
        "link": "https://stackoverflow.com/questions/48812803/nodemcu-1-0-esp-12e-module-as-a-tcp-server",
        "title": "NodeMCU 1.0 (ESP-12E Module) as a TCP server",
        "body": "<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n\nconst char *ssid = \"ESPap\";\nconst char *password = \"thereisnospoon\";\nWiFiServer server(8080);\n\nvoid setup() {\n  delay(1000);\n  Serial.begin(115200);\n  Serial.println();\n  Serial.print(\"Configuring access point...\");\n  WiFi.softAP(ssid, password);\n  IPAddress myIP = WiFi.softAPIP();\n  Serial.print(\"AP IP address: \");\n  Serial.println(myIP);\n  server.begin(); \n}\n\nvoid loop() {\n  WiFiClient clie = server.available();\n  if(clie) {\n    while(clie.connected()) {\n      if(clie.available()) {\n        Serial.println(clie.read());\n      }\n    }\n    clie.stop();\n  }\n}\n</code></pre>\n\n<p>I'm new to IoT. My goal is to start a TCP server using NodeMCU 1.0 to listen to the string sent by an Android app. The Android app is already implemented and 100% working. (Tested using AT commands with an ESP8266-01 module).</p>\n\n<p>But when I upload this code to the NodeMCU it doesn't print out the strings in the Serial Monitor.</p>\n\n<p>What is wrong? There is no errors showing up either.</p>\n"
    }, {
        "tags": ["arduino", "serial-port", "iot", "uart", "contiki"],
        "is_answered": true,
        "view_count": 115,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1518989946,
        "creation_date": 1517072523,
        "last_edit_date": 1518989946,
        "question_id": 48478199,
        "link": "https://stackoverflow.com/questions/48478199/how-to-communicate-between-openmote-and-arduino",
        "title": "how to communicate between openmote and arduino?",
        "body": "<p>I'am working on an IOT project. The goal is to communicate between two openmotes (one is the server and one is the client). When the client receives some data, it is supposed to pass it to an arduino to activate different controllers (like a motor, some leds ...). So, I wanna send data from a openmote to an arduino. The idea is to use a bus. The openmote is the master and the arduino is the slave. Do you have any idea how to do this ? I can't find any documentation fro the open mote part. I thought about using the serial UART but i don't have any idea how to do that. </p>\n\n<p>Thank you !</p>\n"
    }, {
        "tags": ["configuration", "mqtt", "iot", "bridge"],
        "is_answered": true,
        "view_count": 371,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1518657251,
        "creation_date": 1517871023,
        "last_edit_date": 1518657251,
        "question_id": 48632776,
        "link": "https://stackoverflow.com/questions/48632776/bridging-cloudmqtt-and-thingspeak",
        "title": "Bridging CloudMQTT and ThingSpeak",
        "body": "<p>I need some help creating bridge from CloudMQTT to Thingspeak. \nConnection URL (mqtt://mqtt.thingspeak.com:1883) is invalid because there is no user info added.</p>\n\n<p>Tried mqtt://zr87:@mqtt.thingspeak.com:1883\nwith no luck.</p>\n"
    }, {
        "tags": ["azure", "arduino", "iot", "azure-iot-hub", "endpoints"],
        "is_answered": false,
        "view_count": 299,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1518159671,
        "creation_date": 1518109720,
        "question_id": 48691073,
        "link": "https://stackoverflow.com/questions/48691073/reading-from-azure-iot-endpoint",
        "title": "Reading from azure IoT endpoint",
        "body": "<p>I have a little IoT project with one device. Arduino sends some values to azure where function application processes them and sends instructions for arduino to the endpoint in IoT hub. <em>(/devices/MKR1000/messages/devicebound?api-version=2016-02-03)</em>\nI need to get data from this endpoint in real time so I want arduino to read only the last (the newest) message every time, but it starts from the oldest.</p>\n\n<p>It's possible to make the arduino read all the messages from the endpoint and than show the last, but I'm looking for a more efficient way.</p>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["json", "ibm-cloud", "iot", "node-red"],
        "is_answered": true,
        "view_count": 540,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1517248617,
        "creation_date": 1516637792,
        "last_edit_date": 1516640801,
        "question_id": 48385921,
        "link": "https://stackoverflow.com/questions/48385921/node-red-interpreting-rest-service-url",
        "title": "Node-RED: Interpreting REST service URL",
        "body": "<p>I am currently using the IBM Bluemix IoT Quickstart for some experiments. For those of you who don't know this, it is an IoT Sensor simulator that can be used to control temperature and humidity values. </p>\n\n<p>I am looking to use a web service connector to look for the temperature reading. How would I go about interpreting the Service URL for this?</p>\n\n<p>Also (but not as important!) I see that the website /test/ fails to display the temperature reading. Any ideas as to why?</p>\n\n<p>Below is the json to be used by web service to display temperature</p>\n\n<pre><code>[\n  {\n    \"id\": \"e42c6f27.46cca\",\n    \"type\": \"function\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"temp\",\n    \"func\": \"return {payload:msg.payload.d.temp};\",\n    \"outputs\": 1,\n    \"noerr\": 0,\n    \"x\": 422.5,\n    \"y\": 775,\n    \"wires\": [\n      [\n        \"c76cd036.bc2ba\"\n      ]\n    ]\n  },\n  {\n    \"id\": \"f47256cd.a18b78\",\n    \"type\": \"template\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"\",\n    \"field\": \"payload\",\n    \"fieldType\": \"msg\",\n    \"format\": \"handlebars\",\n    \"syntax\": \"mustache\",\n    \"template\": \"The temperature is\\n{{payload}}\\n\",\n    \"output\": \"str\",\n    \"x\": 775,\n    \"y\": 953,\n    \"wires\": [\n      [\n        \"22b54d74.028ae2\"\n      ]\n    ]\n  },\n  {\n    \"id\": \"22b54d74.028ae2\",\n    \"type\": \"http response\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"\",\n    \"statusCode\": \"\",\n    \"headers\": {\n\n    },\n    \"x\": 1064,\n    \"y\": 955,\n    \"wires\": [\n\n    ]\n  },\n  {\n    \"id\": \"243d218a.fe14ae\",\n    \"type\": \"http in\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"\",\n    \"url\": \"test\",\n    \"method\": \"get\",\n    \"upload\": false,\n    \"swaggerDoc\": \"\",\n    \"x\": 432,\n    \"y\": 993,\n    \"wires\": [\n      [\n        \"f47256cd.a18b78\"\n      ]\n    ]\n  },\n  {\n    \"id\": \"429ffb9e.7ed404\",\n    \"type\": \"ibmiot in\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"authentication\": \"quickstart\",\n    \"apiKey\": \"\",\n    \"inputType\": \"evt\",\n    \"deviceId\": \"3bd1c8df5ed2\",\n    \"applicationId\": \"\",\n    \"deviceType\": \"iotqs-sensor\",\n    \"eventType\": \"+\",\n    \"commandType\": \"\",\n    \"format\": \"json\",\n    \"name\": \"IBM IoT App In\",\n    \"service\": \"quickstart\",\n    \"allDevices\": false,\n    \"allApplications\": false,\n    \"allDeviceTypes\": true,\n    \"allEvents\": true,\n    \"allCommands\": false,\n    \"allFormats\": false,\n    \"x\": 269,\n    \"y\": 550,\n    \"wires\": [\n      [\n        \"55064d15.005804\",\n        \"c34674a2.7ea0d8\",\n        \"2356b867.1c3d68\",\n        \"c7ee16c4.493fc8\",\n        \"e42c6f27.46cca\"\n      ]\n    ]\n  },\n  {\n    \"id\": \"55064d15.005804\",\n    \"type\": \"debug\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"name\",\n    \"active\": true,\n    \"complete\": \"payload.d.name\",\n    \"x\": 717.5,\n    \"y\": 551,\n    \"wires\": [\n\n    ]\n  },\n  {\n    \"id\": \"c34674a2.7ea0d8\",\n    \"type\": \"debug\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"Temperature\",\n    \"active\": true,\n    \"complete\": \"payload.d.temp\",\n    \"x\": 717.5,\n    \"y\": 651,\n    \"wires\": [\n\n    ]\n  },\n  {\n    \"id\": \"2356b867.1c3d68\",\n    \"type\": \"debug\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"Humidity\",\n    \"active\": true,\n    \"complete\": \"payload.d.humidity\",\n    \"x\": 717.5,\n    \"y\": 751,\n    \"wires\": [\n\n    ]\n  },\n  {\n    \"id\": \"c7ee16c4.493fc8\",\n    \"type\": \"debug\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"Object Temperature\",\n    \"active\": true,\n    \"complete\": \"payload.d.objectTemp\",\n    \"x\": 717.5,\n    \"y\": 851,\n    \"wires\": [\n\n    ]\n  },\n  {\n    \"id\": \"c76cd036.bc2ba\",\n    \"type\": \"json\",\n    \"z\": \"3ed49b1f.4c1164\",\n    \"name\": \"\",\n    \"pretty\": true,\n    \"x\": 531,\n    \"y\": 894,\n    \"wires\": [\n      [\n        \"f47256cd.a18b78\"\n      ]\n    ]\n  }\n]\n</code></pre>\n"
    }, {
        "tags": ["raspberry-pi", "embedded", "iot", "stm32"],
        "is_answered": true,
        "view_count": 143,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1516842313,
        "creation_date": 1516228945,
        "last_edit_date": 1516229668,
        "question_id": 48311195,
        "link": "https://stackoverflow.com/questions/48311195/how-to-create-and-deploy-microcontroller-based-industrial-solutions",
        "title": "How to create and deploy microcontroller-based industrial solutions?",
        "body": "<p>I don't fully understand the complete development cycle and transition from general purpose boards to microcontroller-based serious industrial hardware.</p>\n\n<p>Right now I use <code>RPi</code> or similar general purpose boards and follow this development process:</p>\n\n<ul>\n<li>design hardware with <code>SoC</code> (<code>RPi</code>) in mind.</li>\n<li>order/buy hardware</li>\n<li>connect main board and peripherals</li>\n<li>install <code>OS</code> (almost always <code>Linux</code>)</li>\n<li>install libraries, applications, toolchain</li>\n<li>create corresponding software with a previously installed toolchain</li>\n<li>when the solution is working correctly, move hardware to an appropriate case.</li>\n<li>deploy</li>\n</ul>\n\n<p>It may include additional steps but the way I see it, everything is already designed, assembled and test before I even start my development. I only need to choose connect devices, connect wires and create a software. Software is mostly free.\nThe downside is that such solution lacks quality. I doubt hardware is able to withstand harsh industrial environment. It is also not small enough.</p>\n\n<p>Now I am trying to dive into <code>STM32</code>/<code>Quark</code>/[any microcontroller] world. What I understood so far is:</p>\n\n<ul>\n<li>buy a development board</li>\n<li>create software</li>\n<li>test</li>\n</ul>\n\n<p>What confuses me is the part when you switch from dev. board to... What?\nI mean dev. boards are not designed to be used in a final product, do they?\nI guess a need a custom solution. \nDo I need to design a custom electronic circuit, produce it by means of an external manufacturer and install my microcontroller and additional <code>IC</code>s there?</p>\n\n<p>I see various presentation's of modern small-size CPUs and I what to know how to develop a device with them.\nI want to get an understanding of a full development cycle of an <code>IoT</code> low-power device, but don't know to how to ask correctly.</p>\n"
    }, {
        "tags": ["c++", "bluetooth", "iot", "bluez", "intel-edison"],
        "is_answered": true,
        "view_count": 3675,
        "favorite_count": 3,
        "score": 13,
        "last_activity_date": 1516390553,
        "creation_date": 1483183916,
        "last_edit_date": 1516390553,
        "question_id": 41407932,
        "link": "https://stackoverflow.com/questions/41407932/how-can-i-use-bluez5-dbus-api-in-c-to-pair-and-connect-new-devices",
        "title": "How can I use Bluez5 DBUS API in C++ to pair and connect new devices?",
        "body": "<p>I am writing a bluetooth driver for <strong>Intel Edison</strong>. Board software is latest available, and I am developing using the Eclipse based IDE.\nBluez version number in this edison release is 5.37.</p>\n\n<p>I am designing a system which has to meet the following requirements:</p>\n\n<ul>\n<li>Scan for bluetooth devices nearby. [X]</li>\n<li>Detect sensor devices based on name and MAC address. [X]</li>\n<li>Pair and connect sensor devices automatically. []</li>\n</ul>\n\n<p>Last item is the problem since I can detect sensor devices but I am not able to pair them using the bluez5 interface. So far I have tried to use the D-BUS interface but it is not working since I keep getting the following error message:</p>\n\n<blockquote>\n  <p>Method \"FindAdapter\" with signature \"s\" on interface \"org.bluez.Manager\" doesn't exist</p>\n</blockquote>\n\n<p>Code is presented here. Please note:</p>\n\n<ul>\n<li>DBusConnection *conn -> DBUS_BUS_SYSTEM</li>\n<li>const char *adapter -> \"hci0\".</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>DBusMessage *msg, *reply;\nDBusError err;\nconst char *reply_path;\nchar *path;\n\nmsg = dbus_message_new_method_call(\"org.bluez\", \"/\",\"org.bluez.Manager\", \"FindAdapter\");\ndbus_message_append_args(msg, DBUS_TYPE_STRING, &amp;adapter,DBUS_TYPE_INVALID);\ndbus_error_init(&amp;err);\nreply = dbus_connection_send_with_reply_and_block(conn, msg, -1, &amp;err);\ndbus_message_unref(msg);\n</code></pre>\n\n<p>Any ideas?</p>\n"
    }, {
        "tags": ["c#", "uwp", "iot", "windows-10-iot-core"],
        "is_answered": false,
        "view_count": 144,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1515753287,
        "creation_date": 1471031055,
        "last_edit_date": 1471601219,
        "question_id": 38925430,
        "link": "https://stackoverflow.com/questions/38925430/error-saving-file-windows-iot-core-jpg-format",
        "title": "Error Saving file Windows Iot Core jpg format",
        "body": "<p>i've coded a code next:\n     private async void WriteData()\n            {\n                var removableDevices = KnownFolders.RemovableDevices;\n                var externalDrives = await removableDevices.GetFoldersAsync();\n                var drive0 = externalDrives[0];</p>\n\n<pre><code>            var testFolder = await drive0.CreateFolderAsync(\"test\");\n            var testFile = await testFolder.CreateFileAsync(\"test.jpg\");\n\n            var byteArray = new byte[] { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07 };\n            using (var sourceStream = new MemoryStream(byteArray).AsRandomAccessStream())\n            {\n                using (var destinationStream = (await testFile.OpenAsync(FileAccessMode.ReadWrite)).GetOutputStreamAt(0))\n                {\n                    await RandomAccessStream.CopyAndCloseAsync(sourceStream, destinationStream);\n                }\n\n            }\n\n        }\n\n        private async void _timer_Tick(object sender, object e)\n        {\n            DhtReading reading = new DhtReading();\n            int val = this.TotalAttempts;\n            this.TotalAttempts++;\n\n            reading = await _dht.GetReadingAsync().AsTask();\n\n            _retryCount.Add(reading.RetryCount);\n            this.OnPropertyChanged(nameof(AverageRetriesDisplay));\n            this.OnPropertyChanged(nameof(TotalAttempts));\n            this.OnPropertyChanged(nameof(PercentSuccess));\n        if (reading.IsValid)\n        {\n            this.TotalSuccess++;\n            this.Temperature = Convert.ToSingle(reading.Temperature);\n            this.Humidity = Convert.ToSingle(reading.Humidity);\n            this.LastUpdated = DateTimeOffset.Now;\n            this.OnPropertyChanged(nameof(SuccessRate));\n\n            this.WriteData();\n\n\n        }\n\n        this.OnPropertyChanged(nameof(LastUpdatedDisplay));\n\n    }\n</code></pre>\n\n<p>My code freeze , and i wanna know how could I save the humidity and temperature values in that archive, \nIt is the best way to save this app ?</p>\n\n<p>Someone Could Help me ?</p>\n"
    }, {
        "tags": ["arduino", "wifi", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 4729,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1515324903,
        "creation_date": 1463217852,
        "last_edit_date": 1468064074,
        "question_id": 37224942,
        "link": "https://stackoverflow.com/questions/37224942/no-response-from-esp8266-wifi-module",
        "title": "No Response from ESP8266 WIFI Module",
        "body": "<p>I bought a new ESP8266 WIFI module (8pins) and flashed firmware (from <a href=\"https://raw.githubusercontent.com/nodemcu/nodemcu-flasher/master/Win32/Release/ESP8266Flasher.exe\" rel=\"nofollow\">https://raw.githubusercontent.com/nodemcu/nodemcu-flasher/master/Win32/Release/ESP8266Flasher.exe</a>) it using arduino Duemilanove correctly. \nI have gone through many troubleshooting steps, but on reset module does give some gibberish response, but <strong>no Ready/OK response from \"AT\" command</strong>.</p>\n\n<p><strong>Red LED\n    of module is always on but Blue light is off.</strong> </p>\n\n<p><strong>Steps taken :-</strong></p>\n\n<ol>\n<li><p>To supply enough current i used Beaglebone 3V3 supply as module Vcc.\nBut i'm not able to receive any response from AT commands.</p></li>\n<li><p>Arduino Tx (5V) has brought down to 3v3 using voltage divider and\nconnected to Rx</p></li>\n<li>In Flash settings ensured baud rate was 115200 and all settings correct</li>\n<li>Module is working fine presumably as tried with 2 more modules same thing</li>\n</ol>\n\n<p>Here's my connections: </p>\n\n<pre><code>//////////////////////////////////////////////////////////////////////////////\n    ///////                         CONNECTIONS              ////////\n    /////////////////////////////////////////////////////////////////////////////\n    /*\n    ESP8266 VCC -&gt; BeagleBone 3.3\n    ESP8266 GND -&gt; Common GND (Arduino &amp; BeagleBone)\n    ESP8266 CH_PD -&gt; 3K resistor -&gt; VCC\n    ESP8266 RST -&gt; VCC or pin 13(arduino)\n    GPIO CAB BE LEFT OPEN OR TIED HIGH\n    ESP8266 Tx -&gt; pin2 (Arduino software serial Rx)\n    ESP8266 Rx &lt;- Voltage Divider &lt;- pin3 (Arduino software serial Tx)\n    */\n</code></pre>\n\n<p>Here's my code</p>\n\n<pre><code>#define esp8266 Serial2\n#define CH_PD Vcc // but needs a narrow low pulse\n#define speed8266 9600 // This is the speed that worked with my ESP8266\nvoid setup()\n{\n esp8266.begin (speed8266);\n Serial.begin(9600);\n reset8266(); // Pin CH_PD need a reset before start communication\n}\nvoid loop()\n{\n while(esp8266.available())\n { Serial.write(esp8266.read()); }\n while(Serial.available())\n { esp8266.write(Serial.read()); }\n}\n/*************************************************/\n// Reset funtion to accept communication\nvoid reset8266 ()\n{\n pinMode(CH_PD, OUTPUT);\ndigitalWrite(CH_PD, LOW);\n delay(300);\n digitalWrite(CH_PD, HIGH);\n}\n</code></pre>\n\n<p>Here's the output on Serial Monitor\n<a href=\"http://i.stack.imgur.com/MFcDf.jpg\" rel=\"nofollow\">Arduino Serial Monitor Output</a></p>\n\n<p>Kindly help me what am i doing wrong ?\nI don't want to use another FTDI chip while arduino already have it.</p>\n"
    }, {
        "tags": ["lua", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 71,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1515047567,
        "creation_date": 1514890403,
        "last_edit_date": 1515047567,
        "question_id": 48059638,
        "link": "https://stackoverflow.com/questions/48059638/issue-in-esp8266",
        "title": "Issue in ESP8266",
        "body": "<p>I have been working on controlling an LED through ESP8266 using an Android app. I have used the <a href=\"https://randomnerdtutorials.com\" rel=\"nofollow noreferrer\">Random Nerd Tutorials website</a> for my reference.</p>\n\n<p>The following is the code which I used:</p>\n\n<pre><code>wifi.setmode(wifi.STATION)\nwifi.sta.config(\"YOUR_NETWORK_NAME\",\"YOUR_NETWORK_PASSWORD\")\nprint(wifi.sta.getip())\nled1 = 3\nled2 = 4\ngpio.mode(led1, gpio.OUTPUT)\ngpio.mode(led2, gpio.OUTPUT)\nsrv=net.createServer(net.TCP)\nsrv:listen(80,function(conn)\n    conn:on(\"receive\", function(client,request)\n        local buf = \"\";\n        buf = buf..\"HTTP/1.1 200 OK\\n\\n\"\n        local _, _, method, path, vars = string.find(request, \"([A-Z]+) (.+)?(.+) HTTP\");\n        if(method == nil)then\n            _, _, method, path = string.find(request, \"([A-Z]+) (.+) HTTP\");\n        end\n        local _GET = {}\n        if (vars ~= nil)then\n            for k, v in string.gmatch(vars, \"(%w+)=(%w+)&amp;*\") do\n                _GET[k] = v\n            end\n        end\n\n        if(_GET.pin == \"ON1\")then\n              gpio.write(led1, gpio.HIGH);\n        elseif(_GET.pin == \"OFF1\")then\n              gpio.write(led1, gpio.LOW);\n        elseif(_GET.pin == \"ON2\")then\n              gpio.write(led2, gpio.HIGH);\n        elseif(_GET.pin == \"OFF2\")then\n              gpio.write(led2, gpio.LOW);\n        end\n        client:send(buf);\n        client:close();\n        collectgarbage();\n    end)\nend)\n</code></pre>\n\n<p>There are no errors in the code. The connections also seem right. I uploaded the code named as 'init.lua' into the ESP8266 using ESPlorer and was also able to control the LEDs through the app. But the next day when I tried controlling the LEDS I failed. Should I upload the code every time I unpower the ESP8266 module? What could be the issue?</p>\n"
    }, {
        "tags": ["arduino", "raspberry-pi", "iot", "arduino-uno", "windows-iot-core-10"],
        "is_answered": true,
        "view_count": 265,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1513737877,
        "creation_date": 1513610513,
        "last_edit_date": 1513670855,
        "question_id": 47871431,
        "link": "https://stackoverflow.com/questions/47871431/how-to-turn-on-and-off-leds-by-raspberry-pi-iot-connected-to-arduino-with-i2c-on",
        "title": "How to turn on and off LEDs by Raspberry Pi IoT connected to Arduino with I2C on an UWP project?",
        "body": "<p>I have an Arduino Uno and a Raspberry Pi 3 with Windows IoT Core. I've tried to use <a href=\"https://create.arduino.cc/projecthub/bmr1314/i2c-communication-between-arduino-and-raspberry-pi-1d00dd\" rel=\"nofollow noreferrer\">this method</a> to pass some info to my Arduino, like telling it to initiate a pin or getting and parsing a string. This method works perfectly for getting info from the Arduino (like sensor parameters).</p>\n\n<p>I was able to send a byte to the Arduino and make an action inside my Arduino code, based on the byte sent (like init pin 7 when getting the number 2). BUT it only works once. I have to reset the Arduino so it would accept bytes from the Raspberry Pi again (I can turn on a LED connected to Arduino from my Raspberry Pi but can't turn it of. The reverse is also true.</p>\n\n<p>My goal is to create a web site inside the Raspberry Pi for controlling things. But to start I'm using UWP. I'm trying to pass data from IoT Core running on a Raspberry Pi 3 to an Arduino Uno (not the reverse) or manage and control Arduino Uno pins with an I2C connection.</p>\n\n<p>My MainPage.xaml:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Linq;\nusing System.Runtime.InteropServices.WindowsRuntime;\nusing Windows.Foundation;\nusing Windows.Foundation.Collections;\nusing Windows.UI.Xaml;\nusing Windows.UI.Xaml.Controls;\nusing Windows.UI.Xaml.Controls.Primitives;\nusing Windows.UI.Xaml.Data;\nusing Windows.UI.Xaml.Input;\nusing Windows.UI.Xaml.Media;\nusing Windows.UI.Xaml.Navigation;\nusing Windows.Devices.I2c;\nusing System.Threading.Tasks;\n// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=402352&amp;clcid=0x409\n\nnamespace I2CComm {\n    /// &lt;summary&gt;\n    /// An empty page that can be used on its own or navigated to within a Frame.\n    /// &lt;/summary&gt;\n    public sealed partial class MainPage : Page {\n        private I2cDevice arduio; // Used to Connect to Arduino\n        private DispatcherTimer timer = new DispatcherTimer();\n        public MainPage() {\n            this.InitializeComponent();\n            Initialiasecom();\n        }\n        public async void Initialiasecom() {\n            var settings = new I2cConnectionSettings(0x40);\n            // Slave Address of Arduino Uno\n            settings.BusSpeed = I2cBusSpeed.FastMode;\n            // this bus has 400Khz speed\n            string aqs =  I2cDevice.GetDeviceSelector(\"I2C1\");\n            // This will return Advanced Query String which is used to select i2c device\n            var dis = await Windows.Devices.Enumeration.DeviceInformation.FindAllAsync(aqs);\n            arduio = await I2cDevice.FromIdAsync(dis[0].Id, settings);\n            timer.Tick += Timer_Tick;\n            // We will create an event handler\n            timer.Interval = new TimeSpan(0,0,0,0,500);\n            // Timer_Tick is executed every 500 milli second\n            timer.Start();\n        }\n\n        private async void Timer_Tick(object sender, object e) {\n            byte[] response = new byte[2];\n            try {\n                arduio.Read(response);\n                // this function will read data from Arduino\n            }\n            catch (Exception p) {\n                Windows.UI.Popups.MessageDialog msg = new Windows.UI.Popups.MessageDialog(p.Message);\n                await msg.ShowAsync();\n                // this will show error message(if any)\n            }\n        }\n\n        private void TurnOn_Click(object sender, RoutedEventArgs e) {\n            try {\n                byte[] sendpos;\n                sendpos = BitConverter.GetBytes(2);\n                arduio.Write(sendpos);\n            }\n            catch (Exception p) {\n                Windows.UI.Popups.MessageDialog msg = new Windows.UI.Popups.MessageDialog(p.Message);\n            }\n        }\n\n        private void TurnOff_Click(object sender, RoutedEventArgs e) {\n            try {\n                byte[] sendpos;\n                sendpos = BitConverter.GetBytes(1);\n                arduio.Write(sendpos);\n            }\n            catch (Exception p) {\n                Windows.UI.Popups.MessageDialog msg = new Windows.UI.Popups.MessageDialog(p.Message);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>My Arduino code is:</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n// Library that contains functions to have I2C Communication\n#define SLAVE_ADDRESS 0x40\n// Define the I2C address to Communicate to Uno\n\nbyte response[2]; // this data is sent to PI\nvolatile short LDR_value; // Global Declaration\nconst int LDR_pin=A0; //pin to which LDR is connected A0 is analog A0 pin\nconst int ledPin = 7;\n\nvoid setup() {\n  Serial.begin(9600);\n  pinMode(ledPin, OUTPUT);\n  Wire.begin(SLAVE_ADDRESS);\n  // this will begin I2C Connection with 0x40 address\n  Wire.onRequest(sendData);\n  // sendData is a function called when Pi requests data\n  Wire.onReceive(I2CReceived);\n  pinMode(LDR_pin,INPUT);\n  digitalWrite(ledPin, HIGH);\n}\n\nvoid loop() {\n  delay(500);\n}\n\nvoid I2CReceived(int NumberOfBytes) {\n  /* WinIoT have sent data byte; read it */\n  byte ReceivedData = Wire.read();\n  Serial.println(ReceivedData);\n  if (ReceivedData == 2) {\n    digitalWrite(ledPin, HIGH);\n    return;\n  } else if (ReceivedData == 1) {\n    digitalWrite(ledPin, LOW);\n    return;\n  }\n}\n\nvoid sendData() {\n  LDR_value=analogRead(LDR_pin);\n  // Arduino returns 10-bit data but we need to convert it to 8 bits\n  LDR_value=map(LDR_value,0,1023,0,255);\n  response[0]=(byte)LDR_value;\n  Wire.write(response,2); // return data to PI\n}\n</code></pre>\n"
    }, {
        "tags": ["c#", "raspberry-pi3", "iot", "motion"],
        "is_answered": false,
        "view_count": 141,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1512960895,
        "creation_date": 1512730298,
        "question_id": 47712831,
        "link": "https://stackoverflow.com/questions/47712831/if-i-have-two-pir-sensors-then-how-to-registred-the-gpiovaluecchangedevents",
        "title": "If i have two PIR Sensors then how to registred the GPIOvaluecChangedEvents?",
        "body": "<p>I am developing IoT based applications using Raspberry PI 3. I have few doubts while developing simple IoT based prototype application:</p>\n\n<ol>\n<li>I used single PIR sensor for detecting the motion of the object, for that I wrote the GPIOValueChagendEvent, but this event will only triggered whenever the PIR motion sensor value changed. </li>\n<li>But if I have two PIR sensors is it possible to write the one more GPIOValueChangedEvent. If yes, can you elaborate how to write the sample code using C# </li>\n<li>Suppose if two PIR sensors will detected the motion of the object at the same time then what happens.</li>\n</ol>\n"
    }, {
        "tags": ["android", "iot", "uart", "android-things", "android-things-console"],
        "is_answered": true,
        "view_count": 459,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1512642108,
        "creation_date": 1512632186,
        "last_edit_date": 1512638466,
        "question_id": 47689892,
        "link": "https://stackoverflow.com/questions/47689892/how-can-i-send-more-than-8-byte-data-over-uart-on-android-things-raspberry-pie",
        "title": "How can I send more than 8 byte data over UART on android Things raspberry pie?",
        "body": "<p>I want to send more than 8 byte data over the UART connection I am currently using USB 2.0 to TTL with 4 pin. I think my option is to use USB 2.0 to TTL with 6 pins is it correct?\nIf not what are my option?\nfor e.g I want to send 234212441325454543595674859764\nhow can i send it usb to TTL with 4 pins?</p>\n"
    }, {
        "tags": ["python", "python-3.x", "serial-port", "protocols", "iot"],
        "is_answered": false,
        "view_count": 869,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1512574987,
        "creation_date": 1512573979,
        "last_edit_date": 1512574987,
        "question_id": 47677826,
        "link": "https://stackoverflow.com/questions/47677826/how-to-use-rscada-python-mbus",
        "title": "How to use rscada python-mbus?",
        "body": "<p>Does anyone knows how to use <a href=\"https://github.com/rscada/python-mbus\" rel=\"nofollow noreferrer\">rscada python-mbus</a>?</p>\n\n<p>The example does not work on my computer, it returns</p>\n\n<pre><code>Traceback (most recent call last):    \n  File \"C:\\Users\\Tiago\\Desktop\\MbusSerial.py\", line 10, in &lt;module&gt;\n      mbus = MBus.MBus()\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\mbus\\MBus.py\", line 66, in __init__\n      self._libmbus = MBusLib(libpath)\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\mbus\\MBusLowLevel.py\", line 191, in __init__\n      lib = cdll.LoadLibrary(libpath)\n  File \"C:\\Program Files\\Python36\\lib\\ctypes\\__init__.py\", line 426, in LoadLibrary\n      return self._dlltype(name)\n  File \"C:\\Program Files\\Python36\\lib\\ctypes\\__init__.py\", line 348, in __init__\n      self._handle = _dlopen(self._name, mode) \nTypeError: bad argument type for built-in operation\nException ignored in: &lt;bound method MBus.__del__ of &lt;mbus.MBus.MBus object at 0x0000026E6836A8D0&gt;&gt; \nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\mbus\\MBus.py\", line 97, in __del__\n      if self.handle: \nAttributeError: 'MBus' object has no attribute 'handle'\n</code></pre>\n\n<p>In my scenario i have <a href=\"https://i.stack.imgur.com/ykalu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ykalu.png\" alt=\"this\"></a></p>\n\n<p>Sorry about my drawing skills, M-Bus and Laptop are connected by serial</p>\n\n<p>Any help?\nI'm also available to look at other solutions to read M-bus data from the serial port and make it humanlly readable.</p>\n"
    }, {
        "tags": ["iot", "sd-card", "esp8266", "nodemcu", "arduino-esp8266"],
        "is_answered": true,
        "view_count": 9206,
        "favorite_count": 4,
        "score": 5,
        "last_activity_date": 1511105333,
        "creation_date": 1495961062,
        "question_id": 44225379,
        "link": "https://stackoverflow.com/questions/44225379/esp8266-12e-nodemcu-1-0-pin-mapping-for-micro-sd-card",
        "title": "ESP8266 12E NodeMCU 1.0 pin mapping for micro sd card?",
        "body": "<p>I tried several pin conifguration to connect nodemcu and micro sd card. However, I had not any luck to successfully connect to sd card. I followed <a href=\"http://www.esp8266.com/viewtopic.php?f=32&amp;t=3558#p20419\" rel=\"noreferrer\">esp8266 forum</a> and some other solution! I need your suggestions :)  </p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "node-red"],
        "is_answered": true,
        "view_count": 1013,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1510929791,
        "creation_date": 1510921195,
        "last_edit_date": 1510929194,
        "question_id": 47350516,
        "link": "https://stackoverflow.com/questions/47350516/centralized-webui-on-node-red-with-multiple-raspberry-pi",
        "title": "Centralized WebUI on node-red with multiple raspberry pi",
        "body": "<p>I have a question regarding node-red, before jumping on it.\nI find a big difficultly to get a home-automation tool such as node-red, to get working multiple raspberry pi nodes.</p>\n\n<p>On the master I use django(brain)+angular(web-ui)+pigpio-library to interconnect the master pi with slaves.\nBasically using pigpio I can send from the master <code>turn-on</code> or <code>turn-off</code> signals to slave without any other tool. </p>\n\n<ul>\n<li>In my home configuration, I have 3 raspberry pi.</li>\n<li>All 3 are connected to the same network.</li>\n<li>1st pi is master and the other 2 are slaves.</li>\n<li>2nd and 3rd raspberry pi are slaves, and only have pigpio service\ninstalled</li>\n<li>this give me centralized interface to n pi`s connected to my network</li>\n<li>downside it that our app is not yet able to do complex things:events, tasks, etc.\nSo if I want to connect a PIR to my master and based on this trun on a LED on slave`s gpio, I cannot!</li>\n</ul>\n\n<p>In node-red or home-assistant, both use mqqt to send or receive information regarding sensors or manipulate gpio`s.</p>\n\n<p>Can I have with node-red a centralized interface installed ok master pi, and from there to act upon a gpio on slave pi?</p>\n\n<p>thank you\nGeorge</p>\n"
    }, {
        "tags": ["r", "machine-learning", "time-series", "accelerometer", "iot"],
        "is_answered": true,
        "view_count": 1946,
        "favorite_count": 4,
        "score": 6,
        "last_activity_date": 1507205226,
        "creation_date": 1435899875,
        "last_edit_date": 1435925813,
        "question_id": 31198863,
        "link": "https://stackoverflow.com/questions/31198863/using-r-and-sensor-accelerometer-data-to-detect-a-jump",
        "title": "Using R and Sensor Accelerometer Data to Detect a Jump",
        "body": "<p>I'm fascinated by sensor data. I used my iPhone and an app called SensorLog to capture\naccelerometer data while I stand and push my legs to jump.</p>\n\n<p>My goal is to use R to create a model which can identify jumps and how long I'm in the air.\nI'm unsure how to proceed in such a challenge. I have a timeseries with accelerometer data. </p>\n\n<p><a href=\"https://drive.google.com/file/d/0ByWxsCBUWbqRcGlLVTVnTnZIVVk/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0ByWxsCBUWbqRcGlLVTVnTnZIVVk/view?usp=sharing</a></p>\n\n<p>Some questions:</p>\n\n<ul>\n<li>How can a jump be detected in timeseries data?</li>\n<li>How to identify the air time part?</li>\n<li>How to train such a model?</li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/3EA9A.png\" alt=\"enter image description here\"></p>\n\n<p>Below is the R code used to create the graphs above, which is me standing and doing a simple jump.</p>\n\n<p>Thanks!</p>\n\n<pre><code># Training set\nsample &lt;- read.csv(\"sample-data.csv\")\n\n# Sum gravity\nsample$total_gravity &lt;- sqrt(sample$accelerometerAccelerationX^2+sample$accelerometerAccelerationY^2+sample$accelerometerAccelerationZ^2)\n\n# Smooth our total gravity to remove noise\nf &lt;- rep(1/4,4)\nsample$total_gravity_smooth &lt;- filter(sample$total_gravity, f, sides=2)\n\n# Removes rows with NA from smoothing\nsample&lt;-sample[!is.na(sample$total_gravity_smooth),]\n\n#sample$test&lt;-rollmaxr(sample$total_gravity_smooth, 10, fill = NA, align = \"right\")\n\n# Plot gravity\nplot(sample$total_gravity, type=\"l\", col=grey(.2), xlab=\"Series\", ylab=\"Gravity\", main=\"Accelerometer Gravitational Force\")\nlines(sample$total_gravity_smooth, col=\"red\")\nstdevs &lt;- mean(sample$total_gravity_smooth)+c(-2,-1,+1,+2)*sd(sample$total_gravity_smooth)\nabline(h=stdevs)\n</code></pre>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot"],
        "is_answered": false,
        "view_count": 981,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1507105764,
        "creation_date": 1507088076,
        "question_id": 46556604,
        "link": "https://stackoverflow.com/questions/46556604/simultaneous-ble-connection",
        "title": "Simultaneous BLE connection",
        "body": "<p>How to determine maximum number simultaneous BLE connection possible with a  Bluetooth Chipset like CSR8510.Where CSR8510 act as a BLE Master and end device act as a BLE slave.</p>\n\n<p>What should all parameter we consider to determine?</p>\n"
    }, {
        "tags": ["python", "iot", "raspberry-pi3"],
        "is_answered": false,
        "view_count": 1059,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1505656368,
        "creation_date": 1493823434,
        "question_id": 43763602,
        "link": "https://stackoverflow.com/questions/43763602/co2-k30-sensor-not-working-with-raspberry-pi-3",
        "title": "Co2 k30 sensor not working with Raspberry pi 3",
        "body": "<p>I have following code that is running for detecting CO2 level. \nBelow are some of the information about the models. </p>\n\n<p>CO2 sensor - K30 \nRaspberry Pi 3 </p>\n\n<p>I have done connections between pi and k-30 as per below document \n<a href=\"http://www.co2meters.com/Documentation/AppNotes/AN137-K30-sensor-raspberry-pi-uart.pdf\" rel=\"nofollow noreferrer\">http://www.co2meters.com/Documentation/AppNotes/AN137-K30-sensor-raspberry-pi-uart.pdf</a></p>\n\n<p>Below is my python code </p>\n\n<pre><code>import serial\nimport time\nser = serial.Serial(\"/dev/ttyS0\",baudrate =9600,timeout = .5)\nprint \" AN-137: Raspberry Pi3 to K-30 Via UART\\n\"\nser.flushInput()\ntime.sleep(1)\nfor i in range(1,21):\n\n    ser.flushInput()\n    time.sleep(1)\n    ser.write(\"\\xFE\\x44\\x00\\x08\\x02\\x9F\\x25\")\n    time.sleep(1)\n    resp = ser.read(7)\n\n    high = ord(resp[3])\n    low = ord(resp[4])\n    co2 = (high*256) + low\n    print \"i = \",i, \" CO2 = \" +str(co2)\n    time.sleep(.5)\n</code></pre>\n\n<p>I am not getting consistent output. </p>\n\n<p>I am getting something below </p>\n\n<pre><code>pi@raspberrypi:~/i2c $ sudo python test-co2.py \nAN-137: Raspberry Pi3 to K-30 Via UART\n\ni =  1  CO2 = 2458\ni =  2  CO2 = 2457\ni =  3  CO2 = 2448\nTraceback (most recent call last):\nFile \"test-co2.py\", line 16, in &lt;module&gt;\n    high = ord(resp[3])\nIndexError: string index out of range\npi@raspberrypi:~/i2c $ sudo python test-co2.py \nAN-137: Raspberry Pi3 to K-30 Via UART\n\ni =  1  CO2 = 2207\nTraceback (most recent call last):\nFile \"test-co2.py\", line 16, in &lt;module&gt;\n   high = ord(resp[3])\nIndexError: string index out of range\npi@raspberrypi:~/i2c $\n</code></pre>\n\n<p>Appreciate any help ?</p>\n"
    }, {
        "tags": ["ipad", "arduino", "bluetooth-lowenergy", "iot"],
        "is_answered": true,
        "view_count": 862,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1505123730,
        "creation_date": 1502111736,
        "question_id": 45547868,
        "link": "https://stackoverflow.com/questions/45547868/how-to-connect-multiple-10-wireless-sensors-to-arduino",
        "title": "How to connect multiple &gt; 10 wireless sensors to Arduino",
        "body": "<p>I am working on a small learning project with arduino in which there are multiple sensors like motors, 7 segment display, temprature sensor, lcd display, button etc and all of these need to talk single IPhone or Ipad. </p>\n\n<p>My first thought is to buy multiple flora arduino having each a sensor. Then each independent unit can connect via bluetooth. But i am not sure if it is good idea or not. How will they all connect to single device.</p>\n\n<p>Idea is like 10 arduino device sending and receiving signal from one iphone or Ipad.</p>\n"
    }, {
        "tags": ["asp.net-mvc", "arduino", "localhost", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 381,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1504620095,
        "creation_date": 1504279700,
        "last_edit_date": 1504327232,
        "question_id": 46003539,
        "link": "https://stackoverflow.com/questions/46003539/esp8266-code-not-working-properly",
        "title": "ESP8266 code not working properly",
        "body": "<p>This is ESP8266 code to turn ON/OFF an LED. I'm using the Arduino IDE built-in example code. The LED is working properly but I want to send HTTP requests to my locally-hosted web site (which send emails) but it's not working.</p>\n\n<ol>\n<li>Connected with my local Wifi</li>\n<li>Assigned a static IP</li>\n<li>When I hit 192.168.1.101/gpio/1(Led ON)</li>\n<li>When I hit 192.168.1.101/gpio/0(Led OFF) It's working but unable to hit my web site.</li>\n<li>When I hit 192.168.1.101/gpio/1 then it should hit my locally-hosted URL (192.168.1.100/home/ardchk)</li>\n</ol>\n\n<p>Kindly help me to sort out this issue.</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n\nconst char* ssid = \"SMART\";\nconst char* password = \"123456789\";\nconst char* host = \"192.168.1.100\"; // Your domain\nIPAddress ip(192, 168, 1, 101); // where xx is the desired IP Address\nIPAddress gateway(192, 168, 1, 1); // set gateway to match your network\nIPAddress subnet(255, 255, 255, 0);\nWiFiServer server(80);\n\nvoid setup() {\n  Serial.begin(115200);\n  delay(10);\n  // prepare GPIO3\n  pinMode(3, OUTPUT);\n  digitalWrite(3, 0);\n  // Connect to WiFi network\n  Serial.println();\n  Serial.println();\n  Serial.print(\"Connecting to \");\n  Serial.println(ssid);\n  WiFi.config(ip,gateway,subnet);\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.println(\"WiFi connected\");\n  // Start the server\n  server.begin();\n  Serial.println(\"Server started\");\n  // Print the IP address\n  Serial.println(WiFi.localIP());\n}\n\nvoid loop() {\n  // Check if a client has connected\n  WiFiClient client = server.available();\n  if (!client) {\n    return;\n  }\n  // Wait until the client sends some data\n  Serial.println(\"new client\");\n  while(!client.available()) {\n    delay(1);\n  }\n  // Read the first line of the request\n  String req = client.readStringUntil('\\r');\n  Serial.println(req);\n  // Match the request\n  int val;\n  if (req.indexOf(\"/gpio/0\") != -1) {\n    val = 0;\n    if (client.connect(host, 80)) {\n      //starts client connection, checks for connection\n      Serial.println(\"connected to website/server\");\n      client.println(\"GET /home/ardchk HTTP/1.1\"); //Send data\n      client.println(\"Host: 192.168.1.100\");\n      Serial.println(\"Email Sended\");\n      client.println(\"Connection: close\");\n      //close 1.1 persistent connection\n      client.println(); //end of get request\n    }\n  } else if (req.indexOf(\"/gpio/1\") != -1) {\n    val = 1;\n  } else {\n    Serial.println(\"invalid request\");\n    client.stop();\n    return;\n  }\n  // Set GPIO2 according to the request\n  digitalWrite(3, val);\n  client.flush();\n  // Prepare the response\n  String s = \"HTTP/1.1 200 OK\\r\\nContent-Type: text/html\\r\\n\\r\\n&lt;!DOCTYPE HTML&gt;\\r\\n&lt;html&gt;\\r\\nGPIO is now \";\n  s += (val)?\"high\":\"low\";\n  s += \"&lt;/html&gt;\\n\";\n  // Send the response to the client\n  client.print(s);\n  delay(1);\n  Serial.println(\"Client disconnected\");\n  // The client will actually be disconnected\n  // when the function returns and 'client' object is destroyed\n}\n</code></pre>\n"
    }, {
        "tags": ["c", "timer", "sensors", "iot", "contiki"],
        "is_answered": false,
        "view_count": 380,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1502890355,
        "creation_date": 1502888689,
        "question_id": 45714363,
        "link": "https://stackoverflow.com/questions/45714363/contiki-timestamp-value-as-int",
        "title": "Contiki Timestamp value as int",
        "body": "<p>I would like to send the value of the timestamp of a simulation as int. To be more clear, if the mote output is:</p>\n\n<pre><code>00:39.841   ID:6    unicast message ready to be sent\n</code></pre>\n\n<p>I want to be able to put in my message the value 00:39.841 in milliseconds. How can I do?</p>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["cloud", "iot", "mesh-network"],
        "is_answered": true,
        "view_count": 675,
        "favorite_count": 1,
        "score": 10,
        "last_activity_date": 1502466650,
        "creation_date": 1500609928,
        "question_id": 45228769,
        "link": "https://stackoverflow.com/questions/45228769/mesh-networks-with-master-slave-setup",
        "title": "Mesh networks with master/slave setup",
        "body": "<p>Imagine there is a big physical open-space with 100s of IoT devices. All of them are inter-connected to each other through a mesh network (adhoc wifi) and each device has it's own data. Since it's a big space, the wifi router/access point can only reach to 10% of the 100 nodes i.e. 10 nodes. These 10 nodes are considered as primary master nodes and rest as slaves. Slaves could have their own slaves also known as Secondary Masters. So the hierarchy is like any typical organization. Everyone has a master and only 10% of the master nodes have access to the internet. </p>\n\n<p>Goal is to collect data from all the nodes and push it to the central database that could hosted on AWS or any other cloud services. This would mean each slave has to transmit it's data to it's master and eventually to the top 10 masters who can push it to the cloud. </p>\n\n<p>Does mesh network support retransmitting of data or are there any open-source mesh software that I can use for something like this?</p>\n"
    }, {
        "tags": ["python", "multithreading", "amazon-web-services", "raspberry-pi", "iot"],
        "is_answered": false,
        "view_count": 699,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1502314697,
        "creation_date": 1502182479,
        "question_id": 45563783,
        "link": "https://stackoverflow.com/questions/45563783/how-to-send-data-from-sensor-to-cloud-service-in-background-using-process-in-pyt",
        "title": "how to send data from sensor to cloud service in background using process in python?",
        "body": "<p>i have two sensors which is used to detect objects and when objects passes it gives output of no of boxes passed in the conveyor. i'm doing a iot application in aws and this code is running in raspberry pi3 using python. i want to take continuous output from multiple sensor and also send the sensor values to cloud url simultaneously. is there any one can help me how to do multiprocessing with this input...</p>\n\n<pre><code>from  multiprocessing import Process\nimport RPi.GPIO as GPIO\nimport time\nimport urllib2\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(4, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)\nGPIO.setup(17, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)\nglobal t,t1\nt=0\nt1=0\ndef photo():\n    global t\n    while 1:\n           i= GPIO.input(4)\n           if i == 1:\n              time.sleep(.1)\n              j= GPIO.input(4)\n              if j == 0:\n                 t=t+1\n                 print \"photo sensor output\",t, time.ctime(time.time())\n                 connection =    urllib2.urlopen(\"https://5fhwrhjoc3.execute-api.us-east-1.amazonaws.com/production/productioncount?skey=76b89337-206c-4de3-a553- 177dbf74e4ea&amp;device_id=1&amp;count=\"+str(t))\ndef proxi():\n    global t1 \n    while 1:\n          a= GPIO.input(17)\n          if a == 1:\n             time.sleep(.1)\n             b= GPIO.input(17)\n          if b == 0:\n             t1=t1+1\n             print \"proximity output   \", t1, time.ctime(time.time())\n             connection = urllib2.urlopen(\"https://5fhwrhjoc3.execute-api.us-east-1.amazonaws.com/production/productioncount?skey=76b89337-206c-4de3-a553-177dbf74e4ea&amp;device_id=2&amp;count=\"+str(t1))\nif __name__ == '__main__':\n              while 1:\n                    p1 = Process(target=photo)\n                    p1.start()\n                    p2 = Process(target=proxi)\n                    p2.start()\n                    p1.join()\n</code></pre>\n"
    }, {
        "tags": ["node.js", "iot", "gpio"],
        "is_answered": true,
        "view_count": 79,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1501766741,
        "creation_date": 1501753124,
        "question_id": 45480410,
        "link": "https://stackoverflow.com/questions/45480410/how-can-i-get-a-same-result-gpio-input-at-nodejs",
        "title": "how can i get a same result gpio.input at nodejs?",
        "body": "<p>I figured out that gpio.input &amp; gpio.output are only supported in py.\n How can I get a same result in nodejs?\nread only return 0,1 which is useless in photocell sensor in raspberry pi.</p>\n"
    }, {
        "tags": ["json", "jackson", "iot"],
        "is_answered": false,
        "view_count": 36,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1500423923,
        "creation_date": 1500019011,
        "question_id": 45097693,
        "link": "https://stackoverflow.com/questions/45097693/how-to-convert-json-into-jackson",
        "title": "How to convert json into jackson",
        "body": "<p>i am an electrical engineering student and programming is new to me,I am asking the above stated question because i am working on my minor project in IOT technology and getting issues related to these topic.</p>\n"
    }, {
        "tags": ["c#", "arduino", "iot", "raspberry-pi3", "firmata"],
        "is_answered": true,
        "view_count": 326,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1500366017,
        "creation_date": 1500060551,
        "question_id": 45110358,
        "link": "https://stackoverflow.com/questions/45110358/dht11-arduino-uno-raspberry-pi3-windows-remote-arduino",
        "title": "DHT11 + Arduino UNO + Raspberry pi3 + Windows Remote Arduino",
        "body": "<p>I need to read with C# UWP App, a DHT11/DHT22 sensor to get temperature and the arduino is conected to an Arduino UNO.\nCan I use \"digitalRead\" at sensor PIN and converte the values using C# library \n'sensors.dht'? Or I need to change the FirmataStandard sketch to include dht library and receive the values \"cleaned\"?</p>\n\n<p>Thanks very much!</p>\n"
    }, {
        "tags": ["timer", "delay", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 1707,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1500320748,
        "creation_date": 1499000125,
        "last_edit_date": 1499025157,
        "question_id": 44871038,
        "link": "https://stackoverflow.com/questions/44871038/how-to-use-timer-set-in-mongoose-i-want-to-use-it-like-delay1000",
        "title": "How to use timer.set in mongoose I want to use it like delay(1000);",
        "body": "<p>This is how I did it in <code>arduino</code></p>\n\n<pre><code>analogWrite(pin1,1023);\ndigitalWrite(pin2,HIGH);\n\ndelay(1500);\n\nanalogWrite(pin1,0);\ndigitalWrite(pin2,LOW);\n</code></pre>\n\n<p>How do I write the same code in js for mongoose os?</p>\n\n<p>I want pin1 which is digital output to be low for 1000 ms and then high till the state.on changes</p>\n\n<p>I tried using <code>timer.set</code> in mongoose os\npin2 is analog</p>\n\n<pre><code>function valveOC() {\n\n    if (state.on === false) {\n\n        Timer.set(1000, false, function() {\n\n            GPIO.write(pin1, 0);\n\n            PWM.set(pin2, 50, 100);\n\n            print(value ? 'Tick' : 'Tock');\n        }, null);\n\n    }\n\n    if (state.on === false) {\n        Timer.set(1000, false, function() {\n\n            GPIO.write(pin1, 1);\n            PWM.set(pin2, 50, 100);\n\n        }, null);\n\n    }\n}\n</code></pre>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot"],
        "is_answered": false,
        "view_count": 143,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1500021932,
        "creation_date": 1499939099,
        "last_edit_date": 1500021932,
        "question_id": 45077003,
        "link": "https://stackoverflow.com/questions/45077003/bluetooth-low-energy-bluetoothctl-invalid-response-to-read",
        "title": "Bluetooth Low Energy : bluetoothctl - invalid response to read",
        "body": "<p>Some background information:\nThe sensor im trying to read the characteristics from is part of the IoT-starterkit: Wunderbar. Originally the sensors where designed to connect with a mainboard which would than send the data received from the sensors to a cloud.\nSadly the mainboard is not working for me, so i used my raspberry Pi 3 to replace it.\nCurrently i'm able to read standard characteristics defined by bluetooth, such as the Battery level, Manufacturer Name String, etc..</p>\n\n<p>My question is focused on reading characteristics of a Primary Service which is \"unknown\" to bluetoothctl.</p>\n\n<p>I'm not sure whether the data can't be interpreted correctly or if i'm missing some kind of authentication. </p>\n"
    }, {
        "tags": ["iot", "lora"],
        "is_answered": false,
        "view_count": 467,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1499948539,
        "creation_date": 1497349290,
        "question_id": 44518757,
        "link": "https://stackoverflow.com/questions/44518757/arduino-lora-module-code-doesnt-work",
        "title": "Arduino-LoRa module code doesn&#39;t work",
        "body": "<p>I am trying to develop an Arduino sketch in order to send Temp-humi data from a dht11 sensor to KPN (Dutch) Network throughout a LoRa module (Dragino).\nThere are plenty of sketches around internet with similar function, but none of them has the right function I expect, since most of them ONLY send a simple 'Hello world' data throughout the ABP or OTAA Keys that the Network provides. In the other hand, I have also found sketches that ONLY makes the temp/humi functionality, withouth having the chance to write the Activation Keys. </p>\n\n<p>So, I am actually trying to join these two codes with these functionalities (Request the Activation Keys to connect with KPN Network, as well as the sender sensor data), and it seems to compile properly, however, it is not sending any data, so probably the code is wrong.</p>\n\n<p>May I get any link to the right one or any recommendation, please?</p>\n\n<p>Many thanks in advance.</p>\n\n<p>Project Code:</p>\n\n<p><a href=\"https://github.com/Tonibco/Dragino-KPN-Project/blob/master/Dragino_KPN.ino\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"
    }, {
        "tags": ["raspberry-pi", "sensors", "iot", "node-red", "temperature"],
        "is_answered": false,
        "view_count": 1110,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1498930265,
        "creation_date": 1498850504,
        "last_edit_date": 1498851617,
        "question_id": 44853545,
        "link": "https://stackoverflow.com/questions/44853545/display-temperature-node-red-raspberry-pi-sensehat-using-exec-node",
        "title": "Display Temperature Node-Red Raspberry Pi Sensehat Using Exec Node",
        "body": "<p>I am trying to display the current temperature every 5 seconds from a raspberry pi sensehat using the exec node with the function 'vcgencmd measure_temp'. </p>\n\n<p>I want the output to display as {d: temp: 50} and display as a graph on the Watson IoT output node. </p>\n\n<p>My current flow is shown in the photo attached below and my current code in the function node is as follows: </p>\n\n<p>msg.payload = {'d' : {'temp' : msg.payload}};\nreturn msg;</p>\n\n<p>It is currently returning\n{ d: <em>object</em> }</p>\n\n<p>Any ideas? I have tried with a JSON node and it has not worked. </p>\n\n<p><img src=\"https://i.stack.imgur.com/O2BB7.png\" alt=\"Current Flow\"></p>\n"
    }, {
        "tags": ["python", "iot", "esp8266", "telnetlib"],
        "is_answered": false,
        "view_count": 282,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1498822131,
        "creation_date": 1498822131,
        "question_id": 44845414,
        "link": "https://stackoverflow.com/questions/44845414/python-telnetlib-multiple-clients-simultaniously",
        "title": "Python telnetlib: multiple clients simultaniously",
        "body": "<p>I have an IoT project which utilizes two ESP8266 which serve as UART bridges over wifi and I'm trying to make them communicate with a Raspberry pi using Python.</p>\n\n<p>And since the protocol used by these chips is telnet, I tried using the telnetlib library to do so, which works pretty well... Except I have not found any way to make it connect to the two ESPs at the same time. </p>\n\n<p>Is it possible to connect to multiple clients simultaneously using this library? If not, is running two separate python scripts both using this library at the same time a good idea? Could I even make those two scripts communicate with each other?</p>\n"
    }, {
        "tags": ["python", "iot", "opc-ua"],
        "is_answered": false,
        "view_count": 337,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1496102329,
        "creation_date": 1496053041,
        "last_edit_date": 1496063609,
        "question_id": 44240035,
        "link": "https://stackoverflow.com/questions/44240035/opc-ua-command-modeling",
        "title": "OPC UA command modeling",
        "body": "<p>I'm currently looking at <code>OPC UA</code> for setting up a sensor network, and intended to do the following.</p>\n\n<ul>\n<li>Each sensor runs an <code>OPC UA server</code> having a custom sensor model. </li>\n<li>Clients can query the sensor. I'm using an open source python implementation for the client and the server.(<a href=\"https://github.com/FreeOpcUa\" rel=\"nofollow noreferrer\">https://github.com/FreeOpcUa</a>)</li>\n</ul>\n\n<p>At the time being, the sensor values can be read and it works fine. </p>\n\n<p>The problem is that some of my sensors also accepts commands, so in a sense they can become actors as well. For instance, a sensor can have different reading-modes. I can change these modes by giving it an change-command. The control-unit <code>\"client\"</code> accesses the sensor <code>\"server\"</code>.</p>\n\n<p>My question is that: </p>\n\n<ol>\n<li>How can I model commands with <code>OPC UA</code>? </li>\n<li>I would like to use methods on the sensor <code>\"server\"</code>. Can I generate on the sensor an <code>OPC UA</code> event through a method call?</li>\n</ol>\n\n<p>Has somebody done something similar than this with OPC UA? I would love to hear your suggestions.</p>\n\n<p>Thanks a lot!</p>\n"
    }, {
        "tags": ["java", "iot", "intel-edison"],
        "is_answered": true,
        "view_count": 70,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1495812468,
        "creation_date": 1486331355,
        "last_edit_date": 1495812468,
        "question_id": 42057731,
        "link": "https://stackoverflow.com/questions/42057731/java-app-running-on-intel-edison-cant-read-from-sensor-and-python-can",
        "title": "Java app running on Intel Edison can&#39;t read from sensor (and Python can)",
        "body": "<p>I created a <a href=\"https://github.com/alexwoolford/htu21d_logger/blob/master/htu21d_logger_python/htu21d_demo.py\" rel=\"nofollow noreferrer\" title=\"quick and dirty prototype in Python\">quick &amp; dirty prototype in Python</a> that reads temperature/humidity from an <a href=\"https://www.sparkfun.com/products/13763\" rel=\"nofollow noreferrer\" title=\"HTU21D sensor\">HTU21D sensor</a> sensor that's connected to an Intel Edison. I'm trying to rewrite the Python prototype in Java. Unfortunately, the values being returned for temperature/humidity in Java are zero.</p>\n\n<p>The code is posted on Github: <a href=\"https://github.com/alexwoolford/htu21d_logger\" rel=\"nofollow noreferrer\">https://github.com/alexwoolford/htu21d_logger</a>. Under the covers, both Python and Java versions are using <a href=\"http://iotdk.intel.com/docs/master/upm/java/index.html\" rel=\"nofollow noreferrer\" title=\"upm\">upm</a>/<a href=\"https://github.com/intel-iot-devkit/mraa\" rel=\"nofollow noreferrer\" title=\"mraa\">mraa</a>.</p>\n\n<p>Here's the Java code to read from the sensor:</p>\n\n<pre><code>upm_htu21d.HTU21D sensor = new upm_htu21d.HTU21D(1);\nlogger.info(\"Temperature: \" + sensor.getTemperature() + \"; humidity: \" + sensor.getHumidity());\n</code></pre>\n\n<p>In the <a href=\"http://iotdk.intel.com/docs/master/upm/java/classupm__htu21d_1_1_h_t_u21_d.html\" rel=\"nofollow noreferrer\" title=\"Java example code\">Java example code</a> for the sensor, the bus argument that's passed to the <code>upm_htu21d.HTU21D(0)</code> is zero. </p>\n\n<p>Can you see what I'm doing wrong? Any suggestions on how to troubleshoot this?</p>\n"
    }, {
        "tags": ["arduino", "raspberry-pi", "iot", "i2c"],
        "is_answered": false,
        "view_count": 262,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1493964680,
        "creation_date": 1493964680,
        "question_id": 43797706,
        "link": "https://stackoverflow.com/questions/43797706/setting-up-i2c-communication-between-raspberry-pi-and-arduino",
        "title": "Setting up I2C communication between Raspberry Pi and Arduino",
        "body": "<p>I have been trying to set up I2C communication between my Raspberry Pi and two arduino pro minis using this tutorial:</p>\n\n<p><a href=\"https://learn.adafruit.com/adafruits-raspberry-pi-lesson-4-gpio-setup/configuring-i2c\" rel=\"nofollow noreferrer\">https://learn.adafruit.com/adafruits-raspberry-pi-lesson-4-gpio-setup/configuring-i2c</a></p>\n\n<p>I have done all the steps correctly, installed all the required dependencies and modified all the required files, yet \"sudo i2cdetect -y 1\" does not detect the arduinos. I have two PCF8591 AD/DA converter modules, and when I connect them to the RPi using the SCL and SDA ports, they are detected and shown by \"sudo i2cdetect -y 1\". But the arduinos do not show up. This is How I have connected the RPi and the Arduino Minis:</p>\n\n<p><strong>RPi         -> Arduino</strong></p>\n\n<p>3.3V        -> Vin</p>\n\n<p>GND         -> GND</p>\n\n<p>SDA(GPIO2)  -> SDA(A4)</p>\n\n<p>SCL(GPIO3)  -> SCL(A5)</p>\n\n<p>I would like to know what is going wrong here. Please suggest.</p>\n"
    }, {
        "tags": ["java", "android", "raspberry-pi", "iot", "touchscreen"],
        "is_answered": false,
        "view_count": 477,
        "favorite_count": 2,
        "score": 1,
        "last_activity_date": 1493639827,
        "creation_date": 1493574348,
        "last_edit_date": 1493639827,
        "question_id": 43709434,
        "link": "https://stackoverflow.com/questions/43709434/android-things-blank-screen-in-touch-screen-3-2-inch",
        "title": "Android Things blank screen in touch screen 3.2 inch",
        "body": "<p>I tried use the touch screen 3.2 inch in my raspberry with android things, but is not working!!\nI searched a lot, but nothing help me!\n<strong>This is my original config.txt:</strong></p>\n\n<pre><code>kernel=u-boot-dtok.bin&lt;br&gt;\nframebuffer_depth=16&lt;br&gt;\ndtparam=i2c_arm=on&lt;br&gt;\ndtoverlay=pwm-2chan-with-clk,pin=18,func=2,pin2=13,func2=4&lt;br&gt;\ndtparam=spi=on&lt;br&gt;\ndtparam=audio=on&lt;br&gt;\nstart_x=1&lt;br&gt;\nTell U-boot to always use the \"serial0\" interface for the console, which is&lt;br&gt;\nset to whichever uart (uart0 or uart1) is set to the header pins. This doesn't&lt;br&gt;\ninterfere with the uart selected for Bluetooth.dtoverlay=chosen-serial0&lt;br&gt;\nEnable skip-init on the UART interfaces, so U-Boot doesn't attempt to&lt;br&gt;\nre-initialize them.dtoverlay=rpi-uart-skip-init&lt;br&gt;\nUncomment to disable serial port on headers, use GPIO14 and GPIO15&lt;br&gt;\nas gpios and to allow the core_freq to change at runtime.enable_uart=1\ncore_freq=400&lt;br&gt;\n</code></pre>\n\n<p>This is my raspberry with the touch screen</p>\n\n<p><a href=\"https://i.stack.imgur.com/TFA0B.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TFA0B.jpg\" alt=\"enter image description here\"></a></p>\n"
    }, {
        "tags": ["machine-learning", "artificial-intelligence", "deep-learning", "iot"],
        "is_answered": true,
        "view_count": 234,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1493595316,
        "creation_date": 1493585039,
        "question_id": 43711125,
        "link": "https://stackoverflow.com/questions/43711125/multiple-sensors-multiple-deep-learning-models",
        "title": "Multiple sensors = multiple deep learning models?",
        "body": "<p>Let's say I have 30,000 vibration sensors monitoring 30,000 drills (1 sensor per drill) in different workplaces. I need to detect anomalies in vibration patterns.\nGiven we have enough historical data, how would you go about creating models for this problem?</p>\n"
    }, {
        "tags": ["iot", "rfid"],
        "is_answered": true,
        "view_count": 65,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1493031776,
        "creation_date": 1493020623,
        "question_id": 43582674,
        "link": "https://stackoverflow.com/questions/43582674/beam-pattern-of-sta-ir0507e-middle-range-rfid-reader",
        "title": "Beam pattern of STA IR0507E Middle-Range RFID Reader",
        "body": "<p>I would like to know the beam pattern formed by the STA IR0507E Middle-Range RFID Reader if anyone knows. I have been trying to figure out if the signal is transmitted in a linear fashion or circular pattern. I have placed my reader in a closed rectangular cabinet which is 6 feet high and 2.5 feet wide. The reader is facing downwards and is attached to the ceiling in the cabinet right in the centre. I have used RF 3-axis field strength meter to figure out the beam pattern however even after taking hundreds of readings I am not able to figure out the beam pattern.</p>\n\n<p>Specification - </p>\n\n<p>Air Interface protocol : ISO 18000-6C (EPC Class 1 Gen 2) ISO18000-6B\nFrequency Band 902MHz - 928MHz, 865MHz - 867MHz, and sub-bands\nChannels 50 (applicable to 902.5-927.5MHz frequency range)\nChannel spacing 500KHz (applicable to 902.5-927.5MHz frequency range)\nRF Power 0 to +31dBm\nReceive Sensitivity -80dBm\nAntennas Single unit with inbuilt antenna</p>\n\n<p>Pictures of the reader</p>\n\n<p><a href=\"https://i.stack.imgur.com/DiZfO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DiZfO.png\" alt=\"STA IR0507E Middle-Range RFID Reader\"></a></p>\n"
    }, {
        "tags": ["raspberry-pi", "iot", "windows-10-iot-core"],
        "is_answered": false,
        "view_count": 1432,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1491047362,
        "creation_date": 1490643386,
        "last_edit_date": 1491047362,
        "question_id": 43055004,
        "link": "https://stackoverflow.com/questions/43055004/how-can-i-count-pulse-inputs-with-some-interval-time",
        "title": "How can I count pulse inputs with some interval time?",
        "body": "<p>I'm develop a pulse counter(coin counter) in raspberry pi with windows 10 iot core, and i need to count pulses that have a interval time of 25 miliseconds like this:</p>\n\n<p>0,05\u20ac - 1 pulse\n0,10\u20ac - 2 pulses\n0,20\u20ac - 4 pulses\n0,50\u20ac - 10 pulses\n1\u20ac - 20 pulses\n2\u20ac - 40 pulses</p>\n\n<p>like this image: <a href=\"https://i.stack.imgur.com/i1erO.png\" rel=\"nofollow noreferrer\">pulses</a></p>\n\n<p>I need to print the number of pulses(to have the value inserted) when the interval time is diferent of 25 miliseconds.</p>\n\n<p>I have this code:</p>\n\n<pre><code>public MainPage()\n    {\n        this.InitializeComponent();\n        InitGPIO();\n    }\n\n    private void InitGPIO()\n    {\n        var gpio = GpioController.GetDefault();\n\n        if (gpio == null)\n        {\n            GpioStatus.Text = \"There is no GPIO controller on this device.\";\n        }\n\n        coinPin = gpio.OpenPin(coin_Pin);\n\n        if (coinPin.IsDriveModeSupported(GpioPinDriveMode.InputPullUp))\n        {\n            coinPin.SetDriveMode(GpioPinDriveMode.InputPullUp);\n        } else\n        {\n            coinPin.SetDriveMode(GpioPinDriveMode.Input);\n        }\n\n        coinPin.DebounceTimeout = TimeSpan.FromMilliseconds(25);\n\n        coinPin.ValueChanged += coinPin_ValueChanged;\n\n        GpioStatus.Text = \"GPIO pins initialized correctly.\";\n    }\n\n    private void coinPin_ValueChanged(GpioPin sender, GpioPinValueChangedEventArgs e)\n    {\n        if (e.Edge == GpioPinEdge.FallingEdge)\n        {\n            counter++;\n        }\n\n        var task = Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =&gt;\n        {\n            if (e.Edge == GpioPinEdge.FallingEdge)\n            {\n                //counter++;\n                var time = PulseIn(coinPin, e.Edge);\n                value = (counter * 5);\n                value100 = value / 100;\n                //money.Text = \"Eur: \" + (decimal)value100 + \" \u20ac\";\n\n                if (time != 25)\n                {\n                    money.Text = \"Eur: \" + (decimal)value100 + \" \u20ac\";\n                    GpioStatus.Text = \"\" + time;\n                } else\n                {\n                    GpioStatus.IsEnabled = false;\n                }\n                //GpioStatus.Text = \"\" + time + \"\";\n            } else\n            {\n                ///GpioStatus.Text = \"\" + coinPin.DebounceTimeout;\n            }\n\n\n        });\n    }\n\n    private double PulseIn(GpioPin pin, GpioPinEdge edge)\n    {\n        var sw = new Stopwatch();\n\n        while (edge.Equals(GpioPinEdge.RisingEdge))\n        {\n            //sw.Start();\n        }\n\n        sw.Start();\n\n        if (!edge.Equals(GpioPinEdge.RisingEdge))\n        {\n            //sw.Stop();\n        }\n\n        sw.Stop();\n\n        return sw.Elapsed.TotalMilliseconds;\n    }\n\n\n    private const int coin_Pin = 24;\n    private int counter = 0;\n    private double value = 0;\n    private double value100 = 0;\n    private GpioPin coinPin;\n</code></pre>\n\n<p>Can you help me please?\nThank you very much.</p>\n"
    }, {
        "tags": ["android", "bluetooth-lowenergy", "iot", "beacon"],
        "is_answered": false,
        "view_count": 679,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1490946994,
        "creation_date": 1490946994,
        "question_id": 43135470,
        "link": "https://stackoverflow.com/questions/43135470/distance-between-ble-device-and-paired-deviceandroid",
        "title": "Distance between BLE device and paired device(android)",
        "body": "<p>I am trying to get distance between a BLE device(Beacon) and my Android mobile, which is paired to that beacon. I am using the following snippet</p>\n\n<p><strong>Snippet</strong>:</p>\n\n<pre><code>private double getDistance(int rssi, int txPower) \n{\n return Math.pow(10d, ((double) txPower - rssi) / (10 * 2));\n}\n</code></pre>\n\n<p>For rssi i am using the device's RSSI but for txpower by default i am using \"1\". The return i am getting is similar to \"464.2345\" in long. so now my question is,</p>\n\n<p><strong>1.What should be given as input in txpower and how?</strong></p>\n\n<p><strong>2.How to convert the return values to meters?</strong></p>\n\n<p>Thanks in advance.</p>\n"
    }, {
        "tags": ["erlang", "mqtt", "iot", "broker"],
        "is_answered": true,
        "view_count": 92,
        "favorite_count": 1,
        "score": -1,
        "last_activity_date": 1490750431,
        "creation_date": 1490708198,
        "question_id": 43071118,
        "link": "https://stackoverflow.com/questions/43071118/is-the-broker-able-to-block-unwanted-topic-spammers",
        "title": "Is the Broker able to Block unwanted topic spammers?",
        "body": "<p>I have a MQTT environment like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/guWNU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/guWNU.png\" alt=\"enter image description here\"></a></p>\n\n<p>there is One (gray) sensor and one Observer that are related by the topic <strong>room/temp</strong>, so far so good, sensor can publish and the Observer can get the info as it should.</p>\n\n<p>the Issue I have is now: I need to block IN THE BROKER that a 2nd undesired client comes(the orange one),and start to publish into the same topic, as far as I know, MQTT is loose coupled so that observer doesn't care who is pushing the temp values, but I find a security flawless when someone hack my environment and publish non sense triggering my alarms...</p>\n\n<p>any suggestion?</p>\n\n<p>am using eMQTTd by the way and according to <a href=\"https://media.readthedocs.org/pdf/emqttd-docs/stable/emqttd-docs.pdf\" rel=\"nofollow noreferrer\">this</a> there is nothing in the <strong>etc/emqttd.config</strong> file I can do to avoid that...</p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["iot", "node-red", "arduino-esp8266"],
        "is_answered": true,
        "view_count": 1105,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1490465720,
        "creation_date": 1490461655,
        "last_edit_date": 1592644375,
        "question_id": 43019341,
        "link": "https://stackoverflow.com/questions/43019341/can-i-use-node-red-to-display-one-dashboard-group-per-sensor",
        "title": "Can I use Node-Red to display one dashboard group per sensor?",
        "body": "<p>I'm playing around With Node-Red (I'm still in the newbie stages)</p>\n<p>I have around 20 ESP8266 modules taking temperature and humidity in various locations in and around my home.</p>\n<p>The way I am doing it right now, is to put a webserver on each of my ESPs and have node-red poll them every 5 Seconds. This is ugly in all respects, as repeating this 20 times hurts the eyes. I've set up two of them already, and it looks bad:\n<a href=\"https://i.stack.imgur.com/7mD80.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7mD80.jpg\" alt=\"Setting up TWO sensors for Dashboard is already hard\" /></a></p>\n<p>My question is:</p>\n<p>Is there a way I can give node-red a list of the Devices (well, their IP addresses) and have node-red create my desired Dashboard for all of them? Looks like I would need a &quot;for-each&quot; module, as well as something to automatically create a group in the Dashboard for grouping the various gauges/Charts to each sensor.</p>\n<p>Not a lot of code to share so far, but I did create a gist for you to see, if you're interested in the webserver part for ESP8266:</p>\n<p><a href=\"https://gist.github.com/digitaldias/3f3f617fb6273276b712fa990ecebf58\" rel=\"nofollow noreferrer\">Gist of how to Connect ESP8266 With Node-Red using Arduino/C</a></p>\n<p>In advance, thanks for your tips and suggestions</p>\n"
    }, {
        "tags": ["api", "get", "arm", "iot", "keil"],
        "is_answered": false,
        "view_count": 51,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1489735732,
        "creation_date": 1489401144,
        "last_edit_date": 1489735732,
        "question_id": 42761434,
        "link": "https://stackoverflow.com/questions/42761434/how-to-call-pushing-box-api-in-mcbstr9-arm-evaluation-board",
        "title": "How to call pushing box api in mcbstr9 arm evaluation board?",
        "body": "<p>I am a beginner in working with the <em>MCBSTR9</em> arm board.<br>\nI am trying to use the <em>ESP8266</em> wifi module in TCP mode with the <strong>pushingbox API</strong>.<br>\nAfter connecting to the API, pushingbox is  unable to send a request <code>GET /pushingbox?devid=deviceid HTTP/1.0\\r\\nHost: api.pushingbox.com\\r\\n\\r\\n</code>.</p>\n\n<p>My Question is how to include the new line key in keil c. I have used <code>\\r\\n</code> for it but it's not working. It works with ESP 8266 user application, though.</p>\n\n<p>This is the code I tried:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/*ESP8266-01*/\nchar data[] = \"GET /pushingbox?devid=*************&amp;tag=but HTTP/1.0\";\nchar data1[] = \"Host: api.pushingbox.com\";\nchar data2[] = \"\";\nvoid at(void) {\n  sendchar1('A');\n  sendchar1('T');\n  sendchar1('\\r');\n  sendchar1('\\n');\n  for (i = 0; i &lt; 12; i++)\n    lcd_putchar(getkey1());\n}\nvoid atcwmode(void) {\n  char ch[] = \"AT+CWMODE=3\\r\\n\"\n  for (i = 0; i &lt; 13; i++)\n    sendchar1(ch[i]);\n  for (i = 0; i &lt; 21; i++) {\n    lcd_putchar(getkey1());\n    if (i == 14)\n      set_cursor(0, 1);\n  }\n}\nvoid atcipmux(void) {\n  char ch[] = \"AT+CIPMUX=0\\r\\n\";\n  for (i = 0; i &lt; 13; i++)\n    sendchar1(ch[i]);\n  for (i = 0; i &lt; 21; i++) {\n    lcd_putchar(getkey1());\n    if (i == 14)\n      set_cursor(0, 1);\n  }\n}\nvoid atcwjap(void) {\n  char ch[] = \"AT+CWJAP?\\r\\n\";\n  for (i = 0; i &lt; 11; i++)\n    sendchar1(ch[i]);\n  for (i = 0; i &lt; 29; i++) {\n    lcd_putchar(getkey1());\n    if (i == 16)\n      set_cursor(0, 1);\n  }\n}\nvoid atsend() {\n  char ch[] = \"AT+CIPSEND=\";\n  for (i = 0; i &lt; strlen(ch); i++)\n    sendchar1(ch[i]);\n  sendchar1('8');\n  sendchar1('5');\n  sendchar1('\\r');\n  sendchar1('\\n');\n  for (i = 0; i &lt; 16; i++)\n    lcd_putchar(getkey1());\n  set_cursor(0, 1);\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  lcd_putchar(getkey1());\n  wait();\n  wait();\n  for (i = 0; i &lt; strlen(data) - 1; i++)\n    sendchar1(data[i]);\n  GPIO7 - &gt; DR[0x3FC] = 0xFF;\n\n  set_cursor(0, 0);\n  GPIO7 - &gt; DR[0x3FC] = 0x00;\n  for (i = 0; i &lt; 16; i++)\n    lcd_putchar(getkey1());\n  set_cursor(0, 1);\n  for (i = 0; i &lt; 16; i++)\n    lcd_putchar(getkey1());\n  set_cursor(0, 0);\n  for (i = 0; i &lt; 16; i++)\n    lcd_putchar(getkey1());\n  set_cursor(0, 1);\n  for (i = 0; i &lt; 16; i++)\n    lcd_putchar(getkey1());\n}\n</code></pre>\n\n<p>I have tried using the esp user application by sending\n    POST /pushingbox?devid=vD12658A9BB09A13&amp;tag=but HTTP/1.0\\r\\n\n    Host: api.pushingbox.com:80</p>\n\n<p>It works and my pushing box scenario gets updated.\nBut it doesn't work with the board.</p>\n"
    }, {
        "tags": ["osgi", "bluetooth-lowenergy", "iot", "texas-instruments", "kura"],
        "is_answered": true,
        "view_count": 274,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1489668983,
        "creation_date": 1489580357,
        "question_id": 42809586,
        "link": "https://stackoverflow.com/questions/42809586/ti-sensortag-cc2650-with-kura-example-issue",
        "title": "TI sensortag CC2650 with Kura example issue",
        "body": "<p>I'm having a problem with tisensor tag kura example.\nI am using Raspberry Pi 3 with TI sensortag CC2650. (connected via bluetooth).\n<code>TI sensortag's hardware revision is 1.3.2</code> and <code>software revision is 1.2.1</code>\nWhen I enable all sensors , and I want to read values from them, I got only Temperature and accelerometer values. Looks like that sensortag resets after that and then starts from beggining.</p>\n\n<p>I used BlueZ tool also, and I can read values from any sensor.\nI can read with Kura also, but I cann't read them all together. I tried with mobile app to read from sensortag, and it works good.\nI am using Kura 2.1.\nDoes anybody have idea what could go wrong? ( Collegue of mine is getting all values good, with same hardware and software setup. I tried his deployment package, but I had same result.)\nCould it be something with Raspberry Pi bluetooth module?</p>\n\n<p>I am using <strong>org.eclipse.kura.example.ble.tisensortag</strong> example.</p>\n\n<p>Kura web panel setup :</p>\n\n<p><a href=\"http://prntscr.com/ek868g\" rel=\"nofollow noreferrer\">http://prntscr.com/ek868g</a></p>\n\n<p>Terminal log : </p>\n\n<p><a href=\"http://prntscr.com/ek86hp\" rel=\"nofollow noreferrer\">http://prntscr.com/ek86hp</a></p>\n"
    }, {
        "tags": ["raspberry-pi", "iot"],
        "is_answered": false,
        "view_count": 59,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1488536904,
        "creation_date": 1488517485,
        "last_edit_date": 1488536904,
        "question_id": 42571069,
        "link": "https://stackoverflow.com/questions/42571069/detecting-connected-device-fault-to-raspberry-pi",
        "title": "Detecting connected device fault to Raspberry Pi",
        "body": "<p>I am able to send data from sensor to server using Raspberry Pi, but my aim is to find the devices (for example a sensor) connected to the Raspberry Pi using any language.</p>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": false,
        "view_count": 595,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1488043262,
        "creation_date": 1488043262,
        "question_id": 42459181,
        "link": "https://stackoverflow.com/questions/42459181/setting-up-a-web-server-with-static-ip-address-using-arduino",
        "title": "setting up a web server with static ip address using arduino",
        "body": "<p>this code print the ip address at run time on serial monitor i want to set it at the the time of programming.i am using arduino ide for programming an iot device.this is an example code from arduino.i am using an esp8266 ic for wifi connection.</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;WiFi.h&gt;\nchar ssid[] = \"yourNetwork\";      // your network SSID (name) \nchar pass[] = \"secretPassword\";   // your network password\nint keyIndex = 0;                 // your network key Index number (needed        only for WEP)\n\nint status = WL_IDLE_STATUS;\n\nWiFiServer server(80);\n\nvoid setup() {\n  //Initialize serial and wait for port to open:\n  Serial.begin(9600); \n  while (!Serial) {\n; // wait for serial port to connect. Needed for Leonardo only\n  }\n\n  // check for the presence of the shield:\n  if (WiFi.status() == WL_NO_SHIELD) {\n    Serial.println(\"WiFi shield not present\"); \n    // don't continue:\n    while(true);\n  } \n\n  // attempt to connect to Wifi network:\n  while ( status != WL_CONNECTED) { \n    Serial.print(\"Attempting to connect to SSID: \");\n    Serial.println(ssid);\n    // Connect to WPA/WPA2 network. Change this line if using open or WEP                 network:    \nstatus = WiFi.begin(ssid, pass);\n\n    // wait 10 seconds for connection:\n    delay(10000);\n  } \n  server.begin();\n  // you're connected now, so print out the status:\n  printWifiStatus();\n}\n\n\nvoid loop() {\n  // listen for incoming clients\n  WiFiClient client = server.available();\n  if (client) {\n    Serial.println(\"new client\");\n// an http request ends with a blank line\nboolean currentLineIsBlank = true;\nwhile (client.connected()) {\n  if (client.available()) {\n    char c = client.read();\n    Serial.write(c);\n    // if you've gotten to the end of the line (received a newline\n    // character) and the line is blank, the http request has ended,\n    // so you can send a reply\n    if (c == '\\n' &amp;&amp; currentLineIsBlank) {\n      // send a standard http response header\n      client.println(\"HTTP/1.1 200 OK\");\n      client.println(\"Content-Type: text/html\");\n      client.println(\"Connection: close\");  // the connection will be closed after completion of the response\n      client.println(\"Refresh: 5\");  // refresh the page automatically every 5 sec\n      client.println();\n      client.println(\"&lt;!DOCTYPE HTML&gt;\");\n      client.println(\"&lt;html&gt;\");\n      // output the value of each analog input pin\n      for (int analogChannel = 0; analogChannel &lt; 6; analogChannel++) {\n        int sensorReading = analogRead(analogChannel);\n        client.print(\"analog input \");\n        client.print(analogChannel);\n        client.print(\" is \");\n        client.print(sensorReading);\n        client.println(\"&lt;br /&gt;\");       \n      }\n      client.println(\"&lt;/html&gt;\");\n       break;\n    }\n    if (c == '\\n') {\n      // you're starting a new line\n      currentLineIsBlank = true;\n    } \n    else if (c != '\\r') {\n      // you've gotten a character on the current line\n      currentLineIsBlank = false;\n    }\n  }\n}\n// give the web browser time to receive the data\ndelay(1);\n\n// close the connection:\nclient.stop();\nSerial.println(\"client disonnected\");\n  }\n}\n\n\nvoid printWifiStatus() {\n  // print the SSID of the network you're attached to:\n  Serial.print(\"SSID: \");\n  Serial.println(WiFi.SSID());\n\n  // print your WiFi shield's IP address:\n  IPAddress ip = WiFi.localIP();\n  Serial.print(\"IP Address: \");\n  Serial.println(ip);\n\n  // print the received signal strength:\n  long rssi = WiFi.RSSI();\n  Serial.print(\"signal strength (RSSI):\");\n  Serial.print(rssi);\n  Serial.println(\" dBm\");\n}    \n</code></pre>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot", "raspberry-pi3"],
        "is_answered": false,
        "view_count": 244,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1487777195,
        "creation_date": 1487777195,
        "question_id": 42395650,
        "link": "https://stackoverflow.com/questions/42395650/is-there-a-way-to-update-the-ble-advertising-intervals-of-a-ble-device",
        "title": "Is there a way to update the BLE advertising intervals of a BLE device?",
        "body": "<p>I got a few Chipolo BLE chips and have started doing some mini IoT projects using the BLE RSSI signal strength to control some IoT home automation depending on where I am relative to a few Raspberry Pi 3's I have around the house. Using the RSSI strength of these BLE chips to tigger location based processes, like play music, turn on lights etc... </p>\n\n<p>The issue I'm running into is that the BLE advertising interval seems to be pretty slow on the Chipolo. Obviously done to preserve energy and make the batter last longer. I know Bluetooth will randomly offsets the advertising signal every nth times to help prevent chip signals overlapping with other devices. Because of this every once in a while there's a burst of frequent RSSI signals but then it drops back down to maybe 1 or two every 3-5 seconds.</p>\n\n<p>Is there a way to update the advertising interval for a BLE chip? Or better yet for a Chipolo chip? With BLE, I was thinking maybe there's a way update the advertising interval if you pair with the chip and write to it's firmware or something. Can this be done? Ideally, the interval would go form say 3000ms to 500ms? I've read that the advertising interval can be as fast as 20ms to as slow as 10.24 seconds.</p>\n\n<p>I'm just starting to be more involved with some hardware projects so I'm still figuring out what exactly is possible and getting used to reading hardware specs (hence the question).</p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["serial-port", "iot", "at-command", "esp8266", "ftdi"],
        "is_answered": false,
        "view_count": 925,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1487527528,
        "creation_date": 1487491430,
        "last_edit_date": 1487527528,
        "question_id": 42324970,
        "link": "https://stackoverflow.com/questions/42324970/esp8266-at-shows-no-response",
        "title": "ESP8266 &quot;AT&quot; shows no response",
        "body": "<p>I tried to communicate with my ESP8266 over a serial connection but i don't receive any response from the device.</p>\n\n<p>What is working: Flashing works and i can get the Chip ID and MAC address (using esptool).</p>\n\n<p>Wiring is done like shown here\n<a href=\"https://i.stack.imgur.com/sMk32.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sMk32.png\" alt=\"enter image description here\"></a></p>\n\n<p>Power comes from an external stable 3,3 V source. No VCC connection on the USB-Serial converter side (but they share a common GND connection). Changing the Baud-Rate makes no difference. I tried screen, minicom and Arduino's Serial Monitor. I can send \"AT\" but the response is empty. The monitor's window is full of rubbish when i grab the MAC address over esptool.</p>\n\n<p>I'm pretty much out of ideas at the moment! What else can I try?</p>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot", "beacon", "eddystone"],
        "is_answered": true,
        "view_count": 442,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1487457496,
        "creation_date": 1487454846,
        "question_id": 42321103,
        "link": "https://stackoverflow.com/questions/42321103/getting-started-with-bluetooth-low-energy-ble-beacon-development",
        "title": "Getting started with Bluetooth Low Energy (BLE) beacon development",
        "body": "<p>I have a couple of questions concerning BLE beacons:</p>\n\n<p>1) <strong>Are beacons based on nRF51822 chip the best solution?</strong> <em>Or are there any other chips better than nRF51822?</em>   I want to take up BLE beacon development and struggling to find the right hardware for these needs. As a novice developer I want the beacon to be as cheap as possible in order not to waste money in case of a failure.</p>\n\n<p>2) <strong>Is it possible to buy pure Eddystone beacon (not iBeacon)?</strong> The reason for choosing Eddystone  is that Eddystone is capable of broadcasting URLs that are essential for me.\nThe second question stems from my failed attempts to find a pure Eddystone beacon on Chinese electronics sites like alibaba.com or aliexpress.com where the only firmware available is iBeacon. But iBeacon is not an option because it can't broadcast URL the way Eddystone does.</p>\n\n<p><strong>Apart from the above questions It would be great if someone wrote a quick guide for taking up BLE development</strong> <strong>with Eddystone</strong> and covered basic topics like: chip to use, beacon model, best website to buy beacons at, etc.</p>\n\n<p>Thanks in advance,\nPavel</p>\n"
    }, {
        "tags": ["c#", "arduino", "raspberry-pi", "iot", "i2c"],
        "is_answered": false,
        "view_count": 980,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1487378504,
        "creation_date": 1464168781,
        "question_id": 37433081,
        "link": "https://stackoverflow.com/questions/37433081/sending-byte-from-raspberry-pi-to-arduino-with-i2c-iot-for-pwm",
        "title": "Sending Byte from Raspberry Pi to Arduino With I2c &amp; IoT for PWM",
        "body": "<p>I am very new to the using both I2C and C#/Windows IoT so apologies up front if any of this is a dumb question. I have a Raspberry Pi 3 master and Arduino slave. I am trying to send a value from a slider on my UI form over I2C to the Arduino which I will use to adjust my PWM duty cycle. There a couple of issues I am having and can't work out if its the Pi, Arduino or both.</p>\n\n<p>Here is my Arduino Slave code:</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n#define MyAddress 0x03\n\nbyte ReceivedData;\nint pass;\n\nvoid setup() {\n    Wire.begin(MyAddress);\n    Wire.onReceive(I2CReceived);\n    Serial.begin(9600);\n    //Wire.onRequest(I2CRequest);\n}\n\nvoid loop() {\n\n    delay(100);\n}\n\nvoid I2CReceived(int NumberOfBytes)\n{\n    /* WinIoT have sent data byte; read it */\n  byte ReceivedData = Wire.read();\n  Serial.println(ReceivedData);\n  if (ReceivedData &lt;= 127){\n      Serial.println(\"Equal or under\");\n      return;\n  }else{\n      Serial.println(\"over\");\n      return;\n  }\n\n}\n</code></pre>\n\n<p>And my Pi Master:</p>\n\n<pre><code>using System;\nusing Windows.Devices.Gpio;\nusing Windows.UI.Xaml;\nusing Windows.UI.Xaml.Controls;\nusing Windows.UI.Xaml.Controls.Primitives;\nusing Windows.UI.Xaml.Media;\nusing Windows.UI.Core;\n\n\n\n\nusing Windows.Devices.Enumeration;\n\nusing Windows.Devices.I2c;\n\nusing System.Diagnostics;\n\nusing System.Threading;\n\nnamespace I2COutput\n{\n\n    public sealed partial class MainPage : Page\n\n    {\n\n\n        private I2cDevice TransPump;\n\n        private Timer periodicTimer;\n\n        private const byte pump = 0x03;\n\n        double pos;\n\n        public MainPage()\n\n        {\n\n            InitializeComponent();\n\n            initcomunica();\n\n        }\n\n\n\n        private async void initcomunica()\n\n        {\n\n\n            var pumpset = new I2cConnectionSettings(pump);\n\n\n            pumpset.BusSpeed = I2cBusSpeed.StandardMode;\n\n            string aqs = I2cDevice.GetDeviceSelector(\"I2C1\");\n\n            var dis = await DeviceInformation.FindAllAsync(aqs);\n\n\n            TransPump = await I2cDevice.FromIdAsync(dis[0].Id, pumpset);\n\n\n        }\n\n        private async void SendChange()\n\n        {\n            byte[] sendpos;\n            try\n            {\n               sendpos = BitConverter.GetBytes(pos);\n                TransPump.Write(sendpos);\n            }\n            catch (Exception e)\n            {\n                Debug.WriteLine(e.Message);\n            }\n\n        }\n\n\n        private void tempLbl_SelectionChanged(object sender, RoutedEventArgs e)\n        {\n\n        }\n\n        private void slider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)\n        {\n\n            pos = slider.Value;\n            temp2Lbl.Text = pos.ToString();\n            Convert.ToInt16(pos);\n            SendChange();\n\n            return;\n\n        }\n    }\n}\n</code></pre>\n\n<p>The first issue I am having is that my <code>ReceivedData</code> on the Arduino is always 0 not matter what the value of <code>sendpos</code> is on the Pi (yes, it does change when I move the slider).</p>\n\n<p>The second issue I am having is the first time the slider is moved I get the output on the Arduino serial but then nothing after. If I either reset or reload the Arduino I then get the output of the initial slider change again and nothing after.</p>\n\n<p>Apologies if any of this is too vague or explained poorly, any help or nudge in the right direction would be greatly appreciated.</p>\n\n<p>Thanks in advance. </p>\n"
    }, {
        "tags": ["iot", "esp8266", "arduino-esp8266"],
        "is_answered": true,
        "view_count": 842,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1487251022,
        "creation_date": 1486981395,
        "question_id": 42201711,
        "link": "https://stackoverflow.com/questions/42201711/periodic-crash-of-extremely-simple-esp8266-sketch",
        "title": "Periodic crash of extremely simple esp8266 sketch",
        "body": "<p>I'm quite new to esp8266 and even to electronics topic, so don't be surprised with the question.</p>\n\n<p>I've uploaded extremely simple script to esp8266-07 from Arduino IDE. It starts (sometimes...) works for multiple loops, then crashes and restarts. Below will be listed connection schema, sketch and serial output. What's wrong?</p>\n\n<p>RESET is not connected. After sketch is uploaded I disconnect GPIO0 from GND, turn off and on VCC.</p>\n\n<p><a href=\"https://i.stack.imgur.com/H8Jbc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H8Jbc.png\" alt=\"\"></a></p>\n\n<p>Also I don't know what is \"firmware\" and should I additionally upload it somehow.</p>\n\n<p>Sketch:</p>\n\n<pre><code>void setup() {\n    Serial.begin(115200);\n    Serial.println(\"Setup\");\n}\n\nvoid loop() {\n    Serial.println(\"loop\");\n    delay(1000);\n}\n</code></pre>\n\n<p>And output:</p>\n\n<pre><code>Setup\nloop\nloop\nloop\nloop\nloop\nloop\nloop\nloop\n\nException (0):\nepc1=0x402067fe epc2=0x00000000 epc3=0x00000000 excvaddr=0x0000004e depc=0x00000000\n\nctx: sys\nsp: 3ffff1c0 end: 3fffffb0 offset: 01a0\n\n&gt;&gt;stack&gt;&gt;\n...\n&lt;&lt;stack&lt;&lt;\n\nets Jan 8 2013,rst cause:2, boot mode:(3,0)\n\nload 0x4010f000, len 1384, room 16\ntail 8\nchksum 0x2d\ncsum 0x2d\nv09f0c112\n~ld\n)Setup\nloop\nloop\nloop\nloop\nloop\nloop\nloop\nloop\n\nException (0):\nepc1=0x402067fe epc2=0x00000000 epc3=0x00000000 excvaddr=0x0000004e depc=0x00000000\n\nctx: sys\nsp: 3ffff1c0 end: 3fffffb0 offset: 01a0\n\n&gt;&gt;stack&gt;&gt;\n...\n&lt;&lt;stack&lt;&lt;\n\nets Jan 8 2013,rst cause:2, boot mode:(3,0)\n\nload 0x4010f000, len 1384, room 16\ntail 8\nchksum 0x2d\ncsum 0x2d\nv09f0c112\n~ld\n)Setup\nloop\nloop\nloop\nloop\nloop\nloop\nloop\nloop\nloop\nloop\n</code></pre>\n\n<p><em>Actual stack content is replaced with \"...\"</em></p>\n\n<p>Arduino IDE 1.6.5, board manager 2.1.0</p>\n\n<p>Same test for Arduino IDE 1.6.8 and 2.3.0 crashes even without setup :(</p>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot", "ads", "battery"],
        "is_answered": false,
        "view_count": 191,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1487172417,
        "creation_date": 1487170062,
        "last_edit_date": 1487172417,
        "question_id": 42252591,
        "link": "https://stackoverflow.com/questions/42252591/ble-slave-logic-to-increase-battery-duration",
        "title": "BLE slave logic to increase battery duration",
        "body": "<p>I'm looking for answers on the net for 2 days, and it seems like I can't find my answer so I finally post it here hoping I just mess something.\nI'm conceiving a BLE slave device to log humidity in a room twice a day. This device has to run for at least 2 Years before getting recharged.</p>\n\n<p>What is the BLE logic to ensure long battery life ?</p>\n\n<p>1) Is a long advertisement / connection interval enough ?</p>\n\n<p>2) Do I need to implement a RTC with interrupt to wake up my device and start advertising to get connected?</p>\n\n<p>3) Do I have to use advertising packets only, and include my data into it?</p>\n\n<p>I think I just miss something about bluetooth low energy, and it is a problem to create a ble device.</p>\n\n<p>Thank you very much for you help, and have a good day !</p>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "device", "iot"],
        "is_answered": true,
        "view_count": 1373,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1487105505,
        "creation_date": 1487080031,
        "question_id": 42227830,
        "link": "https://stackoverflow.com/questions/42227830/how-many-bluetooth-devices-can-simultaneously-be-connected-to-scanned-by-a-bluet",
        "title": "How many Bluetooth devices can simultaneously be connected to/scanned by a Bluetooth low energy masterl ?",
        "body": "<p>Is there a maximum in specifications,do they start to interfer if many try to connect at the same time?\nwhat are the modes of communication is there a secured mode or something else ? \nMaximum packet size ? \ncan I send an image or a sound using ble ?</p>\n"
    }, {
        "tags": ["json", "arduino", "iot", "pubnub"],
        "is_answered": true,
        "view_count": 172,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1486926128,
        "creation_date": 1486885034,
        "question_id": 42185269,
        "link": "https://stackoverflow.com/questions/42185269/how-can-i-get-the-value-of-pin-a0-from-the-second-sketch-into-the-json-array-in",
        "title": "How can I get the value of pin A0 from the second sketch into the JSON array in the first sketch?",
        "body": "<p>Can anyone help me figure out how to piece these two pieces of code together so I get the result I need? My eyes are crossing from looking at this. I know this is a breeze for probably everyone other than myself, but I am not a programmer and this is just for one small personal project.</p>\n\n<p>So far, after hours and hours of reading and watching any videos I could find relating to Arduino, Pubnub and sensors, I have sensor reading publishing to Pubnub. I created a Freeboard account for visualization and that's all working. The problem is, the data being published is wrong.</p>\n\n<p>Basically, I'm wanting to read a battery voltage and publish it to PubNub. I can get the Arduino (Uno R3) to read the voltage and I can adjust the values in the code to match the actual voltage. The problem I run into is taking that bit of code that works and stuffing it into the JSON array that gets published to PubNub.</p>\n\n<p>If anyone would be willing to help me and maybe explain a little (or not - I'm okay if I just get it working), I would SO appreciate the time, help and effort.</p>\n\n<p>Thanks!</p>\n\n<p>//Each sketch works indepently. I need to merge them to get the correct reading published.</p>\n\n<p>//VoltagePubNub.ino\n(This is the one that publishes, which is what I want. I just want the published value to be the value of the second sketch.)</p>\n\n<hr>\n\n<pre><code>    #include &lt;SPI.h&gt;\n    #include &lt;Ethernet.h&gt;\n    #include &lt;PubNub.h&gt;\n    #include &lt;aJSON.h&gt;\n\n    // Some Ethernet shields have a MAC address printed on a sticker on the shield;\n    // fill in that address here, or choose your own at random:\n    const static byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };\n\n    // Memory saving tip: remove myI and dnsI from your sketch if you\n    // are content to rely on DHCP autoconfiguration.\n    IPAddress myI(192, 168, 2, 114);\n    IPAddress dnsI(8, 8, 8, 8);\n\n\n    const static char pubkey[] = \"publish_key\";\n    const static char subkey[] = \"subscribe_key\";\n    const static char channel[] = \"channel_name\";\n    char uuid[] = \"UUID\";\n\n    #define NUM_CHANNELS 1  // How many analog channels do you want to read?\n    const static uint8_t analog_pins[] = {A0};    // which pins are you reading?\n\n    void setup()\n    {\n      Serial.begin(9600);\n      Serial.println(\"Serial set up\");\n\n      Ethernet.begin((byte*) mac, myI, dnsI);\n      Serial.println(\"Ethernet set up\"); \n        delay(1000);\n\n      Serial.println(\"Ethernet set up\");\n\n      PubNub.begin(pubkey, subkey);\n      Serial.println(\"PubNub set up\");\n            delay(5000);\n    }\n\n    void loop()\n    {\n\n      Ethernet.maintain();\n\n      EthernetClient *client;\n\n            // create JSON objects\n            aJsonObject *msg, *analogReadings;\n            msg = aJson.createObject();\n            aJson.addItemToObject(msg, \"analogReadings\", analogReadings = aJson.createObject());\n\n            // get latest sensor values then add to JSON message\n            for (int i = 0; i &lt; NUM_CHANNELS; i++) {\n              String analogChannel = String(analog_pins[i]);\n              char charBuf[analogChannel.length()+1];\n              analogChannel.toCharArray(charBuf, analogChannel.length()+1);\n              int analogValues = analogRead(analog_pins[i]);\n              aJson.addNumberToObject(analogReadings, charBuf, analogValues);\n            }\n\n            // convert JSON object into char array, then delete JSON object\n            char *json_String = aJson.print(msg);\n            aJson.deleteItem(msg);\n\n            // publish JSON formatted char array to PubNub\n      Serial.print(\"publishing a message: \");\n      Serial.println(json_String);\n            client = PubNub.publish(channel, json_String);\n      if (!client) {\n        Serial.println(\"publishing error\");\n      } else\n            free(json_String);\n      client-&gt;stop();\n\n      delay(5000);\n    }\n</code></pre>\n\n<p>//VoltageSensor.ino</p>\n\n<p>(This is the one with the correct value, but no publish feature.)</p>\n\n<hr>\n\n<pre><code>    int analogInput = A0;\n    float vout = 0.0;\n    float vin = 0.0;\n    float R1 = 31000.0; //  \n    float R2 = 8700.0; // \n    int value = 0;\n    int volt = 0;\n    void setup(){\n       pinMode(analogInput, INPUT);\n       Serial.begin(9600);\n       Serial.print(\"DC VOLTMETER\");\n       Serial.println(\"\");\n    }\n    void loop(){\n       // read the value at analog input\n       value = analogRead(analogInput);\n       vout = (value * 4.092) / 1024.0;\n       vin = vout / (R2/(R1+R2)); \n\n    Serial.print(\"INPUT V= \");\n    Serial.println(vin,2);\n   delay(2000);\n    }\n</code></pre>\n"
    }, {
        "tags": ["arduino", "raspberry-pi", "iot", "gpio"],
        "is_answered": true,
        "view_count": 1530,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1486295448,
        "creation_date": 1485622530,
        "last_edit_date": 1486295325,
        "question_id": 41912340,
        "link": "https://stackoverflow.com/questions/41912340/raspberry-pi-and-rf-module-mx-rm-5v-power-through-gpio-and-noise",
        "title": "Raspberry Pi and RF module MX-RM-5V power through gpio and noise?",
        "body": "<p>i have a tiny RF 433mHz project with my Raspberry Pi 3 Model B v1.2 and Arduino Pro mini.</p>\n\n<p>My Raspberry works as a receiver and Pro mini as a transmitter.</p>\n\n<p>I have wiried the popular RF receiver MX-RM-5V to my RPi's GPIO.</p>\n\n<p>Receiver and transmitter modules have coiled antennas.</p>\n\n<p>I used the GPIO 5V pin to supply my receiver and logic level converter. </p>\n\n<p>I'm using logic level converter because the receiver works with 5V and GPIO with 3.3V  logic.</p>\n\n<p><strong>The problem is that if i use the GPIO 5V pin to supply my RF receiver module  the range drops to 10 cm.</strong></p>\n\n<p><strong>When i supply my receiver module with external adapter @ 5V the range increases to 10 - 15 meters.</strong>  </p>\n\n<p>Raspberry has micro usb 2A adapter.<br>\nThe MX-RM-5V uses 11.50 mA.</p>\n\n<p><strong>Why the GPIO 5V pin can't supply the MX-RM-5V module ?</strong> </p>\n\n<p>Is there some component on the raspberry's 5V rail between micro-usb and gpio 5v pin that limits the current ?</p>\n\n<p>How much noise the Raspberry generates on its rails and what kind ? Can this be the problem ?</p>\n"
    }, {
        "tags": ["http", "arduino", "iot", "at-command", "esp8266"],
        "is_answered": false,
        "view_count": 517,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1486043198,
        "creation_date": 1486016262,
        "last_edit_date": 1486043198,
        "question_id": 41995421,
        "link": "https://stackoverflow.com/questions/41995421/arduino-and-esp-01-wont-send-data-to-thingspeak-channel",
        "title": "Arduino and ESP-01 won&#39;t send data to ThingSpeak channel",
        "body": "<p>I am unable to send data to my ThingSpeak channel, anybody help me out. I can't understand which sections are breaking out since everything is working out well at the serial, I'am using an Arduino Mega and a DHT11 to read temperature and humidity.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;SoftwareSerial.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dht.h&gt;\n#define DHT11_PIN 6\ndht DHT;\n\n//on/off sensor 1\n//int sensor1=6;\n/**int sensor2=7;\nint sensor3=8;\nint sensor4=9;\n**/\nint sensor1State=0;\n\nint sensor2State=0;\n/**\nint sensor3State=0;\nint sensor4State=0;\n\n**/\n\n\n// replace with your channel's thingspeak API key\nString apiKey = \"YFQJHA81LPGWGYBI\";\n\n// connect 10 to TX of Serial USB\n// connect 11 to RX of serial USB\nSoftwareSerial ser(10, 11); // RX, TX\n\nint i=1;\n\n\n// this runs once\nvoid setup() {                \n  // initialize the sensor at 7th pin as an input.\n // pinMode(sensor1,INPUT);\n /** pinMode(sensor2,INPUT);\n  pinMode(sensor3,INPUT);\n  pinMode(sensor4,INPUT);\n  **/\n\n  // enable debug serial\n  Serial.begin(9600); \n  // enable software serial\n  ser.begin(9600);\n\n  // reset ESP8266\n  ser.println(\"AT+RST\");\n}\n\n\n// the loop \nvoid loop() {\n\n int chk = DHT.read11(DHT11_PIN);\n  Serial.print(\"Temperature = \");\n  Serial.println(DHT.temperature);\n  Serial.print(\"Humidity = \");\n  Serial.println(DHT.humidity);\n  delay(1000);\n\n  //reading the state of sensor1\n  //sensor1State = digitalRead(sensor1);\n\n\n    //sensor1State = digitalRead(DHT.temperature);\n     sensor1State = DHT.temperature;\n     sensor2State = DHT.humidity;\n     Serial.println(sensor1State);\n     Serial.println(sensor2State);\n\n\n /** sensor2State = digitalRead(sensor2);\n  sensor3State = digitalRead(sensor3);\n  sensor4State = digitalRead(sensor4);\n  **/\n\n  String state1=String(sensor1State);\n\n\n  String state2=String(sensor2State);\n   /** \n\n  String state3=String(sensor3State);\n\n\n  String state4=String(sensor3State);\n  **/\n\n\n  // TCP connection\n  String cmd = \"AT+CIPSTART=\\\"TCP\\\",\\\"\";\n  cmd += \"184.106.153.149\"; // api.thingspeak.com\n  cmd += \"\\\",80\";\n  ser.println(cmd);\n  Serial.println(cmd);\n\n  if(ser.find(\"Error\")){\n    Serial.println(\"AT+CIPSTART error\");\n    return;\n  }\n\n  // prepare GET string\n  String getStr = \"GET /update?api_key=\";\n  getStr += apiKey;\n  /*if(i==0)\n  {\n    Serial.println(\"1\");\n  getStr +=\"&amp;field1=\";\n  getStr += String(state1);\n  i++;\n  }\n  else if(i==1)\n  {Serial.println(\"2\");\n  getStr +=\"&amp;field2=\";\n  getStr += String(state2);\n  i++;\n  }\n  else if(i==2)\n  {\n    Serial.println(\"3\");\n  getStr +=\"&amp;field3=\";\n  getStr += String(state3);\n  i++;\n  }\n  else if(i==3)\n  {\n    Serial.println(\"4\");\n  getStr +=\"&amp;field4=\";\n  getStr += String(state4);\n  i=0;\n  }\n\n  */\n  getStr +=\"&amp;field1=\";\n  getStr += String(state1);\n\n  getStr +=\"&amp;field2=\";\n  getStr += String(state2);\n\n  /**\n  getStr +=\"&amp;field3=\";\n  getStr += String(state3);\n   getStr +=\"&amp;field4=\";\n  getStr += String(state4);\n  getStr += \"\\r\\n\\r\\n\";\n\n  **/\n\n  // send data length\n  cmd = \"AT+CIPSEND=\";\n  cmd += String(getStr.length());\n  ser.println(cmd);\n  Serial.println(cmd);\n   Serial.println(\"Attempting send\");\n\n if(ser.find(\"&gt;\")){\n    ser.print(getStr);\n    Serial.print(getStr);\n\n\n  }\n\n  else{\n\n   while (ser.available())\n    {\n         char c = ser.read();\n         Serial.write(ser.read());\n        if (c == '\\r') Serial.print('\\n');\n    }\n    ser.println(\"AT+CIPCLOSE\");\n    // alert user\n    Serial.println(\"AT+CIPCLOSE\");\n\n\n}\n\n  // thingspeak needs 15 sec delay between updates\n  delay(20000);  \n}\n</code></pre>\n"
    }, {
        "tags": ["iot", "gpio", "raspberry-pi3", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 2342,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1485952827,
        "creation_date": 1483538249,
        "question_id": 41465566,
        "link": "https://stackoverflow.com/questions/41465566/windows-10-iot-gpio-interrupt-frequency",
        "title": "Windows 10 IoT GPIO interrupt frequency",
        "body": "<p>I have a raspberry pi 3 with Windows 10 IoT. I would like to get the data from a sensor that sends pulses. Namely the Swiss Flow SF800 <a href=\"http://www.swissflow.com/sf800.html\" rel=\"nofollow noreferrer\">link</a>. This sensor will send out an amount of pulses equal to the amount of flow through the sensor. The datasheet says that I will send up to 2kHz.</p>\n\n<p>My question is will the GPIO on the raspberry pi handle an interrupt frequency this high? I have looked into the lightning provider <a href=\"https://developer.microsoft.com/en-us/windows/iot/docs/lightningproviders\" rel=\"nofollow noreferrer\">https://developer.microsoft.com/en-us/windows/iot/docs/lightningproviders</a> which is supposed to be a huge performance gain but cannot find any documentation about what kind of performance I should expect.</p>\n"
    }, {
        "tags": ["javascript", "node.js", "iot", "node-red", "watson-iot"],
        "is_answered": true,
        "view_count": 6339,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1485228467,
        "creation_date": 1471208284,
        "question_id": 38946574,
        "link": "https://stackoverflow.com/questions/38946574/getting-cpu-temperature-as-a-number-in-node-red",
        "title": "Getting CPU temperature as a number in node red",
        "body": "<p>I need to get the CPU temperature from a raspberry pi to the Watson IoT Platform quickstart service.I am doing this by using an exec node in node red with the command <code>vcgencmd measure_temp</code>. I want to send this temperature value as a <strong>number</strong> to the Watson IOT node but my exec node returns the CPU temperature as <code>\"temp=45.2</code>C\"`\nI want to get the temperature as a floating point number. For this I tried to use a function node to substring the temperature part from the string and use the parseFloat() function in javascript. But the function is notified as invalid. Can someone suggest me on how this should be done. I am a beginner in node-red.</p>\n"
    }, {
        "tags": ["embedded", "iot", "i2c"],
        "is_answered": false,
        "view_count": 47,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1485216030,
        "creation_date": 1485185988,
        "question_id": 41810107,
        "link": "https://stackoverflow.com/questions/41810107/how-many-i2c-inputs-can-the-helium-dev-board-handle",
        "title": "How many I2C inputs can the Helium Dev Board handle?",
        "body": "<p>The <a href=\"https://www.helium.com/products/atom-development-board/\" rel=\"nofollow noreferrer\">Helium Dev Board</a> tech specs state that it has \"Digital interrupt pads for I2C devices to wake the board\". Does anyone know how many I2C sensor inputs in can handle in parallel? I'm not finding it documented anywhere.</p>\n"
    }, {
        "tags": ["python", "raspberry-pi", "bluetooth-lowenergy", "sensors", "iot"],
        "is_answered": true,
        "view_count": 558,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1484825324,
        "creation_date": 1480508767,
        "last_edit_date": 1480708836,
        "question_id": 40888340,
        "link": "https://stackoverflow.com/questions/40888340/ti-sensortag-cc2650-handler-issue",
        "title": "TI SensorTag CC2650 Handler issue",
        "body": "<p>I purchased <code>TI SensorTag CC2650</code>, whose HW Rev: <code>1.3.0</code> and SW Rev: <code>1.2.0</code> to access temperature from it, I use handler <code>0x24</code> to write(Enable) and <code>0x21</code> to read its value working fine.\nRecently we purchased two more <code>TI SensorTag CC2650</code>, whose HW Rev: <code>1.3.2</code> and SW Rev: <code>1.2.1</code> to access temperature from these, TI sensorTags same handler didn't work instead it write(Enable) with <code>0x27</code> and read with <code>0x24</code>. </p>\n\n<p>And the same thing happening with other sensors too, i.e. Humidity, Gyro etc.\nHere is the link of <a href=\"http://processors.wiki.ti.com/images/a/a8/BLE_SensorTag_GATT_Server.pdf\" rel=\"nofollow noreferrer\">BLE SensorTag Attribute Table</a>.</p>\n\n<p>Is this attribute table is same for both HW and SW Versions or different?</p>\n\n<p>Any help and guidance will be welcome. </p>\n"
    }, {
        "tags": ["arduino", "network-programming", "iot", "wireless", "lora"],
        "is_answered": false,
        "view_count": 5807,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1484582444,
        "creation_date": 1433291696,
        "last_edit_date": 1484582444,
        "question_id": 30608890,
        "link": "https://stackoverflow.com/questions/30608890/arduino-and-lora-sx1272-the-long-range-wireless",
        "title": "Arduino and LoRa sx1272 the long range wireless",
        "body": "<p>How can I develop the loRa sx1272 with Arduino UNO?\nI want to link the arduino to arduino by using the wireless at long range.</p>\n"
    }, {
        "tags": ["c#", "time-series", "iot"],
        "is_answered": true,
        "view_count": 229,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1483452381,
        "creation_date": 1482417817,
        "last_edit_date": 1483452381,
        "question_id": 41285673,
        "link": "https://stackoverflow.com/questions/41285673/detect-unstable-trend-timeseries",
        "title": "Detect unstable trend (timeseries)",
        "body": "<p>I'm looking for a way to detect faulty sensors in an IOT environment. </p>\n\n<p><a href=\"https://i.stack.imgur.com/4RmQI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4RmQI.png\" alt=\"Faulty sensor\"></a></p>\n\n<p>In this case a tank level sensor. The readings are always fluctuating somewhat, and the \"hop\" at the beginning is a tank refill which is \"normal\". On Sep 16  the sensor started to malfunction and just gives apparent random values after that.</p>\n\n<p>As a programmer ideally I'd like a simple way of detecting the problem (and as soon after it starts as possible).</p>\n\n<p>I can mess about with \"if direction of vector between two hourly averages changes direction more than once per day it is unstable\". But I guess there are more sound and stable algorithms out there.</p>\n"
    }, {
        "tags": ["android", "ios", "ibeacon", "iot"],
        "is_answered": true,
        "view_count": 435,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1483297463,
        "creation_date": 1483295283,
        "question_id": 41417897,
        "link": "https://stackoverflow.com/questions/41417897/ibeacon-send-remote-data-two-way-communication",
        "title": "ibeacon send remote data / two way communication",
        "body": "<p>Is it possible for an iOS/Android app to transmit data to a remote server when it picks up an iBeacon signal. The app will run in the background. </p>\n\n<p>Lets assume the iBeacon is equipped with an internet connection as well. Will the beacon be able to pick up the data transmitted from the smartphone app?</p>\n\n<p>What I'm trying to achieve is this:</p>\n\n<ol>\n<li>An IoT device works as an iBeacon (and motion sensor)</li>\n<li>The IoT device picks up motion via the sensor</li>\n<li>The IoT contacts a remote server to find out if a given smartphone is within close range of it.</li>\n<li>The IoT performs some sort of operation based upon if the smartphone is close or not.</li>\n</ol>\n\n<p>Would this be possible?</p>\n"
    }, {
        "tags": ["lua", "wifi", "iot", "esp8266", "nodemcu"],
        "is_answered": false,
        "view_count": 317,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1483043133,
        "creation_date": 1483035244,
        "last_edit_date": 1483043133,
        "question_id": 41385095,
        "link": "https://stackoverflow.com/questions/41385095/esp8266-at-commands-working-but-fatal-on-nodemcu",
        "title": "ESP8266 AT commands working but Fatal on NodeMCU",
        "body": "<p><strong>Hardware</strong>: ESP8266-1</p>\n\n<p><strong>Settings in IDE</strong></p>\n\n<pre><code>Module: ESP8266-1\nFlash Size: 4MB\nFlash Mode: DIO\nFlash Speed: 40Mhz\nUpload Using: Arduino FTDI Serial\n</code></pre>\n\n<p>Firmware installed :</p>\n\n<pre><code>nodemcu_integer_0.9.5_20150318.bin      : 0X00000\n</code></pre>\n\n<p>(Also tried with latest firmware nodemcu_integer_0.9.6-dev_20150627.bin)</p>\n\n<p>Error : (Esplorer)</p>\n\n<pre><code>PORT OPEN 115200\n\nCommunication with MCU\u2026\n\u2026\u2026\u2026.\n\u2026\u2026\u2026.\nGot answer! AutoDetect firmware\u2026\nCommunication with MCU established.\nCan\u2019t autodetect firmware, because proper answer not received (may be unknown firmware).\nPlease, reset module or continue.\n\nFatal exception (0):\nepc1=0x40210880, epc2=0x00000000, epc3=0x00000000, excvaddr=0x00000000, depc=0x00000000\nFatal exception (0):\nepc1=0x40210880, epc2=0x00000000, epc3=0x00000000, excvaddr=0x00000000, depc=0x00000000\n</code></pre>\n\n<p>PS : I'm using a separate 3.3V power supply from beaglebone.<br>\nI'm able to flash the module with NoduMCU (above settings without any error)</p>\n\n<p>Module works fine with AT commands </p>\n\n<pre><code>boot_v1.6.bin                           : 0X00000\nesp_init_data_default.bin               : 0XFC000\nblank.bin                               : 0XFE000\nuser1.1024.new.2.bin                    : 0x1000\n</code></pre>\n\n<p>But not able to program Lua in my module.</p>\n\n<p>Please help!!!</p>\n"
    }, {
        "tags": ["bluetooth", "driver", "iot", "windows-10-iot-core", "raspberry-pi3"],
        "is_answered": true,
        "view_count": 1600,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1482947323,
        "creation_date": 1467888716,
        "last_edit_date": 1467889951,
        "question_id": 38243607,
        "link": "https://stackoverflow.com/questions/38243607/windows-10-iot-core-bluetooth-support-for-raspberry-pi3",
        "title": "Windows 10 IoT Core Bluetooth Support for Raspberry Pi3",
        "body": "<p>Apologies for asking a time dependant question, but does anyone know when Microsoft are going to sort out there drivers for the Raspberry Pi 3's on-board Bluetooth chip?</p>\n\n<p>Currently the console Device Settings just display the following exception error code relating to a fault with the OS files:</p>\n\n<blockquote>\n  <p>The device is not ready for use. (Excep_FromHResult 0x800710DF)</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/06Uw4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/06Uw4.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Or</strong> does anyone know of a workaround to this problem?... Short of developing your own drivers and creating a custom OS image for the board.</p>\n\n<p>Many thanks for your help.</p>\n"
    }, {
        "tags": ["sql", "postgresql", "time-series", "iot", "window-functions"],
        "is_answered": false,
        "view_count": 59,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1481309075,
        "creation_date": 1481309075,
        "question_id": 41066928,
        "link": "https://stackoverflow.com/questions/41066928/postgresql-identify-events-across-multiple-rows-power-consumption",
        "title": "Postgresql: Identify events across multiple rows (power consumption)",
        "body": "<p>I've got a Postgresql table that contains time series data of accumulated power usage and the actual current at a time. At the moment washing a washing machine is logged which looks like this:</p>\n\n<p><a href=\"https://www.dropbox.com/s/5pf0cq6d2lmppvq/power.png?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/5pf0cq6d2lmppvq/power.png?dl=0</a></p>\n\n<p><strong>Red</strong>: electrical current/power at this moment\n<strong>Green</strong>: Accumulated power</p>\n\n<p><strong>Goal</strong>: Identify cycles and return their starting time and power consumption.</p>\n\n<p>A washing <strong>cycle can be identified</strong> by the connected spikes in the <strong>red line</strong>.\nThe <strong>power usage</strong> of a single cycle is the difference of accumulated.start_of_cycle and accumulated.end_of_cycle</p>\n\n<p>Can anyone tell me how I would do this? I assume window functions but I never did anything like this..</p>\n\n<p>A data sample can be found here: <a href=\"https://dl.dropboxusercontent.com/u/311345/data.csv\" rel=\"nofollow noreferrer\">https://dl.dropboxusercontent.com/u/311345/data.csv</a></p>\n"
    }, {
        "tags": ["ios", "bluetooth", "sensors", "iot"],
        "is_answered": true,
        "view_count": 67,
        "favorite_count": 2,
        "score": 4,
        "last_activity_date": 1480843781,
        "creation_date": 1477925878,
        "question_id": 40344788,
        "link": "https://stackoverflow.com/questions/40344788/using-multiple-beacons-to-articulate-accurate-user-location",
        "title": "Using multiple beacons to articulate accurate user location",
        "body": "<p>Is it possible to find an accurate position of a person in a room using multiple Bluetooth beacons set up around the room through proximity detection? I've done some research and it says it is difficult to detect proximity with a Bluetooth sensor but can I overcome this through using multiple Bluetooth beacons? The point is you can use multiple Bluetooth beacons to triangulate positions and we'll be developing an iOS app that dictates the user (blind or disabled) where obstacles are. I'm wondering if this idea is doable and am curious how I can achieve accurate proximity sensing with Bluetooth beacons.</p>\n\n<p>Thank you.</p>\n"
    }, {
        "tags": ["arduino", "iot", "servo"],
        "is_answered": true,
        "view_count": 367,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1480766563,
        "creation_date": 1480766073,
        "question_id": 40947462,
        "link": "https://stackoverflow.com/questions/40947462/motors-for-linear-and-rotary-motion",
        "title": "Motors for linear and rotary motion",
        "body": "<p>I have a use case where I should apply a push action and then rotate 45 degrees or so. I want to know what kind of motors I should look for! (google talks about servo motor / potentio motor, etc.). I want to listen from experts on this.</p>\n\n<p>It is an IoT exercise I am working on with my software knowledge. I have Arduino Uno kit, but I can use a better / different one if needed.</p>\n\n<p>I need suggestion on motors (different strengths), their precise control and a way to confirm the action completion.</p>\n"
    }, {
        "tags": ["android", "arduino", "project", "iot"],
        "is_answered": false,
        "view_count": 719,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1480243927,
        "creation_date": 1480243688,
        "last_edit_date": 1480243927,
        "question_id": 40828057,
        "link": "https://stackoverflow.com/questions/40828057/how-to-send-value-from-android-app-to-field-in-thingspeak",
        "title": "how to send value from android app to field in thingspeak",
        "body": "<p>I am trying to send value of text field to thingspeak channel.</p>\n\n<pre><code>   OFF.setOnClickListener(new View.OnClickListener(){\n\n        @Override\n        public void onClick(View v) {\n            new Thread(new Runnable() {\n                @Override\n                public void run()  {\n                    try\n                    {\n\n\n                       String myUrl=\"https://thingspeak.com/update?api_key=MY_Write_KEY\"+myField.getText().toString();\n\n                        URL thingWrite=new URL(myUrl);\n                        HttpURLConnection myServer=(HttpURLConnection)thingWrite.openConnection();\n                        myServer.setRequestMethod(\"POST\");\n                        myServer.setDoOutput(true);\n                        int respCode=myServer.getResponseCode();\n\n\n\n                    }\n                    catch (Exception e) {}\n                }\n            }).start();\n            Toast.makeText(MainActivity.this,\"Its\"+myField.getText().toString()+\"Now\",\n                    Toast.LENGTH_LONG).show();;\n        }\n    });\n</code></pre>\n\n<p>But when I do not enter any value in the text field \"myField\" only then the channel gets updated with null in the field. when ever I enter a string in the myField it does not update the channel.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266", "infrared", "arduino-esp8266"],
        "is_answered": false,
        "view_count": 512,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1479971112,
        "creation_date": 1479971112,
        "question_id": 40779917,
        "link": "https://stackoverflow.com/questions/40779917/unable-to-understand-raw-ir-code",
        "title": "Unable to understand Raw IR Code",
        "body": "<p>I am working on an IR based remote control app using arduino. After a long exploration i found few Raw Ir codes, which looks like - </p>\n\n<pre><code>\"IR\": \"40064,1,1,96,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,24,24,24,1057,96,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,24,24,24,1057,96,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,48,24,24,24,24,24,24,24,24,5128\"\nenter code here\n</code></pre>\n\n<p>And it's very sad that even after getting this code i am unable to understand this code, I am using this aruino library - <a href=\"https://github.com/z3t0/Arduino-IRremote\" rel=\"nofollow noreferrer\">https://github.com/z3t0/Arduino-IRremote</a></p>\n\n<p>where for sending raw codes is like this - </p>\n\n<pre><code>void  IRsend::sendRaw (const unsigned int buf[],  unsigned int len,  unsigned int hz){\n// Set IR carrier frequency\nenableIROut(hz);\n\nfor (unsigned int i = 0;  i &lt; len;  i++) {\n    if (i &amp; 1)  space(buf[i]) ;\n    else        mark (buf[i]) ;\n}\n\nspace(0);  // Always end with the LED off\n}\n</code></pre>\n\n<p>Where buf is an array containing intervals in microseconds during which signal will be low or high.\nBut the IR code i got above isn't working, because i think it's not having the time intervals but something else. Any lead would be gracious.</p>\n"
    }, {
        "tags": ["iot", "pubnub"],
        "is_answered": true,
        "view_count": 100,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1479160539,
        "creation_date": 1478948329,
        "last_edit_date": 1478949802,
        "question_id": 40562133,
        "link": "https://stackoverflow.com/questions/40562133/pubnub-publish-message-string-format",
        "title": "pubnub.publish message string format",
        "body": "<p>I tried to publish message writing code,</p>\n\n<pre><code>MyService.pubnub.publish().channel(\"birdpeek\").message(\"{\"rlysw\":{\"0\":1}}\").async(new PNCallback&lt;PNPublishResult&gt;() \n</code></pre>\n\n<p>But the android returns error by turning red\n<a href=\"https://i.stack.imgur.com/66tZT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/66tZT.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I even put \\\" and it turns green out of blue but problem is what got on pubnub console the message is <code>Sat Nov 12 2016 18:57:40:592 : &lt;birdpeek&gt; \"{\\\"rlysw\\\":{\\\"0\\\":1}}\"</code>.\nWhat proper statement i should have inserted i need advise. And here's the json object i wanna publish,</p>\n\n<pre><code>{\"rlysw\":{\"1\":0}}\n</code></pre>\n"
    }, {
        "tags": ["web", "iot"],
        "is_answered": true,
        "view_count": 251,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1477768245,
        "creation_date": 1477764426,
        "question_id": 40322057,
        "link": "https://stackoverflow.com/questions/40322057/how-my-web-server-can-send-web-requests-to-my-iot-thing",
        "title": "How my Web server can send Web requests to my IoT thing?",
        "body": "<p>CAUTION: A newbie about <a href=\"https://en.wikipedia.org/wiki/Internet_of_things\" rel=\"nofollow\">IoT</a> concepts here!</p>\n\n<p>I'll try to be short and explain what I want to do:</p>\n\n<ul>\n<li>Suppose that I already have connected my development board (be whatever you want; <a href=\"https://www.arduino.cc/\" rel=\"nofollow\">arduino</a>, <a href=\"https://www.raspberrypi.org/\" rel=\"nofollow\">rpi</a>, <a href=\"http://www.esp8266.com/\" rel=\"nofollow\">esp8266</a>. The only requirement is to have a WiFi module on it) to my electric water heater.</li>\n<li>I return from my work and I want the water to be ready for my bath.</li>\n<li>The only thing I do is to visit (via my amazing smartphone) <code>mywaterheater.herokuapp.com/manage/</code> and just press the <code>button</code> named <code>activate</code>!</li>\n<li>Bang! The development board has <strong>received</strong> a Web request from a User-agent, it activates the relay and my water heater is now turned on.</li>\n</ul>\n\n<p>Can this be accomplished?</p>\n\n<p>I suspect that I have to turn my dev board to a router in order to listen for Web requests (GET, POST, PUT). Is the <a href=\"https://en.wikipedia.org/wiki/Web_of_Things\" rel=\"nofollow\">WoT</a> trying to solve this kind of things?</p>\n\n<p>It is assumed that any authentication/authorization and security issues have been taken care of.</p>\n"
    }, {
        "tags": ["printf", "avr", "iot", "contiki"],
        "is_answered": true,
        "view_count": 331,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1477694948,
        "creation_date": 1477664211,
        "last_edit_date": 1592644375,
        "question_id": 40307080,
        "link": "https://stackoverflow.com/questions/40307080/unexpected-behavior-in-printf-function-in-contiki",
        "title": "Unexpected behavior in printf() function in Contiki",
        "body": "<p>i was trying to test some timers in contikiOS, i used printf() to output the value of a variable but the printed value changed acording to how i printed the message.</p>\n<p>What do i mean?, well i print two variables, RTIMER_SECOND is a long unsigned int and CLOCK_SECOND is an integer. The variations bellow are what i tried and the output is bellow that code:</p>\n<pre><code>    printf(&quot;1-&gt;RTIMER_SECOND=%lu CLOCK_SECOND=%d\\n&quot;, RTIMER_SECOND, CLOCK_SECOND);\n    printf(&quot;2-&gt;RTIMER_SECOND=%d CLOCK_SECOND=%d\\n\\n&quot;, RTIMER_SECOND, CLOCK_SECOND);\n\n    printf(&quot;3-&gt;CLOCK_SECOND=%d RTIMER_SECOND=%lu\\n&quot;, CLOCK_SECOND,RTIMER_SECOND);\n    printf(&quot;4-&gt;CLOCK_SECOND=%d RTIMER_SECOND=%d\\n\\n&quot;, CLOCK_SECOND,RTIMER_SECOND);\n\n    printf(&quot;Ticks per second: %lu\\n&quot;, RTIMER_SECOND);\n    printf(&quot;second per second: %d\\n&quot;, CLOCK_SECOND);\n</code></pre>\n<p>The output is this:</p>\n<blockquote>\n<p>1-&gt;RTIMER_SECOND=15625 CLOCK_SECOND=128</p>\n<p>2-&gt;RTIMER_SECOND=15625 CLOCK_SECOND=0</p>\n<p>3-&gt;CLOCK_SECOND=128 RTIMER_SECOND=15625</p>\n<p>4-&gt;CLOCK_SECOND=128 RTIMER_SECOND=15625</p>\n<p>Ticks per second: 15625</p>\n<p>second per second: 128</p>\n</blockquote>\n<p>My question is this why does the 0 appear in the 2nd print? is the undefined behaviour when printing the %d instead of %lu of the RTIMER_SECOND affecting the next variable?\nPS: the 4th is the reverse of the 2nd and the value of the CLOCK_SECOND is not 0 there.</p>\n"
    }, {
        "tags": ["serial-port", "arduino-uno", "iot", "uart", "intel-edison"],
        "is_answered": false,
        "view_count": 309,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1477521298,
        "creation_date": 1462355308,
        "question_id": 37024155,
        "link": "https://stackoverflow.com/questions/37024155/problems-with-intel-edison-reading-data-from-arduino-uno-via-uart",
        "title": "Problems with Intel Edison reading data from Arduino Uno via UART",
        "body": "<p>I am currently trying to implement a bi-directional communication between Arduino and Edison. While it was easy to send commands from Edison to Arduino, the direction from Arduino to Edison seems to be a big problem. So my robot does exactly what it should if I send \"movement commands\" to the Arduino so this way seems to work nicely. On the Arduino I echo each command and this echo doesn't reach the Edison.</p>\n\n<p>So I hooked up my logic analyzer and all I get are frame errors.</p>\n\n<p>I changed the Arduino sketch to send \"Hello Chris\" when turning it on. If I have a look at the Serial port without the Edison all is good and it correctly decodes the \"Hello Chris\". If however I plug in the UART connection, I only record frame errors. </p>\n\n<p>What could be the problem?</p>\n"
    }, {
        "tags": ["mean", "iot"],
        "is_answered": true,
        "view_count": 1433,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1477191470,
        "creation_date": 1438755052,
        "question_id": 31824627,
        "link": "https://stackoverflow.com/questions/31824627/iot-with-mean-together",
        "title": "IOT with MEAN - Together",
        "body": "<p>MEAN stack and IOT are the current trending  hot topics. Can these two be used together? If yes then in what way?</p>\n\n<p>How can these technologies be used together?</p>\n\n<p>Sweta.</p>\n"
    }, {
        "tags": ["arduino", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 55,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1476330766,
        "creation_date": 1476330766,
        "question_id": 40012025,
        "link": "https://stackoverflow.com/questions/40012025/how-to-port-arduino-code-into-non-atmel-device",
        "title": "How to port arduino code into non-ATMEL device?",
        "body": "<p>I am fairly new to microcontrollers and programming them, etc. </p>\n\n<p>I have been working with Arduino uno and ESP8266 12E module. I have been successful in developing a prototype for IOT Automaion.</p>\n\n<p>Now I want to integrate a new chip (Microcontroller + WiFi) by High Flying. Its called the HF SIP120.</p>\n\n<p>But I have never worked with anything other than arduino. I am clueless on how to go ahead to use the new SIP120.</p>\n\n<p>It might sound a dumb Question. But I am a complete Amateur. Any kind of help is much appreciated.</p>\n\n<p>Thank You.</p>\n"
    }, {
        "tags": ["rest", "asp.net-web-api", "iot", "restful-architecture"],
        "is_answered": true,
        "view_count": 76,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1475812096,
        "creation_date": 1475774157,
        "question_id": 39902037,
        "link": "https://stackoverflow.com/questions/39902037/webapi-only-for-data-exchange",
        "title": "WebAPI only for data-exchange?",
        "body": "<p>My intent is to create a WebAPI for an IoT Device. It should give me informations about Hardware Ports, Device Status etc. My question now is, would it be okay to use it for controlling some of the ports. For example a LED which is connected to an output of the IoT Device is would be controlled like [GET] /api/led/{id}/on \nor \n[GET] /api/led/{id}/off</p>\n\n<p>Would that contradict the actual meaning of a WebAPI?</p>\n"
    }, {
        "tags": ["windows", "iot", "i2c", "windowsiot"],
        "is_answered": true,
        "view_count": 481,
        "favorite_count": 1,
        "score": 0,
        "last_activity_date": 1475482017,
        "creation_date": 1475250186,
        "last_edit_date": 1475251680,
        "question_id": 39795289,
        "link": "https://stackoverflow.com/questions/39795289/anyone-using-a-bme280-sensor-on-windows-core-iot",
        "title": "Anyone using a BME280 sensor on Windows Core IoT?",
        "body": "<p>I am trying to read data from a Bosch BME280 on Windows IoT Core. I am able to reset the chip, read the chip ID, get the trimming values and read the temp/press/hum values (burst mode). However, the compensated values are not correct. Here are the values I am getting now. I am hoping someone can share some values that I can use for comparison. Will post code in follow on post. Thanks.</p>\n\n<p>DT1 0x196e, DT2 0x7e66, DT3 0x3200\nDP1 0xc78f, DP2 0xded5, DP3 0xd00b, DP4 0xae1b, DP5 0xf00, DP6 0xf9ff, DP7 0xac26, DP8 0xad8, DP9 0xbd10\nDH1 0x4b, DH2 0x6d01, DH3 0x0, DH4 0x1308, DH5 0x800, DH6 0x1e\nRaw Temp: 0x7fd10, Raw Press: 0x581bc, Raw Humid: 0x6cca</p>\n\n<p>Compensated values here:\nBME280: Temp: 187.36c Pressure: 1344.55 millibars Humidity: 100 %rH</p>\n\n<p>I am sure I am just doing something dumb, just need a little nudge in the right direction. Thanks.</p>\n\n<p>Definitions of commands and way I read the trimming values. (just temp in example)</p>\n\n<pre><code>    public static class BME280Commands\n{\n    public static byte[] ChipID = {0xD0 };\n    public static byte[] Version = { 0xD1 };\n    public static byte[] SoftReset = { 0xE0, 0xB6 };\n    public static byte[] ControlHumidity = { 0xF2, 0x04 };  // second parm was 0x01\n    public static byte[] Status = { 0xF3 };\n    public static byte[] Control = { 0xF4, 0x91 };          // second parm was 0x87\n    public static byte[] Control1 = { 0xf4, 0x3f };\n    public static byte[] Config = { 0xF5, 0x16 };\n    public static byte[] PressureData = { 0xF7 };\n    public static byte[] TemperatureData = { 0xFA };\n    public static byte[] HumidityData = { 0xFD };\n    public static byte[] DIG_T1 = { 0x88 };\n    public static byte[] DIG_T2 = { 0x8A };\n    public static byte[] DIG_T3 = { 0x8C };\n    public static byte[] DIG_P1 = { 0x8E };\n    public static byte[] DIG_P2 = { 0x90 };\n    public static byte[] DIG_P3 = { 0x92 };\n    public static byte[] DIG_P4 = { 0x94 };\n    public static byte[] DIG_P5 = { 0x96 };\n    public static byte[] DIG_P6 = { 0x98 };\n    public static byte[] DIG_P7 = { 0x9A };\n    public static byte[] DIG_P8 = { 0x9C };\n    public static byte[] DIG_P9 = { 0x9E };\n    public static byte[] DIG_H1 = { 0xA1 };\n    public static byte[] DIG_H2 = { 0xE1 };\n    public static byte[] DIG_H3 = { 0xE3 };\n    public static byte[] DIG_H4 = { 0xE4 };\n    public static byte[] DIG_H5 = { 0xE5 };\n    public static byte[] DIG_H6 = { 0xE7 };\n    public static byte ExpectedChipId = 0x60;\n    public static byte SlaveAddress = 0x77;\n    public static byte SoftResetCode = 0xb6;\n    public Configure()\n    {\n        var data = new byte[1];\n        bme280Sensor.WriteRead(BME280Commands.SoftReset, data);\n        bme280Sensor.WriteRead(BME280Commands.ChipID, Id);\n        if (Id[0] == BME280Commands.ExpectedChipId)\n        {  // How I read the trimming values\n            bme280Sensor.WriteRead(BME280Commands.DIG_T1, buf2);\n            _digT1 = (UInt32)((buf2[0] &lt;&lt; 8) | buf2[1]);\n            bme280Sensor.WriteRead(BME280Commands.DIG_T2, buf2);\n            _digT2 = ((buf2[0] &lt;&lt; 8) | buf2[1]);\n            bme280Sensor.WriteRead(BME280Commands.DIG_T3, buf2);\n            _digT3 = ((buf2[0] &lt;&lt; 8) | buf2[1]);\n        }\n   }\n</code></pre>\n\n<p>How I read the actual values</p>\n\n<pre><code>    var buf8 = new byte[8];\n    bme280Sensor.Write(BME280Commands.ControlHumidity);\n    bme280Sensor.Write(BME280Commands.Control);\n\n    bme280Sensor.WriteRead(BME280Commands.PressureData, buf8);\n    _rawPress = (buf8[0] &lt;&lt; 16 | buf8[1] &lt;&lt; 8 | buf8[2]) &gt;&gt; 4;\n    _rawTemp = (buf8[3] &lt;&lt; 16 | buf8[4] &lt;&lt; 8 | buf8[5]) &gt;&gt; 4;\n    _rawHumid = (buf8[6] &lt;&lt; 8) | buf8[7];\n</code></pre>\n"
    }, {
        "tags": ["iot", "powerbi", "dax", "azure-table-storage", "temperature"],
        "is_answered": true,
        "view_count": 224,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1475339084,
        "creation_date": 1475317137,
        "last_edit_date": 1475322862,
        "question_id": 39805432,
        "link": "https://stackoverflow.com/questions/39805432/dax-create-table-with-latest-entries",
        "title": "DAX: Create table with LATEST entries",
        "body": "<p>I have a number of sensors in my home, and I want to use PowerBI to display a graph of the temperatures in the different rooms as well as gauge the current/most recent values. </p>\n\n<p>I am having the hardest time writing this in dax: </p>\n\n<p>The data comes to PowerBI from an Azure Table named \"DeviceReadings\" on the form: </p>\n\n<ul>\n<li>Location (Text, Partition Key)  </li>\n<li>RowKey (Numeric value based on date stored, not used)</li>\n<li>Date (DateTime, TimeStamp)</li>\n<li>Temperature (Decimal)</li>\n<li>Humidity (Decimal)</li>\n</ul>\n\n<p>What I would like is: (PSEUDOCODE)</p>\n\n<pre><code>Select Location, Last(Date), Temperature, Humidity FROM DeviceReadings \nGROUP BY Location\n</code></pre>\n\n<p>Expected/Wanted outcome is: </p>\n\n<pre><code>\"Mediaroom\", \"01.10.2017 09:00\", 26, 17\n\"Office\", \"01.10.2017 09:03\", 28, 23\n\"Livingroom\", \"01.10.2017 09:13\", 22, 32\n</code></pre>\n\n<p>Obviously, I'm trying to create a calculated DAX table based on these readings. The idea is to create a calculated table that at all times contain the most recent temperature/humidity so that I can display those values in gauge-style visuals.</p>\n\n<p>I have been trying to set table = <strong>SUMMARIZECOLUMNS</strong>, grouping by Location, and then adding named columns <strong>\"LastSampled\" as \"MAX(DeviceReadings[Date])</strong> and then <strong>\"Temperature\";LASTNONBLANK(DeviceReadings[Temperature];DeviceReadings[Temperature]);</strong> but that does not get a \"connected temperature reading, but something else.</p>\n\n<p>Ideally, I want to group by location, then by max date pr location, and then display the raw temperature + humidity value</p>\n\n<p>I simply want a \"Most recent temperature reading\" by location displayed on my PowerBI dashboard. (I'm using PowerBI desktop to write all the queries and make the reports, and have not yet uploaded to PowerBI portal)</p>\n\n<p>My DAX skills are fairly low, so I need help in writing the calculated query. </p>\n"
    }, {
        "tags": ["sensors", "iot", "contiki"],
        "is_answered": false,
        "view_count": 53,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1475318120,
        "creation_date": 1475318120,
        "question_id": 39805574,
        "link": "https://stackoverflow.com/questions/39805574/moisture-sensor-with-micaz-board",
        "title": "Moisture Sensor with MicaZ board",
        "body": "<p>I am creating a project using MicaZ boards. It has a sensor board MD100. I want to attach a moisture sensor with that board. We are using Contiki to program the board. </p>\n\n<p>What I know so far is that, out of the 4 pins of sensor, VCC will be at one of the VCC port, GND will be to any one ground port, I don't want to use digital O/P, hence d0 won't be connected. And the last A0 the analog pic is connected to ADC7 pin of Md100.</p>\n\n<p>In the program, I using the function adc_init() and then to read value I m using get_adc(7) where 7 denotes the channel. I am not getting any correct value from sensor. </p>\n\n<p>So I wanted to know where am I going wrong. \nPS: I am not sure that as I have attached sensor with ADC7 the channel no should be 7. </p>\n\n<p>Thanks in advance.</p>\n"
    }, {
        "tags": ["alarm", "iot", "esp8266", "motion-detection", "nodemcu"],
        "is_answered": false,
        "view_count": 451,
        "favorite_count": 0,
        "score": -3,
        "last_activity_date": 1475061933,
        "creation_date": 1474389318,
        "question_id": 39599477,
        "link": "https://stackoverflow.com/questions/39599477/best-way-to-retrofit-existing-alarm-pir-with-esp8266-etc",
        "title": "Best way to retrofit existing alarm PIR with esp8266/etc?",
        "body": "<p>Without going into too much detail:</p>\n\n<p>Hardware :</p>\n\n<p>Alarm System : Risco Lightsys2. Nothing unique here, each PIR (and sensor, door contacts, etc) gets 1.5 terminals on the motherboard / \"zone expander\" (the mobo only allows for 8 devices). 3 terminals shared between 2 sensors, with one common wire.</p>\n\n<p>PIRs : Bosch 4 pin PIRs (well, 6 if you include tamper) connection. 12V is available at each PIR. The pins are essentially 12+ 12- Data+ Data-.</p>\n\n<p>Goal :</p>\n\n<p>I have a very feature filled OpenHAB setup running (about 20+ types of devices). I would like to bring the PIRs into the fold. They kind of already are, via the RISCO API. But naturally this is not ideal. The API doesn't pick up / broadcast many of the sensor events (seams like only what is \"active\" during a 5 second cycle or something), there is often a delay of 1-5 seconds between when the events take place and when I know about them and frankly I would rather not hammer their API every 2 seconds to pool the status of my PIRs.</p>\n\n<p>Possibilities:</p>\n\n<p>a) Tap in at the panel.\nb) Tap in at each PIR.</p>\n\n<p>I would much rather go with b for a few reasons. Alarm box is a mess (not my setup), I have never installed an alarm so my know how of how it all works is fairly limited.</p>\n\n<p>So everything is pretty straight forward. Install an esp8266 at each sensor and pull the signal (via the analog pin) of the led that lights up every time there is motion.</p>\n\n<p>The only issue is, I am concerned that the alarm power supply will not tolerate 9 x esp8266 devices.</p>\n\n<p>So, questions are as follow:</p>\n\n<p>a) I see that my alarm essentially has a standard \"black\" power supply that I can exchange. The manual states that it is possible to install a 4A supply. I have not yet checked the amperage of the existing power supply, so it could be either 1.5A or 4.0A. Its possible I am already running the higher amp power supply as we have quite a few devices plugged into the alarm (zone extenders, 2 wireless receivers for the outside sensors, the siren, etc). <strong>If the power supply is of a lower amperage, is it just a question of installing a more powerful power supply?</strong></p>\n\n<p>b) Could someone help me to convert <strong>300ma @ 3.3v to the amperage at 12v</strong> (before the voltage regulator I guess...)? My knowledge of electronic conversions is pretty weak and the best I could come up with was 50-100ma @ 12v.</p>\n\n<p>c) Am I correct in assuming that a ESP8266 device will pull <strong>200-300ma @ 3.3v @ peak</strong> (eg: packet send and start up)?</p>\n\n<p>d) Even if the power supply at the alarm is of a higher amperage I would still be concerned about the effect when (for example), power has been lost to the alarm, and everything starts up for the first time (this would only take place after the battery has died, but regardless). 9 esp8266 devices hitting the \"startup peak\" at once?</p>\n\n<p>Any other suggestions / advice would be appreciated.</p>\n"
    }, {
        "tags": ["azure", "iot", "azure-iot-hub", "azure-iot-suite"],
        "is_answered": true,
        "view_count": 364,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1474903721,
        "creation_date": 1474866947,
        "last_edit_date": 1474867373,
        "question_id": 39695123,
        "link": "https://stackoverflow.com/questions/39695123/how-can-i-have-a-aws-iot-rule-engine-type-of-scenario-in-azure-iot-hub",
        "title": "How can I have a aws iot rule-engine type of scenario in Azure IoT hub?",
        "body": "<p>I actually wanted a conditional statement varying an output. For example, if temperature&lt;0 do something, likewise if temperature>50 do something. I wanted to know how is it possible to have this conditional case in Azure Iot? What should i follow? What term should I be looking for? Please help.</p>\n"
    }, {
        "tags": ["lua", "mqtt", "android-sensors", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 281,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1474786501,
        "creation_date": 1474786501,
        "question_id": 39684248,
        "link": "https://stackoverflow.com/questions/39684248/lua-publish-different-sensors-data-simultaneously-to-topic",
        "title": "Lua: publish different sensors data simultaneously to topic",
        "body": "<p>I am able to publish a data of different sensors (like temperature value and motion detection as zero or one) one at a time on a specific topic ( topic/temp/motion) using Lua code and subscribe in on my android app however i am not able to publish it simultaneously on same topic or sub-topic. Some ideas or examples would be great.\nBelow are some major bits of Lua code used. </p>\n\n<pre><code>orgID = \"quickstart\" -- IoT Foundation organization ID \nbroker = \"test.mosquitto.org\"   --orgID..\".messaging.internetofthings.ibmcloud.com\" -- IP or hostname of IoTF service\nmqttPort = 1883 -- MQTT port (default 1883: non-secure)\nuserID = \"\" -- blank for quickstart\nuserPWD = \"\" -- blank for quickstart\nmacID = \"18fe34e1b007\" -- unique Device ID or Ethernet Mac Address &lt;==== Modify this!\nclientID = \":esp8266:18fe34e1b007\" -- Client ID\ncount = 0 -- Test number of mqtt_do cycles\nmqttState = 0 -- State control\ntopic = \"topic/temp/motion\"\nled = 4\n--gpio.mode(led,gpio.OUTPUT)\n--dht sensor settings------------------------------\n pin = 1\n-- PIR initialization section\npir = 2\nx= 0 -- variable for sending motion detection information in \"0 or 1\"\n\nfunction DHT_do()\nstatus, temp, humi, temp_dec, humi_dec = dht.read(pin)\n--gpio.write(led, gpio.LOW)\nend\n\n\n function mqtt_do()\n count = count + 1 -- tmr.alarm counter\n------------------------------------------- pir conditional code\nif gpio.read(pir) ~= last_state then\n        last_state = gpio.read(pir)\n        if last_state == 1 then\n        print(\"ON\")\n        x = 1\n        gpio.write(led,gpio.HIGH)\n        else\n        print(\"OFF\")\n        x = 0\n       gpio.write(led,gpio.LOW)\n\nm:publish(topic,x, 0, 0,\n function(conn)\n  print(x)\n  print(\"temp_data:\"..temp) \n</code></pre>\n"
    }, {
        "tags": ["lua", "iot", "esp8266"],
        "is_answered": false,
        "view_count": 123,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1472334810,
        "creation_date": 1472240270,
        "last_edit_date": 1472334810,
        "question_id": 39173616,
        "link": "https://stackoverflow.com/questions/39173616/i-can-not-send-program-to-esp8266-module",
        "title": "I can not send program to ESP8266 module",
        "body": "<p>Yesterday I got ESP8266, NodeMCU v2.0. I have a problem with module. I Use Esplorer IDE. I have simple code in LUA language. </p>\n\n<pre><code>gpio.mode(4,gpio.OUTPUT)\ngpio.write(4,gpio.LOW)\nwifi.setmode(wifi.STATION)\nwifi.sta.config(\"Livebox-C408\",\"7255E6262488CC90482CE6F264\")\nprint(wifi.sta.getip())\n</code></pre>\n\n<p>When I send program to ESP8266, Esplorer shows below error.</p>\n\n<pre><code>stdin:2: '=' expected near 'a'\nstdin:2: ')' expected (to close '(' at line 1) near 'TATION'\n</code></pre>\n\n<p>Sometimes(~10%) I can send above program to ESP8266 without problem. In my opinion, ESP8266 is damaged. What do you think about my problem?</p>\n\n<p>Anticipating your questions, login and password to my home wi-fi are correct.</p>\n"
    }, {
        "tags": ["bluetooth", "bluetooth-lowenergy", "iot", "gateway", "ibmwearables"],
        "is_answered": true,
        "view_count": 6364,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1472242806,
        "creation_date": 1472206191,
        "question_id": 39163772,
        "link": "https://stackoverflow.com/questions/39163772/maximum-number-of-ble-sensors-that-could-be-connected-to-a-ble-gateway-at-a-give",
        "title": "Maximum number of BLE sensors that could be connected to a BLE gateway at a given instant?",
        "body": "<p>I have this doubt. For example, I have a Smart Wrist Band (measures pulse, body temp), a Smart Gear/Watch (to display text alerts, control calls) and a Bluetooth headset. I need all the three to communicate with my mobile phone at the same given instant. </p>\n\n<p>Is it possible to achieve the same ?</p>\n\n<p>What are the challenges involved if I need to develop an application on my own if I had to achieve the above possibilities ?</p>\n\n<p>Your help is highly appreciated.</p>\n\n<p>Note:\n - BLE has star-based network topology and maximum devices per Piconet is 8 including the Master\n - Please help me in understanding/visualizing the above theory that I learnt.</p>\n\n<p>Thanks.</p>\n"
    }, {
        "tags": ["ibm-cloud", "iot", "ibm-cloud-plugin", "watson-iot", "openstack-python-api"],
        "is_answered": false,
        "view_count": 112,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1470809529,
        "creation_date": 1470714667,
        "last_edit_date": 1470753554,
        "question_id": 38841730,
        "link": "https://stackoverflow.com/questions/38841730/i-want-to-know-how-we-can-control-the-simulated-temperature-sensor-in-ibm-bluemi",
        "title": "I want to know how we can control the simulated temperature sensor in ibm bluemix using python",
        "body": "<p>I want to know how I can get logs from simulated temperature and humidity sensor in ibmbluemix quickstart device. I can only see that it is done using java script. I couldnt find a place to write my python code that would interact with the simulated temperature sensor. </p>\n"
    }, {
        "tags": ["arduino", "raspberry-pi", "cloud", "raspberry-pi2", "iot"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1470660561,
        "creation_date": 1470655443,
        "question_id": 38827990,
        "link": "https://stackoverflow.com/questions/38827990/query-on-iot-device",
        "title": "Query on Iot device",
        "body": "<p>Can any one help me find a solution on this.</p>\n\n<p>I would like to know whether there is any sensor that can sense and send data below -30\u00b0C. I came to know that arduino cant work on that temperature range.</p>\n\n<p>I need to deploy something into a freezer like thing which can sense the -\u00b0C temperature and send it to the cloud or send it to some controller(wire less) near by and that controller will send the data to raspberry-pi or cloud.</p>\n\n<p>Thank you for the valuable commands.</p>\n"
    }, {
        "tags": ["arduino", "raspberry-pi", "iot"],
        "is_answered": false,
        "view_count": 333,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1470388122,
        "creation_date": 1470388122,
        "question_id": 38785458,
        "link": "https://stackoverflow.com/questions/38785458/automatic-stopwatch-with-raspberry-pi",
        "title": "Automatic Stopwatch with Raspberry PI",
        "body": "<p>I want to build a automatic stopwatch for dog agility.\nIt's not very accurate to start and stop time with a ordinary one.\nI need a sensor on the first jump and another sensor on the last jump.\nThe first start time and the second stop time.\nAnd then view time on a display or so.\nI found this project that is alike what i want.\n<a href=\"https://www.hackster.io/falafelsoftware/ir-break-beam-hot-wheels-car-speed-track-361455\" rel=\"nofollow\">https://www.hackster.io/falafelsoftware/ir-break-beam-hot-wheels-car-speed-track-361455</a></p>\n\n<p>The sensor used in this <strong>Adafruit Breakbeam Sensor</strong>\n<a href=\"https://learn.adafruit.com/ir-breakbeam-sensors/overview?view=all\" rel=\"nofollow\">https://learn.adafruit.com/ir-breakbeam-sensors/overview?view=all</a>\nIf i understand it correctly the range is only up to 50 cm.\nA jumps width is normally 120 cm but it can be up to 140 cm.\nSo i need at least 120cm range.</p>\n\n<p>I want to use a raspberry Pi and windows C#.\nI have experience with c# and visual studio but this will be my first IOT project.</p>\n\n<p>I am very thankful for any help and tips to build this. \nSpecially tips on a sensor that will work for me.</p>\n"
    }, {
        "tags": ["machine-learning", "neural-network", "time-series", "classification", "iot"],
        "is_answered": false,
        "view_count": 142,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469801854,
        "creation_date": 1469801854,
        "question_id": 38661098,
        "link": "https://stackoverflow.com/questions/38661098/detection-of-people-presence-in-a-room-based-on-data-from-sensors",
        "title": "Detection of people presence in a room based on data from sensors",
        "body": "<p>I have a binary classification problem:</p>\n\n<p>There some sensors in a room (humidity, temperature, sound/noise, infrared etc.) that collect data every N minutes. When people come into/leave the room, sensors react on this action. So, after some time, dataset will look like that:</p>\n\n<pre><code>&lt;sensor_1&gt; &lt;sensor_2&gt; ... &lt;sensor_i&gt; &lt;time&gt; | &lt;people in room?&gt;\n   ...         ...           ...       ...         yes/no\n</code></pre>\n\n<p>In this way, how should I address this problem? Should I take into consideration previous readings from sensors and due to this use time-series techniques or LSTM? Can I simply apply SVM or neural net for this task?</p>\n"
    }, {
        "tags": ["raspberry-pi2", "iot", "windows-iot-core-10"],
        "is_answered": true,
        "view_count": 106,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469775622,
        "creation_date": 1469715384,
        "question_id": 38639089,
        "link": "https://stackoverflow.com/questions/38639089/is-there-any-possibility-for-two-sensors-accessing-on-the-raspberry-pi2-pins-li",
        "title": "Is there any possibility for two sensors accessing on the Raspberry PI2 pins (like SDA and SDL) ?",
        "body": "<p>I am working on IoT Technology, in my current project I want to connect two sensors like BMP280 and TSL 2561 by using Raspberry PI 2.</p>\n\n<p>But these two sensors are using the Same I2C Bus Pins (I2C1 SDA and I2C1 SDL on the Raspberry PI2.</p>\n\n<p>Please tell me how can I use the above two pins for two sensors.</p>\n\n<p>-Kishore</p>\n"
    }, {
        "tags": ["node.js", "raspberry-pi", "iot", "node-red"],
        "is_answered": true,
        "view_count": 1500,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1469608874,
        "creation_date": 1469572109,
        "last_edit_date": 1469585031,
        "question_id": 38600878,
        "link": "https://stackoverflow.com/questions/38600878/implementation-of-multiple-input-in-node-red",
        "title": "Implementation of multiple input in Node-RED",
        "body": "<p>I am a newbie in node-red and IoT, yet currently working on a project.\nBasically my aim is to create an alerter system for construction workers.</p>\n\n<p>I want to measure altitude, ambient temperature and the state of the safety mechanism (locked or not). Based on the readings the system should make decisions (if the measurement exceeds a threshold  - send a notification [buzzer/LED]). </p>\n\n<p>The logic is as follows:</p>\n\n<ol>\n<li>When the system is turned on, measure an initial altitude (h initial), </li>\n<li>after a particular period of time (not defined yet), measure the current altitude (h current). </li>\n<li>The difference between current and initial altitude would be the actual altitude of a worker(h). </li>\n<li>If the altitude h is higher than 2 meters - send a buzzer signal. If the h is less than 0, calculate h initial and h current again. </li>\n</ol>\n\n<p>I have connected the TI CC2650 SensorTag to the RPi's Node-red and it sends measurements to the node-red as json objects, depending on how many sensor readings you'd like you read. In my case (temperature and pressure) I am receiving two jsons in turn:</p>\n\n<pre><code>{ \"d\": { \"id\": \"b827ebb2b2bd.c4be84711c81.0\", \"tstamp\": { \"$date\": 1469565713321 }, \"json_data\": { \"object\": 21.40625, \"ambient\": 27.125 } } }\n\n{ \"d\": { \"id\": \"b827ebb2b2bd.c4be84711c81.4\", \"tstamp\": { \"$date\": 1469565713328 }, \"json_data\": { \"pressure\": 1016.36 } } }\n</code></pre>\n\n<p>I've faced the following problems:</p>\n\n<ol>\n<li><p>I couldn't feed multiple data to Node-RED. Was wondering if someone could guide me how to send (temperature, pressure, mechanism's state[1 or 0] data) to the function node;</p></li>\n<li><p>Regarding the alerting. Basically, to find the actual altitude I need to have two altitude measurements. Means, I need to somehow store two pressure/temperature measurements. Do I need to store measurements data as an array or there can be a better way to deal with this? </p></li>\n</ol>\n\n<p>Was wondering If anyone could guide/help me with this.</p>\n\n<p>P.S. The clipboard of the flow is quite long so I decided don't paste it here, though can send it if anyone requests.</p>\n\n<p><strong>the very very raw code</strong></p>\n\n<pre><code>var hInit;\nvar hChecked;\nvar h;\n\n//p0 is the hardcoded pressure on the level of the sea\n//hardcoded for the current area\nvar p0 = 1019;\n\n//extract the pressure value and the ambient temp from jsons\ntagPressure = msg.payload.json_data.pressure;\ntagTemp = msg.payload.json_data.ambient;\n\n//the formula to convert a pressure to an altitude\n\n//here it should measure the altitde (hInit) when the testbest is turned on\n\nhInit = (((Math.pow((tagTemp/p0), (1/5.257)))-1)*(tagTemp + 273.15))/0.0065;\n//hChecked is the measured altitude afterwards\nhChecked = (((Math.pow((tagTemp/p0), (1/5.257)))-1)*(tagTemp + 273.15))/0.0065;\n\n//h is the actual altitude the worker is working on\nh = hChecked - hInit;\n\n//in the case if a worker turned the testbed on \n//when he was operating on the altitude he then\n//might go down so altitude can reduce.\n//therefore if the altitude h is &lt; 0 we need to\n//calculate a new reference \n\nif (h &lt; 0) {\n    hInit = (((Math.pow((tagTemp/p0), (1/5.257)))-1)*(tagTemp + 273.15))/0.0065;\n    hChecked = (((Math.pow((tagTemp/p0), (1/5.257)))-1)*(tagTemp + 273.15))/0.0065;\n    h = hChecked - hInit;\n    return h;\n}\n\n//check current altitude\nwhile (h&gt;0){\n\n    if (h&gt;2){\n\n        if (lockerState == 1) {\n            msg.payload = \"safe\";\n            return msg;\n        }\n\n        else if (lockerState === 0) {\n            msg.payload = \"lock your belt!\";\n            //basically i want to send a 1 signal\n            //to the buzzer which is a pin on the RPI3\n            //so probably msg.payload = 1;\n            return msg;\n        }\n    }    \n}\n//return msg;\n</code></pre>\n"
    }, {
        "tags": ["python-2.7", "iot", "temperature", "intel-edison"],
        "is_answered": true,
        "view_count": 661,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1468966623,
        "creation_date": 1468798077,
        "question_id": 38426893,
        "link": "https://stackoverflow.com/questions/38426893/how-to-read-temperature-humidity-sensor-attached-to-an-intel-edison",
        "title": "how to read temperature/humidity sensor attached to an Intel Edison?",
        "body": "<p>I'm trying to create an <a href=\"http://www.micropik.com/PDF/dht11.pdf\" rel=\"nofollow noreferrer\" title=\"DHT11 based temperature humidity sensor\">DHT11-based temperature/humidity sensor</a> with Intel Edison and <a href=\"http://iotdk.intel.com/docs/master/mraa/python/\" rel=\"nofollow noreferrer\" title=\"mraa via Python\">mraa via Python</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4D7sn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4D7sn.jpg\" alt=\"Intel Edison with breakout board\"></a></p>\n\n<p>The documentation for Python's mraa package was a bit thin on example code.</p>\n\n<p>There's a <a href=\"http://iotdk.intel.com/docs/master/mraa/edison.html\" rel=\"nofollow noreferrer\" title=\"lookup table\">lookup table</a> to associate physical pins to mraa pin numbers. The GP44 pin on the breakout board is mraa pin 31:</p>\n\n<pre><code>&gt;&gt;&gt; import mraa\n&gt;&gt;&gt; mraa.INTEL_EDISON_GP44\n31\n</code></pre>\n\n<p>The gp44 port was configured as an ouput port:</p>\n\n<pre><code>&gt;&gt;&gt; gp44_pin = mraa.Gpio(31)\n&gt;&gt;&gt; gp44_pin.dir(mraa.DIR_OUT)\n</code></pre>\n\n<p>When I read from the gp44 pin it returns zero:</p>\n\n<pre><code>&gt;&gt;&gt; gp44_pin.read()\n0\n</code></pre>\n\n<p>Looking at the C examples, it seems that the DHT11 sensor <a href=\"http://www.i-programmer.info/programming/hardware/9200-exploring-edison-bit-banging-the-dht11dht22-.html?start=2\" rel=\"nofollow noreferrer\" title=\"returns a byte array\">returns a byte array</a> that can be deciphered. I stumbled across some <a href=\"http://www.uugear.com/portfolio/dht11-humidity-temperature-sensor-module/\" rel=\"nofollow noreferrer\" title=\"more specific instructions\">more specific instructions</a> to decode the bytes but, undfortunately, the code examples were specific to the Raspberry Pi and I'm working with Intel Edison.</p>\n\n<p>Ideally, I'd like to call methods that return temperature and humidity, but a byte array would would also work since I have the 'decoder ring'. Can you see what needs to be done in order to return the temperature/humidity (or byte array)?</p>\n"
    }, {
        "tags": ["android", "sensors", "iot"],
        "is_answered": false,
        "view_count": 139,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1468240625,
        "creation_date": 1467210662,
        "last_edit_date": 1468240625,
        "question_id": 38102671,
        "link": "https://stackoverflow.com/questions/38102671/sensortag-2-accelerometer-range-issue",
        "title": "SensorTag 2 accelerometer range issue",
        "body": "<p>I am using Sensortag 2 for accelerometer with android and below is the code am using to enable the 3 axis of the accelerometer as well as the Wake-On-Motion. <a href=\"http://processors.wiki.ti.com/index.php/CC2650_SensorTag_User&#39;s_Guide\" rel=\"nofollow\">CC2650 SensorTag User's Guide</a> here says that the 8-9 bits are used for the acceleration range 0=2G,1=4G,2=8G,3=16G. The weird thing is that 8G is always on besides that am writing 00 (on 8-9 bits) I never get 2G.</p>\n\n<pre><code>characteristic=gatt.getService(MOVE_SERVICE).getCharacteristic(MOVE_CONFIG_CHAR);\n\ncharacteristic.setValue(0b0000000010111000,BluetoothGattCharacteristic.FORMAT_UINT16,0);\n\ngatt.writeCharacteristic(characteristic);\n</code></pre>\n\n<p>Can anyone help me please?? it really gets annoying.</p>\n"
    }, {
        "tags": ["android", "sensors", "iot"],
        "is_answered": true,
        "view_count": 210,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1467129021,
        "creation_date": 1467127073,
        "question_id": 38080151,
        "link": "https://stackoverflow.com/questions/38080151/ti-sensortag-cc2650-noise-filter",
        "title": "Ti sensortag CC2650 noise filter",
        "body": "<p>am using Ti Sensortag cc2650 with an android application. My problem is that the accelerometer and gyroscope output is very noisy. I searched the internet to find any solution for this and I couldn't find anything. Could anyone tell me or guide me for my problem?</p>\n\n<p>I set the advertising frequency to 100ms if that matters.</p>\n\n<p>thanks.</p>\n"
    }, {
        "tags": ["c++", "multithreading", "raspberry-pi", "sensors", "iot"],
        "is_answered": true,
        "view_count": 244,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1467068013,
        "creation_date": 1466723072,
        "last_edit_date": 1467068013,
        "question_id": 38003275,
        "link": "https://stackoverflow.com/questions/38003275/refactoring-multi-thread-program-on-raspberry-pi-with-sensors",
        "title": "Refactoring multi thread program on raspberry pi with sensors",
        "body": "<p>I am doing a IoT experiment with raspberry pis and sensors aiming to monitor temperature change. Each raspberry pi is connected to multiple sensors. My goal is to have one reading per sensor per second, store the data in a buffer(real buffer or a csv file) and publish the data to a broker. The program now is doing all things in queue. It turns out some delay. I have tested and it turns out the delay comes from reading process. Is there any way to reduce reading delay? Will multi threading solve this problem? If so, what I think is to create 3 thread. Sensor thread read the data and store in a buffer. Communicator thread connect to the broker, read the data in buffer and send it to the broker. Main thread will manage sensor thread and communicator thread. If I refactor the program in this way, do I write one sensor thread for each sensor or one sensor thread for all sensors?</p>\n\n<p>Any suggestions will be greatly appreciated.</p>\n"
    }, {
        "tags": ["iot"],
        "is_answered": false,
        "view_count": 50,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1466592151,
        "creation_date": 1466592151,
        "question_id": 37965664,
        "link": "https://stackoverflow.com/questions/37965664/can-i-have-a-forum-for-discussiing-about-iot-projects-or-can-i-use-this-stackov",
        "title": "Can I have a forum for discussiing about IoT projects? or Can I use this stackoverflow for the same?",
        "body": "<p>I am doing a project for my corporate, It is purely for IoT domain in which it involves circuits, sensors, Remote terminal unit and communication protocols.\nI want to have more details about my projects! </p>\n\n<p>Can anyone pls help out this to find a perfect forum to discuss this, or can I ask my doubts here in stack overflow???</p>\n\n<p>Any help is highly appreciable!!</p>\n"
    }, {
        "tags": ["raspberry-pi", "ibm-cloud", "iot", "ibm-cloud-tools", "watson-iot"],
        "is_answered": false,
        "view_count": 173,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1465740276,
        "creation_date": 1465496502,
        "last_edit_date": 1465567430,
        "question_id": 37733486,
        "link": "https://stackoverflow.com/questions/37733486/how-to-check-if-raspberry-pi-has-received-information-from-bluemix",
        "title": "How to check if Raspberry Pi has received information from Bluemix?",
        "body": "<p>I have built a small setup with the Raspberry Pi which consists of a LED. I have successfully connected my Pi with Bluemix. I wrote a small code which turns on and off the led from a mybluemix.net webpage (function myCommandcallback).</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\nimport os, json\nimport ibmiotf.application\nimport uuid\n\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(18, GPIO.IN, pull_up_down=GPIO.PUD_UP)\nGPIO.setup(17, GPIO.OUT)\n\nclient = None\n\ndef myCommandCallback(cmd):\n    if cmd.event == \"light\":\n        payload = json.loads(cmd.payload)\n        command = payload[\"command\"]\n        print command\n        if command == \"on\":\n            GPIO.output(17, GPIO.HIGH)\n        elif command == \"off\":\n            GPIO.output(17, GPIO.LOW)\n\ntry:\n    options = ibmiotf.application.ParseConfigFile(\"/home/pi/device.cfg\")\n    options[\"deviceId\"] = options[\"id\"]\n    options[\"id\"] = \"aaa\" + options[\"id\"]\n    client = ibmiotf.application.Client(options)\n    client.connect()\n    client.deviceEventCallback = myCommandCallback\n    client.subscribeToDeviceEvents(event=\"light\")\n\n    while True:\n        GPIO.wait_for_edge(18, GPIO.FALLING)\n        print \"Button Pushed\"\n        myData = {'buttonPushed' : True}\n        client.publishEvent(\"raspberrypi\", options[\"deviceId\"], \"input\", \"json\", myData)\n        time.sleep(0.2)\n\nexcept ibmiotf.ConnectionException  as e:\n    print e\n</code></pre>\n\n<p>When I click the button to turn on the LED on the webpage, the sensor information on the IBM IoT platform shows \"light on\", but the LED doesn't actually turn on. Is there anyway to check on the Pi if the information has been received?</p>\n"
    }, {
        "tags": ["arduino-uno", "iot", "xbee", "intel-edison"],
        "is_answered": false,
        "view_count": 340,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1465380963,
        "creation_date": 1457424146,
        "last_edit_date": 1462941076,
        "question_id": 35862012,
        "link": "https://stackoverflow.com/questions/35862012/how-do-i-communicate-between-arduino-board-and-intel-edison-arduino-board-using",
        "title": "How do I communicate between Arduino board and Intel Edison Arduino board using XBee S2?",
        "body": "<p>I have an <a href=\"http://arduino.cc/en/Main/ArduinoBoardUno\" rel=\"nofollow\">Arduino Uno</a> board and an XBee S2 device on it. I can identify my Arduino Uno board is transmitting data from XBee S2 by seeing the tx LED, but I am not clear how to receive data on the <a href=\"https://en.wikipedia.org/wiki/Intel_Edison\" rel=\"nofollow\">Intel Edison</a> Arduino setup board (XBee S2 is also connected to the Intel Edison board).</p>\n\n<p>I am not clear how the Arduino shield board for Intel Edison is supporting UART to Tx/Rx data through XBee S2. How do I actually write XBee S2 code? Is it only a serial UART communication?</p>\n"
    }, {
        "tags": ["sensors", "iot"],
        "is_answered": false,
        "view_count": 45,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1465238210,
        "creation_date": 1462780128,
        "last_edit_date": 1462780538,
        "question_id": 37110308,
        "link": "https://stackoverflow.com/questions/37110308/which-sensor-i-have-to-use-to-find-out-distance-of-a-particular-device-using-sen",
        "title": "which sensor i have to use to find out distance of a particular device using sensors in iot",
        "body": "<p>I want to create a device like tracker to find objects like keys or any important things. I want to add that sensor to that valuable thing to find where the object i left. I can't use motion sensor, ultrasonic sensor or air proximity because of its check distance form one direction. I need to find out the distance of the object from any direction.</p>\n"
    }, {
        "tags": [".net", "arduino", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 2181,
        "favorite_count": 0,
        "score": 3,
        "last_activity_date": 1464684122,
        "creation_date": 1459413447,
        "question_id": 36328219,
        "link": "https://stackoverflow.com/questions/36328219/esp8266-is-net-possible",
        "title": "ESP8266 - is .Net possible?",
        "body": "<p>Looking to know if it is at all possible to develop for the ESP8266 (I have the WeMos D1 Mini) using C# or if I'm stuck with Arduino Sketch?</p>\n\n<p>I've looked around on the net, but not finding any guides or examples, so it does feel like my answer will be \"No\" but posting anyway in case someone knows of anything to the contrary :)</p>\n"
    }, {
        "tags": ["bluetooth-lowenergy", "sensors", "iot", "texas-instruments"],
        "is_answered": false,
        "view_count": 116,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1464628987,
        "creation_date": 1462985166,
        "last_edit_date": 1462985639,
        "question_id": 37168735,
        "link": "https://stackoverflow.com/questions/37168735/ti-sensortag-provides-invalid-sensor-values",
        "title": "TI SensorTag provides invalid sensor values",
        "body": "<p>I bough CC2650STK, unbox and run BLE SensorTag app on my Samsung Galaxy S4 and:</p>\n\n<ul>\n<li>Humidity Data - 47,6%rH (<a href=\"https://inode.pl/iNode-Care-Sensor-PHT-p34\" rel=\"nofollow\">iNode Care Sensor PHT</a>\u00a0presents: 35,9%)</li>\n<li>Barometer Data - 843.3 mBar (S4: 982.4 mBar, iNode: 980.2 mBar)\nAmbient Temperature Data is equals +/- 0.1\u00b0C.</li>\n</ul>\n\n<p>Why humidity and barometer have huge divergence? My SensorTag is damaged? Or it required calibration? How I can to do?</p>\n\n<p>I wrote some reads in <a href=\"https://docs.google.com/spreadsheets/d/1nOjZsUxrW7W_M-JX517BIqVZ-3aVP-oT5_yNi9Eiicg/edit?usp=sharing\" rel=\"nofollow\">Google Spreadsheet</a> and they look like they were repetitive.</p>\n\n<p>Best regards</p>\n"
    }, {
        "tags": ["json", "ibm-cloud", "iot"],
        "is_answered": true,
        "view_count": 124,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1462496020,
        "creation_date": 1462425254,
        "last_edit_date": 1462461825,
        "question_id": 37042880,
        "link": "https://stackoverflow.com/questions/37042880/ibm-bluemix-iot-unsuccessfully-sent",
        "title": "IBM Bluemix IoT unsuccessfully sent",
        "body": "<p>When trying to complete the tutorial at <a href=\"https://developer.ibm.com/recipes/tutorials/how-to-connect-mediatek-linkit-one-development-board-to-ibm-bluemix/\" rel=\"nofollow\">https://developer.ibm.com/recipes/tutorials/how-to-connect-mediatek-linkit-one-development-board-to-ibm-bluemix/</a></p>\n\n<p>All runs fine except I am getting an \"unsuccessfully sent\" error.</p>\n\n<p>I checked the status of the service all seems fine?</p>\n\n<p>Not sure what to try next?</p>\n\n<p>Edit:\nExample of response when trying to connect to registered device.</p>\n\n<hr>\n\n<p>temperature = 21.40\nhumidity = 47.10\nTrying to connect to: d:ctk1yn:LinkitOneOffice:autumnlinkitone\nConnected !!: \npublishing... !!: \nattempt to send {\n\"d\": {\n\"myName\": \"LinkIt ONE\",\n\"temperature (F)\": 72,\n\"temperature (C)\": 21,\n\"humidity\": 47\n}\n}\nto iot-2/evt/status/fmt/json\nunsuccessfully sent</p>\n"
    }, {
        "tags": ["arduino", "win-universal-app", "iot", "windows-10-iot-core"],
        "is_answered": true,
        "view_count": 314,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1462372077,
        "creation_date": 1458598181,
        "question_id": 36142572,
        "link": "https://stackoverflow.com/questions/36142572/how-to-communicate-i2c-device-connected-to-arduino-to-windows-10-iot-core",
        "title": "How to communicate I2c device connected to Arduino to Windows 10 IoT Core",
        "body": "<p>I have a UWP app which will display values of sensors connected to Arduino which will be connected to that UWP app. I have a I2C device connected to that Arduino. I want to communicate to that I2C device from my UWP application. But, I can't find a way to do that. Can Someone can help me with that.</p>\n"
    }, {
        "tags": ["raspberry-pi", "windows-10", "iot", "i2c"],
        "is_answered": false,
        "view_count": 170,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1462097581,
        "creation_date": 1462097581,
        "question_id": 36965467,
        "link": "https://stackoverflow.com/questions/36965467/how-to-achive-correct-readings-from-ds1621",
        "title": "how to achive correct readings from ds1621?",
        "body": "<p>In a project that is in fact a modified example of Iot win10 I succeed in reading values from ds1621 by sending 0xAA to read one value. That is repeated every second. \nThe readings I receive vary from 1 to 16 degrees, within just 2 or 3 seconds. Most of the time the reading is 12 degrees. The actual room temperature where the device is installed is around 20 degrees Celcius and is stable (indoors).</p>\n\n<p>What could possibly be the cause and the solution for this? I have connected to a Raspi2 for 3.5V (pin 1), ground (pin 6), SDA (pin 3) and SCL (pin 5). No further resistors or capacitors. The DS1621 is just the DIP8 case, no breakoutboard or anything.</p>\n"
    }, {
        "tags": ["c", "arduino-uno", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 2807,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1462017321,
        "creation_date": 1459845551,
        "last_edit_date": 1460560344,
        "question_id": 36421213,
        "link": "https://stackoverflow.com/questions/36421213/deprecated-conversion-from-string-constant-to-char-wwrite-strings-error-in",
        "title": "Deprecated conversion from string constant to &#39;char*&#39; [-Wwrite-strings] error in Arduino sketch",
        "body": "<p>I'm sending sensor data using Arduino and ESP8266. But while compiling the sketch in Arduino I'm getting an error saying - <strong>deprecated conversion from string constant to 'char*' [-Wwrite-strings]</strong>.</p>\n\n<pre><code>#include \"SoftwareSerial.h\"\nSoftwareSerial esp(10, 11);// RX, TX\nvoid setup() {\n  esp.begin(9600);\n  Serial.begin(9600);\n  delay(100);\n  Serial.println(\"Started...\");\n  reset();\n  connectWifi();\n}\n\n//reset the esp8266 module\nvoid reset() {\n  esp.println(\"AT+RST\");\n  delay(1000);\n  if (esp.find(\"OK\")) Serial.println(\"Module Reset\"); //error\n}\n</code></pre>\n"
    }, {
        "tags": ["azure", "iot", "powerbi"],
        "is_answered": false,
        "view_count": 807,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1461779397,
        "creation_date": 1461702337,
        "last_edit_date": 1461779397,
        "question_id": 36875050,
        "link": "https://stackoverflow.com/questions/36875050/how-to-filter-azure-stream-analytics-input-data-from-different-iot-devices-and-p",
        "title": "How to filter Azure stream analytics input data from different IoT devices and process them to PowerBI",
        "body": "<p>I have 3 devices configured on my Azure IoT hub. All of them send the same kind of data (temp, humidity, light and their deviceId). I use this IoT hub as input in Azure stream analytics. Then it should be filtered based on the deviceId via a query. I use PowerBI as output. In PowerBI I would like to make a line chart showing the temperature of the three devices. Currently, I use a PowerBI output for each device, which creates three datasets in PowerBI and unfortunately it is not possible to combine datasets.</p>\n\n<p>Any suggestions?</p>\n\n<p>For now I use this query</p>\n\n<pre><code>WITH outputSander as(\n    SELECT temp,deviceId,System.TIMESTAMP as time\n    from Sensordata\n    where deviceId = 'Raspberry_Pi_Sander'),\noutputKoen as(\n    SELECT temp,deviceId,System.TIMESTAMP as time\n    from Sensordata\n    where deviceId = 'Raspberry_Pi_Koen')\n--outputLukas as(\n  --  SELECT temp,deviceId,System.TIMESTAMP as time\n   -- from Sensordata\n   -- where deviceId = 'Raspberry_Pi_Lukas')\n    select s1, s2\nINTO\n    [outputData]\nFROM\n    outputSander s1 LEFT JOIN outputKoen s2 on(DATEDIFF(s, s1, s2) BETWEEN 0 AND 5)\n</code></pre>\n\n<p>As output I would like to see something like this:</p>\n\n<p>S1.temp S1.deviceId, S1.time, S2.temp, S2.deviceId, S2.time with their correct values respectively.</p>\n"
    }, {
        "tags": ["embedded", "iot"],
        "is_answered": false,
        "view_count": 1639,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1461677125,
        "creation_date": 1435767162,
        "last_edit_date": 1435852612,
        "question_id": 31166590,
        "link": "https://stackoverflow.com/questions/31166590/setting-up-contiki-on-ti-cc1310",
        "title": "setting up contiki on TI CC1310",
        "body": "<p>I got a prototype TI CC1310 board. I searched online to see if there are any IoT examples or demos or even a setup guide in setting up contiki stack on the device.\nCan anyone help me in setting up the the CC1310 board. I am using a SmartRF06 board.</p>\n"
    }, {
        "tags": ["sensors", "iot", "z-wave"],
        "is_answered": false,
        "view_count": 678,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1460980395,
        "creation_date": 1448952191,
        "question_id": 34014166,
        "link": "https://stackoverflow.com/questions/34014166/interface-an-ultrasonic-sensor-with-z-wave",
        "title": "Interface an ultrasonic sensor with Z-Wave",
        "body": "<p>The task at hand is to integrate/interface an already existing ultrasonic sensor like <a href=\"http://www.ebay.com/itm/DC-5V-Ultrasonic-Module-Distance-Measuring-Transducer-Sensor-Perfect-Waterproof-/271900302156\" rel=\"nofollow\">this</a> one to a Z-wave transceiver.</p>\n\n<p>Here are the questions related to it:</p>\n\n<ol>\n<li>Is it possible?</li>\n<li>What all do I need for it? (Hardware + Software)</li>\n<li>Are there any examples that i can follow?</li>\n</ol>\n"
    }, {
        "tags": ["arduino", "iot"],
        "is_answered": true,
        "view_count": 545,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1460570014,
        "creation_date": 1460367916,
        "question_id": 36545146,
        "link": "https://stackoverflow.com/questions/36545146/electro-mechanical-relay-input-to-arduino",
        "title": "Electro Mechanical Relay Input to Arduino",
        "body": "<p>I have a 220 V electro mechanical relay (Normally open by default).\nI want to read input from Arduino  when my relay goes to normally close state from normally open or vice verson.\nIf I have more then 10 relay I want read 10 input from Arduino board.</p>\n\n<p>Is is possible if yes please explain.</p>\n"
    }, {
        "tags": ["c++", "arduino", "arduino-uno", "iot", "esp8266"],
        "is_answered": true,
        "view_count": 7488,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1460012748,
        "creation_date": 1459927865,
        "question_id": 36444321,
        "link": "https://stackoverflow.com/questions/36444321/connect-esp8266-01-to-wifi-network-with-arduino-uno-r3",
        "title": "Connect ESP8266-01 to WiFi Network with Arduino UNO R3",
        "body": "<p>Hello I am very new to Arduino Developing. Generally I am developing iOS Apps.\nI have Arduino Uno R3 and ESP8266-01 Module. I want to connect my arduino board with my wifi network through ESP8266-01. I have schematic is like this:</p>\n\n<blockquote>\n  <p>Arduino -> ESP8266</p>\n  \n  <p>power 3.3V -> vcc , CH_PD</p>\n  \n  <p>ground -> ground</p>\n  \n  <p>pin2 -> rx </p>\n  \n  <p>pin3 -> tx</p>\n</blockquote>\n\n<p>Now I have installed ESP8266 Library to Arduino Board from <a href=\"http://arduino.esp8266.com/stable/package_esp8266com_index.json\" rel=\"nofollow\">http://arduino.esp8266.com/stable/package_esp8266com_index.json</a></p>\n\n<p>My arduino program is like this:</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n\nconst char* ssid = \"your-ssid\";\nconst char* password = \"your-password\";\n\nint ledPin = 2; // GPIO2\nWiFiServer server(80);\n\nvoid setup() {\nSerial.begin(115200);\ndelay(10);\n\npinMode(ledPin, OUTPUT);\ndigitalWrite(ledPin, LOW);\n\n// Connect to WiFi network\nSerial.println();\nSerial.println();\nSerial.print(\"Connecting to \");\nSerial.println(ssid);\n\nWiFi.begin(ssid, password);\n\nwhile (WiFi.status() != WL_CONNECTED) {\ndelay(500);\nSerial.print(\".\");\n}\nSerial.println(\"\");\nSerial.println(\"WiFi connected\");\n\n// Start the server\nserver.begin();\nSerial.println(\"Server started\");\n\n// Print the IP address\nSerial.print(\"Use this URL to connect: \");\nSerial.print(\"http://\");\nSerial.print(WiFi.localIP());\nSerial.println(\"/\");\n\n}\n\nvoid loop() {\n// Check if a client has connected\nWiFiClient client = server.available();\nif (!client) {\nreturn;\n}\n\n// Wait until the client sends some data\nSerial.println(\"new client\");\nwhile(!client.available()){\ndelay(1);\n}\n\n// Read the first line of the request\nString request = client.readStringUntil('\\r');\nSerial.println(request);\nclient.flush();\n\n// Match the request\n\nint value = LOW;\nif (request.indexOf(\"/LED=ON\") != -1) {\ndigitalWrite(ledPin, HIGH);\nvalue = HIGH;\n}\nif (request.indexOf(\"/LED=OFF\") != -1) {\ndigitalWrite(ledPin, LOW);\nvalue = LOW;\n}\n\n// Set ledPin according to the request\n//digitalWrite(ledPin, value);\n\n// Return the response\nclient.println(\"HTTP/1.1 200 OK\");\nclient.println(\"Content-Type: text/html\");\nclient.println(\"\"); // do not forget this one\nclient.println(\"&lt;!DOCTYPE HTML&gt;\");\nclient.println(\"&lt;html&gt;\");\n\nclient.print(\"Led pin is now: \");\n\nif(value == HIGH) {\nclient.print(\"On\");\n} else {\nclient.print(\"Off\");\n}\nclient.println(\"&lt;br&gt;&lt;br&gt;\");\nclient.println(\"Click &lt;a href=\\\"/LED=ON\\\"&gt;here&lt;/a&gt; turn the LED on pin 2 ON&lt;br&gt;\");\nclient.println(\"Click &lt;a href=\\\"/LED=OFF\\\"&gt;here&lt;/a&gt; turn the LED on pin 2 OFF&lt;br&gt;\");\nclient.println(\"&lt;/html&gt;\");\n\ndelay(1);\nSerial.println(\"Client disonnected\");\nSerial.println(\"\");\n\n}\n</code></pre>\n\n<p>When I compile my code I am getting error:</p>\n\n<blockquote>\n  <p>In file included from\n  /Users/Mohak/Documents/Arduino/libraries/ESP8266WiFi/src/ESP8266WiFi.h:39:0,\n                   from /Users/Mohak/Desktop/sohan Demos/Arduino Sketches/wifiweb_Server/wifiweb_Server.ino:1:\n  /Users/Mohak/Documents/Arduino/libraries/ESP8266WiFi/src/WiFiClient.h:24:18:\n  fatal error: memory: No such file or directory  #include \n                    ^ compilation terminated. exit status 1 Error compiling.</p>\n</blockquote>\n\n<p>Please help me to solve this problem or give me any other correct path to connect my arduino board with my wifi network. any help would be appreciated. sorry for my bad english and thanks in advance. :)</p>\n"
    }, {
        "tags": ["real-time", "ibm-cloud", "iot"],
        "is_answered": false,
        "view_count": 135,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1458210594,
        "creation_date": 1458036229,
        "last_edit_date": 1458047171,
        "question_id": 36008082,
        "link": "https://stackoverflow.com/questions/36008082/bluemix-iot-real-time-insight-webhook-message-contain-invalid-character",
        "title": "bluemix IOT real time insight webhook {{message}} contain invalid character",
        "body": "<p>We are using RTI webhook to post the message notification to store it in <code>Cloudant DB</code>. We are passing <code>{{message}}</code> parameter to the POST call body. Upon storage we notice the <code>\"/\"</code> character before every <code>quote(\")</code>. This seems to be a bug as this make the JSON invalid to consume at later stage. Below is the example of what <code>{{message}}</code> contains in one of our case </p>\n\n<blockquote>\n  <p>\"{\\\"d\\\":{\\\"Energy_Consumption\\\":150,\\\"pressure\\\":36.84546626947179,\\\"water_usage\\\":1640.0274074248778,\\\"temp\\\":45},\\\"ts\\\":\\\"2016-03-15T06:48:02.320+0000\\\",\\\"ruleContent\\\":{\\\"id\\\":\\\"J4jn6Wqv\\\",\\\"contextSchemas\\\":[],\\\"ruleCondition\\\":\\\"IOT_DeviceSchema.d.temp>40\n  AND IOT_DeviceSchema.d.pressure&lt;80 AND\n  IOT_DeviceSchema.d.Energy_Consumption>100\\\",\\\"messageSchemas\\\":[\\\"IOT_DeviceSchema\\\"],\\\"jobID\\\":\\\"tOXtlQLA\\\",\\\"name\\\":\\\"Device_Alert\\\",\\\"severity\\\":2,\\\"actions\\\":[\\\"Xfy2CCx6\\\"],\\\"transforms\\\":[],\\\"destination\\\":\\\"tenant.228e9515-9a62-448a-ba9a-a570000ba619.ruleOutput\\\"},\\\"deviceId\\\":\\\"ftkgac:IOTsample_devicetype:Device03\\\"}\"</p>\n</blockquote>\n"
    }, {
        "tags": ["ios", "ibeacon", "iot", "bluetooth-lowenergy"],
        "is_answered": true,
        "view_count": 1096,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1457650043,
        "creation_date": 1457646370,
        "question_id": 35927946,
        "link": "https://stackoverflow.com/questions/35927946/can-we-detect-non-ibeacon-beacons-on-ios",
        "title": "Can we detect non-iBeacon beacons on iOS?",
        "body": "<p>I and my team are working on a beacon that we need to talk to an app on the user's iPhone. Since we need the app to detect the beacon and execute code to talk to our API even when killed, we cannot use CoreBluetooth and need to operate as a beacon.</p>\n\n<p>We're attempting to make a custom beacon on a BCM20737S BLE module. Is it possible to have this custom beacon talk to an app on an iPhone as a beacon? (CoreLocation framework)</p>\n\n<p>Thanks!</p>\n"
    }, {
        "tags": ["lua", "iot", "esp8266", "nodemcu"],
        "is_answered": true,
        "view_count": 1169,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1456986919,
        "creation_date": 1456861979,
        "last_edit_date": 1456932356,
        "question_id": 35732189,
        "link": "https://stackoverflow.com/questions/35732189/esp8266-thingspeak-data-doesnt-show-up",
        "title": "ESP8266 Thingspeak data doesn&#39;t show up",
        "body": "<p>I built this project:\n<a href=\"http://www.instructables.com/id/Low-cost-WIFI-temperature-data-logger-based-on-ESP/?ALLSTEPS\" rel=\"nofollow\">http://www.instructables.com/id/Low-cost-WIFI-temperature-data-logger-based-on-ESP/?ALLSTEPS</a>\nThe ESP8266 outputs something and I think it should be ok.\nBut there are no entries in the Thingspeak channel. I already double-checked the API-Write Key.\nHere's the serial output:</p>\n\n<pre><code>Setting up WIFI...\n&gt; IP unavaiable, Waiting...\nIP unavaiable, Waiting...\nIP unavaiable, Waiting...\nIP unavaiable, Waiting...\nIP unavaiable, Waiting...\nIP unavaiable, Waiting...\nConfig done, IP is 192.168.1.9\nLast temp: 216875\nTemp:21.6875.6875 C\n\nSending data to thingspeak.com\nLast temp: 216875\nTemp:21.6875.6875 C\n\nSending data to thingspeak.com\nGot disconnection...\nLast temp: 216875\nTemp:21.6875.6875 C\n\nSending data to thingspeak.com\nGot disconnection...\nLast temp: 216875\nTemp:21.6875.6875 C\n\nSending data to thingspeak.com\nGot disconnection...\nLast temp: 216875\nTemp:21.6875.6875 C\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"
    }, {
        "tags": ["bluetooth", "arduino", "iot"],
        "is_answered": false,
        "view_count": 675,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1453890730,
        "creation_date": 1453890453,
        "last_edit_date": 1453890730,
        "question_id": 35034749,
        "link": "https://stackoverflow.com/questions/35034749/connecting-arduino-to-bluetooth-module-without-resistor",
        "title": "Connecting Arduino to Bluetooth module without resistor",
        "body": "<p>I have a 5V operating Arduino device, to which I connected a Bluetooth module which works under 3.3V. Right now I connected the bluetooth module to 5V pin of Arduino through 10K and 22K resistors to limit the volt.</p>\n\n<p>But shall I connect the bluetooth module to 3.3V pin so that I don/t need resistors? </p>\n"
    }, {
        "tags": ["azure", "arduino", "azure-mobile-services", "ethernet", "iot"],
        "is_answered": false,
        "view_count": 331,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1451968929,
        "creation_date": 1451968929,
        "question_id": 34604275,
        "link": "https://stackoverflow.com/questions/34604275/http-get-request-using-arduino-and-azure-mobile-services",
        "title": "Http get request using Arduino and Azure mobile services",
        "body": "<p>I have hooked up my arduino with Azure mobile services and http post request is working fine where I am able to send data from sensor. But when using a http get request to access data from the tables, I am landing up with this data whereas I should be getting a json data in the Serial Window. </p>\n\n<blockquote>\n  <p>X-cache-Lookup: MISS from Webmaster:8080</p>\n</blockquote>\n\n<p>Here is the code that is on my Arduino. I have no idea where I am wrong.</p>\n\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;SPI.h&gt;\n#include &lt;Ethernet.h&gt;\n#define RESPONSE_JSON_DATA_LINENNO 10\n// Ethernet shield MAC address (sticker in the back)\nbyte mac[] = { 0xA4, 0x5D, 0x36, 0x6A, 0xE1, 0xE1 };\nint qq=0;\nconst char* server= \"avirup.azure-mobile.net\";\nconst char* table_name= \"iottest\";\nconst char* ams_key=\"rkIEUqVlFrgtmqNeMmaamgUQywwMjE42\";\nchar stat;\nEthernetClient client;\nchar fin='0';\nchar buffer[64];\nint charIndex=0;\nStaticJsonBuffer&lt;200&gt; jsonbuffer;\n\nvoid send_request()\n{\n  Serial.println(\"\\nconnecting...\");\n  if (client.connect(server, 80)) {\n    Serial.print(\"sending \");  \n\n    // GET URI\n    sprintf(buffer, \"GET /tables/%s HTTP/1.1\", table_name);\n    Serial.println(buffer);\n    client.println(buffer);\n\n    // Host header\n    sprintf(buffer, \"Host: %s\", server);\n    client.println(buffer);\n\n    // Azure Mobile Services application key\n    sprintf(buffer, \"X-ZUMO-APPLICATION: %s\", ams_key);\n    client.println(buffer);\n\n    // JSON content type\n    client.println(\"Content-Type: application/json\");\n\n    //POST body\n    sprintf(buffer, \"\", \"\");\n\n    //Content length\n    client.print(\"Content-Length: \");\n    client.println(strlen(buffer));\n    Serial.print(\"Content length: \");\n    Serial.println(strlen(buffer));\n    // End of headers\n    client.println();\n\n    // Request body\n    client.println(buffer);\n\n  } \n  else {\n    Serial.\n      println(\"connection failed\");\n  }\n}\n\n/*\n** Wait for response\n*/\n\nvoid wait_response()\n{\n  while (!client.available()) {\n    if (!client.connected()) {\n      return;\n\n  }\n}\n}\n/*\n** Read the response and dump to serial\n*/\n\n// Read the response and dump to serial\nvoid read_response()\n{\n\n  int jsonStringLength;\n  int jsonBufferCntr=0;\n  int numline=RESPONSE_JSON_DATA_LINENNO;\n  //Ignore the response except for the 10th line\n  while (client.available()) {\n    char c = client.read();\n\n    if (c == '\\n')\n    {\n      numline -=1;\n\n    }\n    else \n    {\n      if (numline == 0 )\n      {\n    //Capture the 10th line in the response\n    //To do: Could be more deterministic about this:\n    //       Expect certain content, checks and balances etc.\n        buffer[jsonBufferCntr++] = c; \n        buffer[jsonBufferCntr] = '\\0';  \n      }\n    }\n  }\n  Serial.println(\"Received:\");\n  Serial.println(buffer);\n\n  Serial.println(\"\");\n}\n/*\n** Close the connection\n*/\nvoid parse()\n{\n  //char json[] = \"{\\\"id\\\":\\\"34CCC60D-15D2-4B53-AB8E-FF3745FDC945\\\",\\\"control\\\":1}\";\n  JsonObject&amp; root = jsonbuffer.parseObject(buffer);\n  if(!root.success())\n  {\n    Serial.println(\"PARSING FAILED!!!\");\n    return;\n  }\n  //fin= root[\"control\"][0];\n  int f= root[\"control\"][0];\n  Serial.println(\"Decoded: \");\n  Serial.println(f);\n}\nvoid end_request()\n{\n  client.stop();\n}\n\n/*\n** Arduino Setup\n*/\n\nvoid setup()\n{\n  pinMode(13,OUTPUT);\n  digitalWrite(13,LOW);\n  Serial.begin(9600);\n  while (!Serial) {\n    ; // wait for serial port to connect.\n  }\n  if (Ethernet.begin(mac) == 0) {\n    Serial.println(\"ethernet failed\");\n    for (;;) ;\n  }\n  // give the Ethernet shield a second to initialize:\n  delay(1000);\n}\n\n/*\n** Arduino Loop\n*/\n\nvoid loop()\n{\n  send_request();\n  wait_response();\n  read_response();\n  end_request();\n  delay(1000);\n}\n</code></pre>\n"
    }, {
        "tags": ["c#", "win-universal-app", "raspberry-pi2", "iot", "windows-10-universal"],
        "is_answered": true,
        "view_count": 3343,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1451831789,
        "creation_date": 1451768956,
        "question_id": 34570755,
        "link": "https://stackoverflow.com/questions/34570755/how-to-display-a-clock-with-the-current-time-in-a-windows-core-iot-app",
        "title": "How to display a clock with the current time in a Windows Core IoT app?",
        "body": "<p>I am trying to create an Windows 10 IoT app running headless on a Raspberry Pi 2.\nEverything is set up correctly and I am able to debug my from Visual Studio using the Raspberry Pi as the remote machine for debugging.</p>\n\n<p>Now I want to add a clock on the app page but I can't figure out how to keep the displayed time updated. \nIn plain old C# I would use a BackgroudWorker or something similar to keep the displayed time current, but that type is not available in UWP.</p>\n\n<p>I have been looking into <a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/xaml/mt299100.aspx\" rel=\"nofollow\">\"Create and register a background task\"</a> on MSDN but that seems to be way to complex, just to be able to keep the display time up to date.</p>\n\n<p>So my question is: How can I - in the simplest posible way - create a clock display that is updated every time the time ticks?</p>\n"
    }, {
        "tags": ["c#", "azure", "sensors", "raspberry-pi2", "iot"],
        "is_answered": false,
        "view_count": 2145,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1451055608,
        "creation_date": 1449049385,
        "question_id": 34039420,
        "link": "https://stackoverflow.com/questions/34039420/rapberry-pi-2-win-10-core-c-dht22-or-ds18b20-data-reading",
        "title": "Rapberry Pi 2 + Win 10 Core + C# + DHT22 or DS18B20 - Data Reading",
        "body": "<p>Can anyone provide sample code or guide to read temperature sensor (DHT22 or DS18B20) data which is plugged on Rpi2. I would like to read data from c# library. </p>\n\n<p>I am able to work with Touch &amp; Motion sensor using c# script. I tried so many samples and my own code to read temperature sensor data but no luck for that.</p>\n\n<p>Hope someone has try it before!</p>\n"
    }, {
        "tags": ["node.js", "raspberry-pi", "raspberry-pi2", "iot", "node-red"],
        "is_answered": true,
        "view_count": 555,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1450533611,
        "creation_date": 1450528260,
        "question_id": 34370769,
        "link": "https://stackoverflow.com/questions/34370769/node-red-tail-and-http-response",
        "title": "Node-RED Tail and http response",
        "body": "<p>I'm trying to make a IoT application on my Raspberry Pi.\nI'm using Node-RED, it's quite easy but now I'm stuck</p>\n\n<p>I have an issue with Tail (storage).\nI receive the correct from the Tail function but I can't display it on my webpage.</p>\n\n<p>Please have a look at my printscreen, the debug shows the correct text. But the webpage isn't. I think I'm missing something, but I can't find what.</p>\n\n<p><a href=\"http://i.imgur.com/6kcckEv.png\" rel=\"nofollow\">http://i.imgur.com/6kcckEv.png</a></p>\n\n<p>As I said, the debug output is correct, but the webpage isn't.\nIf you need other info please ask. Still trying to find my way in Node Red. </p>\n\n<p>Sincerely,\nBrecht</p>\n"
    }, {
        "tags": ["amazon-web-services", "beagleboneblack", "iot"],
        "is_answered": true,
        "view_count": 45,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1450418651,
        "creation_date": 1450008692,
        "last_edit_date": 1450091380,
        "question_id": 34250939,
        "link": "https://stackoverflow.com/questions/34250939/can-i-run-the-grove-image-on-bbb",
        "title": "Can I run the Grove image on BBB?",
        "body": "<p>I have a <code>BBB revision A5</code> and would like to fast track <code>AWS-iot</code> testing.</p>\n\n<p>I am thinking of using the <code>BB Green</code> image as this might have some advantages.  Can I just download the <code>Grove image</code> and use it?</p>\n"
    }, {
        "tags": ["sensors", "ibm-cloud", "gateway", "iot", "zigbee"],
        "is_answered": true,
        "view_count": 1263,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1449512937,
        "creation_date": 1439066311,
        "question_id": 31898336,
        "link": "https://stackoverflow.com/questions/31898336/how-to-publish-sensor-data-to-bluemix-via-beaglebone-zigbee-gateway",
        "title": "How to publish sensor data to Bluemix via Beaglebone ZigBee Gateway",
        "body": "<p>I have three TI CC2650 SensorTags running ZigBee (not BLE) and they are connecting to a Beaglebone Black running the Zstack gateway.  I am looking to publish the sensor data to Bluemix but cannot find a recipe.</p>\n\n<p>I have seen examples of BLE sensors connecting through a BBB gateway and then to Bluemix like this one </p>\n\n<p><a href=\"https://github.com/ibm-messaging/iot-beaglebone\" rel=\"nofollow\">https://github.com/ibm-messaging/iot-beaglebone</a> </p>\n\n<p>but I cannot find anything for ZigBee based sensors.</p>\n\n<p>I need some help getting this going as I'm not sure I can start this from the ground up.</p>\n\n<p>Any guidance would be appreciated.  Is it possible to use this BLE example and make some edits to the json code?</p>\n\n<p>Thanks!\nJohn</p>\n"
    }, {
        "tags": ["webserver", "raspberry-pi", "iot", "webiopi"],
        "is_answered": false,
        "view_count": 1962,
        "favorite_count": 0,
        "score": 4,
        "last_activity_date": 1449284483,
        "creation_date": 1436128706,
        "question_id": 31234785,
        "link": "https://stackoverflow.com/questions/31234785/getting-the-raspberry-pi-compatible-with-the-ifttt-maker-channel",
        "title": "Getting the Raspberry Pi compatible with the IFTTT Maker channel",
        "body": "<p>I'm really wondering what would be an efficient way to control your gpios or run scripts with the new ifttt.com/maker channel. It's really easy to trigger something from the raspberry pi, you just curl the given event url and then you trigger your action. The other way around is a bit more complicated for me.\n<a href=\"http://i.stack.imgur.com/06fog.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/06fog.jpg</a></p>\n\n<p>So I tried set up a server with WebIOPI, which works great but not really for what I planned for. It basically connects with your weaved.com account. What do you think what would be an easy and stable efficient way to trigger my gpios with ifttt?</p>\n"
    }, {
        "tags": ["c#", "azure", "visual-c++", "raspberry-pi2", "iot"],
        "is_answered": true,
        "view_count": 1360,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1447940364,
        "creation_date": 1447858303,
        "last_edit_date": 1447858875,
        "question_id": 33783179,
        "link": "https://stackoverflow.com/questions/33783179/how-to-read-raspberry-pi-2-sensor-data-using-c",
        "title": "How to read Raspberry Pi 2 Sensor data using C#?",
        "body": "<p>I want to read Temperature sensor data (Dht222 &amp; DH18B20) from Rasperry Pi2 (Windows 10). Basically, i am programmer and i have configure everything over Azure (i.e. IoT Hub, Event Hub, Notification Hub, iOS notification App) but since i am not EC guy, i am not sure how easily i can grab sensor data.</p>\n\n<p>As reference, i am using this code: <a href=\"https://www.hackster.io/porrey/dht11-dht22-temperature-sensor-077790\" rel=\"nofollow\">https://www.hackster.io/porrey/dht11-dht22-temperature-sensor-077790</a></p>\n\n<p>Can anyone guide me something for this?</p>\n"
    }, {
        "tags": ["android", "iot", "brillo"],
        "is_answered": true,
        "view_count": 408,
        "favorite_count": 2,
        "closed_date": 1445328175,
        "score": 2,
        "last_activity_date": 1445324581,
        "creation_date": 1442527219,
        "last_edit_date": 1445321131,
        "question_id": 32640643,
        "link": "https://stackoverflow.com/questions/32640643/google-project-brillo",
        "title": "Google Project Brillo",
        "body": "<p>I have been working on a IoT project for a couple of months now and I was exploring on the Software stack that goes into a device that can connect with industrial sensors and hardwares. I came across Google's Project Brillo and I was looking for answers on what it actually is.</p>\n\n<p>Is it just the OS? What is the Weave protocol that Brillo is supposed to use? Any thoughts?</p>\n"
    }, {
        "tags": ["mobile", "bluetooth-lowenergy", "sensors", "iot", "zigbee"],
        "is_answered": true,
        "view_count": 774,
        "favorite_count": 0,
        "score": -1,
        "last_activity_date": 1445241001,
        "creation_date": 1445133790,
        "question_id": 33193557,
        "link": "https://stackoverflow.com/questions/33193557/send-ti-sensor-data-to-server",
        "title": "Send TI sensor data to server",
        "body": "<p>I have to develop an mobile app witch should be capable to receive data from TI Sensor Tag (CC2560) through the internet.\nIn other words, I have multi TI sensors wich should send data (temperature, pressure...) and my app should be capable to display these data in real time wherever the user is. I know that TI sensors can just use Bluetooth low energy, not wifi. So I'm looking for an intermediate technology capable to retrieve data from sensor and send it to a server (database), and then, my app would just retrieve these data from database. I've read about zigbee and waspmote but these seems not capable to do what I'm looking for, and waspmote is too expensive.\nPlease, I'm not good in electrical domain, I'm just in software engineering studies, so please just told me about thing that don't need a deep technical configuration.\nThanks for answers</p>\n"
    }, {
        "tags": ["python", "bluetooth", "iot"],
        "is_answered": true,
        "view_count": 741,
        "favorite_count": 0,
        "score": 2,
        "last_activity_date": 1444626066,
        "creation_date": 1440684386,
        "last_edit_date": 1495542575,
        "question_id": 32251588,
        "link": "https://stackoverflow.com/questions/32251588/how-to-disable-bluetooth-classic-in-bt-4-0-dongle",
        "title": "how to disable bluetooth classic in bt 4.0 dongle",
        "body": "<p>I have been working with BLE devices for IoT solutions. I have a issue with reconnecting the BLE node to my SBC after disconnecting the BLE node.</p>\n\n<p>case: I always have to scan using <code>$sudo hcitool lescan</code> and then run my bluepy python app to request data over BLE.\nAt this point of time I can disconnect the BLE node and reconnect it within say 15 seconds. but if I wait any longer, I again have to run lescan cmd and then run my bluepy app to connect and communicate.\nI just want to eliminate the scanning part everytime before i run blupy app. \nMay I know what exactly happens when I execute <code>lescan</code> cmd after which the bluepy app starts communicating with my ble node?</p>\n\n<p>I presumed that the lescan cmd will switch the dongle to ble mode and tried to keep ble mode as default by setting flags using<br>\n<code>sudo hcitool -i hci0 cmd 0x08 0x0008 1e 02 01 16 1a</code>  (changing 1a to 16 as per thread <a href=\"https://stackoverflow.com/questions/30966837/how-to-set-bluez-mode\">How to set bluez mode?</a>)</p>\n\n<p>All I want is to run the blupy app with the ble device mac ID and start communicating without the need to lescan.</p>\n\n<p>Thanks in advance </p>\n"
    }, {
        "tags": ["json", "azure", "iot"],
        "is_answered": true,
        "view_count": 242,
        "favorite_count": 0,
        "score": 1,
        "last_activity_date": 1443529856,
        "creation_date": 1443527542,
        "question_id": 32843290,
        "link": "https://stackoverflow.com/questions/32843290/implementing-iot-powerbi-table-schema",
        "title": "Implementing IoT PowerBI table schema",
        "body": "<p>I'm currently implementing an IoT solution that has a bunch of sensors sending information in JSON format through a gateway.</p>\n\n<p>I was reading about doing this on azure but couldn't quite figure out how the JSON scheme and the Event Hubs work to display the info on PowerBI? </p>\n\n<p>Can I create a schema and upload it to PowerBI then connect it to my device?</p>\n"
    }, {
        "tags": ["c#", "windows", "iot", "adc"],
        "is_answered": false,
        "view_count": 1160,
        "favorite_count": 1,
        "score": 3,
        "last_activity_date": 1443298200,
        "creation_date": 1443298200,
        "question_id": 32801522,
        "link": "https://stackoverflow.com/questions/32801522/raspberry-pi-2-with-windows-10-iot-reading-tlc2578-adc",
        "title": "Raspberry Pi 2 with Windows 10 IOT reading TLC2578 ADC",
        "body": "<p>I've been trying to read data from a TI <a href=\"http://www.ti.com/lit/ds/symlink/tlc2578.pdf\" rel=\"nofollow\">TLC2578</a> ADC. I am using it in default mode. I modified the Microsoft IOT Pot Sensor sample code. I am able to read data but it seems like maybe the timing is off. I have the input wired through a 10k pot with a max of 3.3v. </p>\n\n<p>At 0v I'm getting 1.8v reading. \nAt 1.2v I'm reading 3.9v. \nThen at 1.4v the ADC reads 0v and starts climbing back up again as voltage is increased. </p>\n\n<p>I'm new to interfacing ADC's so I'm prob doing something wrong. Any help is appreciated. Here is the code.</p>\n\n<pre><code>namespace PotentiometerSensor{\n\npublic sealed partial class MainPage : Page{\n\n    enum AdcDevice { NONE, MCP3002, MCP3208, TLC2578 };\n\n    /* Important! Change this to either AdcDevice.MCP3002 or AdcDevice.MCP3208 depending on which ADC you chose     */\n    private AdcDevice ADC_DEVICE = AdcDevice.TLC2578;\n\n  //  private const int LED_PIN = 4;\n   // private GpioPin ledPin;\n\n    private const string SPI_CONTROLLER_NAME = \"SPI0\";  /* Friendly name for Raspberry Pi 2 SPI controller          */\n    private const Int32 SPI_CHIP_SELECT_LINE = 0;       /* Line 0 maps to physical pin number 24 on the Rpi2        */\n    private SpiDevice SpiADC;\n\n  //  private const byte MCP3002_CONFIG = 0x68; /* 01101000 channel configuration data for the MCP3002 */\n  //  private const byte MCP3208_CONFIG = 0x06; /* 00000110 channel configuration data for the MCP3208 */\n\n    private Timer periodicTimer;\n    private int adcValue;\n\n    public MainPage()\n    {\n        this.InitializeComponent();\n\n        /* Register for the unloaded event so we can clean up upon exit */\n        Unloaded += MainPage_Unloaded;\n\n        /* Initialize GPIO and SPI */\n        InitAll();\n    }\n\n    /* Initialize GPIO and SPI */\n    private async void InitAll()\n    {\n        if (ADC_DEVICE == AdcDevice.NONE)\n        {\n            StatusText.Text = \"Please change the ADC_DEVICE variable to either MCP3002 or MCP3208\";\n            return;\n        }\n\n        try\n        {\n            InitGpio();         /* Initialize GPIO to toggle the LED                          */\n            await InitSPI();    /* Initialize the SPI bus for communicating with the ADC      */\n\n        }\n        catch (Exception ex)\n        {\n            StatusText.Text = ex.Message;\n            return;\n        }\n\n        /* Now that everything is initialized, create a timer so we read data every 500mS */\n        periodicTimer = new Timer(this.Timer_Tick, null, 0, 500);\n\n        StatusText.Text = \"Status: Running\";\n    }\n\n    private async Task InitSPI()\n    {\n        try\n        {\n            var settings = new SpiConnectionSettings(SPI_CHIP_SELECT_LINE);\n            settings.ClockFrequency = 15000000;   /* 15MHz clock rate       chip rated for 25MHz                                 */\n            settings.Mode = SpiMode.Mode0;      /* The ADC expects idle-low clock polarity so we use Mode0  */\n\n            string spiAqs = SpiDevice.GetDeviceSelector(SPI_CONTROLLER_NAME);\n            var deviceInfo = await DeviceInformation.FindAllAsync(spiAqs);\n            SpiADC = await SpiDevice.FromIdAsync(deviceInfo[0].Id, settings);\n\n\n\n        }\n\n        /* If initialization fails, display the exception and stop running */\n        catch (Exception ex)\n        {\n            throw new Exception(\"SPI Initialization Failed\", ex);\n        }\n    }\n\n    private void InitGpio()\n    {\n        var gpio = GpioController.GetDefault();\n\n        /* Show an error if there is no GPIO controller */\n        if (gpio == null)\n        {\n            throw new Exception(\"There is no GPIO controller on this device\");\n        }\n\n\n    }\n\n\n    /* Read from the ADC, update the UI, and toggle the LED */\n    private void Timer_Tick(object state)\n    {\n        ReadADC();\n      //  LightLED();\n    }\n\n    public void ReadADC()\n    {\n        byte[] readBuffer = new byte[12]; /* Buffer to hold read data*/\n\n        byte[] writeBuffer = new byte[12] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };\n\n        /* Setup the appropriate ADC configuration byte */\n        // switch (ADC_DEVICE)\n        //  {\n        //     case AdcDevice.MCP3002:\n        //        writeBuffer[0] = MCP3002_CONFIG;\n        //         break;\n        //     case AdcDevice.MCP3208:\n        //         writeBuffer[0] = MCP3208_CONFIG;\n        //         break;\n        //  }\n\n        SpiADC.TransferFullDuplex(writeBuffer, readBuffer); /* Read data from the ADC       */           \n        adcValue = convertToInt(readBuffer);                /* Convert the returned bytes into an integer value */\n\n\n        /* UI updates must be invoked on the UI thread */\n        var task = this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =&gt;\n        {\n            double conversionResult;\n            textPlaceHolder.Text = adcValue.ToString();         /* Display the value on screen  */\n            conversionResult = Convert.ToDouble(adcValue);\n            conversionResult = (adcValue / 4095.00) * 4.00;\n            BusInfoBox.Text = conversionResult.ToString();\n        });\n    }\n\n    /* Convert the raw ADC bytes to an integer */\n    public int convertToInt(byte[] data)\n    {\n        int result = 0;   \n        result = data[0] &amp; 0x0F;\n        result &lt;&lt;= 8;\n        result += data[1];\n        return result;\n    }\n\n    private void MainPage_Unloaded(object sender, object args)\n    {\n        /* It's good practice to clean up after we're done */\n        if(SpiADC != null)\n            {\n             SpiADC.Dispose();\n            }\n\n    }\n\n}\n</code></pre>\n"
    }, {
        "tags": ["sensors", "iot"],
        "is_answered": false,
        "view_count": 73,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1438868770,
        "creation_date": 1438868770,
        "question_id": 31857503,
        "link": "https://stackoverflow.com/questions/31857503/what-is-the-operating-mode-of-the-enocean-occupancy-sensor",
        "title": "what is the Operating Mode of the EnOcean Occupancy Sensor",
        "body": "<p>I have the following Occupancy sensor: [1]</p>\n\n<p>I am confused about its operating behaviour:</p>\n\n<p>1) I read it its document [2]</p>\n\n<p>that it behaves like the following:</p>\n\n<p>*Occupancy Detection and Transmission: If a sensor is already in the occupied mode and continues to detect occupancy it will transmit an occupied telegram every two minutes until occupancy is not detected.</p>\n\n<p>*Unoccupied Transmission: If after sending an occupied telegram a sensor does not detect occupancy for 10 minutes, an unoccupied telegram will be sent.</p>\n\n<p>2) However, in the document of EEP specification [3]</p>\n\n<p>under its EEP profil A5.07.01\na note telling that \"The transmission of \u201cPIR off\u201d telegrams is optional\"\nwhich mean as I understood that the transmission of the unoccupied message is optional.</p>\n\n<p>3) And in my application, I don't receive the \u201cPIR off\u201d (unoccupied message) as specified in the EEP specification.</p>\n\n<p>-> I don't know if it is a normal behaviour what I get in my application or if there is some configuration that enable the behaviour listed above (in point 1).</p>\n\n<p>Thanks in advance for your help!</p>\n\n<p>[1] <a href=\"https://www.enocean.com/en/enocean_modules/ceiling-mounted-occupancy-sensor-eosc-oem/\" rel=\"nofollow\">https://www.enocean.com/en/enocean_modules/ceiling-mounted-occupancy-sensor-eosc-oem/</a></p>\n\n<p>[2] <a href=\"https://www.enocean.com/en/enocean_modules/EnOcean_Occupancy_Sensor_Operational_Description_v1.1_05.pdf\" rel=\"nofollow\">https://www.enocean.com/en/enocean_modules/EnOcean_Occupancy_Sensor_Operational_Description_v1.1_05.pdf</a></p>\n\n<p>[3] <a href=\"http://domotique-info.fr/wp-content/uploads/2014/11/domotique-info-enocean_equipment_profiles_eep_v2.61_public.pdf\" rel=\"nofollow\">http://domotique-info.fr/wp-content/uploads/2014/11/domotique-info-enocean_equipment_profiles_eep_v2.61_public.pdf</a></p>\n"
    }, {
        "tags": ["iot", "intel-edison"],
        "is_answered": false,
        "view_count": 718,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1438705603,
        "creation_date": 1438280780,
        "question_id": 31731352,
        "link": "https://stackoverflow.com/questions/31731352/timer-interrupt-in-intel-edison",
        "title": "Timer Interrupt in intel edison",
        "body": "<p>I have been trying to use Intel Edison with a Pulse sensor (<a href=\"http://pulsesensor.com/products/pulse-sensor-amped\" rel=\"nofollow\">http://pulsesensor.com/products/pulse-sensor-amped</a>). \nI have seen examples of the same with Arduino Uno. \nIt uses a timer function for Arduino using Atmega328 and 16MHz clock. The specs for the edison are different. So what will be the changes for my intel edison. Kindly guide. </p>\n\n<p>The code for Arduino Uno that deals with the interrupt part is: </p>\n\n<pre><code>void interruptSetup(){ \n  TCCR2A = 0x02;  \n  TCCR2B = 0x06; \n  OCR2A = 0x7C;  \n  TIMSK2 = 0x02;  \n  sei();\n}\n</code></pre>\n\n<p>This gives an interrupt in every 2ms. </p>\n"
    }, {
        "tags": ["java", "raspberry-pi", "osgi", "osgi-bundle", "iot"],
        "is_answered": false,
        "view_count": 430,
        "favorite_count": 3,
        "score": 5,
        "last_activity_date": 1434543247,
        "creation_date": 1434542222,
        "last_edit_date": 1434543247,
        "question_id": 30890894,
        "link": "https://stackoverflow.com/questions/30890894/enocean-java-library",
        "title": "EnOcean Java Library",
        "body": "<p>I am looking for an EnOcean JAVA library that supports the EEP:D2-01-08 or that is well documented for adding a new EEP profil and that also works on both devices the USB 300 and EnOcean PI.</p>\n\n<p>I found:\n<a href=\"https://github.com/aleon-GmbH/aleoncean\" rel=\"noreferrer\">https://github.com/aleon-GmbH/aleoncean</a>\nbut unfortunately it does not support the EnOcean Pi as mentionned in its documentation.</p>\n\n<p>and the:\n<a href=\"https://github.com/dog-gateway/enj-library\" rel=\"noreferrer\">https://github.com/dog-gateway/enj-library</a>\nthat I did not yet tested, any one have tested? or anyone have worked with another library?</p>\n\n<p>Thanks a lot for your help!</p>\n"
    }, {
        "tags": ["arduino-uno", "iot"],
        "is_answered": true,
        "view_count": 2418,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1431189232,
        "creation_date": 1430488991,
        "last_edit_date": 1431189232,
        "question_id": 29988327,
        "link": "https://stackoverflow.com/questions/29988327/how-to-save-and-recieve-string-in-thingspeak-com",
        "title": "How to save and recieve String in thingspeak.com?",
        "body": "<p>I know how to save data like(<code>1,2,2.3,65.2</code>).</p>\n\n<p>I was wondering if its possible to save and retrieve data like(<code>'AP09BN7886'</code>)(<code>String</code>) in thingspeak.com?<br>\nI am sending data to thingspeak.com via esp8266 connected to my arduino UNO using AT commands.</p>\n\n<p>Can I also retrieve data from thingspeak.com using esp8266 in Arduino UNO?</p>\n"
    }, {
        "tags": ["arduino", "wifi", "led", "xively", "iot"],
        "is_answered": false,
        "view_count": 111,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1427459936,
        "creation_date": 1427459936,
        "question_id": 29300889,
        "link": "https://stackoverflow.com/questions/29300889/cant-commute-a-relay-with-arduino-wifi-shield-xively",
        "title": "Can&#39;t commute a relay with Arduino wifi shield + Xively",
        "body": "<p>I\u2019m trying to turn on and off an LED light bulb connected to a Tinterkit Relay. </p>\n\n<p>I\u2019m using an Arduino UNO r3 connected to internet thanks to an official Arduino Wifi shield.</p>\n\n<p>I\u2019ve done a simple website with two buttons to send a 1 (on) or a 0 (off) to my Xively account.</p>\n\n<p>I\u2019ve written a code to detect the last posted channel value. The code is working fine and I\u2019m able to detect a 1 or a 0 every 3 seconds approximately. The problem is that the relay doesn\u2019t commute.</p>\n\n<p>Please please, I would appreciate a lot your help to solve this problem.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;HttpClient.h&gt;\n#include &lt;Xively.h&gt;\n#include &lt;TinkerKit.h&gt;\n\nchar ssid[] = \"XXXXXX\"; \nchar pass[] = \"XXXXXX\";   \n\nint state;\nint status = WL_IDLE_STATUS;\n\nchar myIntStream[]=\"LED\";\nchar xivelyKey[] = \"XXXXXX\";\n\n#define FEED_ID XXXXXX\n\nTKMosFet relay(O0); \n\nXivelyDatastream datastreams[] = {\n  XivelyDatastream(myIntStream, strlen(myIntStream), DATASTREAM_INT),\n};\n\nXivelyFeed feed(FEED_ID,datastreams,1);\n\nWiFiClient client;\nXivelyClient xivelyclient(client);\n\nvoid printWifiStatus() {\n  Serial.print(\"SSID: \");\n  Serial.println(WiFi.SSID());\n\n  IPAddress ip = WiFi.localIP();\n  Serial.print(\"IP Address: \");\n  Serial.println(ip);\n\n  long rssi = WiFi.RSSI();\n  Serial.print(\"signal strength (RSSI):\");\n  Serial.print(rssi);\n  Serial.println(\" dBm\");\n}\n\nvoid setup() {\n  Serial.begin(9600);\n  Serial.println(\"LED light bulb\");\n  Serial.println();\n\n  while ( status != WL_CONNECTED) { \n    Serial.println(\"Connecting to internet ...\");    \n    status = WiFi.begin(ssid, pass);    \n    Serial.println(\"\");\n    delay(5000);\n  } \n\n  Serial.println(\"Connected to wifi\");\n  printWifiStatus();\n}\n\nvoid loop() {\n  Serial.println();\n  Serial.print(\"Datastream is:\");\n  Serial.println(datastreams[0]);\n\n  Serial.print(\"LED value = \");\n  state = datastreams[0].getInt();\n  Serial.print(state);\n\n  if(state == 0){    \n    relay.off();  \n    Serial.println(\" =&gt; Light is on.\");    \n  }\n  else if(state == 1){    \n    relay.on();  \n    Serial.println(\" =&gt; Light is off.\");      \n  }\n  xivelyclient.get(feed, xivelyKey);  \n}\n</code></pre>\n"
    }, {
        "tags": ["ubuntu", "serial-port", "arduino", "wifi", "iot"],
        "is_answered": true,
        "view_count": 4507,
        "favorite_count": 2,
        "score": 0,
        "last_activity_date": 1427205730,
        "creation_date": 1421039375,
        "question_id": 27895654,
        "link": "https://stackoverflow.com/questions/27895654/esp8266-terminal-connection-not-working-but-python-script",
        "title": "ESP8266 - Terminal Connection not working but Python script",
        "body": "<p>I have connected an ESP8266 Wifi to serial module to a serial to USB connector. </p>\n\n<p>I am able to connect to the ESP8266 with following Python script and settings:</p>\n\n<pre><code>import serial\n\ndef echoCommand(cmd,expected_return,halt_on_fail,tOut = timeoutPeriod) :\n    ser.write(cmd + '\\r\\n')\n\n    if(echo_local_command):\n        print('Sent --&gt; '+cmd)\n\n    if not echoFind(expected_return,tOut) and (halt_on_fail):\n        print(cmd+\" failed\")\n        sys.exit()\n\ndef echoFind(expected_return,tOut):\n    timeoutTime = datetime.datetime.now() + datetime.timedelta(0,tOut)\n    while datetime.datetime.now() &lt; timeoutTime:\n        while ser.inWaiting():\n            ret = ser.readline().rstrip()\n            print ret\n            time.sleep(0.1)\n            if expected_return in ret:\n                return True\n    return False \n\nser = serial.Serial('/dev/ttyUSB0', 9600, timeout=5)\n\nechoCommand('AT+RST', 'ready', True)\n</code></pre>\n\n<p>The above works like a charm but for some reason I can not do the same in a terminal like minicom , GTKTerm , Putty.(Running Ubuntu. Any suggested terminals that will display CR and LF?)</p>\n\n<p>I used the same baud rate and settings but with no luck. I have tried to switch hardware and software flow control and have checked CR and LF to be added.</p>\n\n<p>Any ideas why this would not work?</p>\n\n<p>I have noticed that if I have minicom open and then run the Python script that the output from the ESP8266 gets displayed in minicom indicating and sending issue.(Script fails cause minicom intercepts the incoming messages)</p>\n"
    }, {
        "tags": ["java", "i2c", "spi", "memory-mapping", "iot"],
        "is_answered": false,
        "view_count": 459,
        "favorite_count": 1,
        "score": 1,
        "last_activity_date": 1426763226,
        "creation_date": 1426763226,
        "question_id": 29142963,
        "link": "https://stackoverflow.com/questions/29142963/access-i2c-spi-uart-bus-directly-through-dev-mem-in-java",
        "title": "Access I2C/SPI/UART bus directly through /dev/mem in Java",
        "body": "<p>is it possible to control devices connected via I2C/SPI/UART bus directly through /dev/mem so that I could just map the memory into MappedByteBuffer talk to I2C/SPI/UART that way? \nCurrently, we are using C library that uses kernel calls like <code>ioctl</code> through JNI. However I want to get rid of the JNI and have it all in pure Java, thus I want to avoid using JNI/JNA.</p>\n"
    }, {
        "tags": ["iot", "libmosquitto"],
        "is_answered": false,
        "view_count": 152,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1426696721,
        "creation_date": 1426659297,
        "last_edit_date": 1426696721,
        "question_id": 29115306,
        "link": "https://stackoverflow.com/questions/29115306/libmosquitto-and-bcm2835-library-for-implementing-iot",
        "title": "libmosquitto and bcm2835 library for implementing IOT",
        "body": "<p>I am working with an IOT based project on raspberry Pi. My project consists of temperature/humidity sensor with zigbee transmitter module(Adam 2017) and a raspbee zigbee receiver, used for reception. The raspbee is interfaced serially with Pi and Pi is connected to a mosquitto server which is running on another PC. So this UART value can be accessed by web UI remotely and based on the temperature and humidity values I want to automatically control a relay. As I had more experience in microcontroller C programming, I select the libmosquitto C client library, mosquitto server and bcm2835 library for this project. I had successfully worked with bcm2835 library in Pi using Geany compiler. But the problem is how I can combine this libmosquitto and bcm2835 library. I had tried by adding the header files and also giving the paths but can't succeed. My aim is to connect the Pi and transfer the UART data to a mosquitto server running on another PC which can be then accessed by web UI. I can't find\u00a0 any similar projects using libmosquitto and bcm library available on internet?. Can somebody suggest solution for this?</p>\n\n<p>Regards,</p>\n\n<p>Nithin</p>\n"
    }, {
        "tags": ["contiki", "iot"],
        "is_answered": false,
        "view_count": 349,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1424333840,
        "creation_date": 1424333840,
        "question_id": 28601424,
        "link": "https://stackoverflow.com/questions/28601424/hands-on-cooja-contiki",
        "title": "Hands on cooja contiki",
        "body": "<p>Hi friends I am working with one IOT application with the help of a Contiki - cooja simulator. The thing here am I wanting to emulate the values of sensor nodes, How can I emulate temperature and humidity sensor values using Cooja simulator, Is it possible? Give me some good solution friends.</p>\n"
    }, {
        "tags": ["ios", "mobile", "server", "ibeacon", "iot"],
        "is_answered": false,
        "view_count": 83,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1421879271,
        "creation_date": 1421875664,
        "question_id": 28077164,
        "link": "https://stackoverflow.com/questions/28077164/beacons-technologies-and-mobile-application",
        "title": "Beacons technologies and mobile application",
        "body": "<p>I was thinking about doing an iOS application interacting with the beacons ( Estimote beacon for now ).</p>\n\n<p>But quickly some questions are appeared. </p>\n\n<p>I simply began with this idea : I set up on the classroom a beacon. I want that the teacher can add from an application a pdf to download for exemple. So that the students will download the files automatically when entering the classroom with the app.</p>\n\n<p>So that was something simple until I think about how to do it.</p>\n\n<p>If I understood, it's necessary <strong>to have a server</strong>. Send it the files with the appropriated beacon identifier. And to download thoses ( being a student ), doing an download http request ? How can I do, in case I'm a student, to download the beacon attached file and only its files. SO like that I'll have an another beacon to download something else.. </p>\n\n<p>Do you have some clarifications ?</p>\n"
    }, {
        "tags": ["embedded", "contiki", "iot"],
        "is_answered": true,
        "view_count": 1762,
        "favorite_count": 1,
        "score": 2,
        "last_activity_date": 1413375346,
        "creation_date": 1412339941,
        "last_edit_date": 1413375346,
        "question_id": 26179093,
        "link": "https://stackoverflow.com/questions/26179093/contiki-udp-packet-transmission-duration-with-cc2538",
        "title": "Contiki UDP packet transmission duration with CC2538",
        "body": "<p>Could someone explain me what is going on within the Contiki-OS when it transmits an UDP packet?</p>\n\n<p>Here is the current consumption of my device in details running with the CC2538 chip:</p>\n\n<p><img src=\"https://i.stack.imgur.com/t1eAh.png\" alt=\"CC2538 Current consumption\"></p>\n\n<p>My question is: why it takes so long to transmit an UDP broadcast packet (about 250ms) knowing that theoretically at 250kbps the packet of 408 bits length should be transmitted in approximately 2ms? I'd understand if the transmission last lets say ten milliseconds but here the difference is huge. </p>\n\n<p>I use the example in  <code>contiki/examples/ipv6/simple-udp-rpl/broadcast-example.c</code></p>\n\n<p>Does anyone have an idea? </p>\n"
    }, {
        "tags": ["intel-galileo", "windowsondevices", "iot"],
        "is_answered": true,
        "view_count": 869,
        "favorite_count": 0,
        "score": 0,
        "last_activity_date": 1411827652,
        "creation_date": 1408736266,
        "question_id": 25454403,
        "link": "https://stackoverflow.com/questions/25454403/displaying-intel-galileo-ip-address-on-a-16x2-lcd",
        "title": "Displaying Intel Galileo IP address on a 16x2 LCD",
        "body": "<p>\nI'm running the 16x2 LCD sample from Windows Developer Program for IoT (<a href=\"https://ms-iot.github.io/content/16x2LCD.htm\" rel=\"nofollow\">https://ms-iot.github.io/content/16x2LCD.htm</a>). What's the best way do get and show the Galileo IP address on the display instead of \"Hello!\" message? Regards.</p>\n\n<p>Code</p>\n\n<p>stdafx.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\n#include \"targetver.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include \"arduino.h\"\n#include \"LiquidCrystal.h\" // we need this library for the LCD commands\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"stdafx.h\"\n\nint RS = 4;\nint ENABLE = 5;\nint D0 = 6;\nint D1 = 7;\nint D2 = 8;\nint D3 = 9;\nLiquidCrystal lcd = LiquidCrystal(RS, ENABLE, D0, D1, D2, D3); // define our LCD and which pins to use\n\nint _tmain(int argc, _TCHAR* argv [])\n{\n    return RunArduinoSketch();\n}\n\nvoid setup()\n{\n    Log(L\"LCD Sample\\n\");\n\n    lcd.begin(16, 2); // need to specify how many columns and rows are in the LCD unit (it calls clear at the end of begin)\n\n    lcd.setCursor(0, 0);\n    lcd.print(\"Hello!\");\n\n    lcd.setCursor(0, 1);\n    lcd.print(3.14159, 4); // prints a double, the 2nd number is the digits to print after the .\n}\n\nvoid loop()\n{\n}\n</code></pre>\n"
    }]
}